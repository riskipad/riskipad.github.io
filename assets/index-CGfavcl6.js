function rU(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function yS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function sU(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var W2={exports:{}},nv={},j2={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh=Symbol.for("react.element"),oU=Symbol.for("react.portal"),aU=Symbol.for("react.fragment"),lU=Symbol.for("react.strict_mode"),cU=Symbol.for("react.profiler"),uU=Symbol.for("react.provider"),fU=Symbol.for("react.context"),dU=Symbol.for("react.forward_ref"),hU=Symbol.for("react.suspense"),pU=Symbol.for("react.memo"),mU=Symbol.for("react.lazy"),LC=Symbol.iterator;function gU(n){return n===null||typeof n!="object"?null:(n=LC&&n[LC]||n["@@iterator"],typeof n=="function"?n:null)}var X2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J2=Object.assign,K2={};function Ou(n,e,t){this.props=n,this.context=e,this.refs=K2,this.updater=t||X2}Ou.prototype.isReactComponent={};Ou.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ou.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Y2(){}Y2.prototype=Ou.prototype;function xS(n,e,t){this.props=n,this.context=e,this.refs=K2,this.updater=t||X2}var _S=xS.prototype=new Y2;_S.constructor=xS;J2(_S,Ou.prototype);_S.isPureReactComponent=!0;var DC=Array.isArray,$2=Object.prototype.hasOwnProperty,AS={current:null},Q2={key:!0,ref:!0,__self:!0,__source:!0};function q2(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$2.call(e,i)&&!Q2.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:fh,type:n,key:s,ref:o,props:r,_owner:AS.current}}function vU(n,e){return{$$typeof:fh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function SS(n){return typeof n=="object"&&n!==null&&n.$$typeof===fh}function yU(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var FC=/\/+/g;function Cx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?yU(""+n.key):e.toString(36)}function ag(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case fh:case oU:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Cx(o,0):i,DC(r)?(t="",n!=null&&(t=n.replace(FC,"$&/")+"/"),ag(r,e,t,"",function(c){return c})):r!=null&&(SS(r)&&(r=vU(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(FC,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",DC(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Cx(s,a);o+=ag(s,e,t,l,r)}else if(l=gU(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Cx(s,a++),o+=ag(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zp(n,e,t){if(n==null)return n;var i=[],r=0;return ag(n,i,"","",function(s){return e.call(t,s,r++)}),i}function xU(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Di={current:null},lg={transition:null},_U={ReactCurrentDispatcher:Di,ReactCurrentBatchConfig:lg,ReactCurrentOwner:AS};function Z2(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:zp,forEach:function(n,e,t){zp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return zp(n,function(){e++}),e},toArray:function(n){return zp(n,function(e){return e})||[]},only:function(n){if(!SS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Pt.Component=Ou;Pt.Fragment=aU;Pt.Profiler=cU;Pt.PureComponent=xS;Pt.StrictMode=lU;Pt.Suspense=hU;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_U;Pt.act=Z2;Pt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=J2({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=AS.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)$2.call(e,l)&&!Q2.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:fh,type:n.type,key:r,ref:s,props:i,_owner:o}};Pt.createContext=function(n){return n={$$typeof:fU,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:uU,_context:n},n.Consumer=n};Pt.createElement=q2;Pt.createFactory=function(n){var e=q2.bind(null,n);return e.type=n,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(n){return{$$typeof:dU,render:n}};Pt.isValidElement=SS;Pt.lazy=function(n){return{$$typeof:mU,_payload:{_status:-1,_result:n},_init:xU}};Pt.memo=function(n,e){return{$$typeof:pU,type:n,compare:e===void 0?null:e}};Pt.startTransition=function(n){var e=lg.transition;lg.transition={};try{n()}finally{lg.transition=e}};Pt.unstable_act=Z2;Pt.useCallback=function(n,e){return Di.current.useCallback(n,e)};Pt.useContext=function(n){return Di.current.useContext(n)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(n){return Di.current.useDeferredValue(n)};Pt.useEffect=function(n,e){return Di.current.useEffect(n,e)};Pt.useId=function(){return Di.current.useId()};Pt.useImperativeHandle=function(n,e,t){return Di.current.useImperativeHandle(n,e,t)};Pt.useInsertionEffect=function(n,e){return Di.current.useInsertionEffect(n,e)};Pt.useLayoutEffect=function(n,e){return Di.current.useLayoutEffect(n,e)};Pt.useMemo=function(n,e){return Di.current.useMemo(n,e)};Pt.useReducer=function(n,e,t){return Di.current.useReducer(n,e,t)};Pt.useRef=function(n){return Di.current.useRef(n)};Pt.useState=function(n){return Di.current.useState(n)};Pt.useSyncExternalStore=function(n,e,t){return Di.current.useSyncExternalStore(n,e,t)};Pt.useTransition=function(){return Di.current.useTransition()};Pt.version="18.3.1";j2.exports=Pt;var D=j2.exports;const Ii=yS(D),Rg=rU({__proto__:null,default:Ii},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AU=D,SU=Symbol.for("react.element"),MU=Symbol.for("react.fragment"),wU=Object.prototype.hasOwnProperty,EU=AU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CU={key:!0,ref:!0,__self:!0,__source:!0};function eI(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)wU.call(e,i)&&!CU.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:SU,type:n,key:s,ref:o,props:r,_owner:EU.current}}nv.Fragment=MU;nv.jsx=eI;nv.jsxs=eI;W2.exports=nv;var ie=W2.exports,tI={exports:{}},fr={},nI={exports:{}},iI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,G){var V=L.length;L.push(G);e:for(;0<V;){var te=V-1>>>1,ve=L[te];if(0<r(ve,G))L[te]=G,L[V]=ve,V=te;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var G=L[0],V=L.pop();if(V!==G){L[0]=V;e:for(var te=0,ve=L.length,Le=ve>>>1;te<Le;){var oe=2*(te+1)-1,ye=L[oe],Ee=oe+1,Se=L[Ee];if(0>r(ye,V))Ee<ve&&0>r(Se,ye)?(L[te]=Se,L[Ee]=V,te=Ee):(L[te]=ye,L[oe]=V,te=oe);else if(Ee<ve&&0>r(Se,V))L[te]=Se,L[Ee]=V,te=Ee;else break e}}return G}function r(L,G){var V=L.sortIndex-G.sortIndex;return V!==0?V:L.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,h=null,p=3,m=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var G=t(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=L)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function w(L){if(A=!1,S(L),!v)if(t(l)!==null)v=!0,$(R);else{var G=t(c);G!==null&&K(w,G.startTime-L)}}function R(L,G){v=!1,A&&(A=!1,g(B),B=-1),m=!0;var V=p;try{for(S(G),h=t(l);h!==null&&(!(h.expirationTime>G)||L&&!P());){var te=h.callback;if(typeof te=="function"){h.callback=null,p=h.priorityLevel;var ve=te(h.expirationTime<=G);G=n.unstable_now(),typeof ve=="function"?h.callback=ve:h===t(l)&&i(l),S(G)}else i(l);h=t(l)}if(h!==null)var Le=!0;else{var oe=t(c);oe!==null&&K(w,oe.startTime-G),Le=!1}return Le}finally{h=null,p=V,m=!1}}var b=!1,I=null,B=-1,z=5,C=-1;function P(){return!(n.unstable_now()-C<z)}function j(){if(I!==null){var L=n.unstable_now();C=L;var G=!0;try{G=I(!0,L)}finally{G?X():(b=!1,I=null)}}else b=!1}var X;if(typeof _=="function")X=function(){_(j)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,le=ee.port2;ee.port1.onmessage=j,X=function(){le.postMessage(null)}}else X=function(){x(j,0)};function $(L){I=L,b||(b=!0,X())}function K(L,G){B=x(function(){L(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,$(R))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var V=p;p=G;try{return L()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=p;p=L;try{return G()}finally{p=V}},n.unstable_scheduleCallback=function(L,G,V){var te=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,L){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=V+ve,L={id:f++,callback:G,priorityLevel:L,startTime:V,expirationTime:ve,sortIndex:-1},V>te?(L.sortIndex=V,e(c,L),t(l)===null&&L===t(c)&&(A?(g(B),B=-1):A=!0,K(w,V-te))):(L.sortIndex=ve,e(l,L),v||m||(v=!0,$(R))),L},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(L){var G=p;return function(){var V=p;p=G;try{return L.apply(this,arguments)}finally{p=V}}}})(iI);nI.exports=iI;var TU=nI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bU=D,ar=TU;function we(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rI=new Set,Ed={};function Kl(n,e){yu(n,e),yu(n+"Capture",e)}function yu(n,e){for(Ed[n]=e,n=0;n<e.length;n++)rI.add(e[n])}var po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),TA=Object.prototype.hasOwnProperty,RU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NC={},OC={};function PU(n){return TA.call(OC,n)?!0:TA.call(NC,n)?!1:RU.test(n)?OC[n]=!0:(NC[n]=!0,!1)}function IU(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function BU(n,e,t,i){if(e===null||typeof e>"u"||IU(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ti[n]=new Fi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ti[e]=new Fi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ti[n]=new Fi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ti[n]=new Fi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ti[n]=new Fi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ti[n]=new Fi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ti[n]=new Fi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ti[n]=new Fi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ti[n]=new Fi(n,5,!1,n.toLowerCase(),null,!1,!1)});var MS=/[\-:]([a-z])/g;function wS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(MS,wS);ti[e]=new Fi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(MS,wS);ti[e]=new Fi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(MS,wS);ti[e]=new Fi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ti[n]=new Fi(n,1,!1,n.toLowerCase(),null,!1,!1)});ti.xlinkHref=new Fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ti[n]=new Fi(n,1,!1,n.toLowerCase(),null,!0,!0)});function ES(n,e,t,i){var r=ti.hasOwnProperty(e)?ti[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BU(e,t,r,i)&&(t=null),i||r===null?PU(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var So=bU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gp=Symbol.for("react.element"),Hc=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),CS=Symbol.for("react.strict_mode"),bA=Symbol.for("react.profiler"),sI=Symbol.for("react.provider"),oI=Symbol.for("react.context"),TS=Symbol.for("react.forward_ref"),RA=Symbol.for("react.suspense"),PA=Symbol.for("react.suspense_list"),bS=Symbol.for("react.memo"),Ko=Symbol.for("react.lazy"),aI=Symbol.for("react.offscreen"),UC=Symbol.iterator;function xf(n){return n===null||typeof n!="object"?null:(n=UC&&n[UC]||n["@@iterator"],typeof n=="function"?n:null)}var pn=Object.assign,Tx;function Xf(n){if(Tx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Tx=e&&e[1]||""}return`
`+Tx+n}var bx=!1;function Rx(n,e){if(!n||bx)return"";bx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{bx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Xf(n):""}function LU(n){switch(n.tag){case 5:return Xf(n.type);case 16:return Xf("Lazy");case 13:return Xf("Suspense");case 19:return Xf("SuspenseList");case 0:case 2:case 15:return n=Rx(n.type,!1),n;case 11:return n=Rx(n.type.render,!1),n;case 1:return n=Rx(n.type,!0),n;default:return""}}function IA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case zc:return"Fragment";case Hc:return"Portal";case bA:return"Profiler";case CS:return"StrictMode";case RA:return"Suspense";case PA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oI:return(n.displayName||"Context")+".Consumer";case sI:return(n._context.displayName||"Context")+".Provider";case TS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case bS:return e=n.displayName||null,e!==null?e:IA(n.type)||"Memo";case Ko:e=n._payload,n=n._init;try{return IA(n(e))}catch{}}return null}function DU(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IA(e);case 8:return e===CS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ua(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function lI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FU(n){var e=lI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Vp(n){n._valueTracker||(n._valueTracker=FU(n))}function cI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=lI(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Pg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function BA(n,e){var t=e.checked;return pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function kC(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ua(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uI(n,e){e=e.checked,e!=null&&ES(n,"checked",e,!1)}function LA(n,e){uI(n,e);var t=ua(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?DA(n,e.type,t):e.hasOwnProperty("defaultValue")&&DA(n,e.type,ua(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function HC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function DA(n,e,t){(e!=="number"||Pg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Jf=Array.isArray;function au(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ua(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function FA(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return pn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function zC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(we(92));if(Jf(t)){if(1<t.length)throw Error(we(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ua(t)}}function fI(n,e){var t=ua(e.value),i=ua(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function GC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function dI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function NA(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?dI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Wp,hI=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Wp=Wp||document.createElement("div"),Wp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Cd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ed={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NU=["Webkit","ms","Moz","O"];Object.keys(ed).forEach(function(n){NU.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ed[e]=ed[n]})});function pI(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ed.hasOwnProperty(n)&&ed[n]?(""+e).trim():e+"px"}function mI(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=pI(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var OU=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function OA(n,e){if(e){if(OU[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function UA(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kA=null;function RS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var HA=null,lu=null,cu=null;function VC(n){if(n=ph(n)){if(typeof HA!="function")throw Error(we(280));var e=n.stateNode;e&&(e=av(e),HA(n.stateNode,n.type,e))}}function gI(n){lu?cu?cu.push(n):cu=[n]:lu=n}function vI(){if(lu){var n=lu,e=cu;if(cu=lu=null,VC(n),e)for(n=0;n<e.length;n++)VC(e[n])}}function yI(n,e){return n(e)}function xI(){}var Px=!1;function _I(n,e,t){if(Px)return n(e,t);Px=!0;try{return yI(n,e,t)}finally{Px=!1,(lu!==null||cu!==null)&&(xI(),vI())}}function Td(n,e){var t=n.stateNode;if(t===null)return null;var i=av(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(we(231,e,typeof t));return t}var zA=!1;if(po)try{var _f={};Object.defineProperty(_f,"passive",{get:function(){zA=!0}}),window.addEventListener("test",_f,_f),window.removeEventListener("test",_f,_f)}catch{zA=!1}function UU(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(f){this.onError(f)}}var td=!1,Ig=null,Bg=!1,GA=null,kU={onError:function(n){td=!0,Ig=n}};function HU(n,e,t,i,r,s,o,a,l){td=!1,Ig=null,UU.apply(kU,arguments)}function zU(n,e,t,i,r,s,o,a,l){if(HU.apply(this,arguments),td){if(td){var c=Ig;td=!1,Ig=null}else throw Error(we(198));Bg||(Bg=!0,GA=c)}}function Yl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function AI(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function WC(n){if(Yl(n)!==n)throw Error(we(188))}function GU(n){var e=n.alternate;if(!e){if(e=Yl(n),e===null)throw Error(we(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return WC(r),n;if(s===i)return WC(r),e;s=s.sibling}throw Error(we(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(we(189))}}if(t.alternate!==i)throw Error(we(190))}if(t.tag!==3)throw Error(we(188));return t.stateNode.current===t?n:e}function SI(n){return n=GU(n),n!==null?MI(n):null}function MI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=MI(n);if(e!==null)return e;n=n.sibling}return null}var wI=ar.unstable_scheduleCallback,jC=ar.unstable_cancelCallback,VU=ar.unstable_shouldYield,WU=ar.unstable_requestPaint,wn=ar.unstable_now,jU=ar.unstable_getCurrentPriorityLevel,PS=ar.unstable_ImmediatePriority,EI=ar.unstable_UserBlockingPriority,Lg=ar.unstable_NormalPriority,XU=ar.unstable_LowPriority,CI=ar.unstable_IdlePriority,iv=null,ws=null;function JU(n){if(ws&&typeof ws.onCommitFiberRoot=="function")try{ws.onCommitFiberRoot(iv,n,void 0,(n.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:$U,KU=Math.log,YU=Math.LN2;function $U(n){return n>>>=0,n===0?32:31-(KU(n)/YU|0)|0}var jp=64,Xp=4194304;function Kf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Dg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Kf(a):(s&=o,s!==0&&(i=Kf(s)))}else o=t&~r,o!==0?i=Kf(o):s!==0&&(i=Kf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-qr(e),r=1<<t,i|=n[t],e&=~r;return i}function QU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qU(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-qr(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=QU(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function VA(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function TI(){var n=jp;return jp<<=1,!(jp&4194240)&&(jp=64),n}function Ix(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function dh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-qr(e),n[e]=t}function ZU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-qr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function IS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-qr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Xt=0;function bI(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var RI,BS,PI,II,BI,WA=!1,Jp=[],ta=null,na=null,ia=null,bd=new Map,Rd=new Map,$o=[],ek="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function XC(n,e){switch(n){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":ia=null;break;case"pointerover":case"pointerout":bd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(e.pointerId)}}function Af(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ph(e),e!==null&&BS(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function tk(n,e,t,i,r){switch(e){case"focusin":return ta=Af(ta,n,e,t,i,r),!0;case"dragenter":return na=Af(na,n,e,t,i,r),!0;case"mouseover":return ia=Af(ia,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return bd.set(s,Af(bd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Rd.set(s,Af(Rd.get(s)||null,n,e,t,i,r)),!0}return!1}function LI(n){var e=ll(n.target);if(e!==null){var t=Yl(e);if(t!==null){if(e=t.tag,e===13){if(e=AI(t),e!==null){n.blockedOn=e,BI(n.priority,function(){PI(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=jA(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);kA=i,t.target.dispatchEvent(i),kA=null}else return e=ph(t),e!==null&&BS(e),n.blockedOn=t,!1;e.shift()}return!0}function JC(n,e,t){cg(n)&&t.delete(e)}function nk(){WA=!1,ta!==null&&cg(ta)&&(ta=null),na!==null&&cg(na)&&(na=null),ia!==null&&cg(ia)&&(ia=null),bd.forEach(JC),Rd.forEach(JC)}function Sf(n,e){n.blockedOn===e&&(n.blockedOn=null,WA||(WA=!0,ar.unstable_scheduleCallback(ar.unstable_NormalPriority,nk)))}function Pd(n){function e(r){return Sf(r,n)}if(0<Jp.length){Sf(Jp[0],n);for(var t=1;t<Jp.length;t++){var i=Jp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ta!==null&&Sf(ta,n),na!==null&&Sf(na,n),ia!==null&&Sf(ia,n),bd.forEach(e),Rd.forEach(e),t=0;t<$o.length;t++)i=$o[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<$o.length&&(t=$o[0],t.blockedOn===null);)LI(t),t.blockedOn===null&&$o.shift()}var uu=So.ReactCurrentBatchConfig,Fg=!0;function ik(n,e,t,i){var r=Xt,s=uu.transition;uu.transition=null;try{Xt=1,LS(n,e,t,i)}finally{Xt=r,uu.transition=s}}function rk(n,e,t,i){var r=Xt,s=uu.transition;uu.transition=null;try{Xt=4,LS(n,e,t,i)}finally{Xt=r,uu.transition=s}}function LS(n,e,t,i){if(Fg){var r=jA(n,e,t,i);if(r===null)zx(n,e,i,Ng,t),XC(n,i);else if(tk(r,n,e,t,i))i.stopPropagation();else if(XC(n,i),e&4&&-1<ek.indexOf(n)){for(;r!==null;){var s=ph(r);if(s!==null&&RI(s),s=jA(n,e,t,i),s===null&&zx(n,e,i,Ng,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else zx(n,e,i,null,t)}}var Ng=null;function jA(n,e,t,i){if(Ng=null,n=RS(i),n=ll(n),n!==null)if(e=Yl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=AI(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ng=n,null}function DI(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jU()){case PS:return 1;case EI:return 4;case Lg:case XU:return 16;case CI:return 536870912;default:return 16}default:return 16}}var Zo=null,DS=null,ug=null;function FI(){if(ug)return ug;var n,e=DS,t=e.length,i,r="value"in Zo?Zo.value:Zo.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return ug=r.slice(n,1<i?1-i:void 0)}function fg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Kp(){return!0}function KC(){return!1}function dr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kp:KC,this.isPropagationStopped=KC,this}return pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Kp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Kp)},persist:function(){},isPersistent:Kp}),e}var Uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},FS=dr(Uu),hh=pn({},Uu,{view:0,detail:0}),sk=dr(hh),Bx,Lx,Mf,rv=pn({},hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:NS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mf&&(Mf&&n.type==="mousemove"?(Bx=n.screenX-Mf.screenX,Lx=n.screenY-Mf.screenY):Lx=Bx=0,Mf=n),Bx)},movementY:function(n){return"movementY"in n?n.movementY:Lx}}),YC=dr(rv),ok=pn({},rv,{dataTransfer:0}),ak=dr(ok),lk=pn({},hh,{relatedTarget:0}),Dx=dr(lk),ck=pn({},Uu,{animationName:0,elapsedTime:0,pseudoElement:0}),uk=dr(ck),fk=pn({},Uu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),dk=dr(fk),hk=pn({},Uu,{data:0}),$C=dr(hk),pk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=gk[n])?!!e[n]:!1}function NS(){return vk}var yk=pn({},hh,{key:function(n){if(n.key){var e=pk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=fg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mk[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:NS,charCode:function(n){return n.type==="keypress"?fg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),xk=dr(yk),_k=pn({},rv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QC=dr(_k),Ak=pn({},hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:NS}),Sk=dr(Ak),Mk=pn({},Uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),wk=dr(Mk),Ek=pn({},rv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ck=dr(Ek),Tk=[9,13,27,32],OS=po&&"CompositionEvent"in window,nd=null;po&&"documentMode"in document&&(nd=document.documentMode);var bk=po&&"TextEvent"in window&&!nd,NI=po&&(!OS||nd&&8<nd&&11>=nd),qC=" ",ZC=!1;function OI(n,e){switch(n){case"keyup":return Tk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UI(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Gc=!1;function Rk(n,e){switch(n){case"compositionend":return UI(e);case"keypress":return e.which!==32?null:(ZC=!0,qC);case"textInput":return n=e.data,n===qC&&ZC?null:n;default:return null}}function Pk(n,e){if(Gc)return n==="compositionend"||!OS&&OI(n,e)?(n=FI(),ug=DS=Zo=null,Gc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NI&&e.locale!=="ko"?null:e.data;default:return null}}var Ik={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Ik[n.type]:e==="textarea"}function kI(n,e,t,i){gI(i),e=Og(e,"onChange"),0<e.length&&(t=new FS("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var id=null,Id=null;function Bk(n){$I(n,0)}function sv(n){var e=jc(n);if(cI(e))return n}function Lk(n,e){if(n==="change")return e}var HI=!1;if(po){var Fx;if(po){var Nx="oninput"in document;if(!Nx){var tT=document.createElement("div");tT.setAttribute("oninput","return;"),Nx=typeof tT.oninput=="function"}Fx=Nx}else Fx=!1;HI=Fx&&(!document.documentMode||9<document.documentMode)}function nT(){id&&(id.detachEvent("onpropertychange",zI),Id=id=null)}function zI(n){if(n.propertyName==="value"&&sv(Id)){var e=[];kI(e,Id,n,RS(n)),_I(Bk,e)}}function Dk(n,e,t){n==="focusin"?(nT(),id=e,Id=t,id.attachEvent("onpropertychange",zI)):n==="focusout"&&nT()}function Fk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sv(Id)}function Nk(n,e){if(n==="click")return sv(e)}function Ok(n,e){if(n==="input"||n==="change")return sv(e)}function Uk(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ns=typeof Object.is=="function"?Object.is:Uk;function Bd(n,e){if(ns(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!TA.call(e,r)||!ns(n[r],e[r]))return!1}return!0}function iT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rT(n,e){var t=iT(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=iT(t)}}function GI(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?GI(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function VI(){for(var n=window,e=Pg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Pg(n.document)}return e}function US(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function kk(n){var e=VI(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&GI(t.ownerDocument.documentElement,t)){if(i!==null&&US(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=rT(t,s);var o=rT(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Hk=po&&"documentMode"in document&&11>=document.documentMode,Vc=null,XA=null,rd=null,JA=!1;function sT(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;JA||Vc==null||Vc!==Pg(i)||(i=Vc,"selectionStart"in i&&US(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),rd&&Bd(rd,i)||(rd=i,i=Og(XA,"onSelect"),0<i.length&&(e=new FS("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Vc)))}function Yp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Wc={animationend:Yp("Animation","AnimationEnd"),animationiteration:Yp("Animation","AnimationIteration"),animationstart:Yp("Animation","AnimationStart"),transitionend:Yp("Transition","TransitionEnd")},Ox={},WI={};po&&(WI=document.createElement("div").style,"AnimationEvent"in window||(delete Wc.animationend.animation,delete Wc.animationiteration.animation,delete Wc.animationstart.animation),"TransitionEvent"in window||delete Wc.transitionend.transition);function ov(n){if(Ox[n])return Ox[n];if(!Wc[n])return n;var e=Wc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in WI)return Ox[n]=e[t];return n}var jI=ov("animationend"),XI=ov("animationiteration"),JI=ov("animationstart"),KI=ov("transitionend"),YI=new Map,oT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Aa(n,e){YI.set(n,e),Kl(e,[n])}for(var Ux=0;Ux<oT.length;Ux++){var kx=oT[Ux],zk=kx.toLowerCase(),Gk=kx[0].toUpperCase()+kx.slice(1);Aa(zk,"on"+Gk)}Aa(jI,"onAnimationEnd");Aa(XI,"onAnimationIteration");Aa(JI,"onAnimationStart");Aa("dblclick","onDoubleClick");Aa("focusin","onFocus");Aa("focusout","onBlur");Aa(KI,"onTransitionEnd");yu("onMouseEnter",["mouseout","mouseover"]);yu("onMouseLeave",["mouseout","mouseover"]);yu("onPointerEnter",["pointerout","pointerover"]);yu("onPointerLeave",["pointerout","pointerover"]);Kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yf));function aT(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,zU(i,e,void 0,n),n.currentTarget=null}function $I(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;aT(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;aT(r,a,c),s=l}}}if(Bg)throw n=GA,Bg=!1,GA=null,n}function qt(n,e){var t=e[qA];t===void 0&&(t=e[qA]=new Set);var i=n+"__bubble";t.has(i)||(QI(e,n,2,!1),t.add(i))}function Hx(n,e,t){var i=0;e&&(i|=4),QI(t,n,i,e)}var $p="_reactListening"+Math.random().toString(36).slice(2);function Ld(n){if(!n[$p]){n[$p]=!0,rI.forEach(function(t){t!=="selectionchange"&&(Vk.has(t)||Hx(t,!1,n),Hx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[$p]||(e[$p]=!0,Hx("selectionchange",!1,e))}}function QI(n,e,t,i){switch(DI(e)){case 1:var r=ik;break;case 4:r=rk;break;default:r=LS}t=r.bind(null,e,t,n),r=void 0,!zA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function zx(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ll(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}_I(function(){var c=s,f=RS(t),h=[];e:{var p=YI.get(n);if(p!==void 0){var m=FS,v=n;switch(n){case"keypress":if(fg(t)===0)break e;case"keydown":case"keyup":m=xk;break;case"focusin":v="focus",m=Dx;break;case"focusout":v="blur",m=Dx;break;case"beforeblur":case"afterblur":m=Dx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=YC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ak;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Sk;break;case jI:case XI:case JI:m=uk;break;case KI:m=wk;break;case"scroll":m=sk;break;case"wheel":m=Ck;break;case"copy":case"cut":case"paste":m=dk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=QC}var A=(e&4)!==0,x=!A&&n==="scroll",g=A?p!==null?p+"Capture":null:p;A=[];for(var _=c,S;_!==null;){S=_;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,g!==null&&(w=Td(_,g),w!=null&&A.push(Dd(_,w,S)))),x)break;_=_.return}0<A.length&&(p=new m(p,v,null,t,f),h.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==kA&&(v=t.relatedTarget||t.fromElement)&&(ll(v)||v[mo]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?ll(v):null,v!==null&&(x=Yl(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(A=YC,w="onMouseLeave",g="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(A=QC,w="onPointerLeave",g="onPointerEnter",_="pointer"),x=m==null?p:jc(m),S=v==null?p:jc(v),p=new A(w,_+"leave",m,t,f),p.target=x,p.relatedTarget=S,w=null,ll(f)===c&&(A=new A(g,_+"enter",v,t,f),A.target=S,A.relatedTarget=x,w=A),x=w,m&&v)t:{for(A=m,g=v,_=0,S=A;S;S=gc(S))_++;for(S=0,w=g;w;w=gc(w))S++;for(;0<_-S;)A=gc(A),_--;for(;0<S-_;)g=gc(g),S--;for(;_--;){if(A===g||g!==null&&A===g.alternate)break t;A=gc(A),g=gc(g)}A=null}else A=null;m!==null&&lT(h,p,m,A,!1),v!==null&&x!==null&&lT(h,x,v,A,!0)}}e:{if(p=c?jc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=Lk;else if(eT(p))if(HI)R=Ok;else{R=Fk;var b=Dk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=Nk);if(R&&(R=R(n,c))){kI(h,R,t,f);break e}b&&b(n,p,c),n==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&DA(p,"number",p.value)}switch(b=c?jc(c):window,n){case"focusin":(eT(b)||b.contentEditable==="true")&&(Vc=b,XA=c,rd=null);break;case"focusout":rd=XA=Vc=null;break;case"mousedown":JA=!0;break;case"contextmenu":case"mouseup":case"dragend":JA=!1,sT(h,t,f);break;case"selectionchange":if(Hk)break;case"keydown":case"keyup":sT(h,t,f)}var I;if(OS)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Gc?OI(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&(NI&&t.locale!=="ko"&&(Gc||B!=="onCompositionStart"?B==="onCompositionEnd"&&Gc&&(I=FI()):(Zo=f,DS="value"in Zo?Zo.value:Zo.textContent,Gc=!0)),b=Og(c,B),0<b.length&&(B=new $C(B,n,null,t,f),h.push({event:B,listeners:b}),I?B.data=I:(I=UI(t),I!==null&&(B.data=I)))),(I=bk?Rk(n,t):Pk(n,t))&&(c=Og(c,"onBeforeInput"),0<c.length&&(f=new $C("onBeforeInput","beforeinput",null,t,f),h.push({event:f,listeners:c}),f.data=I))}$I(h,e)})}function Dd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Og(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Td(n,t),s!=null&&i.unshift(Dd(n,s,r)),s=Td(n,e),s!=null&&i.push(Dd(n,s,r))),n=n.return}return i}function gc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function lT(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Td(t,s),l!=null&&o.unshift(Dd(t,l,a))):r||(l=Td(t,s),l!=null&&o.push(Dd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Wk=/\r\n?/g,jk=/\u0000|\uFFFD/g;function cT(n){return(typeof n=="string"?n:""+n).replace(Wk,`
`).replace(jk,"")}function Qp(n,e,t){if(e=cT(e),cT(n)!==e&&t)throw Error(we(425))}function Ug(){}var KA=null,YA=null;function $A(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var QA=typeof setTimeout=="function"?setTimeout:void 0,Xk=typeof clearTimeout=="function"?clearTimeout:void 0,uT=typeof Promise=="function"?Promise:void 0,Jk=typeof queueMicrotask=="function"?queueMicrotask:typeof uT<"u"?function(n){return uT.resolve(null).then(n).catch(Kk)}:QA;function Kk(n){setTimeout(function(){throw n})}function Gx(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Pd(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Pd(e)}function ra(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function fT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ku=Math.random().toString(36).slice(2),As="__reactFiber$"+ku,Fd="__reactProps$"+ku,mo="__reactContainer$"+ku,qA="__reactEvents$"+ku,Yk="__reactListeners$"+ku,$k="__reactHandles$"+ku;function ll(n){var e=n[As];if(e)return e;for(var t=n.parentNode;t;){if(e=t[mo]||t[As]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=fT(n);n!==null;){if(t=n[As])return t;n=fT(n)}return e}n=t,t=n.parentNode}return null}function ph(n){return n=n[As]||n[mo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function jc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(we(33))}function av(n){return n[Fd]||null}var ZA=[],Xc=-1;function Sa(n){return{current:n}}function Zt(n){0>Xc||(n.current=ZA[Xc],ZA[Xc]=null,Xc--)}function Qt(n,e){Xc++,ZA[Xc]=n.current,n.current=e}var fa={},xi=Sa(fa),Wi=Sa(!1),Bl=fa;function xu(n,e){var t=n.type.contextTypes;if(!t)return fa;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ji(n){return n=n.childContextTypes,n!=null}function kg(){Zt(Wi),Zt(xi)}function dT(n,e,t){if(xi.current!==fa)throw Error(we(168));Qt(xi,e),Qt(Wi,t)}function qI(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(we(108,DU(n)||"Unknown",r));return pn({},t,i)}function Hg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fa,Bl=xi.current,Qt(xi,n),Qt(Wi,Wi.current),!0}function hT(n,e,t){var i=n.stateNode;if(!i)throw Error(we(169));t?(n=qI(n,e,Bl),i.__reactInternalMemoizedMergedChildContext=n,Zt(Wi),Zt(xi),Qt(xi,n)):Zt(Wi),Qt(Wi,t)}var Qs=null,lv=!1,Vx=!1;function ZI(n){Qs===null?Qs=[n]:Qs.push(n)}function Qk(n){lv=!0,ZI(n)}function Ma(){if(!Vx&&Qs!==null){Vx=!0;var n=0,e=Xt;try{var t=Qs;for(Xt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Qs=null,lv=!1}catch(r){throw Qs!==null&&(Qs=Qs.slice(n+1)),wI(PS,Ma),r}finally{Xt=e,Vx=!1}}return null}var Jc=[],Kc=0,zg=null,Gg=0,Tr=[],br=0,Ll=null,to=1,no="";function Za(n,e){Jc[Kc++]=Gg,Jc[Kc++]=zg,zg=n,Gg=e}function eB(n,e,t){Tr[br++]=to,Tr[br++]=no,Tr[br++]=Ll,Ll=n;var i=to;n=no;var r=32-qr(i)-1;i&=~(1<<r),t+=1;var s=32-qr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,to=1<<32-qr(e)+r|t<<r|i,no=s+n}else to=1<<s|t<<r|i,no=n}function kS(n){n.return!==null&&(Za(n,1),eB(n,1,0))}function HS(n){for(;n===zg;)zg=Jc[--Kc],Jc[Kc]=null,Gg=Jc[--Kc],Jc[Kc]=null;for(;n===Ll;)Ll=Tr[--br],Tr[br]=null,no=Tr[--br],Tr[br]=null,to=Tr[--br],Tr[br]=null}var rr=null,tr=null,sn=!1,Yr=null;function tB(n,e){var t=Pr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function pT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,rr=n,tr=ra(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,rr=n,tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ll!==null?{id:to,overflow:no}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Pr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,rr=n,tr=null,!0):!1;default:return!1}}function e1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function t1(n){if(sn){var e=tr;if(e){var t=e;if(!pT(n,e)){if(e1(n))throw Error(we(418));e=ra(t.nextSibling);var i=rr;e&&pT(n,e)?tB(i,t):(n.flags=n.flags&-4097|2,sn=!1,rr=n)}}else{if(e1(n))throw Error(we(418));n.flags=n.flags&-4097|2,sn=!1,rr=n}}}function mT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;rr=n}function qp(n){if(n!==rr)return!1;if(!sn)return mT(n),sn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!$A(n.type,n.memoizedProps)),e&&(e=tr)){if(e1(n))throw nB(),Error(we(418));for(;e;)tB(n,e),e=ra(e.nextSibling)}if(mT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(we(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){tr=ra(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}tr=null}}else tr=rr?ra(n.stateNode.nextSibling):null;return!0}function nB(){for(var n=tr;n;)n=ra(n.nextSibling)}function _u(){tr=rr=null,sn=!1}function zS(n){Yr===null?Yr=[n]:Yr.push(n)}var qk=So.ReactCurrentBatchConfig;function wf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(we(309));var i=t.stateNode}if(!i)throw Error(we(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(we(284));if(!t._owner)throw Error(we(290,n))}return n}function Zp(n,e){throw n=Object.prototype.toString.call(e),Error(we(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function gT(n){var e=n._init;return e(n._payload)}function iB(n){function e(g,_){if(n){var S=g.deletions;S===null?(g.deletions=[_],g.flags|=16):S.push(_)}}function t(g,_){if(!n)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function i(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function r(g,_){return g=la(g,_),g.index=0,g.sibling=null,g}function s(g,_,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<_?(g.flags|=2,_):S):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,_,S,w){return _===null||_.tag!==6?(_=$x(S,g.mode,w),_.return=g,_):(_=r(_,S),_.return=g,_)}function l(g,_,S,w){var R=S.type;return R===zc?f(g,_,S.props.children,w,S.key):_!==null&&(_.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ko&&gT(R)===_.type)?(w=r(_,S.props),w.ref=wf(g,_,S),w.return=g,w):(w=yg(S.type,S.key,S.props,null,g.mode,w),w.ref=wf(g,_,S),w.return=g,w)}function c(g,_,S,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Qx(S,g.mode,w),_.return=g,_):(_=r(_,S.children||[]),_.return=g,_)}function f(g,_,S,w,R){return _===null||_.tag!==7?(_=Ml(S,g.mode,w,R),_.return=g,_):(_=r(_,S),_.return=g,_)}function h(g,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=$x(""+_,g.mode,S),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gp:return S=yg(_.type,_.key,_.props,null,g.mode,S),S.ref=wf(g,null,_),S.return=g,S;case Hc:return _=Qx(_,g.mode,S),_.return=g,_;case Ko:var w=_._init;return h(g,w(_._payload),S)}if(Jf(_)||xf(_))return _=Ml(_,g.mode,S,null),_.return=g,_;Zp(g,_)}return null}function p(g,_,S,w){var R=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(g,_,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Gp:return S.key===R?l(g,_,S,w):null;case Hc:return S.key===R?c(g,_,S,w):null;case Ko:return R=S._init,p(g,_,R(S._payload),w)}if(Jf(S)||xf(S))return R!==null?null:f(g,_,S,w,null);Zp(g,S)}return null}function m(g,_,S,w,R){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(S)||null,a(_,g,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gp:return g=g.get(w.key===null?S:w.key)||null,l(_,g,w,R);case Hc:return g=g.get(w.key===null?S:w.key)||null,c(_,g,w,R);case Ko:var b=w._init;return m(g,_,S,b(w._payload),R)}if(Jf(w)||xf(w))return g=g.get(S)||null,f(_,g,w,R,null);Zp(_,w)}return null}function v(g,_,S,w){for(var R=null,b=null,I=_,B=_=0,z=null;I!==null&&B<S.length;B++){I.index>B?(z=I,I=null):z=I.sibling;var C=p(g,I,S[B],w);if(C===null){I===null&&(I=z);break}n&&I&&C.alternate===null&&e(g,I),_=s(C,_,B),b===null?R=C:b.sibling=C,b=C,I=z}if(B===S.length)return t(g,I),sn&&Za(g,B),R;if(I===null){for(;B<S.length;B++)I=h(g,S[B],w),I!==null&&(_=s(I,_,B),b===null?R=I:b.sibling=I,b=I);return sn&&Za(g,B),R}for(I=i(g,I);B<S.length;B++)z=m(I,g,B,S[B],w),z!==null&&(n&&z.alternate!==null&&I.delete(z.key===null?B:z.key),_=s(z,_,B),b===null?R=z:b.sibling=z,b=z);return n&&I.forEach(function(P){return e(g,P)}),sn&&Za(g,B),R}function A(g,_,S,w){var R=xf(S);if(typeof R!="function")throw Error(we(150));if(S=R.call(S),S==null)throw Error(we(151));for(var b=R=null,I=_,B=_=0,z=null,C=S.next();I!==null&&!C.done;B++,C=S.next()){I.index>B?(z=I,I=null):z=I.sibling;var P=p(g,I,C.value,w);if(P===null){I===null&&(I=z);break}n&&I&&P.alternate===null&&e(g,I),_=s(P,_,B),b===null?R=P:b.sibling=P,b=P,I=z}if(C.done)return t(g,I),sn&&Za(g,B),R;if(I===null){for(;!C.done;B++,C=S.next())C=h(g,C.value,w),C!==null&&(_=s(C,_,B),b===null?R=C:b.sibling=C,b=C);return sn&&Za(g,B),R}for(I=i(g,I);!C.done;B++,C=S.next())C=m(I,g,B,C.value,w),C!==null&&(n&&C.alternate!==null&&I.delete(C.key===null?B:C.key),_=s(C,_,B),b===null?R=C:b.sibling=C,b=C);return n&&I.forEach(function(j){return e(g,j)}),sn&&Za(g,B),R}function x(g,_,S,w){if(typeof S=="object"&&S!==null&&S.type===zc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Gp:e:{for(var R=S.key,b=_;b!==null;){if(b.key===R){if(R=S.type,R===zc){if(b.tag===7){t(g,b.sibling),_=r(b,S.props.children),_.return=g,g=_;break e}}else if(b.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ko&&gT(R)===b.type){t(g,b.sibling),_=r(b,S.props),_.ref=wf(g,b,S),_.return=g,g=_;break e}t(g,b);break}else e(g,b);b=b.sibling}S.type===zc?(_=Ml(S.props.children,g.mode,w,S.key),_.return=g,g=_):(w=yg(S.type,S.key,S.props,null,g.mode,w),w.ref=wf(g,_,S),w.return=g,g=w)}return o(g);case Hc:e:{for(b=S.key;_!==null;){if(_.key===b)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){t(g,_.sibling),_=r(_,S.children||[]),_.return=g,g=_;break e}else{t(g,_);break}else e(g,_);_=_.sibling}_=Qx(S,g.mode,w),_.return=g,g=_}return o(g);case Ko:return b=S._init,x(g,_,b(S._payload),w)}if(Jf(S))return v(g,_,S,w);if(xf(S))return A(g,_,S,w);Zp(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(t(g,_.sibling),_=r(_,S),_.return=g,g=_):(t(g,_),_=$x(S,g.mode,w),_.return=g,g=_),o(g)):t(g,_)}return x}var Au=iB(!0),rB=iB(!1),Vg=Sa(null),Wg=null,Yc=null,GS=null;function VS(){GS=Yc=Wg=null}function WS(n){var e=Vg.current;Zt(Vg),n._currentValue=e}function n1(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function fu(n,e){Wg=n,GS=Yc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Gi=!0),n.firstContext=null)}function Lr(n){var e=n._currentValue;if(GS!==n)if(n={context:n,memoizedValue:e,next:null},Yc===null){if(Wg===null)throw Error(we(308));Yc=n,Wg.dependencies={lanes:0,firstContext:n}}else Yc=Yc.next=n;return e}var cl=null;function jS(n){cl===null?cl=[n]:cl.push(n)}function sB(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,jS(e)):(t.next=r.next,r.next=t),e.interleaved=t,go(n,i)}function go(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Yo=!1;function XS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oB(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function oo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function sa(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ot&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,go(n,t)}return r=i.interleaved,r===null?(e.next=e,jS(i)):(e.next=r.next,r.next=e),i.interleaved=e,go(n,t)}function dg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,IS(n,t)}}function vT(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function jg(n,e,t,i){var r=n.updateQueue;Yo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var f=n.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,f=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,A=a;switch(p=e,m=t,A.tag){case 1:if(v=A.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=A.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=pn({},h,p);break e;case 2:Yo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=m,l=h):f=f.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(f===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Fl|=o,n.lanes=o,n.memoizedState=h}}function yT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(we(191,r));r.call(i)}}}var mh={},Es=Sa(mh),Nd=Sa(mh),Od=Sa(mh);function ul(n){if(n===mh)throw Error(we(174));return n}function JS(n,e){switch(Qt(Od,e),Qt(Nd,n),Qt(Es,mh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:NA(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=NA(e,n)}Zt(Es),Qt(Es,e)}function Su(){Zt(Es),Zt(Nd),Zt(Od)}function aB(n){ul(Od.current);var e=ul(Es.current),t=NA(e,n.type);e!==t&&(Qt(Nd,n),Qt(Es,t))}function KS(n){Nd.current===n&&(Zt(Es),Zt(Nd))}var cn=Sa(0);function Xg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wx=[];function YS(){for(var n=0;n<Wx.length;n++)Wx[n]._workInProgressVersionPrimary=null;Wx.length=0}var hg=So.ReactCurrentDispatcher,jx=So.ReactCurrentBatchConfig,Dl=0,hn=null,Dn=null,Vn=null,Jg=!1,sd=!1,Ud=0,Zk=0;function oi(){throw Error(we(321))}function $S(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ns(n[t],e[t]))return!1;return!0}function QS(n,e,t,i,r,s){if(Dl=s,hn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hg.current=n===null||n.memoizedState===null?iH:rH,n=t(i,r),sd){s=0;do{if(sd=!1,Ud=0,25<=s)throw Error(we(301));s+=1,Vn=Dn=null,e.updateQueue=null,hg.current=sH,n=t(i,r)}while(sd)}if(hg.current=Kg,e=Dn!==null&&Dn.next!==null,Dl=0,Vn=Dn=hn=null,Jg=!1,e)throw Error(we(300));return n}function qS(){var n=Ud!==0;return Ud=0,n}function _s(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?hn.memoizedState=Vn=n:Vn=Vn.next=n,Vn}function Dr(){if(Dn===null){var n=hn.alternate;n=n!==null?n.memoizedState:null}else n=Dn.next;var e=Vn===null?hn.memoizedState:Vn.next;if(e!==null)Vn=e,Dn=n;else{if(n===null)throw Error(we(310));Dn=n,n={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Vn===null?hn.memoizedState=Vn=n:Vn=Vn.next=n}return Vn}function kd(n,e){return typeof e=="function"?e(n):e}function Xx(n){var e=Dr(),t=e.queue;if(t===null)throw Error(we(311));t.lastRenderedReducer=n;var i=Dn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var f=c.lane;if((Dl&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,hn.lanes|=f,Fl|=f}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ns(i,e.memoizedState)||(Gi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,hn.lanes|=s,Fl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Jx(n){var e=Dr(),t=e.queue;if(t===null)throw Error(we(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);ns(s,e.memoizedState)||(Gi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function lB(){}function cB(n,e){var t=hn,i=Dr(),r=e(),s=!ns(i.memoizedState,r);if(s&&(i.memoizedState=r,Gi=!0),i=i.queue,ZS(dB.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Vn!==null&&Vn.memoizedState.tag&1){if(t.flags|=2048,Hd(9,fB.bind(null,t,i,r,e),void 0,null),Wn===null)throw Error(we(349));Dl&30||uB(t,e,r)}return r}function uB(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function fB(n,e,t,i){e.value=t,e.getSnapshot=i,hB(e)&&pB(n)}function dB(n,e,t){return t(function(){hB(e)&&pB(n)})}function hB(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ns(n,t)}catch{return!0}}function pB(n){var e=go(n,1);e!==null&&Zr(e,n,1,-1)}function xT(n){var e=_s();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kd,lastRenderedState:n},e.queue=n,n=n.dispatch=nH.bind(null,hn,n),[e.memoizedState,n]}function Hd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function mB(){return Dr().memoizedState}function pg(n,e,t,i){var r=_s();hn.flags|=n,r.memoizedState=Hd(1|e,t,void 0,i===void 0?null:i)}function cv(n,e,t,i){var r=Dr();i=i===void 0?null:i;var s=void 0;if(Dn!==null){var o=Dn.memoizedState;if(s=o.destroy,i!==null&&$S(i,o.deps)){r.memoizedState=Hd(e,t,s,i);return}}hn.flags|=n,r.memoizedState=Hd(1|e,t,s,i)}function _T(n,e){return pg(8390656,8,n,e)}function ZS(n,e){return cv(2048,8,n,e)}function gB(n,e){return cv(4,2,n,e)}function vB(n,e){return cv(4,4,n,e)}function yB(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function xB(n,e,t){return t=t!=null?t.concat([n]):null,cv(4,4,yB.bind(null,e,n),t)}function eM(){}function _B(n,e){var t=Dr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&$S(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function AB(n,e){var t=Dr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&$S(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function SB(n,e,t){return Dl&21?(ns(t,e)||(t=TI(),hn.lanes|=t,Fl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Gi=!0),n.memoizedState=t)}function eH(n,e){var t=Xt;Xt=t!==0&&4>t?t:4,n(!0);var i=jx.transition;jx.transition={};try{n(!1),e()}finally{Xt=t,jx.transition=i}}function MB(){return Dr().memoizedState}function tH(n,e,t){var i=aa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},wB(n))EB(e,t);else if(t=sB(n,e,t,i),t!==null){var r=Bi();Zr(t,n,i,r),CB(t,e,i)}}function nH(n,e,t){var i=aa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(wB(n))EB(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,ns(a,o)){var l=e.interleaved;l===null?(r.next=r,jS(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=sB(n,e,r,i),t!==null&&(r=Bi(),Zr(t,n,i,r),CB(t,e,i))}}function wB(n){var e=n.alternate;return n===hn||e!==null&&e===hn}function EB(n,e){sd=Jg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function CB(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,IS(n,t)}}var Kg={readContext:Lr,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useInsertionEffect:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useSyncExternalStore:oi,useId:oi,unstable_isNewReconciler:!1},iH={readContext:Lr,useCallback:function(n,e){return _s().memoizedState=[n,e===void 0?null:e],n},useContext:Lr,useEffect:_T,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,pg(4194308,4,yB.bind(null,e,n),t)},useLayoutEffect:function(n,e){return pg(4194308,4,n,e)},useInsertionEffect:function(n,e){return pg(4,2,n,e)},useMemo:function(n,e){var t=_s();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=_s();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=tH.bind(null,hn,n),[i.memoizedState,n]},useRef:function(n){var e=_s();return n={current:n},e.memoizedState=n},useState:xT,useDebugValue:eM,useDeferredValue:function(n){return _s().memoizedState=n},useTransition:function(){var n=xT(!1),e=n[0];return n=eH.bind(null,n[1]),_s().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=hn,r=_s();if(sn){if(t===void 0)throw Error(we(407));t=t()}else{if(t=e(),Wn===null)throw Error(we(349));Dl&30||uB(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,_T(dB.bind(null,i,s,n),[n]),i.flags|=2048,Hd(9,fB.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=_s(),e=Wn.identifierPrefix;if(sn){var t=no,i=to;t=(i&~(1<<32-qr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ud++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Zk++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},rH={readContext:Lr,useCallback:_B,useContext:Lr,useEffect:ZS,useImperativeHandle:xB,useInsertionEffect:gB,useLayoutEffect:vB,useMemo:AB,useReducer:Xx,useRef:mB,useState:function(){return Xx(kd)},useDebugValue:eM,useDeferredValue:function(n){var e=Dr();return SB(e,Dn.memoizedState,n)},useTransition:function(){var n=Xx(kd)[0],e=Dr().memoizedState;return[n,e]},useMutableSource:lB,useSyncExternalStore:cB,useId:MB,unstable_isNewReconciler:!1},sH={readContext:Lr,useCallback:_B,useContext:Lr,useEffect:ZS,useImperativeHandle:xB,useInsertionEffect:gB,useLayoutEffect:vB,useMemo:AB,useReducer:Jx,useRef:mB,useState:function(){return Jx(kd)},useDebugValue:eM,useDeferredValue:function(n){var e=Dr();return Dn===null?e.memoizedState=n:SB(e,Dn.memoizedState,n)},useTransition:function(){var n=Jx(kd)[0],e=Dr().memoizedState;return[n,e]},useMutableSource:lB,useSyncExternalStore:cB,useId:MB,unstable_isNewReconciler:!1};function jr(n,e){if(n&&n.defaultProps){e=pn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function i1(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:pn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var uv={isMounted:function(n){return(n=n._reactInternals)?Yl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Bi(),r=aa(n),s=oo(i,r);s.payload=e,t!=null&&(s.callback=t),e=sa(n,s,r),e!==null&&(Zr(e,n,r,i),dg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Bi(),r=aa(n),s=oo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=sa(n,s,r),e!==null&&(Zr(e,n,r,i),dg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Bi(),i=aa(n),r=oo(t,i);r.tag=2,e!=null&&(r.callback=e),e=sa(n,r,i),e!==null&&(Zr(e,n,i,t),dg(e,n,i))}};function AT(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Bd(t,i)||!Bd(r,s):!0}function TB(n,e,t){var i=!1,r=fa,s=e.contextType;return typeof s=="object"&&s!==null?s=Lr(s):(r=ji(e)?Bl:xi.current,i=e.contextTypes,s=(i=i!=null)?xu(n,r):fa),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uv,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function ST(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&uv.enqueueReplaceState(e,e.state,null)}function r1(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},XS(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Lr(s):(s=ji(e)?Bl:xi.current,r.context=xu(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(i1(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&uv.enqueueReplaceState(r,r.state,null),jg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Mu(n,e){try{var t="",i=e;do t+=LU(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Kx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function s1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var oH=typeof WeakMap=="function"?WeakMap:Map;function bB(n,e,t){t=oo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){$g||($g=!0,m1=i),s1(n,e)},t}function RB(n,e,t){t=oo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){s1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){s1(n,e),typeof i!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function MT(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new oH;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=_H.bind(null,n,e,t),e.then(n,n))}function wT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ET(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=oo(-1,1),e.tag=2,sa(t,e,1))),t.lanes|=1),n)}var aH=So.ReactCurrentOwner,Gi=!1;function bi(n,e,t,i){e.child=n===null?rB(e,null,t,i):Au(e,n.child,t,i)}function CT(n,e,t,i,r){t=t.render;var s=e.ref;return fu(e,r),i=QS(n,e,t,i,s,r),t=qS(),n!==null&&!Gi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,vo(n,e,r)):(sn&&t&&kS(e),e.flags|=1,bi(n,e,i,r),e.child)}function TT(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!lM(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,PB(n,e,s,i,r)):(n=yg(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Bd,t(o,i)&&n.ref===e.ref)return vo(n,e,r)}return e.flags|=1,n=la(s,i),n.ref=e.ref,n.return=e,e.child=n}function PB(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Bd(s,i)&&n.ref===e.ref)if(Gi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Gi=!0);else return e.lanes=n.lanes,vo(n,e,r)}return o1(n,e,t,i,r)}function IB(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Qc,er),er|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Qt(Qc,er),er|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Qt(Qc,er),er|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Qt(Qc,er),er|=i;return bi(n,e,r,t),e.child}function BB(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function o1(n,e,t,i,r){var s=ji(t)?Bl:xi.current;return s=xu(e,s),fu(e,r),t=QS(n,e,t,i,s,r),i=qS(),n!==null&&!Gi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,vo(n,e,r)):(sn&&i&&kS(e),e.flags|=1,bi(n,e,t,r),e.child)}function bT(n,e,t,i,r){if(ji(t)){var s=!0;Hg(e)}else s=!1;if(fu(e,r),e.stateNode===null)mg(n,e),TB(e,t,i),r1(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Lr(c):(c=ji(t)?Bl:xi.current,c=xu(e,c));var f=t.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&ST(e,o,i,c),Yo=!1;var p=e.memoizedState;o.state=p,jg(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Wi.current||Yo?(typeof f=="function"&&(i1(e,t,f,i),l=e.memoizedState),(a=Yo||AT(e,t,a,i,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,oB(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:jr(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Lr(l):(l=ji(t)?Bl:xi.current,l=xu(e,l));var m=t.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&ST(e,o,i,l),Yo=!1,p=e.memoizedState,o.state=p,jg(e,i,o,r);var v=e.memoizedState;a!==h||p!==v||Wi.current||Yo?(typeof m=="function"&&(i1(e,t,m,i),v=e.memoizedState),(c=Yo||AT(e,t,c,i,p,v,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return a1(n,e,t,i,s,r)}function a1(n,e,t,i,r,s){BB(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&hT(e,t,!1),vo(n,e,s);i=e.stateNode,aH.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Au(e,n.child,null,s),e.child=Au(e,null,a,s)):bi(n,e,a,s),e.memoizedState=i.state,r&&hT(e,t,!0),e.child}function LB(n){var e=n.stateNode;e.pendingContext?dT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&dT(n,e.context,!1),JS(n,e.containerInfo)}function RT(n,e,t,i,r){return _u(),zS(r),e.flags|=256,bi(n,e,t,i),e.child}var l1={dehydrated:null,treeContext:null,retryLane:0};function c1(n){return{baseLanes:n,cachePool:null,transitions:null}}function DB(n,e,t){var i=e.pendingProps,r=cn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Qt(cn,r&1),n===null)return t1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hv(o,i,0,null),n=Ml(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=c1(t),e.memoizedState=l1,n):tM(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return lH(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=la(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=la(a,s):(s=Ml(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?c1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=l1,i}return s=n.child,n=s.sibling,i=la(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function tM(n,e){return e=hv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function em(n,e,t,i){return i!==null&&zS(i),Au(e,n.child,null,t),n=tM(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function lH(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Kx(Error(we(422))),em(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=hv({mode:"visible",children:i.children},r,0,null),s=Ml(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Au(e,n.child,null,o),e.child.memoizedState=c1(o),e.memoizedState=l1,s);if(!(e.mode&1))return em(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(we(419)),i=Kx(s,i,void 0),em(n,e,o,i)}if(a=(o&n.childLanes)!==0,Gi||a){if(i=Wn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,go(n,r),Zr(i,n,r,-1))}return aM(),i=Kx(Error(we(421))),em(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=AH.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,tr=ra(r.nextSibling),rr=e,sn=!0,Yr=null,n!==null&&(Tr[br++]=to,Tr[br++]=no,Tr[br++]=Ll,to=n.id,no=n.overflow,Ll=e),e=tM(e,i.children),e.flags|=4096,e)}function PT(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),n1(n.return,e,t)}function Yx(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function FB(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(bi(n,e,i.children,t),i=cn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&PT(n,t,e);else if(n.tag===19)PT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Qt(cn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Xg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Yx(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Xg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Yx(e,!0,t,null,s);break;case"together":Yx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function vo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Fl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(we(153));if(e.child!==null){for(n=e.child,t=la(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=la(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function cH(n,e,t){switch(e.tag){case 3:LB(e),_u();break;case 5:aB(e);break;case 1:ji(e.type)&&Hg(e);break;case 4:JS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Qt(Vg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Qt(cn,cn.current&1),e.flags|=128,null):t&e.child.childLanes?DB(n,e,t):(Qt(cn,cn.current&1),n=vo(n,e,t),n!==null?n.sibling:null);Qt(cn,cn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return FB(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Qt(cn,cn.current),i)break;return null;case 22:case 23:return e.lanes=0,IB(n,e,t)}return vo(n,e,t)}var NB,u1,OB,UB;NB=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};u1=function(){};OB=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,ul(Es.current);var s=null;switch(t){case"input":r=BA(n,r),i=BA(n,i),s=[];break;case"select":r=pn({},r,{value:void 0}),i=pn({},i,{value:void 0}),s=[];break;case"textarea":r=FA(n,r),i=FA(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Ug)}OA(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ed.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ed.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};UB=function(n,e,t,i){t!==i&&(e.flags|=4)};function Ef(n,e){if(!sn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ai(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function uH(n,e,t){var i=e.pendingProps;switch(HS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(e),null;case 1:return ji(e.type)&&kg(),ai(e),null;case 3:return i=e.stateNode,Su(),Zt(Wi),Zt(xi),YS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(qp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yr!==null&&(y1(Yr),Yr=null))),u1(n,e),ai(e),null;case 5:KS(e);var r=ul(Od.current);if(t=e.type,n!==null&&e.stateNode!=null)OB(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(we(166));return ai(e),null}if(n=ul(Es.current),qp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[As]=e,i[Fd]=s,n=(e.mode&1)!==0,t){case"dialog":qt("cancel",i),qt("close",i);break;case"iframe":case"object":case"embed":qt("load",i);break;case"video":case"audio":for(r=0;r<Yf.length;r++)qt(Yf[r],i);break;case"source":qt("error",i);break;case"img":case"image":case"link":qt("error",i),qt("load",i);break;case"details":qt("toggle",i);break;case"input":kC(i,s),qt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},qt("invalid",i);break;case"textarea":zC(i,s),qt("invalid",i)}OA(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Qp(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Qp(i.textContent,a,n),r=["children",""+a]):Ed.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",i)}switch(t){case"input":Vp(i),HC(i,s,!0);break;case"textarea":Vp(i),GC(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ug)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=dI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[As]=e,n[Fd]=i,NB(n,e,!1,!1),e.stateNode=n;e:{switch(o=UA(t,i),t){case"dialog":qt("cancel",n),qt("close",n),r=i;break;case"iframe":case"object":case"embed":qt("load",n),r=i;break;case"video":case"audio":for(r=0;r<Yf.length;r++)qt(Yf[r],n);r=i;break;case"source":qt("error",n),r=i;break;case"img":case"image":case"link":qt("error",n),qt("load",n),r=i;break;case"details":qt("toggle",n),r=i;break;case"input":kC(n,i),r=BA(n,i),qt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=pn({},i,{value:void 0}),qt("invalid",n);break;case"textarea":zC(n,i),r=FA(n,i),qt("invalid",n);break;default:r=i}OA(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?mI(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hI(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Cd(n,l):typeof l=="number"&&Cd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ed.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qt("scroll",n):l!=null&&ES(n,s,l,o))}switch(t){case"input":Vp(n),HC(n,i,!1);break;case"textarea":Vp(n),GC(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ua(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?au(n,!!i.multiple,s,!1):i.defaultValue!=null&&au(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Ug)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ai(e),null;case 6:if(n&&e.stateNode!=null)UB(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(we(166));if(t=ul(Od.current),ul(Es.current),qp(e)){if(i=e.stateNode,t=e.memoizedProps,i[As]=e,(s=i.nodeValue!==t)&&(n=rr,n!==null))switch(n.tag){case 3:Qp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Qp(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[As]=e,e.stateNode=i}return ai(e),null;case 13:if(Zt(cn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(sn&&tr!==null&&e.mode&1&&!(e.flags&128))nB(),_u(),e.flags|=98560,s=!1;else if(s=qp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(we(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(we(317));s[As]=e}else _u(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ai(e),s=!1}else Yr!==null&&(y1(Yr),Yr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||cn.current&1?Fn===0&&(Fn=3):aM())),e.updateQueue!==null&&(e.flags|=4),ai(e),null);case 4:return Su(),u1(n,e),n===null&&Ld(e.stateNode.containerInfo),ai(e),null;case 10:return WS(e.type._context),ai(e),null;case 17:return ji(e.type)&&kg(),ai(e),null;case 19:if(Zt(cn),s=e.memoizedState,s===null)return ai(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Ef(s,!1);else{if(Fn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Xg(n),o!==null){for(e.flags|=128,Ef(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Qt(cn,cn.current&1|2),e.child}n=n.sibling}s.tail!==null&&wn()>wu&&(e.flags|=128,i=!0,Ef(s,!1),e.lanes=4194304)}else{if(!i)if(n=Xg(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ef(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!sn)return ai(e),null}else 2*wn()-s.renderingStartTime>wu&&t!==1073741824&&(e.flags|=128,i=!0,Ef(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wn(),e.sibling=null,t=cn.current,Qt(cn,i?t&1|2:t&1),e):(ai(e),null);case 22:case 23:return oM(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?er&1073741824&&(ai(e),e.subtreeFlags&6&&(e.flags|=8192)):ai(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function fH(n,e){switch(HS(e),e.tag){case 1:return ji(e.type)&&kg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Su(),Zt(Wi),Zt(xi),YS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return KS(e),null;case 13:if(Zt(cn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(we(340));_u()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Zt(cn),null;case 4:return Su(),null;case 10:return WS(e.type._context),null;case 22:case 23:return oM(),null;case 24:return null;default:return null}}var tm=!1,di=!1,dH=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function $c(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){yn(n,e,i)}else t.current=null}function f1(n,e,t){try{t()}catch(i){yn(n,e,i)}}var IT=!1;function hH(n,e){if(KA=Fg,n=VI(),US(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,f=0,h=n,p=null;t:for(;;){for(var m;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++f===i&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(YA={focusedElem:n,selectionRange:t},Fg=!1,Xe=e;Xe!==null;)if(e=Xe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Xe=n;else for(;Xe!==null;){e=Xe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,x=v.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?A:jr(e.type,A),x);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(w){yn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}return v=IT,IT=!1,v}function od(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&f1(e,t,s)}r=r.next}while(r!==i)}}function fv(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function d1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function kB(n){var e=n.alternate;e!==null&&(n.alternate=null,kB(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[As],delete e[Fd],delete e[qA],delete e[Yk],delete e[$k])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function HB(n){return n.tag===5||n.tag===3||n.tag===4}function BT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||HB(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function h1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ug));else if(i!==4&&(n=n.child,n!==null))for(h1(n,e,t),n=n.sibling;n!==null;)h1(n,e,t),n=n.sibling}function p1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(p1(n,e,t),n=n.sibling;n!==null;)p1(n,e,t),n=n.sibling}var Kn=null,Kr=!1;function Fo(n,e,t){for(t=t.child;t!==null;)zB(n,e,t),t=t.sibling}function zB(n,e,t){if(ws&&typeof ws.onCommitFiberUnmount=="function")try{ws.onCommitFiberUnmount(iv,t)}catch{}switch(t.tag){case 5:di||$c(t,e);case 6:var i=Kn,r=Kr;Kn=null,Fo(n,e,t),Kn=i,Kr=r,Kn!==null&&(Kr?(n=Kn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Kn.removeChild(t.stateNode));break;case 18:Kn!==null&&(Kr?(n=Kn,t=t.stateNode,n.nodeType===8?Gx(n.parentNode,t):n.nodeType===1&&Gx(n,t),Pd(n)):Gx(Kn,t.stateNode));break;case 4:i=Kn,r=Kr,Kn=t.stateNode.containerInfo,Kr=!0,Fo(n,e,t),Kn=i,Kr=r;break;case 0:case 11:case 14:case 15:if(!di&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&f1(t,e,o),r=r.next}while(r!==i)}Fo(n,e,t);break;case 1:if(!di&&($c(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){yn(t,e,a)}Fo(n,e,t);break;case 21:Fo(n,e,t);break;case 22:t.mode&1?(di=(i=di)||t.memoizedState!==null,Fo(n,e,t),di=i):Fo(n,e,t);break;default:Fo(n,e,t)}}function LT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new dH),e.forEach(function(i){var r=SH.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function zr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kn=a.stateNode,Kr=!1;break e;case 3:Kn=a.stateNode.containerInfo,Kr=!0;break e;case 4:Kn=a.stateNode.containerInfo,Kr=!0;break e}a=a.return}if(Kn===null)throw Error(we(160));zB(s,o,r),Kn=null,Kr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){yn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GB(e,n),e=e.sibling}function GB(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(zr(e,n),xs(n),i&4){try{od(3,n,n.return),fv(3,n)}catch(A){yn(n,n.return,A)}try{od(5,n,n.return)}catch(A){yn(n,n.return,A)}}break;case 1:zr(e,n),xs(n),i&512&&t!==null&&$c(t,t.return);break;case 5:if(zr(e,n),xs(n),i&512&&t!==null&&$c(t,t.return),n.flags&32){var r=n.stateNode;try{Cd(r,"")}catch(A){yn(n,n.return,A)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&uI(r,s),UA(a,o);var c=UA(a,s);for(o=0;o<l.length;o+=2){var f=l[o],h=l[o+1];f==="style"?mI(r,h):f==="dangerouslySetInnerHTML"?hI(r,h):f==="children"?Cd(r,h):ES(r,f,h,c)}switch(a){case"input":LA(r,s);break;case"textarea":fI(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?au(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?au(r,!!s.multiple,s.defaultValue,!0):au(r,!!s.multiple,s.multiple?[]:"",!1))}r[Fd]=s}catch(A){yn(n,n.return,A)}}break;case 6:if(zr(e,n),xs(n),i&4){if(n.stateNode===null)throw Error(we(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(A){yn(n,n.return,A)}}break;case 3:if(zr(e,n),xs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Pd(e.containerInfo)}catch(A){yn(n,n.return,A)}break;case 4:zr(e,n),xs(n);break;case 13:zr(e,n),xs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(rM=wn())),i&4&&LT(n);break;case 22:if(f=t!==null&&t.memoizedState!==null,n.mode&1?(di=(c=di)||f,zr(e,n),di=c):zr(e,n),xs(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!f&&n.mode&1)for(Xe=n,f=n.child;f!==null;){for(h=Xe=f;Xe!==null;){switch(p=Xe,m=p.child,p.tag){case 0:case 11:case 14:case 15:od(4,p,p.return);break;case 1:$c(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(A){yn(i,t,A)}}break;case 5:$c(p,p.return);break;case 22:if(p.memoizedState!==null){FT(h);continue}}m!==null?(m.return=p,Xe=m):FT(h)}f=f.sibling}e:for(f=null,h=n;;){if(h.tag===5){if(f===null){f=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=pI("display",o))}catch(A){yn(n,n.return,A)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(A){yn(n,n.return,A)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:zr(e,n),xs(n),i&4&&LT(n);break;case 21:break;default:zr(e,n),xs(n)}}function xs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(HB(t)){var i=t;break e}t=t.return}throw Error(we(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Cd(r,""),i.flags&=-33);var s=BT(n);p1(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=BT(n);h1(n,a,o);break;default:throw Error(we(161))}}catch(l){yn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function pH(n,e,t){Xe=n,VB(n)}function VB(n,e,t){for(var i=(n.mode&1)!==0;Xe!==null;){var r=Xe,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||tm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||di;a=tm;var c=di;if(tm=o,(di=l)&&!c)for(Xe=r;Xe!==null;)o=Xe,l=o.child,o.tag===22&&o.memoizedState!==null?NT(r):l!==null?(l.return=o,Xe=l):NT(r);for(;s!==null;)Xe=s,VB(s),s=s.sibling;Xe=r,tm=a,di=c}DT(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Xe=s):DT(n)}}function DT(n){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:di||fv(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!di)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:jr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yT(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}yT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Pd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}di||e.flags&512&&d1(e)}catch(p){yn(e,e.return,p)}}if(e===n){Xe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function FT(n){for(;Xe!==null;){var e=Xe;if(e===n){Xe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function NT(n){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{fv(4,e)}catch(l){yn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){yn(e,r,l)}}var s=e.return;try{d1(e)}catch(l){yn(e,s,l)}break;case 5:var o=e.return;try{d1(e)}catch(l){yn(e,o,l)}}}catch(l){yn(e,e.return,l)}if(e===n){Xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xe=a;break}Xe=e.return}}var mH=Math.ceil,Yg=So.ReactCurrentDispatcher,nM=So.ReactCurrentOwner,Br=So.ReactCurrentBatchConfig,Ot=0,Wn=null,Rn=null,qn=0,er=0,Qc=Sa(0),Fn=0,zd=null,Fl=0,dv=0,iM=0,ad=null,Hi=null,rM=0,wu=1/0,Ys=null,$g=!1,m1=null,oa=null,nm=!1,ea=null,Qg=0,ld=0,g1=null,gg=-1,vg=0;function Bi(){return Ot&6?wn():gg!==-1?gg:gg=wn()}function aa(n){return n.mode&1?Ot&2&&qn!==0?qn&-qn:qk.transition!==null?(vg===0&&(vg=TI()),vg):(n=Xt,n!==0||(n=window.event,n=n===void 0?16:DI(n.type)),n):1}function Zr(n,e,t,i){if(50<ld)throw ld=0,g1=null,Error(we(185));dh(n,t,i),(!(Ot&2)||n!==Wn)&&(n===Wn&&(!(Ot&2)&&(dv|=t),Fn===4&&Qo(n,qn)),Xi(n,i),t===1&&Ot===0&&!(e.mode&1)&&(wu=wn()+500,lv&&Ma()))}function Xi(n,e){var t=n.callbackNode;qU(n,e);var i=Dg(n,n===Wn?qn:0);if(i===0)t!==null&&jC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&jC(t),e===1)n.tag===0?Qk(OT.bind(null,n)):ZI(OT.bind(null,n)),Jk(function(){!(Ot&6)&&Ma()}),t=null;else{switch(bI(i)){case 1:t=PS;break;case 4:t=EI;break;case 16:t=Lg;break;case 536870912:t=CI;break;default:t=Lg}t=QB(t,WB.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function WB(n,e){if(gg=-1,vg=0,Ot&6)throw Error(we(327));var t=n.callbackNode;if(du()&&n.callbackNode!==t)return null;var i=Dg(n,n===Wn?qn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=qg(n,i);else{e=i;var r=Ot;Ot|=2;var s=XB();(Wn!==n||qn!==e)&&(Ys=null,wu=wn()+500,Sl(n,e));do try{yH();break}catch(a){jB(n,a)}while(!0);VS(),Yg.current=s,Ot=r,Rn!==null?e=0:(Wn=null,qn=0,e=Fn)}if(e!==0){if(e===2&&(r=VA(n),r!==0&&(i=r,e=v1(n,r))),e===1)throw t=zd,Sl(n,0),Qo(n,i),Xi(n,wn()),t;if(e===6)Qo(n,i);else{if(r=n.current.alternate,!(i&30)&&!gH(r)&&(e=qg(n,i),e===2&&(s=VA(n),s!==0&&(i=s,e=v1(n,s))),e===1))throw t=zd,Sl(n,0),Qo(n,i),Xi(n,wn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(we(345));case 2:el(n,Hi,Ys);break;case 3:if(Qo(n,i),(i&130023424)===i&&(e=rM+500-wn(),10<e)){if(Dg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Bi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=QA(el.bind(null,n,Hi,Ys),e);break}el(n,Hi,Ys);break;case 4:if(Qo(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-qr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=wn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*mH(i/1960))-i,10<i){n.timeoutHandle=QA(el.bind(null,n,Hi,Ys),i);break}el(n,Hi,Ys);break;case 5:el(n,Hi,Ys);break;default:throw Error(we(329))}}}return Xi(n,wn()),n.callbackNode===t?WB.bind(null,n):null}function v1(n,e){var t=ad;return n.current.memoizedState.isDehydrated&&(Sl(n,e).flags|=256),n=qg(n,e),n!==2&&(e=Hi,Hi=t,e!==null&&y1(e)),n}function y1(n){Hi===null?Hi=n:Hi.push.apply(Hi,n)}function gH(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!ns(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qo(n,e){for(e&=~iM,e&=~dv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-qr(e),i=1<<t;n[t]=-1,e&=~i}}function OT(n){if(Ot&6)throw Error(we(327));du();var e=Dg(n,0);if(!(e&1))return Xi(n,wn()),null;var t=qg(n,e);if(n.tag!==0&&t===2){var i=VA(n);i!==0&&(e=i,t=v1(n,i))}if(t===1)throw t=zd,Sl(n,0),Qo(n,e),Xi(n,wn()),t;if(t===6)throw Error(we(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,el(n,Hi,Ys),Xi(n,wn()),null}function sM(n,e){var t=Ot;Ot|=1;try{return n(e)}finally{Ot=t,Ot===0&&(wu=wn()+500,lv&&Ma())}}function Nl(n){ea!==null&&ea.tag===0&&!(Ot&6)&&du();var e=Ot;Ot|=1;var t=Br.transition,i=Xt;try{if(Br.transition=null,Xt=1,n)return n()}finally{Xt=i,Br.transition=t,Ot=e,!(Ot&6)&&Ma()}}function oM(){er=Qc.current,Zt(Qc)}function Sl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Xk(t)),Rn!==null)for(t=Rn.return;t!==null;){var i=t;switch(HS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&kg();break;case 3:Su(),Zt(Wi),Zt(xi),YS();break;case 5:KS(i);break;case 4:Su();break;case 13:Zt(cn);break;case 19:Zt(cn);break;case 10:WS(i.type._context);break;case 22:case 23:oM()}t=t.return}if(Wn=n,Rn=n=la(n.current,null),qn=er=e,Fn=0,zd=null,iM=dv=Fl=0,Hi=ad=null,cl!==null){for(e=0;e<cl.length;e++)if(t=cl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}cl=null}return n}function jB(n,e){do{var t=Rn;try{if(VS(),hg.current=Kg,Jg){for(var i=hn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Jg=!1}if(Dl=0,Vn=Dn=hn=null,sd=!1,Ud=0,nM.current=null,t===null||t.return===null){Fn=1,zd=e,Rn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=qn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=wT(o);if(m!==null){m.flags&=-257,ET(m,o,a,s,e),m.mode&1&&MT(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var A=new Set;A.add(l),e.updateQueue=A}else v.add(l);break e}else{if(!(e&1)){MT(s,c,e),aM();break e}l=Error(we(426))}}else if(sn&&a.mode&1){var x=wT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ET(x,o,a,s,e),zS(Mu(l,a));break e}}s=l=Mu(l,a),Fn!==4&&(Fn=2),ad===null?ad=[s]:ad.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=bB(s,l,e);vT(s,g);break e;case 1:a=l;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(oa===null||!oa.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=RB(s,a,e);vT(s,w);break e}}s=s.return}while(s!==null)}KB(t)}catch(R){e=R,Rn===t&&t!==null&&(Rn=t=t.return);continue}break}while(!0)}function XB(){var n=Yg.current;return Yg.current=Kg,n===null?Kg:n}function aM(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Wn===null||!(Fl&268435455)&&!(dv&268435455)||Qo(Wn,qn)}function qg(n,e){var t=Ot;Ot|=2;var i=XB();(Wn!==n||qn!==e)&&(Ys=null,Sl(n,e));do try{vH();break}catch(r){jB(n,r)}while(!0);if(VS(),Ot=t,Yg.current=i,Rn!==null)throw Error(we(261));return Wn=null,qn=0,Fn}function vH(){for(;Rn!==null;)JB(Rn)}function yH(){for(;Rn!==null&&!VU();)JB(Rn)}function JB(n){var e=$B(n.alternate,n,er);n.memoizedProps=n.pendingProps,e===null?KB(n):Rn=e,nM.current=null}function KB(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=fH(t,e),t!==null){t.flags&=32767,Rn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Fn=6,Rn=null;return}}else if(t=uH(t,e,er),t!==null){Rn=t;return}if(e=e.sibling,e!==null){Rn=e;return}Rn=e=n}while(e!==null);Fn===0&&(Fn=5)}function el(n,e,t){var i=Xt,r=Br.transition;try{Br.transition=null,Xt=1,xH(n,e,t,i)}finally{Br.transition=r,Xt=i}return null}function xH(n,e,t,i){do du();while(ea!==null);if(Ot&6)throw Error(we(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(we(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(ZU(n,s),n===Wn&&(Rn=Wn=null,qn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||nm||(nm=!0,QB(Lg,function(){return du(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Br.transition,Br.transition=null;var o=Xt;Xt=1;var a=Ot;Ot|=4,nM.current=null,hH(n,t),GB(t,n),kk(YA),Fg=!!KA,YA=KA=null,n.current=t,pH(t),WU(),Ot=a,Xt=o,Br.transition=s}else n.current=t;if(nm&&(nm=!1,ea=n,Qg=r),s=n.pendingLanes,s===0&&(oa=null),JU(t.stateNode),Xi(n,wn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if($g)throw $g=!1,n=m1,m1=null,n;return Qg&1&&n.tag!==0&&du(),s=n.pendingLanes,s&1?n===g1?ld++:(ld=0,g1=n):ld=0,Ma(),null}function du(){if(ea!==null){var n=bI(Qg),e=Br.transition,t=Xt;try{if(Br.transition=null,Xt=16>n?16:n,ea===null)var i=!1;else{if(n=ea,ea=null,Qg=0,Ot&6)throw Error(we(331));var r=Ot;for(Ot|=4,Xe=n.current;Xe!==null;){var s=Xe,o=s.child;if(Xe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Xe=c;Xe!==null;){var f=Xe;switch(f.tag){case 0:case 11:case 15:od(8,f,s)}var h=f.child;if(h!==null)h.return=f,Xe=h;else for(;Xe!==null;){f=Xe;var p=f.sibling,m=f.return;if(kB(f),f===c){Xe=null;break}if(p!==null){p.return=m,Xe=p;break}Xe=m}}}var v=s.alternate;if(v!==null){var A=v.child;if(A!==null){v.child=null;do{var x=A.sibling;A.sibling=null,A=x}while(A!==null)}}Xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xe=o;else e:for(;Xe!==null;){if(s=Xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:od(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Xe=g;break e}Xe=s.return}}var _=n.current;for(Xe=_;Xe!==null;){o=Xe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Xe=S;else e:for(o=_;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fv(9,a)}}catch(R){yn(a,a.return,R)}if(a===o){Xe=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Xe=w;break e}Xe=a.return}}if(Ot=r,Ma(),ws&&typeof ws.onPostCommitFiberRoot=="function")try{ws.onPostCommitFiberRoot(iv,n)}catch{}i=!0}return i}finally{Xt=t,Br.transition=e}}return!1}function UT(n,e,t){e=Mu(t,e),e=bB(n,e,1),n=sa(n,e,1),e=Bi(),n!==null&&(dh(n,1,e),Xi(n,e))}function yn(n,e,t){if(n.tag===3)UT(n,n,t);else for(;e!==null;){if(e.tag===3){UT(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(oa===null||!oa.has(i))){n=Mu(t,n),n=RB(e,n,1),e=sa(e,n,1),n=Bi(),e!==null&&(dh(e,1,n),Xi(e,n));break}}e=e.return}}function _H(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Bi(),n.pingedLanes|=n.suspendedLanes&t,Wn===n&&(qn&t)===t&&(Fn===4||Fn===3&&(qn&130023424)===qn&&500>wn()-rM?Sl(n,0):iM|=t),Xi(n,e)}function YB(n,e){e===0&&(n.mode&1?(e=Xp,Xp<<=1,!(Xp&130023424)&&(Xp=4194304)):e=1);var t=Bi();n=go(n,e),n!==null&&(dh(n,e,t),Xi(n,t))}function AH(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),YB(n,t)}function SH(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(we(314))}i!==null&&i.delete(e),YB(n,t)}var $B;$B=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Wi.current)Gi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Gi=!1,cH(n,e,t);Gi=!!(n.flags&131072)}else Gi=!1,sn&&e.flags&1048576&&eB(e,Gg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;mg(n,e),n=e.pendingProps;var r=xu(e,xi.current);fu(e,t),r=QS(null,e,i,n,r,t);var s=qS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ji(i)?(s=!0,Hg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,XS(e),r.updater=uv,e.stateNode=r,r._reactInternals=e,r1(e,i,n,t),e=a1(null,e,i,!0,s,t)):(e.tag=0,sn&&s&&kS(e),bi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(mg(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=wH(i),n=jr(i,n),r){case 0:e=o1(null,e,i,n,t);break e;case 1:e=bT(null,e,i,n,t);break e;case 11:e=CT(null,e,i,n,t);break e;case 14:e=TT(null,e,i,jr(i.type,n),t);break e}throw Error(we(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jr(i,r),o1(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jr(i,r),bT(n,e,i,r,t);case 3:e:{if(LB(e),n===null)throw Error(we(387));i=e.pendingProps,s=e.memoizedState,r=s.element,oB(n,e),jg(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Mu(Error(we(423)),e),e=RT(n,e,i,t,r);break e}else if(i!==r){r=Mu(Error(we(424)),e),e=RT(n,e,i,t,r);break e}else for(tr=ra(e.stateNode.containerInfo.firstChild),rr=e,sn=!0,Yr=null,t=rB(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(_u(),i===r){e=vo(n,e,t);break e}bi(n,e,i,t)}e=e.child}return e;case 5:return aB(e),n===null&&t1(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,$A(i,r)?o=null:s!==null&&$A(i,s)&&(e.flags|=32),BB(n,e),bi(n,e,o,t),e.child;case 6:return n===null&&t1(e),null;case 13:return DB(n,e,t);case 4:return JS(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Au(e,null,i,t):bi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jr(i,r),CT(n,e,i,r,t);case 7:return bi(n,e,e.pendingProps,t),e.child;case 8:return bi(n,e,e.pendingProps.children,t),e.child;case 12:return bi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Qt(Vg,i._currentValue),i._currentValue=o,s!==null)if(ns(s.value,o)){if(s.children===r.children&&!Wi.current){e=vo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=oo(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),n1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(we(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),n1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,fu(e,t),r=Lr(r),i=i(r),e.flags|=1,bi(n,e,i,t),e.child;case 14:return i=e.type,r=jr(i,e.pendingProps),r=jr(i.type,r),TT(n,e,i,r,t);case 15:return PB(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:jr(i,r),mg(n,e),e.tag=1,ji(i)?(n=!0,Hg(e)):n=!1,fu(e,t),TB(e,i,r),r1(e,i,r,t),a1(null,e,i,!0,n,t);case 19:return FB(n,e,t);case 22:return IB(n,e,t)}throw Error(we(156,e.tag))};function QB(n,e){return wI(n,e)}function MH(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(n,e,t,i){return new MH(n,e,t,i)}function lM(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wH(n){if(typeof n=="function")return lM(n)?1:0;if(n!=null){if(n=n.$$typeof,n===TS)return 11;if(n===bS)return 14}return 2}function la(n,e){var t=n.alternate;return t===null?(t=Pr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function yg(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")lM(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case zc:return Ml(t.children,r,s,e);case CS:o=8,r|=8;break;case bA:return n=Pr(12,t,e,r|2),n.elementType=bA,n.lanes=s,n;case RA:return n=Pr(13,t,e,r),n.elementType=RA,n.lanes=s,n;case PA:return n=Pr(19,t,e,r),n.elementType=PA,n.lanes=s,n;case aI:return hv(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case sI:o=10;break e;case oI:o=9;break e;case TS:o=11;break e;case bS:o=14;break e;case Ko:o=16,i=null;break e}throw Error(we(130,n==null?n:typeof n,""))}return e=Pr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Ml(n,e,t,i){return n=Pr(7,n,i,e),n.lanes=t,n}function hv(n,e,t,i){return n=Pr(22,n,i,e),n.elementType=aI,n.lanes=t,n.stateNode={isHidden:!1},n}function $x(n,e,t){return n=Pr(6,n,null,e),n.lanes=t,n}function Qx(n,e,t){return e=Pr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function EH(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ix(0),this.expirationTimes=Ix(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ix(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function cM(n,e,t,i,r,s,o,a,l){return n=new EH(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},XS(s),n}function CH(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function qB(n){if(!n)return fa;n=n._reactInternals;e:{if(Yl(n)!==n||n.tag!==1)throw Error(we(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(n.tag===1){var t=n.type;if(ji(t))return qI(n,t,e)}return e}function ZB(n,e,t,i,r,s,o,a,l){return n=cM(t,i,!0,n,r,s,o,a,l),n.context=qB(null),t=n.current,i=Bi(),r=aa(t),s=oo(i,r),s.callback=e??null,sa(t,s,r),n.current.lanes=r,dh(n,r,i),Xi(n,i),n}function pv(n,e,t,i){var r=e.current,s=Bi(),o=aa(r);return t=qB(t),e.context===null?e.context=t:e.pendingContext=t,e=oo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=sa(r,e,o),n!==null&&(Zr(n,r,o,s),dg(n,r,o)),o}function Zg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function uM(n,e){kT(n,e),(n=n.alternate)&&kT(n,e)}function TH(){return null}var eL=typeof reportError=="function"?reportError:function(n){console.error(n)};function fM(n){this._internalRoot=n}mv.prototype.render=fM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(we(409));pv(n,e,null,null)};mv.prototype.unmount=fM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Nl(function(){pv(null,n,null,null)}),e[mo]=null}};function mv(n){this._internalRoot=n}mv.prototype.unstable_scheduleHydration=function(n){if(n){var e=II();n={blockedOn:null,target:n,priority:e};for(var t=0;t<$o.length&&e!==0&&e<$o[t].priority;t++);$o.splice(t,0,n),t===0&&LI(n)}};function dM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function HT(){}function bH(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Zg(o);s.call(c)}}var o=ZB(e,i,n,0,null,!1,!1,"",HT);return n._reactRootContainer=o,n[mo]=o.current,Ld(n.nodeType===8?n.parentNode:n),Nl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Zg(l);a.call(c)}}var l=cM(n,0,!1,null,null,!1,!1,"",HT);return n._reactRootContainer=l,n[mo]=l.current,Ld(n.nodeType===8?n.parentNode:n),Nl(function(){pv(e,l,t,i)}),l}function vv(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Zg(o);a.call(l)}}pv(e,o,n,r)}else o=bH(t,e,n,r,i);return Zg(o)}RI=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Kf(e.pendingLanes);t!==0&&(IS(e,t|1),Xi(e,wn()),!(Ot&6)&&(wu=wn()+500,Ma()))}break;case 13:Nl(function(){var i=go(n,1);if(i!==null){var r=Bi();Zr(i,n,1,r)}}),uM(n,1)}};BS=function(n){if(n.tag===13){var e=go(n,134217728);if(e!==null){var t=Bi();Zr(e,n,134217728,t)}uM(n,134217728)}};PI=function(n){if(n.tag===13){var e=aa(n),t=go(n,e);if(t!==null){var i=Bi();Zr(t,n,e,i)}uM(n,e)}};II=function(){return Xt};BI=function(n,e){var t=Xt;try{return Xt=n,e()}finally{Xt=t}};HA=function(n,e,t){switch(e){case"input":if(LA(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=av(i);if(!r)throw Error(we(90));cI(i),LA(i,r)}}}break;case"textarea":fI(n,t);break;case"select":e=t.value,e!=null&&au(n,!!t.multiple,e,!1)}};yI=sM;xI=Nl;var RH={usingClientEntryPoint:!1,Events:[ph,jc,av,gI,vI,sM]},Cf={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PH={bundleType:Cf.bundleType,version:Cf.version,rendererPackageName:Cf.rendererPackageName,rendererConfig:Cf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:So.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=SI(n),n===null?null:n.stateNode},findFiberByHostInstance:Cf.findFiberByHostInstance||TH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{iv=im.inject(PH),ws=im}catch{}}fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RH;fr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dM(e))throw Error(we(200));return CH(n,e,null,t)};fr.createRoot=function(n,e){if(!dM(n))throw Error(we(299));var t=!1,i="",r=eL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=cM(n,1,!1,null,null,t,!1,i,r),n[mo]=e.current,Ld(n.nodeType===8?n.parentNode:n),new fM(e)};fr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(we(188)):(n=Object.keys(n).join(","),Error(we(268,n)));return n=SI(e),n=n===null?null:n.stateNode,n};fr.flushSync=function(n){return Nl(n)};fr.hydrate=function(n,e,t){if(!gv(e))throw Error(we(200));return vv(null,n,e,!0,t)};fr.hydrateRoot=function(n,e,t){if(!dM(n))throw Error(we(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=eL;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=ZB(e,null,n,1,t??null,r,!1,s,o),n[mo]=e.current,Ld(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new mv(e)};fr.render=function(n,e,t){if(!gv(e))throw Error(we(200));return vv(null,n,e,!1,t)};fr.unmountComponentAtNode=function(n){if(!gv(n))throw Error(we(40));return n._reactRootContainer?(Nl(function(){vv(null,null,n,!1,function(){n._reactRootContainer=null,n[mo]=null})}),!0):!1};fr.unstable_batchedUpdates=sM;fr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!gv(t))throw Error(we(200));if(n==null||n._reactInternals===void 0)throw Error(we(38));return vv(n,e,t,!1,i)};fr.version="18.3.1-next-f1338f8080-20240426";function tL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tL)}catch(n){console.error(n)}}tL(),tI.exports=fr;var es=tI.exports,nL,zT=es;nL=zT.createRoot,zT.hydrateRoot;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gd(){return Gd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Gd.apply(this,arguments)}var fl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(fl||(fl={}));const GT="popstate";function IH(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return x1("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:e0(r)}return LH(e,t,null,n)}function ts(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function BH(){return Math.random().toString(36).substr(2,8)}function VT(n,e){return{usr:n.state,key:n.key,idx:e}}function x1(n,e,t,i){return t===void 0&&(t=null),Gd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?yv(e):e,{state:t,key:e&&e.key||i||BH()})}function e0(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function yv(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function LH(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=fl.Pop,l=null,c=f();c==null&&(c=0,o.replaceState(Gd({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function h(){a=fl.Pop;let x=f(),g=x==null?null:x-c;c=x,l&&l({action:a,location:A.location,delta:g})}function p(x,g){a=fl.Push;let _=x1(A.location,x,g);c=f()+1;let S=VT(_,c),w=A.createHref(_);try{o.pushState(S,"",w)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(w)}s&&l&&l({action:a,location:A.location,delta:1})}function m(x,g){a=fl.Replace;let _=x1(A.location,x,g);c=f();let S=VT(_,c),w=A.createHref(_);o.replaceState(S,"",w),s&&l&&l({action:a,location:A.location,delta:0})}function v(x){let g=r.location.origin!=="null"?r.location.origin:r.location.href,_=typeof x=="string"?x:e0(x);return _=_.replace(/ $/,"%20"),ts(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let A={get action(){return a},get location(){return n(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(GT,h),l=x,()=>{r.removeEventListener(GT,h),l=null}},createHref(x){return e(r,x)},createURL:v,encodeLocation(x){let g=v(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return A}var WT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(WT||(WT={}));function iL(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function DH(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?yv(n):n;return{pathname:t?t.startsWith("/")?t:FH(t,e):e,search:OH(i),hash:UH(r)}}function FH(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function qx(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NH(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rL(n,e){let t=NH(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function sL(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=yv(n):(r=Gd({},n),ts(!r.pathname||!r.pathname.includes("?"),qx("?","pathname","search",r)),ts(!r.pathname||!r.pathname.includes("#"),qx("#","pathname","hash",r)),ts(!r.search||!r.search.includes("#"),qx("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;r.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=DH(r,a),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const oL=n=>n.join("/").replace(/\/\/+/g,"/"),OH=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,UH=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,aL=["post","put","patch","delete"];new Set(aL);const kH=["get",...aL];new Set(kH);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function t0(){return t0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},t0.apply(this,arguments)}const lL=D.createContext(null),Hu=D.createContext(null),hM=D.createContext(null),xv=D.createContext({outlet:null,matches:[],isDataRoute:!1});function HH(n,e){let{relative:t}=e===void 0?{}:e;_v()||ts(!1);let{basename:i,navigator:r}=D.useContext(Hu),{hash:s,pathname:o,search:a}=uL(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:oL([i,o])),r.createHref({pathname:l,search:a,hash:s})}function _v(){return D.useContext(hM)!=null}function pM(){return _v()||ts(!1),D.useContext(hM).location}function cL(n){D.useContext(Hu).static||D.useLayoutEffect(n)}function zH(){let{isDataRoute:n}=D.useContext(xv);return n?XH():GH()}function GH(){_v()||ts(!1);let n=D.useContext(lL),{basename:e,future:t,navigator:i}=D.useContext(Hu),{matches:r}=D.useContext(xv),{pathname:s}=pM(),o=JSON.stringify(rL(r,t.v7_relativeSplatPath)),a=D.useRef(!1);return cL(()=>{a.current=!0}),D.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=sL(c,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:oL([e,h.pathname])),(f.replace?i.replace:i.push)(h,f.state,f)},[e,i,o,s,n])}function uL(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=D.useContext(Hu),{matches:r}=D.useContext(xv),{pathname:s}=pM(),o=JSON.stringify(rL(r,i.v7_relativeSplatPath));return D.useMemo(()=>sL(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}var fL=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(fL||{}),dL=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(dL||{});function VH(n){let e=D.useContext(lL);return e||ts(!1),e}function WH(n){let e=D.useContext(xv);return e||ts(!1),e}function jH(n){let e=WH(),t=e.matches[e.matches.length-1];return t.route.id||ts(!1),t.route.id}function XH(){let{router:n}=VH(fL.UseNavigateStable),e=jH(dL.UseNavigateStable),t=D.useRef(!1);return cL(()=>{t.current=!0}),D.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,t0({fromRouteId:e},s)))},[n,e])}function JH(n){let{basename:e="/",children:t=null,location:i,navigationType:r=fl.Pop,navigator:s,static:o=!1,future:a}=n;_v()&&ts(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:s,static:o,future:t0({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=yv(i));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:v="default"}=i,A=D.useMemo(()=>{let x=iL(f,l);return x==null?null:{location:{pathname:x,search:h,hash:p,state:m,key:v},navigationType:r}},[l,f,h,p,m,v,r]);return A==null?null:D.createElement(Hu.Provider,{value:c},D.createElement(hM.Provider,{children:t,value:A}))}new Promise(()=>{});/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _1(){return _1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_1.apply(this,arguments)}function KH(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function YH(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $H(n,e){return n.button===0&&(!e||e==="_self")&&!YH(n)}const QH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],qH="6";try{window.__reactRouterVersion=qH}catch{}const ZH="startTransition",jT=Rg[ZH];function e4(n){let{basename:e,children:t,future:i,window:r}=n,s=D.useRef();s.current==null&&(s.current=IH({window:r,v5Compat:!0}));let o=s.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},f=D.useCallback(h=>{c&&jT?jT(()=>l(h)):l(h)},[l,c]);return D.useLayoutEffect(()=>o.listen(f),[o,f]),D.createElement(JH,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const t4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i4=D.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:f,unstable_viewTransition:h}=e,p=KH(e,QH),{basename:m}=D.useContext(Hu),v,A=!1;if(typeof c=="string"&&n4.test(c)&&(v=c,t4))try{let S=new URL(window.location.href),w=c.startsWith("//")?new URL(S.protocol+c):new URL(c),R=iL(w.pathname,m);w.origin===S.origin&&R!=null?c=R+w.search+w.hash:A=!0}catch{}let x=HH(c,{relative:r}),g=r4(c,{replace:o,state:a,target:l,preventScrollReset:f,relative:r,unstable_viewTransition:h});function _(S){i&&i(S),S.defaultPrevented||g(S)}return D.createElement("a",_1({},p,{href:v||x,onClick:A||s?i:_,ref:t,target:l}))});var XT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(XT||(XT={}));var JT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(JT||(JT={}));function r4(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=zH(),c=pM(),f=uL(n,{relative:o});return D.useCallback(h=>{if($H(h,t)){h.preventDefault();let p=i!==void 0?i:e0(c)===e0(f);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,f,i,r,t,n,s,o,a])}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const zu="169",tl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hL=0,A1=1,pL=2,s4=3,mL=0,Av=1,cd=2,Xr=3,Bs=0,Li=1,Qr=2,ao=0,wl=1,S1=2,M1=3,w1=4,gL=5,qo=100,vL=101,yL=102,xL=103,_L=104,AL=200,SL=201,ML=202,wL=203,n0=204,i0=205,EL=206,CL=207,TL=208,bL=209,RL=210,PL=211,IL=212,BL=213,LL=214,r0=0,s0=1,o0=2,Ol=3,a0=4,l0=5,c0=6,u0=7,gh=0,DL=1,FL=2,Cs=0,NL=1,OL=2,UL=3,mM=4,kL=5,HL=6,zL=7,E1="attached",GL="detached",Sv=300,yo=301,da=302,Vd=303,Wd=304,Gu=306,ha=1e3,nr=1001,Eu=1002,Nn=1003,Mv=1004,o4=1004,dl=1005,a4=1005,_n=1006,hu=1007,l4=1007,Ir=1008,c4=1008,is=1009,gM=1010,vM=1011,Cu=1012,wv=1013,xo=1014,Vi=1015,Vu=1016,Ev=1017,Cv=1018,Ul=1020,yM=35902,xM=1021,_M=1022,mi=1023,AM=1024,SM=1025,El=1026,kl=1027,Tv=1028,vh=1029,MM=1030,bv=1031,u4=1032,Rv=1033,ud=33776,fd=33777,dd=33778,hd=33779,f0=35840,d0=35841,h0=35842,p0=35843,m0=36196,g0=37492,v0=37496,y0=37808,x0=37809,_0=37810,A0=37811,S0=37812,M0=37813,w0=37814,E0=37815,C0=37816,T0=37817,b0=37818,R0=37819,P0=37820,I0=37821,pd=36492,B0=36494,L0=36495,wM=36283,D0=36284,F0=36285,N0=36286,VL=2200,WL=2201,jL=2202,Tu=2300,bu=2301,xg=2302,hl=2400,pl=2401,jd=2402,Pv=2500,EM=2501,XL=0,CM=1,O0=2,JL=3200,KL=3201,f4=3202,d4=3203,wa=0,YL=1,Zs="",Cr="srgb",Mo="srgb-linear",Iv="display-p3",yh="display-p3-linear",Xd="linear",Yt="srgb",Jd="rec709",Kd="p3",h4=0,il=7680,p4=7681,m4=7682,g4=7683,v4=34055,y4=34056,x4=5386,_4=512,A4=513,S4=514,M4=515,w4=516,E4=517,C4=518,C1=519,$L=512,QL=513,qL=514,TM=515,ZL=516,eD=517,tD=518,nD=519,Yd=35044,Cl=35048,T4=35040,b4=35045,R4=35049,P4=35041,I4=35046,B4=35050,L4=35042,D4="100",T1="300 es",Ss=2e3,$d=2001;class as{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const li=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KT=1234567;const Tl=Math.PI/180,Ru=180/Math.PI;function sr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(li[n&255]+li[n>>8&255]+li[n>>16&255]+li[n>>24&255]+"-"+li[e&255]+li[e>>8&255]+"-"+li[e>>16&15|64]+li[e>>24&255]+"-"+li[t&63|128]+li[t>>8&255]+"-"+li[t>>16&255]+li[t>>24&255]+li[i&255]+li[i>>8&255]+li[i>>16&255]+li[i>>24&255]).toLowerCase()}function xn(n,e,t){return Math.max(e,Math.min(t,n))}function bM(n,e){return(n%e+e)%e}function F4(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function N4(n,e,t){return n!==e?(t-n)/(e-n):0}function md(n,e,t){return(1-t)*n+t*e}function O4(n,e,t,i){return md(n,e,1-Math.exp(-t*i))}function U4(n,e=1){return e-Math.abs(bM(n,e*2)-e)}function k4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function H4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function z4(n,e){return n+Math.floor(Math.random()*(e-n+1))}function G4(n,e){return n+Math.random()*(e-n)}function V4(n){return n*(.5-Math.random())}function W4(n){n!==void 0&&(KT=n);let e=KT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function j4(n){return n*Tl}function X4(n){return n*Ru}function J4(n){return(n&n-1)===0&&n!==0}function K4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Y4(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function $4(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),f=o((e+i)/2),h=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*f,l*h,l*p,a*c);break;case"YZY":n.set(l*p,a*f,l*h,a*c);break;case"ZXZ":n.set(l*h,l*p,a*f,a*c);break;case"XZX":n.set(a*f,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*f,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*f,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ri(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function St(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const iD={DEG2RAD:Tl,RAD2DEG:Ru,generateUUID:sr,clamp:xn,euclideanModulo:bM,mapLinear:F4,inverseLerp:N4,lerp:md,damp:O4,pingpong:U4,smoothstep:k4,smootherstep:H4,randInt:z4,randFloat:G4,randFloatSpread:V4,seededRandom:W4,degToRad:j4,radToDeg:X4,isPowerOfTwo:J4,ceilPowerOfTwo:K4,floorPowerOfTwo:Y4,setQuaternionFromProperEuler:$4,normalize:St,denormalize:Ri};class pe{constructor(e=0,t=0){pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(xn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class At{constructor(e,t,i,r,s,o,a,l,c){At.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=l,f[6]=i,f[7]=o,f[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],f=i[4],h=i[7],p=i[2],m=i[5],v=i[8],A=r[0],x=r[3],g=r[6],_=r[1],S=r[4],w=r[7],R=r[2],b=r[5],I=r[8];return s[0]=o*A+a*_+l*R,s[3]=o*x+a*S+l*b,s[6]=o*g+a*w+l*I,s[1]=c*A+f*_+h*R,s[4]=c*x+f*S+h*b,s[7]=c*g+f*w+h*I,s[2]=p*A+m*_+v*R,s[5]=p*x+m*S+v*b,s[8]=p*g+m*w+v*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8];return t*o*f-t*a*c-i*s*f+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8],h=f*o-a*c,p=a*l-f*s,m=c*s-o*l,v=t*h+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/v;return e[0]=h*A,e[1]=(r*c-f*i)*A,e[2]=(a*i-r*o)*A,e[3]=p*A,e[4]=(f*t-r*l)*A,e[5]=(r*s-a*t)*A,e[6]=m*A,e[7]=(i*l-c*t)*A,e[8]=(o*t-i*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Zx.makeScale(e,t)),this}rotate(e){return this.premultiply(Zx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Zx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Zx=new At;function rD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Q4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function qc(n,e){return new Q4[n](e)}function Qd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function sD(){const n=Qd("canvas");return n.style.display="block",n}const YT={};function _g(n){n in YT||(YT[n]=!0,console.warn(n))}function q4(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function Z4(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function ez(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const $T=new At().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),QT=new At().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Tf={[Mo]:{transfer:Xd,primaries:Jd,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[Cr]:{transfer:Yt,primaries:Jd,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[yh]:{transfer:Xd,primaries:Kd,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(QT),fromReference:n=>n.applyMatrix3($T)},[Iv]:{transfer:Yt,primaries:Kd,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(QT),fromReference:n=>n.applyMatrix3($T).convertLinearToSRGB()}},tz=new Set([Mo,yh]),Vt={enabled:!0,_workingColorSpace:Mo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!tz.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Tf[e].toReference,r=Tf[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Tf[n].primaries},getTransfer:function(n){return n===Zs?Xd:Tf[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(Tf[e].luminanceCoefficients)}};function pu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function e_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let vc;class oD{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{vc===void 0&&(vc=Qd("canvas")),vc.width=e.width,vc.height=e.height;const i=vc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=vc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Qd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=pu(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(pu(t[i]/255)*255):t[i]=pu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let nz=0;class ml{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:nz++}),this.uuid=sr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(t_(r[o].image)):s.push(t_(r[o]))}else s=t_(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function t_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?oD.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let iz=0;class en extends as{constructor(e=en.DEFAULT_IMAGE,t=en.DEFAULT_MAPPING,i=nr,r=nr,s=_n,o=Ir,a=mi,l=is,c=en.DEFAULT_ANISOTROPY,f=Zs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iz++}),this.uuid=sr(),this.name="",this.source=new ml(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new pe(0,0),this.repeat=new pe(1,1),this.center=new pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new At,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Sv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ha:e.x=e.x-Math.floor(e.x);break;case nr:e.x=e.x<0?0:1;break;case Eu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ha:e.y=e.y-Math.floor(e.y);break;case nr:e.y=e.y<0?0:1;break;case Eu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}en.DEFAULT_IMAGE=null;en.DEFAULT_MAPPING=Sv;en.DEFAULT_ANISOTROPY=1;class Nt{constructor(e=0,t=0,i=0,r=1){Nt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],f=l[4],h=l[8],p=l[1],m=l[5],v=l[9],A=l[2],x=l[6],g=l[10];if(Math.abs(f-p)<.01&&Math.abs(h-A)<.01&&Math.abs(v-x)<.01){if(Math.abs(f+p)<.1&&Math.abs(h+A)<.1&&Math.abs(v+x)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,w=(m+1)/2,R=(g+1)/2,b=(f+p)/4,I=(h+A)/4,B=(v+x)/4;return S>w&&S>R?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=b/i,s=I/i):w>R?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=b/r,s=B/r):R<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(R),i=I/s,r=B/s),this.set(i,r,s,t),this}let _=Math.sqrt((x-v)*(x-v)+(h-A)*(h-A)+(p-f)*(p-f));return Math.abs(_)<.001&&(_=1),this.x=(x-v)/_,this.y=(h-A)/_,this.z=(p-f)/_,this.w=Math.acos((c+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class aD extends as{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Nt(0,0,e,t),this.scissorTest=!1,this.viewport=new Nt(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:_n,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new en(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ml(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rs extends aD{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Bv extends en{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class rz extends rs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Bv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class RM extends en{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sz extends rs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new RM(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class jn{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],f=i[r+2],h=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=f,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=A;return}if(h!==A||l!==p||c!==m||f!==v){let x=1-a;const g=l*p+c*m+f*v+h*A,_=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const R=Math.sqrt(S),b=Math.atan2(R,g*_);x=Math.sin(x*b)/R,a=Math.sin(a*b)/R}const w=a*_;if(l=l*x+p*w,c=c*x+m*w,f=f*x+v*w,h=h*x+A*w,x===1-a){const R=1/Math.sqrt(l*l+c*c+f*f+h*h);l*=R,c*=R,f*=R,h*=R}}e[t]=l,e[t+1]=c,e[t+2]=f,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],f=i[r+3],h=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+f*h+l*m-c*p,e[t+1]=l*v+f*p+c*h-a*m,e[t+2]=c*v+f*m+a*p-l*h,e[t+3]=f*v-a*h-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),f=a(r/2),h=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*f*h+c*m*v,this._y=c*m*h-p*f*v,this._z=c*f*v+p*m*h,this._w=c*f*h-p*m*v;break;case"YXZ":this._x=p*f*h+c*m*v,this._y=c*m*h-p*f*v,this._z=c*f*v-p*m*h,this._w=c*f*h+p*m*v;break;case"ZXY":this._x=p*f*h-c*m*v,this._y=c*m*h+p*f*v,this._z=c*f*v+p*m*h,this._w=c*f*h-p*m*v;break;case"ZYX":this._x=p*f*h-c*m*v,this._y=c*m*h+p*f*v,this._z=c*f*v-p*m*h,this._w=c*f*h+p*m*v;break;case"YZX":this._x=p*f*h+c*m*v,this._y=c*m*h+p*f*v,this._z=c*f*v-p*m*h,this._w=c*f*h-p*m*v;break;case"XZY":this._x=p*f*h-c*m*v,this._y=c*m*h-p*f*v,this._z=c*f*v+p*m*h,this._w=c*f*h+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],f=t[6],h=t[10],p=i+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(f-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>h){const m=2*Math.sqrt(1+i-a-h);this._w=(f-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-i-h);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+f)/m}else{const m=2*Math.sqrt(1+h-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+f)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,f=t._w;return this._x=i*f+o*a+r*c-s*l,this._y=r*f+o*l+s*a-i*c,this._z=s*f+o*c+i*l-r*a,this._w=o*f-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),f=Math.atan2(c,a),h=Math.sin((1-t)*f)/c,p=Math.sin(t*f)/c;return this._w=o*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class O{constructor(e=0,t=0,i=0){O.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(qT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(qT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),f=2*(a*t-s*r),h=2*(s*i-o*t);return this.x=t+l*c+o*h-a*f,this.y=i+l*f+a*c-s*h,this.z=r+l*h+s*f-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return n_.copy(this).projectOnVector(e),this.sub(n_)}reflect(e){return this.sub(n_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(xn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const n_=new O,qT=new jn;class vi{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Gr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Gr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Gr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Gr):Gr.fromBufferAttribute(s,o),Gr.applyMatrix4(e.matrixWorld),this.expandByPoint(Gr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),rm.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),rm.copy(i.boundingBox)),rm.applyMatrix4(e.matrixWorld),this.union(rm)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Gr),Gr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bf),sm.subVectors(this.max,bf),yc.subVectors(e.a,bf),xc.subVectors(e.b,bf),_c.subVectors(e.c,bf),No.subVectors(xc,yc),Oo.subVectors(_c,xc),Ua.subVectors(yc,_c);let t=[0,-No.z,No.y,0,-Oo.z,Oo.y,0,-Ua.z,Ua.y,No.z,0,-No.x,Oo.z,0,-Oo.x,Ua.z,0,-Ua.x,-No.y,No.x,0,-Oo.y,Oo.x,0,-Ua.y,Ua.x,0];return!i_(t,yc,xc,_c,sm)||(t=[1,0,0,0,1,0,0,0,1],!i_(t,yc,xc,_c,sm))?!1:(om.crossVectors(No,Oo),t=[om.x,om.y,om.z],i_(t,yc,xc,_c,sm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Gr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Gr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Vs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Vs=[new O,new O,new O,new O,new O,new O,new O,new O],Gr=new O,rm=new vi,yc=new O,xc=new O,_c=new O,No=new O,Oo=new O,Ua=new O,bf=new O,sm=new O,om=new O,ka=new O;function i_(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ka.fromArray(n,s);const a=r.x*Math.abs(ka.x)+r.y*Math.abs(ka.y)+r.z*Math.abs(ka.z),l=e.dot(ka),c=t.dot(ka),f=i.dot(ka);if(Math.max(-Math.max(l,c,f),Math.min(l,c,f))>a)return!1}return!0}const oz=new vi,Rf=new O,r_=new O;class Zn{constructor(e=new O,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):oz.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rf.subVectors(e,this.center);const t=Rf.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Rf,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(r_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rf.copy(e.center).add(r_)),this.expandByPoint(Rf.copy(e.center).sub(r_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ws=new O,s_=new O,am=new O,Uo=new O,o_=new O,lm=new O,a_=new O;class $l{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ws)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ws.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ws.copy(this.origin).addScaledVector(this.direction,t),Ws.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){s_.copy(e).add(t).multiplyScalar(.5),am.copy(t).sub(e).normalize(),Uo.copy(this.origin).sub(s_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(am),a=Uo.dot(this.direction),l=-Uo.dot(am),c=Uo.lengthSq(),f=Math.abs(1-o*o);let h,p,m,v;if(f>0)if(h=o*l-a,p=o*a-l,v=s*f,h>=0)if(p>=-v)if(p<=v){const A=1/f;h*=A,p*=A,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+c}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p<=-v?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c):p<=v?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(s_).addScaledVector(am,p),m}intersectSphere(e,t){Ws.subVectors(e.center,this.origin);const i=Ws.dot(this.direction),r=Ws.dot(Ws)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),f>=0?(s=(e.min.y-p.y)*f,o=(e.max.y-p.y)*f):(s=(e.max.y-p.y)*f,o=(e.min.y-p.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ws)!==null}intersectTriangle(e,t,i,r,s){o_.subVectors(t,e),lm.subVectors(i,e),a_.crossVectors(o_,lm);let o=this.direction.dot(a_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Uo.subVectors(this.origin,e);const l=a*this.direction.dot(lm.crossVectors(Uo,lm));if(l<0)return null;const c=a*this.direction.dot(o_.cross(Uo));if(c<0||l+c>o)return null;const f=-a*Uo.dot(a_);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rt{constructor(e,t,i,r,s,o,a,l,c,f,h,p,m,v,A,x){rt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,f,h,p,m,v,A,x)}set(e,t,i,r,s,o,a,l,c,f,h,p,m,v,A,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=f,g[10]=h,g[14]=p,g[3]=m,g[7]=v,g[11]=A,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Ac.setFromMatrixColumn(e,0).length(),s=1/Ac.setFromMatrixColumn(e,1).length(),o=1/Ac.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),f=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*f,m=o*h,v=a*f,A=a*h;t[0]=l*f,t[4]=-l*h,t[8]=c,t[1]=m+v*c,t[5]=p-A*c,t[9]=-a*l,t[2]=A-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*f,m=l*h,v=c*f,A=c*h;t[0]=p+A*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*h,t[5]=o*f,t[9]=-a,t[2]=m*a-v,t[6]=A+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*f,m=l*h,v=c*f,A=c*h;t[0]=p-A*a,t[4]=-o*h,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*f,t[9]=A-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*f,m=o*h,v=a*f,A=a*h;t[0]=l*f,t[4]=v*c-m,t[8]=p*c+A,t[1]=l*h,t[5]=A*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,A=a*c;t[0]=l*f,t[4]=A-p*h,t[8]=v*h+m,t[1]=h,t[5]=o*f,t[9]=-a*f,t[2]=-c*f,t[6]=m*h+v,t[10]=p-A*h}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,A=a*c;t[0]=l*f,t[4]=-h,t[8]=c*f,t[1]=p*h+A,t[5]=o*f,t[9]=m*h-v,t[2]=v*h-m,t[6]=a*f,t[10]=A*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(az,e,lz)}lookAt(e,t,i){const r=this.elements;return qi.subVectors(e,t),qi.lengthSq()===0&&(qi.z=1),qi.normalize(),ko.crossVectors(i,qi),ko.lengthSq()===0&&(Math.abs(i.z)===1?qi.x+=1e-4:qi.z+=1e-4,qi.normalize(),ko.crossVectors(i,qi)),ko.normalize(),cm.crossVectors(qi,ko),r[0]=ko.x,r[4]=cm.x,r[8]=qi.x,r[1]=ko.y,r[5]=cm.y,r[9]=qi.y,r[2]=ko.z,r[6]=cm.z,r[10]=qi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],f=i[1],h=i[5],p=i[9],m=i[13],v=i[2],A=i[6],x=i[10],g=i[14],_=i[3],S=i[7],w=i[11],R=i[15],b=r[0],I=r[4],B=r[8],z=r[12],C=r[1],P=r[5],j=r[9],X=r[13],ee=r[2],le=r[6],$=r[10],K=r[14],L=r[3],G=r[7],V=r[11],te=r[15];return s[0]=o*b+a*C+l*ee+c*L,s[4]=o*I+a*P+l*le+c*G,s[8]=o*B+a*j+l*$+c*V,s[12]=o*z+a*X+l*K+c*te,s[1]=f*b+h*C+p*ee+m*L,s[5]=f*I+h*P+p*le+m*G,s[9]=f*B+h*j+p*$+m*V,s[13]=f*z+h*X+p*K+m*te,s[2]=v*b+A*C+x*ee+g*L,s[6]=v*I+A*P+x*le+g*G,s[10]=v*B+A*j+x*$+g*V,s[14]=v*z+A*X+x*K+g*te,s[3]=_*b+S*C+w*ee+R*L,s[7]=_*I+S*P+w*le+R*G,s[11]=_*B+S*j+w*$+R*V,s[15]=_*z+S*X+w*K+R*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],f=e[2],h=e[6],p=e[10],m=e[14],v=e[3],A=e[7],x=e[11],g=e[15];return v*(+s*l*h-r*c*h-s*a*p+i*c*p+r*a*m-i*l*m)+A*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*f-s*l*f)+x*(+t*c*h-t*a*m-s*o*h+i*o*m+s*a*f-i*c*f)+g*(-r*a*f-t*l*h+t*a*p+r*o*h-i*o*p+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],m=e[11],v=e[12],A=e[13],x=e[14],g=e[15],_=h*x*c-A*p*c+A*l*m-a*x*m-h*l*g+a*p*g,S=v*p*c-f*x*c-v*l*m+o*x*m+f*l*g-o*p*g,w=f*A*c-v*h*c+v*a*m-o*A*m-f*a*g+o*h*g,R=v*h*l-f*A*l-v*a*p+o*A*p+f*a*x-o*h*x,b=t*_+i*S+r*w+s*R;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/b;return e[0]=_*I,e[1]=(A*p*s-h*x*s-A*r*m+i*x*m+h*r*g-i*p*g)*I,e[2]=(a*x*s-A*l*s+A*r*c-i*x*c-a*r*g+i*l*g)*I,e[3]=(h*l*s-a*p*s-h*r*c+i*p*c+a*r*m-i*l*m)*I,e[4]=S*I,e[5]=(f*x*s-v*p*s+v*r*m-t*x*m-f*r*g+t*p*g)*I,e[6]=(v*l*s-o*x*s-v*r*c+t*x*c+o*r*g-t*l*g)*I,e[7]=(o*p*s-f*l*s+f*r*c-t*p*c-o*r*m+t*l*m)*I,e[8]=w*I,e[9]=(v*h*s-f*A*s-v*i*m+t*A*m+f*i*g-t*h*g)*I,e[10]=(o*A*s-v*a*s+v*i*c-t*A*c-o*i*g+t*a*g)*I,e[11]=(f*a*s-o*h*s-f*i*c+t*h*c+o*i*m-t*a*m)*I,e[12]=R*I,e[13]=(f*A*r-v*h*r+v*i*p-t*A*p-f*i*x+t*h*x)*I,e[14]=(v*a*r-o*A*r-v*i*l+t*A*l+o*i*x-t*a*x)*I,e[15]=(o*h*r-f*a*r+f*i*l-t*h*l-o*i*p+t*a*p)*I,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,f=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,f*a+i,f*l-r*o,0,c*l-r*a,f*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,f=o+o,h=a+a,p=s*c,m=s*f,v=s*h,A=o*f,x=o*h,g=a*h,_=l*c,S=l*f,w=l*h,R=i.x,b=i.y,I=i.z;return r[0]=(1-(A+g))*R,r[1]=(m+w)*R,r[2]=(v-S)*R,r[3]=0,r[4]=(m-w)*b,r[5]=(1-(p+g))*b,r[6]=(x+_)*b,r[7]=0,r[8]=(v+S)*I,r[9]=(x-_)*I,r[10]=(1-(p+A))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Ac.set(r[0],r[1],r[2]).length();const o=Ac.set(r[4],r[5],r[6]).length(),a=Ac.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Vr.copy(this);const c=1/s,f=1/o,h=1/a;return Vr.elements[0]*=c,Vr.elements[1]*=c,Vr.elements[2]*=c,Vr.elements[4]*=f,Vr.elements[5]*=f,Vr.elements[6]*=f,Vr.elements[8]*=h,Vr.elements[9]*=h,Vr.elements[10]*=h,t.setFromRotationMatrix(Vr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ss){const l=this.elements,c=2*s/(t-e),f=2*s/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===Ss)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===$d)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ss){const l=this.elements,c=1/(t-e),f=1/(i-r),h=1/(o-s),p=(t+e)*c,m=(i+r)*f;let v,A;if(a===Ss)v=(o+s)*h,A=-2*h;else if(a===$d)v=s*h,A=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=A,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ac=new O,Vr=new rt,az=new O(0,0,0),lz=new O(1,1,1),ko=new O,cm=new O,qi=new O,ZT=new rt,eb=new jn;class lr{constructor(e=0,t=0,i=0,r=lr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],f=r[9],h=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-xn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(xn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-xn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(xn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-xn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return ZT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ZT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return eb.setFromEuler(this),this.setFromQuaternion(eb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}lr.DEFAULT_ORDER="XYZ";class bl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let cz=0;const tb=new O,Sc=new jn,js=new rt,um=new O,Pf=new O,uz=new O,fz=new jn,nb=new O(1,0,0),ib=new O(0,1,0),rb=new O(0,0,1),sb={type:"added"},dz={type:"removed"},Mc={type:"childadded",child:null},l_={type:"childremoved",child:null};class It extends as{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cz++}),this.uuid=sr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=It.DEFAULT_UP.clone();const e=new O,t=new lr,i=new jn,r=new O(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new rt},normalMatrix:{value:new At}}),this.matrix=new rt,this.matrixWorld=new rt,this.matrixAutoUpdate=It.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=It.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new bl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Sc.setFromAxisAngle(e,t),this.quaternion.multiply(Sc),this}rotateOnWorldAxis(e,t){return Sc.setFromAxisAngle(e,t),this.quaternion.premultiply(Sc),this}rotateX(e){return this.rotateOnAxis(nb,e)}rotateY(e){return this.rotateOnAxis(ib,e)}rotateZ(e){return this.rotateOnAxis(rb,e)}translateOnAxis(e,t){return tb.copy(e).applyQuaternion(this.quaternion),this.position.add(tb.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(nb,e)}translateY(e){return this.translateOnAxis(ib,e)}translateZ(e){return this.translateOnAxis(rb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(js.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?um.copy(e):um.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Pf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?js.lookAt(Pf,um,this.up):js.lookAt(um,Pf,this.up),this.quaternion.setFromRotationMatrix(js),r&&(js.extractRotation(r.matrixWorld),Sc.setFromRotationMatrix(js),this.quaternion.premultiply(Sc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(sb),Mc.child=e,this.dispatchEvent(Mc),Mc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(dz),l_.child=e,this.dispatchEvent(l_),l_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),js.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),js.multiply(e.parent.matrixWorld)),e.applyMatrix4(js),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(sb),Mc.child=e,this.dispatchEvent(Mc),Mc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pf,e,uz),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pf,fz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,f=l.length;c<f;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),f=o(e.images),h=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),f.length>0&&(i.images=f),h.length>0&&(i.shapes=h),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const c in a){const f=a[c];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}It.DEFAULT_UP=new O(0,1,0);It.DEFAULT_MATRIX_AUTO_UPDATE=!0;It.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wr=new O,Xs=new O,c_=new O,Js=new O,wc=new O,Ec=new O,ob=new O,u_=new O,f_=new O,d_=new O,h_=new Nt,p_=new Nt,m_=new Nt;class zi{constructor(e=new O,t=new O,i=new O){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Wr.subVectors(e,t),r.cross(Wr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Wr.subVectors(r,t),Xs.subVectors(i,t),c_.subVectors(e,t);const o=Wr.dot(Wr),a=Wr.dot(Xs),l=Wr.dot(c_),c=Xs.dot(Xs),f=Xs.dot(c_),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const p=1/h,m=(c*l-a*f)*p,v=(o*f-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Js)===null?!1:Js.x>=0&&Js.y>=0&&Js.x+Js.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Js)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Js.x),l.addScaledVector(o,Js.y),l.addScaledVector(a,Js.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return h_.setScalar(0),p_.setScalar(0),m_.setScalar(0),h_.fromBufferAttribute(e,t),p_.fromBufferAttribute(e,i),m_.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(h_,s.x),o.addScaledVector(p_,s.y),o.addScaledVector(m_,s.z),o}static isFrontFacing(e,t,i,r){return Wr.subVectors(i,t),Xs.subVectors(e,t),Wr.cross(Xs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wr.subVectors(this.c,this.b),Xs.subVectors(this.a,this.b),Wr.cross(Xs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return zi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return zi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;wc.subVectors(r,i),Ec.subVectors(s,i),u_.subVectors(e,i);const l=wc.dot(u_),c=Ec.dot(u_);if(l<=0&&c<=0)return t.copy(i);f_.subVectors(e,r);const f=wc.dot(f_),h=Ec.dot(f_);if(f>=0&&h<=f)return t.copy(r);const p=l*h-f*c;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(wc,o);d_.subVectors(e,s);const m=wc.dot(d_),v=Ec.dot(d_);if(v>=0&&m<=v)return t.copy(s);const A=m*c-l*v;if(A<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(Ec,a);const x=f*v-m*h;if(x<=0&&h-f>=0&&m-v>=0)return ob.subVectors(s,r),a=(h-f)/(h-f+(m-v)),t.copy(r).addScaledVector(ob,a);const g=1/(x+A+p);return o=A*g,a=p*g,t.copy(i).addScaledVector(wc,o).addScaledVector(Ec,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ho={h:0,s:0,l:0},fm={h:0,s:0,l:0};function g_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class De{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Cr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Vt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Vt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Vt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Vt.workingColorSpace){if(e=bM(e,1),t=xn(t,0,1),i=xn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=g_(o,s,e+1/3),this.g=g_(o,s,e),this.b=g_(o,s,e-1/3)}return Vt.toWorkingColorSpace(this,r),this}setStyle(e,t=Cr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Cr){const i=lD[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=pu(e.r),this.g=pu(e.g),this.b=pu(e.b),this}copyLinearToSRGB(e){return this.r=e_(e.r),this.g=e_(e.g),this.b=e_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Cr){return Vt.fromWorkingColorSpace(ci.copy(this),e),Math.round(xn(ci.r*255,0,255))*65536+Math.round(xn(ci.g*255,0,255))*256+Math.round(xn(ci.b*255,0,255))}getHexString(e=Cr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Vt.workingColorSpace){Vt.fromWorkingColorSpace(ci.copy(this),t);const i=ci.r,r=ci.g,s=ci.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const f=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=f<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=f,e}getRGB(e,t=Vt.workingColorSpace){return Vt.fromWorkingColorSpace(ci.copy(this),t),e.r=ci.r,e.g=ci.g,e.b=ci.b,e}getStyle(e=Cr){Vt.fromWorkingColorSpace(ci.copy(this),e);const t=ci.r,i=ci.g,r=ci.b;return e!==Cr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ho),this.setHSL(Ho.h+e,Ho.s+t,Ho.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ho),e.getHSL(fm);const i=md(Ho.h,fm.h,t),r=md(Ho.s,fm.s,t),s=md(Ho.l,fm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ci=new De;De.NAMES=lD;let hz=0;class Pn extends as{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hz++}),this.uuid=sr(),this.name="",this.type="Material",this.blending=wl,this.side=Bs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=n0,this.blendDst=i0,this.blendEquation=qo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new De(0,0,0),this.blendAlpha=0,this.depthFunc=Ol,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=C1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=il,this.stencilZFail=il,this.stencilZPass=il,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==wl&&(i.blending=this.blending),this.side!==Bs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==n0&&(i.blendSrc=this.blendSrc),this.blendDst!==i0&&(i.blendDst=this.blendDst),this.blendEquation!==qo&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ol&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==C1&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==il&&(i.stencilFail=this.stencilFail),this.stencilZFail!==il&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==il&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ir extends Pn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lr,this.combine=gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const eo=pz();function pz(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,f=0;for(;!(c&8388608);)c<<=1,f-=8388608;c&=-8388609,f+=947912704,s[l]=c|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ki(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=xn(n,-65504,65504),eo.floatView[0]=n;const e=eo.uint32View[0],t=e>>23&511;return eo.baseTable[t]+((e&8388607)>>eo.shiftTable[t])}function $f(n){const e=n>>10;return eo.uint32View[0]=eo.mantissaTable[eo.offsetTable[e]+(n&1023)]+eo.exponentTable[e],eo.floatView[0]}const mz={toHalfFloat:ki,fromHalfFloat:$f},bn=new O,dm=new pe;class Ut{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Yd,this.updateRanges=[],this.gpuType=Vi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)dm.fromBufferAttribute(this,t),dm.applyMatrix3(e),this.setXY(t,dm.x,dm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)bn.fromBufferAttribute(this,t),bn.applyMatrix3(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)bn.fromBufferAttribute(this,t),bn.applyMatrix4(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)bn.fromBufferAttribute(this,t),bn.applyNormalMatrix(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)bn.fromBufferAttribute(this,t),bn.transformDirection(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ri(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=St(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ri(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ri(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ri(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ri(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Yd&&(e.usage=this.usage),e}}class gz extends Ut{constructor(e,t,i){super(new Int8Array(e),t,i)}}class vz extends Ut{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class yz extends Ut{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class xz extends Ut{constructor(e,t,i){super(new Int16Array(e),t,i)}}class PM extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class _z extends Ut{constructor(e,t,i){super(new Int32Array(e),t,i)}}class IM extends Ut{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Az extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=$f(this.array[e*this.itemSize]);return this.normalized&&(t=Ri(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=ki(t),this}getY(e){let t=$f(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ri(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=ki(t),this}getZ(e){let t=$f(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ri(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=ki(t),this}getW(e){let t=$f(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ri(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=ki(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=ki(t),this.array[e+1]=ki(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=ki(t),this.array[e+1]=ki(i),this.array[e+2]=ki(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=ki(t),this.array[e+1]=ki(i),this.array[e+2]=ki(r),this.array[e+3]=ki(s),this}}class qe extends Ut{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Sz=0;const Ar=new rt,v_=new It,Cc=new O,Zi=new vi,If=new vi,Gn=new O;class _t extends as{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sz++}),this.uuid=sr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rD(e)?IM:PM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new At().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ar.makeRotationFromQuaternion(e),this.applyMatrix4(Ar),this}rotateX(e){return Ar.makeRotationX(e),this.applyMatrix4(Ar),this}rotateY(e){return Ar.makeRotationY(e),this.applyMatrix4(Ar),this}rotateZ(e){return Ar.makeRotationZ(e),this.applyMatrix4(Ar),this}translate(e,t,i){return Ar.makeTranslation(e,t,i),this.applyMatrix4(Ar),this}scale(e,t,i){return Ar.makeScale(e,t,i),this.applyMatrix4(Ar),this}lookAt(e){return v_.lookAt(e),v_.updateMatrix(),this.applyMatrix4(v_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cc).negate(),this.translate(Cc.x,Cc.y,Cc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new qe(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Zi.setFromBufferAttribute(s),this.morphTargetsRelative?(Gn.addVectors(this.boundingBox.min,Zi.min),this.boundingBox.expandByPoint(Gn),Gn.addVectors(this.boundingBox.max,Zi.max),this.boundingBox.expandByPoint(Gn)):(this.boundingBox.expandByPoint(Zi.min),this.boundingBox.expandByPoint(Zi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new O,1/0);return}if(e){const i=this.boundingSphere.center;if(Zi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];If.setFromBufferAttribute(a),this.morphTargetsRelative?(Gn.addVectors(Zi.min,If.min),Zi.expandByPoint(Gn),Gn.addVectors(Zi.max,If.max),Zi.expandByPoint(Gn)):(Zi.expandByPoint(If.min),Zi.expandByPoint(If.max))}Zi.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Gn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Gn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,f=a.count;c<f;c++)Gn.fromBufferAttribute(a,c),l&&(Cc.fromBufferAttribute(e,c),Gn.add(Cc)),r=Math.max(r,i.distanceToSquared(Gn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ut(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<i.count;B++)a[B]=new O,l[B]=new O;const c=new O,f=new O,h=new O,p=new pe,m=new pe,v=new pe,A=new O,x=new O;function g(B,z,C){c.fromBufferAttribute(i,B),f.fromBufferAttribute(i,z),h.fromBufferAttribute(i,C),p.fromBufferAttribute(s,B),m.fromBufferAttribute(s,z),v.fromBufferAttribute(s,C),f.sub(c),h.sub(c),m.sub(p),v.sub(p);const P=1/(m.x*v.y-v.x*m.y);isFinite(P)&&(A.copy(f).multiplyScalar(v.y).addScaledVector(h,-m.y).multiplyScalar(P),x.copy(h).multiplyScalar(m.x).addScaledVector(f,-v.x).multiplyScalar(P),a[B].add(A),a[z].add(A),a[C].add(A),l[B].add(x),l[z].add(x),l[C].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let B=0,z=_.length;B<z;++B){const C=_[B],P=C.start,j=C.count;for(let X=P,ee=P+j;X<ee;X+=3)g(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const S=new O,w=new O,R=new O,b=new O;function I(B){R.fromBufferAttribute(r,B),b.copy(R);const z=a[B];S.copy(z),S.sub(R.multiplyScalar(R.dot(z))).normalize(),w.crossVectors(b,z);const P=w.dot(l[B])<0?-1:1;o.setXYZW(B,S.x,S.y,S.z,P)}for(let B=0,z=_.length;B<z;++B){const C=_[B],P=C.start,j=C.count;for(let X=P,ee=P+j;X<ee;X+=3)I(e.getX(X+0)),I(e.getX(X+1)),I(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ut(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new O,s=new O,o=new O,a=new O,l=new O,c=new O,f=new O,h=new O;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),A=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,x),f.subVectors(o,s),h.subVectors(r,s),f.cross(h),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,A),c.fromBufferAttribute(i,x),a.add(f),l.add(f),c.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(A,l.x,l.y,l.z),i.setXYZ(x,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),f.subVectors(o,s),h.subVectors(r,s),f.cross(h),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Gn.fromBufferAttribute(e,t),Gn.normalize(),e.setXYZ(t,Gn.x,Gn.y,Gn.z)}toNonIndexed(){function e(a,l){const c=a.array,f=a.itemSize,h=a.normalized,p=new c.constructor(l.length*f);let m=0,v=0;for(let A=0,x=l.length;A<x;A++){a.isInterleavedBufferAttribute?m=l[A]*a.data.stride+a.offset:m=l[A]*f;for(let g=0;g<f;g++)p[v++]=c[m++]}return new Ut(p,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new _t,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let f=0,h=c.length;f<h;f++){const p=c[f],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],f=[];for(let h=0,p=c.length;h<p;h++){const m=c[h];f.push(m.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const f=r[c];this.setAttribute(c,f.clone(t))}const s=e.morphAttributes;for(const c in s){const f=[],h=s[c];for(let p=0,m=h.length;p<m;p++)f.push(h[p].clone(t));this.morphAttributes[c]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,f=o.length;c<f;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ab=new rt,Ha=new $l,hm=new Zn,lb=new O,pm=new O,mm=new O,gm=new O,y_=new O,vm=new O,cb=new O,ym=new O;class En extends It{constructor(e=new _t,t=new ir){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){vm.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const f=a[l],h=s[l];f!==0&&(y_.fromBufferAttribute(h,e),o?vm.addScaledVector(y_,f):vm.addScaledVector(y_.sub(t),f))}t.add(vm)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),hm.copy(i.boundingSphere),hm.applyMatrix4(s),Ha.copy(e.ray).recast(e.near),!(hm.containsPoint(Ha.origin)===!1&&(Ha.intersectSphere(hm,lb)===null||Ha.origin.distanceToSquared(lb)>(e.far-e.near)**2))&&(ab.copy(s).invert(),Ha.copy(e.ray).applyMatrix4(ab),!(i.boundingBox!==null&&Ha.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Ha)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,f=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,A=p.length;v<A;v++){const x=p[v],g=o[x.materialIndex],_=Math.max(x.start,m.start),S=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let w=_,R=S;w<R;w+=3){const b=a.getX(w),I=a.getX(w+1),B=a.getX(w+2);r=xm(this,g,e,i,c,f,h,b,I,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),A=Math.min(a.count,m.start+m.count);for(let x=v,g=A;x<g;x+=3){const _=a.getX(x),S=a.getX(x+1),w=a.getX(x+2);r=xm(this,o,e,i,c,f,h,_,S,w),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,A=p.length;v<A;v++){const x=p[v],g=o[x.materialIndex],_=Math.max(x.start,m.start),S=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let w=_,R=S;w<R;w+=3){const b=w,I=w+1,B=w+2;r=xm(this,g,e,i,c,f,h,b,I,B),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),A=Math.min(l.count,m.start+m.count);for(let x=v,g=A;x<g;x+=3){const _=x,S=x+1,w=x+2;r=xm(this,o,e,i,c,f,h,_,S,w),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function Mz(n,e,t,i,r,s,o,a){let l;if(e.side===Li?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Bs,a),l===null)return null;ym.copy(a),ym.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(ym);return c<t.near||c>t.far?null:{distance:c,point:ym.clone(),object:n}}function xm(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,pm),n.getVertexPosition(l,mm),n.getVertexPosition(c,gm);const f=Mz(n,e,t,i,pm,mm,gm,cb);if(f){const h=new O;zi.getBarycoord(cb,pm,mm,gm,h),r&&(f.uv=zi.getInterpolatedAttribute(r,a,l,c,h,new pe)),s&&(f.uv1=zi.getInterpolatedAttribute(s,a,l,c,h,new pe)),o&&(f.normal=zi.getInterpolatedAttribute(o,a,l,c,h,new O),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new O,materialIndex:0};zi.getNormal(pm,mm,gm,p.normal),f.face=p,f.barycoord=h}return f}class Ql extends _t{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],f=[],h=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(f,3)),this.setAttribute("uv",new qe(h,2));function v(A,x,g,_,S,w,R,b,I,B,z){const C=w/I,P=R/B,j=w/2,X=R/2,ee=b/2,le=I+1,$=B+1;let K=0,L=0;const G=new O;for(let V=0;V<$;V++){const te=V*P-X;for(let ve=0;ve<le;ve++){const Le=ve*C-j;G[A]=Le*_,G[x]=te*S,G[g]=ee,c.push(G.x,G.y,G.z),G[A]=0,G[x]=0,G[g]=b>0?1:-1,f.push(G.x,G.y,G.z),h.push(ve/I),h.push(1-V/B),K+=1}}for(let V=0;V<B;V++)for(let te=0;te<I;te++){const ve=p+te+le*V,Le=p+te+le*(V+1),oe=p+(te+1)+le*(V+1),ye=p+(te+1)+le*V;l.push(ve,Le,ye),l.push(Le,oe,ye),L+=6}a.addGroup(m,L,z),m+=L,p+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ql(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Pu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ti(n){const e={};for(let t=0;t<n.length;t++){const i=Pu(n[t]);for(const r in i)e[r]=i[r]}return e}function wz(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function cD(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Vt.workingColorSpace}const uD={clone:Pu,merge:Ti};var Ez=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Cz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ss extends Pn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Ez,this.fragmentShader=Cz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pu(e.uniforms),this.uniformsGroups=wz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class xh extends It{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rt,this.projectionMatrix=new rt,this.projectionMatrixInverse=new rt,this.coordinateSystem=Ss}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const zo=new O,ub=new pe,fb=new pe;class un extends xh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ru*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Tl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ru*2*Math.atan(Math.tan(Tl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){zo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(zo.x,zo.y).multiplyScalar(-e/zo.z),zo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(zo.x,zo.y).multiplyScalar(-e/zo.z)}getViewSize(e,t){return this.getViewBounds(e,ub,fb),t.subVectors(fb,ub)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Tl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Tc=-90,bc=1;class BM extends It{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new un(Tc,bc,e,t);r.layers=this.layers,this.add(r);const s=new un(Tc,bc,e,t);s.layers=this.layers,this.add(s);const o=new un(Tc,bc,e,t);o.layers=this.layers,this.add(o);const a=new un(Tc,bc,e,t);a.layers=this.layers,this.add(a);const l=new un(Tc,bc,e,t);l.layers=this.layers,this.add(l);const c=new un(Tc,bc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Ss)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===$d)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,f]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(h,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class _h extends en{constructor(e,t,i,r,s,o,a,l,c,f){e=e!==void 0?e:[],t=t!==void 0?t:yo,super(e,t,i,r,s,o,a,l,c,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class LM extends rs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new _h(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:_n}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ql(5,5,5),s=new ss({name:"CubemapFromEquirect",uniforms:Pu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Li,blending:ao});s.uniforms.tEquirect.value=t;const o=new En(r,s),a=t.minFilter;return t.minFilter===Ir&&(t.minFilter=_n),new BM(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const x_=new O,Tz=new O,bz=new At;class qs{constructor(e=new O(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=x_.subVectors(i,t).cross(Tz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(x_),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||bz.getNormalMatrix(e),r=this.coplanarPoint(x_).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const za=new Zn,_m=new O;class Ah{constructor(e=new qs,t=new qs,i=new qs,r=new qs,s=new qs,o=new qs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ss){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],f=r[5],h=r[6],p=r[7],m=r[8],v=r[9],A=r[10],x=r[11],g=r[12],_=r[13],S=r[14],w=r[15];if(i[0].setComponents(l-s,p-c,x-m,w-g).normalize(),i[1].setComponents(l+s,p+c,x+m,w+g).normalize(),i[2].setComponents(l+o,p+f,x+v,w+_).normalize(),i[3].setComponents(l-o,p-f,x-v,w-_).normalize(),i[4].setComponents(l-a,p-h,x-A,w-S).normalize(),t===Ss)i[5].setComponents(l+a,p+h,x+A,w+S).normalize();else if(t===$d)i[5].setComponents(a,h,A,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),za.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),za.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(za)}intersectsSprite(e){return za.center.set(0,0,0),za.radius=.7071067811865476,za.applyMatrix4(e.matrixWorld),this.intersectsSphere(za)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(_m.x=r.normal.x>0?e.max.x:e.min.x,_m.y=r.normal.y>0?e.max.y:e.min.y,_m.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(_m)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function fD(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Rz(n){const e=new WeakMap;function t(a,l){const c=a.array,f=a.usage,h=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,f),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,c){const f=l.array,h=l.updateRanges;if(n.bindBuffer(c,a),h.length===0)n.bufferSubData(c,0,f);else{h.sort((m,v)=>m.start-v.start);let p=0;for(let m=1;m<h.length;m++){const v=h[p],A=h[m];A.start<=v.start+v.count+1?v.count=Math.max(v.count,A.start+A.count-v.start):(++p,h[p]=A)}h.length=p+1;for(let m=0,v=h.length;m<v;m++){const A=h[m];n.bufferSubData(c,A.start*f.BYTES_PER_ELEMENT,f,A.start,A.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class Wu extends _t{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,f=l+1,h=e/a,p=t/l,m=[],v=[],A=[],x=[];for(let g=0;g<f;g++){const _=g*p-o;for(let S=0;S<c;S++){const w=S*h-s;v.push(w,-_,0),A.push(0,0,1),x.push(S/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const S=_+c*g,w=_+c*(g+1),R=_+1+c*(g+1),b=_+1+c*g;m.push(S,w,b),m.push(w,R,b)}this.setIndex(m),this.setAttribute("position",new qe(v,3)),this.setAttribute("normal",new qe(A,3)),this.setAttribute("uv",new qe(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wu(e.width,e.height,e.widthSegments,e.heightSegments)}}var Pz=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Iz=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Bz=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Lz=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dz=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Fz=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Nz=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Oz=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Uz=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,kz=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Hz=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,zz=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Gz=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Vz=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Wz=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jz=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Xz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Jz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Kz=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Yz=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$z=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Qz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,qz=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Zz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,eG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,tG=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,nG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,iG=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,rG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,sG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,oG="gl_FragColor = linearToOutputTexel( gl_FragColor );",aG=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,lG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,cG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,uG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,fG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,dG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,pG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,mG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,gG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,vG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,yG=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,xG=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,_G=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,AG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,SG=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,MG=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,wG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,EG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,CG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,TG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,bG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,RG=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,PG=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,IG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,BG=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,LG=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DG=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,FG=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,NG=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,OG=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,UG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kG=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,HG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,zG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,GG=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,VG=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,WG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,jG=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,XG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,JG=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,KG=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,YG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$G=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ZG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,eV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,tV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,nV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,iV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,rV=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,sV=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oV=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,aV=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,lV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,cV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,uV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,fV=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,dV=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hV=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,pV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,mV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,gV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,vV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,yV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,xV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,_V=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,AV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,SV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,MV=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,wV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,EV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,TV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,bV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const RV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,PV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,BV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,DV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,FV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,NV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,OV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,UV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,kV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,HV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,VV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,WV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,KV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$V=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,QV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,e9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,n9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,r9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,s9=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,a9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,l9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mt={alphahash_fragment:Pz,alphahash_pars_fragment:Iz,alphamap_fragment:Bz,alphamap_pars_fragment:Lz,alphatest_fragment:Dz,alphatest_pars_fragment:Fz,aomap_fragment:Nz,aomap_pars_fragment:Oz,batching_pars_vertex:Uz,batching_vertex:kz,begin_vertex:Hz,beginnormal_vertex:zz,bsdfs:Gz,iridescence_fragment:Vz,bumpmap_pars_fragment:Wz,clipping_planes_fragment:jz,clipping_planes_pars_fragment:Xz,clipping_planes_pars_vertex:Jz,clipping_planes_vertex:Kz,color_fragment:Yz,color_pars_fragment:$z,color_pars_vertex:Qz,color_vertex:qz,common:Zz,cube_uv_reflection_fragment:eG,defaultnormal_vertex:tG,displacementmap_pars_vertex:nG,displacementmap_vertex:iG,emissivemap_fragment:rG,emissivemap_pars_fragment:sG,colorspace_fragment:oG,colorspace_pars_fragment:aG,envmap_fragment:lG,envmap_common_pars_fragment:cG,envmap_pars_fragment:uG,envmap_pars_vertex:fG,envmap_physical_pars_fragment:SG,envmap_vertex:dG,fog_vertex:hG,fog_pars_vertex:pG,fog_fragment:mG,fog_pars_fragment:gG,gradientmap_pars_fragment:vG,lightmap_pars_fragment:yG,lights_lambert_fragment:xG,lights_lambert_pars_fragment:_G,lights_pars_begin:AG,lights_toon_fragment:MG,lights_toon_pars_fragment:wG,lights_phong_fragment:EG,lights_phong_pars_fragment:CG,lights_physical_fragment:TG,lights_physical_pars_fragment:bG,lights_fragment_begin:RG,lights_fragment_maps:PG,lights_fragment_end:IG,logdepthbuf_fragment:BG,logdepthbuf_pars_fragment:LG,logdepthbuf_pars_vertex:DG,logdepthbuf_vertex:FG,map_fragment:NG,map_pars_fragment:OG,map_particle_fragment:UG,map_particle_pars_fragment:kG,metalnessmap_fragment:HG,metalnessmap_pars_fragment:zG,morphinstance_vertex:GG,morphcolor_vertex:VG,morphnormal_vertex:WG,morphtarget_pars_vertex:jG,morphtarget_vertex:XG,normal_fragment_begin:JG,normal_fragment_maps:KG,normal_pars_fragment:YG,normal_pars_vertex:$G,normal_vertex:QG,normalmap_pars_fragment:qG,clearcoat_normal_fragment_begin:ZG,clearcoat_normal_fragment_maps:eV,clearcoat_pars_fragment:tV,iridescence_pars_fragment:nV,opaque_fragment:iV,packing:rV,premultiplied_alpha_fragment:sV,project_vertex:oV,dithering_fragment:aV,dithering_pars_fragment:lV,roughnessmap_fragment:cV,roughnessmap_pars_fragment:uV,shadowmap_pars_fragment:fV,shadowmap_pars_vertex:dV,shadowmap_vertex:hV,shadowmask_pars_fragment:pV,skinbase_vertex:mV,skinning_pars_vertex:gV,skinning_vertex:vV,skinnormal_vertex:yV,specularmap_fragment:xV,specularmap_pars_fragment:_V,tonemapping_fragment:AV,tonemapping_pars_fragment:SV,transmission_fragment:MV,transmission_pars_fragment:wV,uv_pars_fragment:EV,uv_pars_vertex:CV,uv_vertex:TV,worldpos_vertex:bV,background_vert:RV,background_frag:PV,backgroundCube_vert:IV,backgroundCube_frag:BV,cube_vert:LV,cube_frag:DV,depth_vert:FV,depth_frag:NV,distanceRGBA_vert:OV,distanceRGBA_frag:UV,equirect_vert:kV,equirect_frag:HV,linedashed_vert:zV,linedashed_frag:GV,meshbasic_vert:VV,meshbasic_frag:WV,meshlambert_vert:jV,meshlambert_frag:XV,meshmatcap_vert:JV,meshmatcap_frag:KV,meshnormal_vert:YV,meshnormal_frag:$V,meshphong_vert:QV,meshphong_frag:qV,meshphysical_vert:ZV,meshphysical_frag:e9,meshtoon_vert:t9,meshtoon_frag:n9,points_vert:i9,points_frag:r9,shadow_vert:s9,shadow_frag:o9,sprite_vert:a9,sprite_frag:l9},Ne={common:{diffuse:{value:new De(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new At},alphaMap:{value:null},alphaMapTransform:{value:new At},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new At}},envmap:{envMap:{value:null},envMapRotation:{value:new At},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new At}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new At}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new At},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new At},normalScale:{value:new pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new At},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new At}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new At}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new At}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new De(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new De(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new At},alphaTest:{value:0},uvTransform:{value:new At}},sprite:{diffuse:{value:new De(16777215)},opacity:{value:1},center:{value:new pe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new At},alphaMap:{value:null},alphaMapTransform:{value:new At},alphaTest:{value:0}}},$r={basic:{uniforms:Ti([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:Mt.meshbasic_vert,fragmentShader:Mt.meshbasic_frag},lambert:{uniforms:Ti([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new De(0)}}]),vertexShader:Mt.meshlambert_vert,fragmentShader:Mt.meshlambert_frag},phong:{uniforms:Ti([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new De(0)},specular:{value:new De(1118481)},shininess:{value:30}}]),vertexShader:Mt.meshphong_vert,fragmentShader:Mt.meshphong_frag},standard:{uniforms:Ti([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new De(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mt.meshphysical_vert,fragmentShader:Mt.meshphysical_frag},toon:{uniforms:Ti([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new De(0)}}]),vertexShader:Mt.meshtoon_vert,fragmentShader:Mt.meshtoon_frag},matcap:{uniforms:Ti([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:Mt.meshmatcap_vert,fragmentShader:Mt.meshmatcap_frag},points:{uniforms:Ti([Ne.points,Ne.fog]),vertexShader:Mt.points_vert,fragmentShader:Mt.points_frag},dashed:{uniforms:Ti([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mt.linedashed_vert,fragmentShader:Mt.linedashed_frag},depth:{uniforms:Ti([Ne.common,Ne.displacementmap]),vertexShader:Mt.depth_vert,fragmentShader:Mt.depth_frag},normal:{uniforms:Ti([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:Mt.meshnormal_vert,fragmentShader:Mt.meshnormal_frag},sprite:{uniforms:Ti([Ne.sprite,Ne.fog]),vertexShader:Mt.sprite_vert,fragmentShader:Mt.sprite_frag},background:{uniforms:{uvTransform:{value:new At},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mt.background_vert,fragmentShader:Mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new At}},vertexShader:Mt.backgroundCube_vert,fragmentShader:Mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mt.cube_vert,fragmentShader:Mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mt.equirect_vert,fragmentShader:Mt.equirect_frag},distanceRGBA:{uniforms:Ti([Ne.common,Ne.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mt.distanceRGBA_vert,fragmentShader:Mt.distanceRGBA_frag},shadow:{uniforms:Ti([Ne.lights,Ne.fog,{color:{value:new De(0)},opacity:{value:1}}]),vertexShader:Mt.shadow_vert,fragmentShader:Mt.shadow_frag}};$r.physical={uniforms:Ti([$r.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new At},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new At},clearcoatNormalScale:{value:new pe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new At},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new At},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new At},sheen:{value:0},sheenColor:{value:new De(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new At},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new At},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new At},transmissionSamplerSize:{value:new pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new At},attenuationDistance:{value:0},attenuationColor:{value:new De(0)},specularColor:{value:new De(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new At},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new At},anisotropyVector:{value:new pe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new At}}]),vertexShader:Mt.meshphysical_vert,fragmentShader:Mt.meshphysical_frag};const Am={r:0,b:0,g:0},Ga=new lr,c9=new rt;function u9(n,e,t,i,r,s,o){const a=new De(0);let l=s===!0?0:1,c,f,h=null,p=0,m=null;function v(_){let S=_.isScene===!0?_.background:null;return S&&S.isTexture&&(S=(_.backgroundBlurriness>0?t:e).get(S)),S}function A(_){let S=!1;const w=v(_);w===null?g(a,l):w&&w.isColor&&(g(w,1),S=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?i.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(_,S){const w=v(S);w&&(w.isCubeTexture||w.mapping===Gu)?(f===void 0&&(f=new En(new Ql(1,1,1),new ss({name:"BackgroundCubeMaterial",uniforms:Pu($r.backgroundCube.uniforms),vertexShader:$r.backgroundCube.vertexShader,fragmentShader:$r.backgroundCube.fragmentShader,side:Li,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(R,b,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Ga.copy(S.backgroundRotation),Ga.x*=-1,Ga.y*=-1,Ga.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Ga.y*=-1,Ga.z*=-1),f.material.uniforms.envMap.value=w,f.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(c9.makeRotationFromEuler(Ga)),f.material.toneMapped=Vt.getTransfer(w.colorSpace)!==Yt,(h!==w||p!==w.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,h=w,p=w.version,m=n.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new En(new Wu(2,2),new ss({name:"BackgroundMaterial",uniforms:Pu($r.background.uniforms),vertexShader:$r.background.vertexShader,fragmentShader:$r.background.fragmentShader,side:Bs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=Vt.getTransfer(w.colorSpace)!==Yt,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(h!==w||p!==w.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,h=w,p=w.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function g(_,S){_.getRGB(Am,cD(n)),i.buffers.color.setClear(Am.r,Am.g,Am.b,S,o)}return{getClearColor:function(){return a},setClearColor:function(_,S=1){a.set(_),l=S,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(a,l)},render:A,addToRenderList:x}}function f9(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(C,P,j,X,ee){let le=!1;const $=h(X,j,P);s!==$&&(s=$,c(s.object)),le=m(C,X,j,ee),le&&v(C,X,j,ee),ee!==null&&e.update(ee,n.ELEMENT_ARRAY_BUFFER),(le||o)&&(o=!1,w(C,P,j,X),ee!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ee).buffer))}function l(){return n.createVertexArray()}function c(C){return n.bindVertexArray(C)}function f(C){return n.deleteVertexArray(C)}function h(C,P,j){const X=j.wireframe===!0;let ee=i[C.id];ee===void 0&&(ee={},i[C.id]=ee);let le=ee[P.id];le===void 0&&(le={},ee[P.id]=le);let $=le[X];return $===void 0&&($=p(l()),le[X]=$),$}function p(C){const P=[],j=[],X=[];for(let ee=0;ee<t;ee++)P[ee]=0,j[ee]=0,X[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:j,attributeDivisors:X,object:C,attributes:{},index:null}}function m(C,P,j,X){const ee=s.attributes,le=P.attributes;let $=0;const K=j.getAttributes();for(const L in K)if(K[L].location>=0){const V=ee[L];let te=le[L];if(te===void 0&&(L==="instanceMatrix"&&C.instanceMatrix&&(te=C.instanceMatrix),L==="instanceColor"&&C.instanceColor&&(te=C.instanceColor)),V===void 0||V.attribute!==te||te&&V.data!==te.data)return!0;$++}return s.attributesNum!==$||s.index!==X}function v(C,P,j,X){const ee={},le=P.attributes;let $=0;const K=j.getAttributes();for(const L in K)if(K[L].location>=0){let V=le[L];V===void 0&&(L==="instanceMatrix"&&C.instanceMatrix&&(V=C.instanceMatrix),L==="instanceColor"&&C.instanceColor&&(V=C.instanceColor));const te={};te.attribute=V,V&&V.data&&(te.data=V.data),ee[L]=te,$++}s.attributes=ee,s.attributesNum=$,s.index=X}function A(){const C=s.newAttributes;for(let P=0,j=C.length;P<j;P++)C[P]=0}function x(C){g(C,0)}function g(C,P){const j=s.newAttributes,X=s.enabledAttributes,ee=s.attributeDivisors;j[C]=1,X[C]===0&&(n.enableVertexAttribArray(C),X[C]=1),ee[C]!==P&&(n.vertexAttribDivisor(C,P),ee[C]=P)}function _(){const C=s.newAttributes,P=s.enabledAttributes;for(let j=0,X=P.length;j<X;j++)P[j]!==C[j]&&(n.disableVertexAttribArray(j),P[j]=0)}function S(C,P,j,X,ee,le,$){$===!0?n.vertexAttribIPointer(C,P,j,ee,le):n.vertexAttribPointer(C,P,j,X,ee,le)}function w(C,P,j,X){A();const ee=X.attributes,le=j.getAttributes(),$=P.defaultAttributeValues;for(const K in le){const L=le[K];if(L.location>=0){let G=ee[K];if(G===void 0&&(K==="instanceMatrix"&&C.instanceMatrix&&(G=C.instanceMatrix),K==="instanceColor"&&C.instanceColor&&(G=C.instanceColor)),G!==void 0){const V=G.normalized,te=G.itemSize,ve=e.get(G);if(ve===void 0)continue;const Le=ve.buffer,oe=ve.type,ye=ve.bytesPerElement,Ee=oe===n.INT||oe===n.UNSIGNED_INT||G.gpuType===wv;if(G.isInterleavedBufferAttribute){const Se=G.data,lt=Se.stride,st=G.offset;if(Se.isInstancedInterleavedBuffer){for(let ut=0;ut<L.locationSize;ut++)g(L.location+ut,Se.meshPerAttribute);C.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let ut=0;ut<L.locationSize;ut++)x(L.location+ut);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let ut=0;ut<L.locationSize;ut++)S(L.location+ut,te/L.locationSize,oe,V,lt*ye,(st+te/L.locationSize*ut)*ye,Ee)}else{if(G.isInstancedBufferAttribute){for(let Se=0;Se<L.locationSize;Se++)g(L.location+Se,G.meshPerAttribute);C.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let Se=0;Se<L.locationSize;Se++)x(L.location+Se);n.bindBuffer(n.ARRAY_BUFFER,Le);for(let Se=0;Se<L.locationSize;Se++)S(L.location+Se,te/L.locationSize,oe,V,te*ye,te/L.locationSize*Se*ye,Ee)}}else if($!==void 0){const V=$[K];if(V!==void 0)switch(V.length){case 2:n.vertexAttrib2fv(L.location,V);break;case 3:n.vertexAttrib3fv(L.location,V);break;case 4:n.vertexAttrib4fv(L.location,V);break;default:n.vertexAttrib1fv(L.location,V)}}}}_()}function R(){B();for(const C in i){const P=i[C];for(const j in P){const X=P[j];for(const ee in X)f(X[ee].object),delete X[ee];delete P[j]}delete i[C]}}function b(C){if(i[C.id]===void 0)return;const P=i[C.id];for(const j in P){const X=P[j];for(const ee in X)f(X[ee].object),delete X[ee];delete P[j]}delete i[C.id]}function I(C){for(const P in i){const j=i[P];if(j[C.id]===void 0)continue;const X=j[C.id];for(const ee in X)f(X[ee].object),delete X[ee];delete j[C.id]}}function B(){z(),o=!0,s!==r&&(s=r,c(s.object))}function z(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:B,resetDefaultState:z,dispose:R,releaseStatesOfGeometry:b,releaseStatesOfProgram:I,initAttributes:A,enableAttribute:x,disableUnusedAttributes:_}}function d9(n,e,t){let i;function r(c){i=c}function s(c,f){n.drawArrays(i,c,f),t.update(f,i,1)}function o(c,f,h){h!==0&&(n.drawArraysInstanced(i,c,f,h),t.update(f,i,h))}function a(c,f,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,f,0,h);let m=0;for(let v=0;v<h;v++)m+=f[v];t.update(m,i,1)}function l(c,f,h,p){if(h===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],f[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,f,0,p,0,h);let v=0;for(let A=0;A<h;A++)v+=f[A];for(let A=0;A<p.length;A++)t.update(v,i,p[A])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function h9(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(I){return!(I!==mi&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(I){const B=I===Vu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==is&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==Vi&&!B)}function l(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const f=l(c);f!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",f,"instead."),c=f);const h=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(p===!0){const I=e.get("EXT_clip_control");I.clipControlEXT(I.LOWER_LEFT_EXT,I.ZERO_TO_ONE_EXT)}const m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),R=v>0,b=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:v,maxTextureSize:A,maxCubemapSize:x,maxAttributes:g,maxVertexUniforms:_,maxVaryings:S,maxFragmentUniforms:w,vertexTextures:R,maxSamples:b}}function p9(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new qs,a=new At,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=h.length!==0||p||i!==0||r;return r=p,i=h.length,m},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){t=f(h,p,0)},this.setState=function(h,p,m){const v=h.clippingPlanes,A=h.clipIntersection,x=h.clipShadows,g=n.get(h);if(!r||v===null||v.length===0||s&&!x)s?f(null):c();else{const _=s?0:i,S=_*4;let w=g.clippingState||null;l.value=w,w=f(v,p,S,m);for(let R=0;R!==S;++R)w[R]=t[R];g.clippingState=w,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(h,p,m,v){const A=h!==null?h.length:0;let x=null;if(A!==0){if(x=l.value,v!==!0||x===null){const g=m+A*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<g)&&(x=new Float32Array(g));for(let S=0,w=m;S!==A;++S,w+=4)o.copy(h[S]).applyMatrix4(_,a),o.normal.toArray(x,w),x[w+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,x}}function m9(n){let e=new WeakMap;function t(o,a){return a===Vd?o.mapping=yo:a===Wd&&(o.mapping=da),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Vd||a===Wd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new LM(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Ms extends xh{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Zc=4,db=[.125,.215,.35,.446,.526,.582],al=20,__=new Ms,hb=new De;let A_=null,S_=0,M_=0,w_=!1;const rl=(1+Math.sqrt(5))/2,Rc=1/rl,pb=[new O(-rl,Rc,0),new O(rl,Rc,0),new O(-Rc,0,rl),new O(Rc,0,rl),new O(0,rl,-Rc),new O(0,rl,Rc),new O(-1,1,-1),new O(1,1,-1),new O(-1,1,1),new O(1,1,1)];class b1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){A_=this._renderer.getRenderTarget(),S_=this._renderer.getActiveCubeFace(),M_=this._renderer.getActiveMipmapLevel(),w_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=gb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(A_,S_,M_),this._renderer.xr.enabled=w_,e.scissorTest=!1,Sm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===yo||e.mapping===da?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),A_=this._renderer.getRenderTarget(),S_=this._renderer.getActiveCubeFace(),M_=this._renderer.getActiveMipmapLevel(),w_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:_n,minFilter:_n,generateMipmaps:!1,type:Vu,format:mi,colorSpace:Mo,depthBuffer:!1},r=mb(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mb(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=g9(s)),this._blurMaterial=v9(s,e,t)}return r}_compileMaterial(e){const t=new En(this._lodPlanes[0],e);this._renderer.compile(t,__)}_sceneToCubeUV(e,t,i,r){const a=new un(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,p=f.toneMapping;f.getClearColor(hb),f.toneMapping=Cs,f.autoClear=!1;const m=new ir({name:"PMREM.Background",side:Li,depthWrite:!1,depthTest:!1}),v=new En(new Ql,m);let A=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,A=!0):(m.color.copy(hb),A=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):_===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;Sm(r,_*S,g>2?S:0,S,S),f.setRenderTarget(r),A&&f.render(v,a),f.render(e,a)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=p,f.autoClear=h,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===yo||e.mapping===da;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=vb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=gb());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new En(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Sm(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,__)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=pb[(r-s-1)%pb.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,h=new En(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*al-1),A=s/v,x=isFinite(s)?1+Math.floor(f*A):al;x>al&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${al}`);const g=[];let _=0;for(let I=0;I<al;++I){const B=I/A,z=Math.exp(-B*B/2);g.push(z),I===0?_+=z:I<x&&(_+=2*z)}for(let I=0;I<g.length;I++)g[I]=g[I]/_;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-i;const w=this._sizeLods[r],R=3*w*(r>S-Zc?r-S+Zc:0),b=4*(this._cubeSize-w);Sm(t,R,b,3*w,2*w),l.setRenderTarget(t),l.render(h,__)}}function g9(n){const e=[],t=[],i=[];let r=n;const s=n-Zc+1+db.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Zc?l=db[o-n+Zc-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),f=-c,h=1+c,p=[f,f,h,f,h,h,f,f,h,h,f,h],m=6,v=6,A=3,x=2,g=1,_=new Float32Array(A*v*m),S=new Float32Array(x*v*m),w=new Float32Array(g*v*m);for(let b=0;b<m;b++){const I=b%3*2/3-1,B=b>2?0:-1,z=[I,B,0,I+2/3,B,0,I+2/3,B+1,0,I,B,0,I+2/3,B+1,0,I,B+1,0];_.set(z,A*v*b),S.set(p,x*v*b);const C=[b,b,b,b,b,b];w.set(C,g*v*b)}const R=new _t;R.setAttribute("position",new Ut(_,A)),R.setAttribute("uv",new Ut(S,x)),R.setAttribute("faceIndex",new Ut(w,g)),e.push(R),r>Zc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function mb(n,e,t){const i=new rs(n,e,t);return i.texture.mapping=Gu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Sm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function v9(n,e,t){const i=new Float32Array(al),r=new O(0,1,0);return new ss({name:"SphericalGaussianBlur",defines:{n:al,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ao,depthTest:!1,depthWrite:!1})}function gb(){return new ss({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ao,depthTest:!1,depthWrite:!1})}function vb(){return new ss({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ao,depthTest:!1,depthWrite:!1})}function DM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function y9(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Vd||l===Wd,f=l===yo||l===da;if(c||f){let h=e.get(a);const p=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new b1(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const m=a.image;return c&&m&&m.height>0||f&&m&&r(m)?(t===null&&(t=new b1(n)),h=c?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function r(a){let l=0;const c=6;for(let f=0;f<c;f++)a[f]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function x9(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&_g("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function _9(n,e,t,i){const r={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const A=p.morphAttributes[v];for(let x=0,g=A.length;x<g;x++)e.remove(A[x])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=h.morphAttributes;for(const v in m){const A=m[v];for(let x=0,g=A.length;x<g;x++)e.update(A[x],n.ARRAY_BUFFER)}}function c(h){const p=[],m=h.index,v=h.attributes.position;let A=0;if(m!==null){const _=m.array;A=m.version;for(let S=0,w=_.length;S<w;S+=3){const R=_[S+0],b=_[S+1],I=_[S+2];p.push(R,b,b,I,I,R)}}else if(v!==void 0){const _=v.array;A=v.version;for(let S=0,w=_.length/3-1;S<w;S+=3){const R=S+0,b=S+1,I=S+2;p.push(R,b,b,I,I,R)}}else return;const x=new(rD(p)?IM:PM)(p,1);x.version=A;const g=s.get(h);g&&e.remove(g),s.set(h,x)}function f(h){const p=s.get(h);if(p){const m=h.index;m!==null&&p.version<m.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function A9(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function c(p,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,p*o,v),t.update(m,i,v))}function f(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,v);let x=0;for(let g=0;g<v;g++)x+=m[g];t.update(x,i,1)}function h(p,m,v,A){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<p.length;g++)c(p[g]/o,m[g],A[g]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,A,0,v);let g=0;for(let _=0;_<v;_++)g+=m[_];for(let _=0;_<A.length;_++)t.update(g,i,A[_])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function S9(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function M9(n,e,t){const i=new WeakMap,r=new Nt;function s(o,a,l){const c=o.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0;let p=i.get(a);if(p===void 0||p.count!==h){let C=function(){B.dispose(),i.delete(a),a.removeEventListener("dispose",C)};var m=C;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,A=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let w=0;v===!0&&(w=1),A===!0&&(w=2),x===!0&&(w=3);let R=a.attributes.position.count*w,b=1;R>e.maxTextureSize&&(b=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const I=new Float32Array(R*b*4*h),B=new Bv(I,R,b,h);B.type=Vi,B.needsUpdate=!0;const z=w*4;for(let P=0;P<h;P++){const j=g[P],X=_[P],ee=S[P],le=R*b*4*P;for(let $=0;$<j.count;$++){const K=$*z;v===!0&&(r.fromBufferAttribute(j,$),I[le+K+0]=r.x,I[le+K+1]=r.y,I[le+K+2]=r.z,I[le+K+3]=0),A===!0&&(r.fromBufferAttribute(X,$),I[le+K+4]=r.x,I[le+K+5]=r.y,I[le+K+6]=r.z,I[le+K+7]=0),x===!0&&(r.fromBufferAttribute(ee,$),I[le+K+8]=r.x,I[le+K+9]=r.y,I[le+K+10]=r.z,I[le+K+11]=ee.itemSize===4?r.w:1)}}p={count:h,texture:B,size:new pe(R,b)},i.set(a,p),a.addEventListener("dispose",C)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let x=0;x<c.length;x++)v+=c[x];const A=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",A),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function w9(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,f=l.geometry,h=e.get(l,f);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return h}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class FM extends en{constructor(e,t,i,r,s,o,a,l,c,f=El){if(f!==El&&f!==kl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===El&&(i=xo),i===void 0&&f===kl&&(i=Ul),super(null,r,s,o,a,l,f,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Nn,this.minFilter=l!==void 0?l:Nn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const dD=new en,yb=new FM(1,1),hD=new Bv,pD=new RM,mD=new _h,xb=[],_b=[],Ab=new Float32Array(16),Sb=new Float32Array(9),Mb=new Float32Array(4);function ju(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=xb[r];if(s===void 0&&(s=new Float32Array(r),xb[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function On(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Un(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Lv(n,e){let t=_b[e];t===void 0&&(t=new Int32Array(e),_b[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function E9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function C9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2fv(this.addr,e),Un(t,e)}}function T9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(On(t,e))return;n.uniform3fv(this.addr,e),Un(t,e)}}function b9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4fv(this.addr,e),Un(t,e)}}function R9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(On(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Un(t,e)}else{if(On(t,i))return;Mb.set(i),n.uniformMatrix2fv(this.addr,!1,Mb),Un(t,i)}}function P9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(On(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Un(t,e)}else{if(On(t,i))return;Sb.set(i),n.uniformMatrix3fv(this.addr,!1,Sb),Un(t,i)}}function I9(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(On(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Un(t,e)}else{if(On(t,i))return;Ab.set(i),n.uniformMatrix4fv(this.addr,!1,Ab),Un(t,i)}}function B9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function L9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2iv(this.addr,e),Un(t,e)}}function D9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(On(t,e))return;n.uniform3iv(this.addr,e),Un(t,e)}}function F9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4iv(this.addr,e),Un(t,e)}}function N9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function O9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(On(t,e))return;n.uniform2uiv(this.addr,e),Un(t,e)}}function U9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(On(t,e))return;n.uniform3uiv(this.addr,e),Un(t,e)}}function k9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(On(t,e))return;n.uniform4uiv(this.addr,e),Un(t,e)}}function H9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(yb.compareFunction=TM,s=yb):s=dD,t.setTexture2D(e||s,r)}function z9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||pD,r)}function G9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||mD,r)}function V9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||hD,r)}function W9(n){switch(n){case 5126:return E9;case 35664:return C9;case 35665:return T9;case 35666:return b9;case 35674:return R9;case 35675:return P9;case 35676:return I9;case 5124:case 35670:return B9;case 35667:case 35671:return L9;case 35668:case 35672:return D9;case 35669:case 35673:return F9;case 5125:return N9;case 36294:return O9;case 36295:return U9;case 36296:return k9;case 35678:case 36198:case 36298:case 36306:case 35682:return H9;case 35679:case 36299:case 36307:return z9;case 35680:case 36300:case 36308:case 36293:return G9;case 36289:case 36303:case 36311:case 36292:return V9}}function j9(n,e){n.uniform1fv(this.addr,e)}function X9(n,e){const t=ju(e,this.size,2);n.uniform2fv(this.addr,t)}function J9(n,e){const t=ju(e,this.size,3);n.uniform3fv(this.addr,t)}function K9(n,e){const t=ju(e,this.size,4);n.uniform4fv(this.addr,t)}function Y9(n,e){const t=ju(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function $9(n,e){const t=ju(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Q9(n,e){const t=ju(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function q9(n,e){n.uniform1iv(this.addr,e)}function Z9(n,e){n.uniform2iv(this.addr,e)}function e5(n,e){n.uniform3iv(this.addr,e)}function t5(n,e){n.uniform4iv(this.addr,e)}function n5(n,e){n.uniform1uiv(this.addr,e)}function i5(n,e){n.uniform2uiv(this.addr,e)}function r5(n,e){n.uniform3uiv(this.addr,e)}function s5(n,e){n.uniform4uiv(this.addr,e)}function o5(n,e,t){const i=this.cache,r=e.length,s=Lv(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Un(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||dD,s[o])}function a5(n,e,t){const i=this.cache,r=e.length,s=Lv(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Un(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||pD,s[o])}function l5(n,e,t){const i=this.cache,r=e.length,s=Lv(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Un(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||mD,s[o])}function c5(n,e,t){const i=this.cache,r=e.length,s=Lv(t,r);On(i,s)||(n.uniform1iv(this.addr,s),Un(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||hD,s[o])}function u5(n){switch(n){case 5126:return j9;case 35664:return X9;case 35665:return J9;case 35666:return K9;case 35674:return Y9;case 35675:return $9;case 35676:return Q9;case 5124:case 35670:return q9;case 35667:case 35671:return Z9;case 35668:case 35672:return e5;case 35669:case 35673:return t5;case 5125:return n5;case 36294:return i5;case 36295:return r5;case 36296:return s5;case 35678:case 36198:case 36298:case 36306:case 35682:return o5;case 35679:case 36299:case 36307:return a5;case 35680:case 36300:case 36308:case 36293:return l5;case 36289:case 36303:case 36311:case 36292:return c5}}class f5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=W9(t.type)}}class d5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=u5(t.type)}}class h5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const E_=/(\w+)(\])?(\[|\.)?/g;function wb(n,e){n.seq.push(e),n.map[e.id]=e}function p5(n,e,t){const i=n.name,r=i.length;for(E_.lastIndex=0;;){const s=E_.exec(i),o=E_.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){wb(t,c===void 0?new f5(a,n,e):new d5(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new h5(a),wb(t,h)),t=h}}}class Ag{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);p5(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function Eb(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const m5=37297;let g5=0;function v5(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function y5(n){const e=Vt.getPrimaries(Vt.workingColorSpace),t=Vt.getPrimaries(n);let i;switch(e===t?i="":e===Kd&&t===Jd?i="LinearDisplayP3ToLinearSRGB":e===Jd&&t===Kd&&(i="LinearSRGBToLinearDisplayP3"),n){case Mo:case yh:return[i,"LinearTransferOETF"];case Cr:case Iv:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function Cb(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+v5(n.getShaderSource(e),o)}else return r}function x5(n,e){const t=y5(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function _5(n,e){let t;switch(e){case NL:t="Linear";break;case OL:t="Reinhard";break;case UL:t="Cineon";break;case mM:t="ACESFilmic";break;case HL:t="AgX";break;case zL:t="Neutral";break;case kL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Mm=new O;function A5(){Vt.getLuminanceCoefficients(Mm);const n=Mm.x.toFixed(4),e=Mm.y.toFixed(4),t=Mm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function S5(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Qf).join(`
`)}function M5(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function w5(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Qf(n){return n!==""}function Tb(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function bb(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const E5=/^[ \t]*#include +<([\w\d./]+)>/gm;function R1(n){return n.replace(E5,T5)}const C5=new Map;function T5(n,e){let t=Mt[e];if(t===void 0){const i=C5.get(e);if(i!==void 0)t=Mt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return R1(t)}const b5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Rb(n){return n.replace(b5,R5)}function R5(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Pb(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function P5(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Av?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===cd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Xr&&(e="SHADOWMAP_TYPE_VSM"),e}function I5(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case yo:case da:e="ENVMAP_TYPE_CUBE";break;case Gu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function B5(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case da:e="ENVMAP_MODE_REFRACTION";break}return e}function L5(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case gh:e="ENVMAP_BLENDING_MULTIPLY";break;case DL:e="ENVMAP_BLENDING_MIX";break;case FL:e="ENVMAP_BLENDING_ADD";break}return e}function D5(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function F5(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=P5(t),c=I5(t),f=B5(t),h=L5(t),p=D5(t),m=S5(t),v=M5(s),A=r.createProgram();let x,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Qf).join(`
`),x.length>0&&(x+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Qf).join(`
`),g.length>0&&(g+=`
`)):(x=[Pb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Qf).join(`
`),g=[Pb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Cs?"#define TONE_MAPPING":"",t.toneMapping!==Cs?Mt.tonemapping_pars_fragment:"",t.toneMapping!==Cs?_5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Mt.colorspace_pars_fragment,x5("linearToOutputTexel",t.outputColorSpace),A5(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Qf).join(`
`)),o=R1(o),o=Tb(o,t),o=bb(o,t),a=R1(a),a=Tb(a,t),a=bb(a,t),o=Rb(o),a=Rb(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===T1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===T1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=_+x+o,w=_+g+a,R=Eb(r,r.VERTEX_SHADER,S),b=Eb(r,r.FRAGMENT_SHADER,w);r.attachShader(A,R),r.attachShader(A,b),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function I(P){if(n.debug.checkShaderErrors){const j=r.getProgramInfoLog(A).trim(),X=r.getShaderInfoLog(R).trim(),ee=r.getShaderInfoLog(b).trim();let le=!0,$=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(le=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,A,R,b);else{const K=Cb(r,R,"vertex"),L=Cb(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+j+`
`+K+`
`+L)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(X===""||ee==="")&&($=!1);$&&(P.diagnostics={runnable:le,programLog:j,vertexShader:{log:X,prefix:x},fragmentShader:{log:ee,prefix:g}})}r.deleteShader(R),r.deleteShader(b),B=new Ag(r,A),z=w5(r,A)}let B;this.getUniforms=function(){return B===void 0&&I(this),B};let z;this.getAttributes=function(){return z===void 0&&I(this),z};let C=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=r.getProgramParameter(A,m5)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=g5++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=R,this.fragmentShader=b,this}let N5=0;class O5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new U5(e),t.set(e,i)),i}}class U5{constructor(e){this.id=N5++,this.code=e,this.usedTimes=0}}function k5(n,e,t,i,r,s,o){const a=new bl,l=new O5,c=new Set,f=[],h=r.logarithmicDepthBuffer,p=r.reverseDepthBuffer,m=r.vertexTextures;let v=r.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(C){return c.add(C),C===0?"uv":`uv${C}`}function g(C,P,j,X,ee){const le=X.fog,$=ee.geometry,K=C.isMeshStandardMaterial?X.environment:null,L=(C.isMeshStandardMaterial?t:e).get(C.envMap||K),G=L&&L.mapping===Gu?L.image.height:null,V=A[C.type];C.precision!==null&&(v=r.getMaxPrecision(C.precision),v!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",v,"instead."));const te=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,ve=te!==void 0?te.length:0;let Le=0;$.morphAttributes.position!==void 0&&(Le=1),$.morphAttributes.normal!==void 0&&(Le=2),$.morphAttributes.color!==void 0&&(Le=3);let oe,ye,Ee,Se;if(V){const an=$r[V];oe=an.vertexShader,ye=an.fragmentShader}else oe=C.vertexShader,ye=C.fragmentShader,l.update(C),Ee=l.getVertexShaderID(C),Se=l.getFragmentShaderID(C);const lt=n.getRenderTarget(),st=ee.isInstancedMesh===!0,ut=ee.isBatchedMesh===!0,ot=!!C.map,xe=!!C.matcap,k=!!L,Pe=!!C.aoMap,Re=!!C.lightMap,Ae=!!C.bumpMap,Ie=!!C.normalMap,Ze=!!C.displacementMap,ze=!!C.emissiveMap,U=!!C.metalnessMap,F=!!C.roughnessMap,ne=C.anisotropy>0,he=C.clearcoat>0,_e=C.dispersion>0,me=C.iridescence>0,$e=C.sheen>0,Be=C.transmission>0,Ve=ne&&!!C.anisotropyMap,bt=he&&!!C.clearcoatMap,Me=he&&!!C.clearcoatNormalMap,We=he&&!!C.clearcoatRoughnessMap,pt=me&&!!C.iridescenceMap,ft=me&&!!C.iridescenceThicknessMap,je=$e&&!!C.sheenColorMap,J=$e&&!!C.sheenRoughnessMap,de=!!C.specularMap,Fe=!!C.specularColorMap,W=!!C.specularIntensityMap,Ce=Be&&!!C.transmissionMap,ce=Be&&!!C.thicknessMap,ge=!!C.gradientMap,Ue=!!C.alphaMap,ke=C.alphaTest>0,gt=!!C.alphaHash,Dt=!!C.extensions;let mn=Cs;C.toneMapped&&(lt===null||lt.isXRRenderTarget===!0)&&(mn=n.toneMapping);const wt={shaderID:V,shaderType:C.type,shaderName:C.name,vertexShader:oe,fragmentShader:ye,defines:C.defines,customVertexShaderID:Ee,customFragmentShaderID:Se,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:v,batching:ut,batchingColor:ut&&ee._colorsTexture!==null,instancing:st,instancingColor:st&&ee.instanceColor!==null,instancingMorph:st&&ee.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:lt===null?n.outputColorSpace:lt.isXRRenderTarget===!0?lt.texture.colorSpace:Mo,alphaToCoverage:!!C.alphaToCoverage,map:ot,matcap:xe,envMap:k,envMapMode:k&&L.mapping,envMapCubeUVHeight:G,aoMap:Pe,lightMap:Re,bumpMap:Ae,normalMap:Ie,displacementMap:m&&Ze,emissiveMap:ze,normalMapObjectSpace:Ie&&C.normalMapType===YL,normalMapTangentSpace:Ie&&C.normalMapType===wa,metalnessMap:U,roughnessMap:F,anisotropy:ne,anisotropyMap:Ve,clearcoat:he,clearcoatMap:bt,clearcoatNormalMap:Me,clearcoatRoughnessMap:We,dispersion:_e,iridescence:me,iridescenceMap:pt,iridescenceThicknessMap:ft,sheen:$e,sheenColorMap:je,sheenRoughnessMap:J,specularMap:de,specularColorMap:Fe,specularIntensityMap:W,transmission:Be,transmissionMap:Ce,thicknessMap:ce,gradientMap:ge,opaque:C.transparent===!1&&C.blending===wl&&C.alphaToCoverage===!1,alphaMap:Ue,alphaTest:ke,alphaHash:gt,combine:C.combine,mapUv:ot&&x(C.map.channel),aoMapUv:Pe&&x(C.aoMap.channel),lightMapUv:Re&&x(C.lightMap.channel),bumpMapUv:Ae&&x(C.bumpMap.channel),normalMapUv:Ie&&x(C.normalMap.channel),displacementMapUv:Ze&&x(C.displacementMap.channel),emissiveMapUv:ze&&x(C.emissiveMap.channel),metalnessMapUv:U&&x(C.metalnessMap.channel),roughnessMapUv:F&&x(C.roughnessMap.channel),anisotropyMapUv:Ve&&x(C.anisotropyMap.channel),clearcoatMapUv:bt&&x(C.clearcoatMap.channel),clearcoatNormalMapUv:Me&&x(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:We&&x(C.clearcoatRoughnessMap.channel),iridescenceMapUv:pt&&x(C.iridescenceMap.channel),iridescenceThicknessMapUv:ft&&x(C.iridescenceThicknessMap.channel),sheenColorMapUv:je&&x(C.sheenColorMap.channel),sheenRoughnessMapUv:J&&x(C.sheenRoughnessMap.channel),specularMapUv:de&&x(C.specularMap.channel),specularColorMapUv:Fe&&x(C.specularColorMap.channel),specularIntensityMapUv:W&&x(C.specularIntensityMap.channel),transmissionMapUv:Ce&&x(C.transmissionMap.channel),thicknessMapUv:ce&&x(C.thicknessMap.channel),alphaMapUv:Ue&&x(C.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Ie||ne),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,pointsUvs:ee.isPoints===!0&&!!$.attributes.uv&&(ot||Ue),fog:!!le,useFog:C.fog===!0,fogExp2:!!le&&le.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:p,skinning:ee.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:ve,morphTextureStride:Le,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:mn,decodeVideoTexture:ot&&C.map.isVideoTexture===!0&&Vt.getTransfer(C.map.colorSpace)===Yt,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Qr,flipSided:C.side===Li,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Dt&&C.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Dt&&C.extensions.multiDraw===!0||ut)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return wt.vertexUv1s=c.has(1),wt.vertexUv2s=c.has(2),wt.vertexUv3s=c.has(3),c.clear(),wt}function _(C){const P=[];if(C.shaderID?P.push(C.shaderID):(P.push(C.customVertexShaderID),P.push(C.customFragmentShaderID)),C.defines!==void 0)for(const j in C.defines)P.push(j),P.push(C.defines[j]);return C.isRawShaderMaterial===!1&&(S(P,C),w(P,C),P.push(n.outputColorSpace)),P.push(C.customProgramCacheKey),P.join()}function S(C,P){C.push(P.precision),C.push(P.outputColorSpace),C.push(P.envMapMode),C.push(P.envMapCubeUVHeight),C.push(P.mapUv),C.push(P.alphaMapUv),C.push(P.lightMapUv),C.push(P.aoMapUv),C.push(P.bumpMapUv),C.push(P.normalMapUv),C.push(P.displacementMapUv),C.push(P.emissiveMapUv),C.push(P.metalnessMapUv),C.push(P.roughnessMapUv),C.push(P.anisotropyMapUv),C.push(P.clearcoatMapUv),C.push(P.clearcoatNormalMapUv),C.push(P.clearcoatRoughnessMapUv),C.push(P.iridescenceMapUv),C.push(P.iridescenceThicknessMapUv),C.push(P.sheenColorMapUv),C.push(P.sheenRoughnessMapUv),C.push(P.specularMapUv),C.push(P.specularColorMapUv),C.push(P.specularIntensityMapUv),C.push(P.transmissionMapUv),C.push(P.thicknessMapUv),C.push(P.combine),C.push(P.fogExp2),C.push(P.sizeAttenuation),C.push(P.morphTargetsCount),C.push(P.morphAttributeCount),C.push(P.numDirLights),C.push(P.numPointLights),C.push(P.numSpotLights),C.push(P.numSpotLightMaps),C.push(P.numHemiLights),C.push(P.numRectAreaLights),C.push(P.numDirLightShadows),C.push(P.numPointLightShadows),C.push(P.numSpotLightShadows),C.push(P.numSpotLightShadowsWithMaps),C.push(P.numLightProbes),C.push(P.shadowMapType),C.push(P.toneMapping),C.push(P.numClippingPlanes),C.push(P.numClipIntersection),C.push(P.depthPacking)}function w(C,P){a.disableAll(),P.supportsVertexTextures&&a.enable(0),P.instancing&&a.enable(1),P.instancingColor&&a.enable(2),P.instancingMorph&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),P.anisotropy&&a.enable(17),P.alphaHash&&a.enable(18),P.batching&&a.enable(19),P.dispersion&&a.enable(20),P.batchingColor&&a.enable(21),C.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.reverseDepthBuffer&&a.enable(4),P.skinning&&a.enable(5),P.morphTargets&&a.enable(6),P.morphNormals&&a.enable(7),P.morphColors&&a.enable(8),P.premultipliedAlpha&&a.enable(9),P.shadowMapEnabled&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),P.decodeVideoTexture&&a.enable(19),P.alphaToCoverage&&a.enable(20),C.push(a.mask)}function R(C){const P=A[C.type];let j;if(P){const X=$r[P];j=uD.clone(X.uniforms)}else j=C.uniforms;return j}function b(C,P){let j;for(let X=0,ee=f.length;X<ee;X++){const le=f[X];if(le.cacheKey===P){j=le,++j.usedTimes;break}}return j===void 0&&(j=new F5(n,P,C,s),f.push(j)),j}function I(C){if(--C.usedTimes===0){const P=f.indexOf(C);f[P]=f[f.length-1],f.pop(),C.destroy()}}function B(C){l.remove(C)}function z(){l.dispose()}return{getParameters:g,getProgramCacheKey:_,getUniforms:R,acquireProgram:b,releaseProgram:I,releaseShaderCache:B,programs:f,dispose:z}}function H5(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function z5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Ib(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Bb(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(h,p,m,v,A,x){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:p,material:m,groupOrder:v,renderOrder:h.renderOrder,z:A,group:x},n[e]=g):(g.id=h.id,g.object=h,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=A,g.group=x),e++,g}function a(h,p,m,v,A,x){const g=o(h,p,m,v,A,x);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(h,p,m,v,A,x){const g=o(h,p,m,v,A,x);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(h,p){t.length>1&&t.sort(h||z5),i.length>1&&i.sort(p||Ib),r.length>1&&r.sort(p||Ib)}function f(){for(let h=e,p=n.length;h<p;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:f,sort:c}}function G5(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new Bb,n.set(i,[o])):r>=s.length?(o=new Bb,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function V5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new O,color:new De};break;case"SpotLight":t={position:new O,direction:new O,color:new De,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new O,color:new De,distance:0,decay:0};break;case"HemisphereLight":t={direction:new O,skyColor:new De,groundColor:new De};break;case"RectAreaLight":t={color:new De,position:new O,halfWidth:new O,halfHeight:new O};break}return n[e.id]=t,t}}}function W5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let j5=0;function X5(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function J5(n){const e=new V5,t=W5(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new O);const r=new O,s=new rt,o=new rt;function a(c){let f=0,h=0,p=0;for(let z=0;z<9;z++)i.probe[z].set(0,0,0);let m=0,v=0,A=0,x=0,g=0,_=0,S=0,w=0,R=0,b=0,I=0;c.sort(X5);for(let z=0,C=c.length;z<C;z++){const P=c[z],j=P.color,X=P.intensity,ee=P.distance,le=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)f+=j.r*X,h+=j.g*X,p+=j.b*X;else if(P.isLightProbe){for(let $=0;$<9;$++)i.probe[$].addScaledVector(P.sh.coefficients[$],X);I++}else if(P.isDirectionalLight){const $=e.get(P);if($.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const K=P.shadow,L=t.get(P);L.shadowIntensity=K.intensity,L.shadowBias=K.bias,L.shadowNormalBias=K.normalBias,L.shadowRadius=K.radius,L.shadowMapSize=K.mapSize,i.directionalShadow[m]=L,i.directionalShadowMap[m]=le,i.directionalShadowMatrix[m]=P.shadow.matrix,_++}i.directional[m]=$,m++}else if(P.isSpotLight){const $=e.get(P);$.position.setFromMatrixPosition(P.matrixWorld),$.color.copy(j).multiplyScalar(X),$.distance=ee,$.coneCos=Math.cos(P.angle),$.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),$.decay=P.decay,i.spot[A]=$;const K=P.shadow;if(P.map&&(i.spotLightMap[R]=P.map,R++,K.updateMatrices(P),P.castShadow&&b++),i.spotLightMatrix[A]=K.matrix,P.castShadow){const L=t.get(P);L.shadowIntensity=K.intensity,L.shadowBias=K.bias,L.shadowNormalBias=K.normalBias,L.shadowRadius=K.radius,L.shadowMapSize=K.mapSize,i.spotShadow[A]=L,i.spotShadowMap[A]=le,w++}A++}else if(P.isRectAreaLight){const $=e.get(P);$.color.copy(j).multiplyScalar(X),$.halfWidth.set(P.width*.5,0,0),$.halfHeight.set(0,P.height*.5,0),i.rectArea[x]=$,x++}else if(P.isPointLight){const $=e.get(P);if($.color.copy(P.color).multiplyScalar(P.intensity),$.distance=P.distance,$.decay=P.decay,P.castShadow){const K=P.shadow,L=t.get(P);L.shadowIntensity=K.intensity,L.shadowBias=K.bias,L.shadowNormalBias=K.normalBias,L.shadowRadius=K.radius,L.shadowMapSize=K.mapSize,L.shadowCameraNear=K.camera.near,L.shadowCameraFar=K.camera.far,i.pointShadow[v]=L,i.pointShadowMap[v]=le,i.pointShadowMatrix[v]=P.shadow.matrix,S++}i.point[v]=$,v++}else if(P.isHemisphereLight){const $=e.get(P);$.skyColor.copy(P.color).multiplyScalar(X),$.groundColor.copy(P.groundColor).multiplyScalar(X),i.hemi[g]=$,g++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ne.LTC_FLOAT_1,i.rectAreaLTC2=Ne.LTC_FLOAT_2):(i.rectAreaLTC1=Ne.LTC_HALF_1,i.rectAreaLTC2=Ne.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;const B=i.hash;(B.directionalLength!==m||B.pointLength!==v||B.spotLength!==A||B.rectAreaLength!==x||B.hemiLength!==g||B.numDirectionalShadows!==_||B.numPointShadows!==S||B.numSpotShadows!==w||B.numSpotMaps!==R||B.numLightProbes!==I)&&(i.directional.length=m,i.spot.length=A,i.rectArea.length=x,i.point.length=v,i.hemi.length=g,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=S,i.pointShadowMap.length=S,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=S,i.spotLightMatrix.length=w+R-b,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=b,i.numLightProbes=I,B.directionalLength=m,B.pointLength=v,B.spotLength=A,B.rectAreaLength=x,B.hemiLength=g,B.numDirectionalShadows=_,B.numPointShadows=S,B.numSpotShadows=w,B.numSpotMaps=R,B.numLightProbes=I,i.version=j5++)}function l(c,f){let h=0,p=0,m=0,v=0,A=0;const x=f.matrixWorldInverse;for(let g=0,_=c.length;g<_;g++){const S=c[g];if(S.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(x),h++}else if(S.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(x),w.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(x),m++}else if(S.isRectAreaLight){const w=i.rectArea[v];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(x),o.identity(),s.copy(S.matrixWorld),s.premultiply(x),o.extractRotation(s),w.halfWidth.set(S.width*.5,0,0),w.halfHeight.set(0,S.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const w=i.point[p];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(x),p++}else if(S.isHemisphereLight){const w=i.hemi[A];w.direction.setFromMatrixPosition(S.matrixWorld),w.direction.transformDirection(x),A++}}}return{setup:a,setupView:l,state:i}}function Lb(n){const e=new J5(n),t=[],i=[];function r(f){c.camera=f,t.length=0,i.length=0}function s(f){t.push(f)}function o(f){i.push(f)}function a(){e.setup(t)}function l(f){e.setupView(t,f)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function K5(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new Lb(n),e.set(r,[a])):s>=o.length?(a=new Lb(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class NM extends Pn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=JL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class OM extends Pn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Y5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Q5(n,e,t){let i=new Ah;const r=new pe,s=new pe,o=new Nt,a=new NM({depthPacking:KL}),l=new OM,c={},f=t.maxTextureSize,h={[Bs]:Li,[Li]:Bs,[Qr]:Qr},p=new ss({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pe},radius:{value:4}},vertexShader:Y5,fragmentShader:$5}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new _t;v.setAttribute("position",new Ut(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new En(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Av;let g=this.type;this.render=function(b,I,B){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||b.length===0)return;const z=n.getRenderTarget(),C=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),j=n.state;j.setBlending(ao),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);const X=g!==Xr&&this.type===Xr,ee=g===Xr&&this.type!==Xr;for(let le=0,$=b.length;le<$;le++){const K=b[le],L=K.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;r.copy(L.mapSize);const G=L.getFrameExtents();if(r.multiply(G),s.copy(L.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/G.x),r.x=s.x*G.x,L.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/G.y),r.y=s.y*G.y,L.mapSize.y=s.y)),L.map===null||X===!0||ee===!0){const te=this.type!==Xr?{minFilter:Nn,magFilter:Nn}:{};L.map!==null&&L.map.dispose(),L.map=new rs(r.x,r.y,te),L.map.texture.name=K.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const V=L.getViewportCount();for(let te=0;te<V;te++){const ve=L.getViewport(te);o.set(s.x*ve.x,s.y*ve.y,s.x*ve.z,s.y*ve.w),j.viewport(o),L.updateMatrices(K,te),i=L.getFrustum(),w(I,B,L.camera,K,this.type)}L.isPointLightShadow!==!0&&this.type===Xr&&_(L,B),L.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(z,C,P)};function _(b,I){const B=e.update(A);p.defines.VSM_SAMPLES!==b.blurSamples&&(p.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new rs(r.x,r.y)),p.uniforms.shadow_pass.value=b.map.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(I,null,B,p,A,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(I,null,B,m,A,null)}function S(b,I,B,z){let C=null;const P=B.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(P!==void 0)C=P;else if(C=B.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const j=C.uuid,X=I.uuid;let ee=c[j];ee===void 0&&(ee={},c[j]=ee);let le=ee[X];le===void 0&&(le=C.clone(),ee[X]=le,I.addEventListener("dispose",R)),C=le}if(C.visible=I.visible,C.wireframe=I.wireframe,z===Xr?C.side=I.shadowSide!==null?I.shadowSide:I.side:C.side=I.shadowSide!==null?I.shadowSide:h[I.side],C.alphaMap=I.alphaMap,C.alphaTest=I.alphaTest,C.map=I.map,C.clipShadows=I.clipShadows,C.clippingPlanes=I.clippingPlanes,C.clipIntersection=I.clipIntersection,C.displacementMap=I.displacementMap,C.displacementScale=I.displacementScale,C.displacementBias=I.displacementBias,C.wireframeLinewidth=I.wireframeLinewidth,C.linewidth=I.linewidth,B.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const j=n.properties.get(C);j.light=B}return C}function w(b,I,B,z,C){if(b.visible===!1)return;if(b.layers.test(I.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&C===Xr)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,b.matrixWorld);const X=e.update(b),ee=b.material;if(Array.isArray(ee)){const le=X.groups;for(let $=0,K=le.length;$<K;$++){const L=le[$],G=ee[L.materialIndex];if(G&&G.visible){const V=S(b,G,z,C);b.onBeforeShadow(n,b,I,B,X,V,L),n.renderBufferDirect(B,null,X,V,b,L),b.onAfterShadow(n,b,I,B,X,V,L)}}}else if(ee.visible){const le=S(b,ee,z,C);b.onBeforeShadow(n,b,I,B,X,le,null),n.renderBufferDirect(B,null,X,le,b,null),b.onAfterShadow(n,b,I,B,X,le,null)}}const j=b.children;for(let X=0,ee=j.length;X<ee;X++)w(j[X],I,B,z,C)}function R(b){b.target.removeEventListener("dispose",R);for(const B in c){const z=c[B],C=b.target.uuid;C in z&&(z[C].dispose(),delete z[C])}}}const q5={[r0]:s0,[o0]:c0,[a0]:u0,[Ol]:l0,[s0]:r0,[c0]:o0,[u0]:a0,[l0]:Ol};function Z5(n){function e(){let W=!1;const Ce=new Nt;let ce=null;const ge=new Nt(0,0,0,0);return{setMask:function(Ue){ce!==Ue&&!W&&(n.colorMask(Ue,Ue,Ue,Ue),ce=Ue)},setLocked:function(Ue){W=Ue},setClear:function(Ue,ke,gt,Dt,mn){mn===!0&&(Ue*=Dt,ke*=Dt,gt*=Dt),Ce.set(Ue,ke,gt,Dt),ge.equals(Ce)===!1&&(n.clearColor(Ue,ke,gt,Dt),ge.copy(Ce))},reset:function(){W=!1,ce=null,ge.set(-1,0,0,0)}}}function t(){let W=!1,Ce=!1,ce=null,ge=null,Ue=null;return{setReversed:function(ke){Ce=ke},setTest:function(ke){ke?Ee(n.DEPTH_TEST):Se(n.DEPTH_TEST)},setMask:function(ke){ce!==ke&&!W&&(n.depthMask(ke),ce=ke)},setFunc:function(ke){if(Ce&&(ke=q5[ke]),ge!==ke){switch(ke){case r0:n.depthFunc(n.NEVER);break;case s0:n.depthFunc(n.ALWAYS);break;case o0:n.depthFunc(n.LESS);break;case Ol:n.depthFunc(n.LEQUAL);break;case a0:n.depthFunc(n.EQUAL);break;case l0:n.depthFunc(n.GEQUAL);break;case c0:n.depthFunc(n.GREATER);break;case u0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ge=ke}},setLocked:function(ke){W=ke},setClear:function(ke){Ue!==ke&&(n.clearDepth(ke),Ue=ke)},reset:function(){W=!1,ce=null,ge=null,Ue=null}}}function i(){let W=!1,Ce=null,ce=null,ge=null,Ue=null,ke=null,gt=null,Dt=null,mn=null;return{setTest:function(wt){W||(wt?Ee(n.STENCIL_TEST):Se(n.STENCIL_TEST))},setMask:function(wt){Ce!==wt&&!W&&(n.stencilMask(wt),Ce=wt)},setFunc:function(wt,an,Xn){(ce!==wt||ge!==an||Ue!==Xn)&&(n.stencilFunc(wt,an,Xn),ce=wt,ge=an,Ue=Xn)},setOp:function(wt,an,Xn){(ke!==wt||gt!==an||Dt!==Xn)&&(n.stencilOp(wt,an,Xn),ke=wt,gt=an,Dt=Xn)},setLocked:function(wt){W=wt},setClear:function(wt){mn!==wt&&(n.clearStencil(wt),mn=wt)},reset:function(){W=!1,Ce=null,ce=null,ge=null,Ue=null,ke=null,gt=null,Dt=null,mn=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let c={},f={},h=new WeakMap,p=[],m=null,v=!1,A=null,x=null,g=null,_=null,S=null,w=null,R=null,b=new De(0,0,0),I=0,B=!1,z=null,C=null,P=null,j=null,X=null;const ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let le=!1,$=0;const K=n.getParameter(n.VERSION);K.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(K)[1]),le=$>=1):K.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),le=$>=2);let L=null,G={};const V=n.getParameter(n.SCISSOR_BOX),te=n.getParameter(n.VIEWPORT),ve=new Nt().fromArray(V),Le=new Nt().fromArray(te);function oe(W,Ce,ce,ge){const Ue=new Uint8Array(4),ke=n.createTexture();n.bindTexture(W,ke),n.texParameteri(W,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(W,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let gt=0;gt<ce;gt++)W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY?n.texImage3D(Ce,0,n.RGBA,1,1,ge,0,n.RGBA,n.UNSIGNED_BYTE,Ue):n.texImage2D(Ce+gt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ue);return ke}const ye={};ye[n.TEXTURE_2D]=oe(n.TEXTURE_2D,n.TEXTURE_2D,1),ye[n.TEXTURE_CUBE_MAP]=oe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ye[n.TEXTURE_2D_ARRAY]=oe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ye[n.TEXTURE_3D]=oe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ee(n.DEPTH_TEST),s.setFunc(Ol),Re(!1),Ae(A1),Ee(n.CULL_FACE),k(ao);function Ee(W){c[W]!==!0&&(n.enable(W),c[W]=!0)}function Se(W){c[W]!==!1&&(n.disable(W),c[W]=!1)}function lt(W,Ce){return f[W]!==Ce?(n.bindFramebuffer(W,Ce),f[W]=Ce,W===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Ce),W===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Ce),!0):!1}function st(W,Ce){let ce=p,ge=!1;if(W){ce=h.get(Ce),ce===void 0&&(ce=[],h.set(Ce,ce));const Ue=W.textures;if(ce.length!==Ue.length||ce[0]!==n.COLOR_ATTACHMENT0){for(let ke=0,gt=Ue.length;ke<gt;ke++)ce[ke]=n.COLOR_ATTACHMENT0+ke;ce.length=Ue.length,ge=!0}}else ce[0]!==n.BACK&&(ce[0]=n.BACK,ge=!0);ge&&n.drawBuffers(ce)}function ut(W){return m!==W?(n.useProgram(W),m=W,!0):!1}const ot={[qo]:n.FUNC_ADD,[vL]:n.FUNC_SUBTRACT,[yL]:n.FUNC_REVERSE_SUBTRACT};ot[xL]=n.MIN,ot[_L]=n.MAX;const xe={[AL]:n.ZERO,[SL]:n.ONE,[ML]:n.SRC_COLOR,[n0]:n.SRC_ALPHA,[RL]:n.SRC_ALPHA_SATURATE,[TL]:n.DST_COLOR,[EL]:n.DST_ALPHA,[wL]:n.ONE_MINUS_SRC_COLOR,[i0]:n.ONE_MINUS_SRC_ALPHA,[bL]:n.ONE_MINUS_DST_COLOR,[CL]:n.ONE_MINUS_DST_ALPHA,[PL]:n.CONSTANT_COLOR,[IL]:n.ONE_MINUS_CONSTANT_COLOR,[BL]:n.CONSTANT_ALPHA,[LL]:n.ONE_MINUS_CONSTANT_ALPHA};function k(W,Ce,ce,ge,Ue,ke,gt,Dt,mn,wt){if(W===ao){v===!0&&(Se(n.BLEND),v=!1);return}if(v===!1&&(Ee(n.BLEND),v=!0),W!==gL){if(W!==A||wt!==B){if((x!==qo||S!==qo)&&(n.blendEquation(n.FUNC_ADD),x=qo,S=qo),wt)switch(W){case wl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case S1:n.blendFunc(n.ONE,n.ONE);break;case M1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case w1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}else switch(W){case wl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case S1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case M1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case w1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",W);break}g=null,_=null,w=null,R=null,b.set(0,0,0),I=0,A=W,B=wt}return}Ue=Ue||Ce,ke=ke||ce,gt=gt||ge,(Ce!==x||Ue!==S)&&(n.blendEquationSeparate(ot[Ce],ot[Ue]),x=Ce,S=Ue),(ce!==g||ge!==_||ke!==w||gt!==R)&&(n.blendFuncSeparate(xe[ce],xe[ge],xe[ke],xe[gt]),g=ce,_=ge,w=ke,R=gt),(Dt.equals(b)===!1||mn!==I)&&(n.blendColor(Dt.r,Dt.g,Dt.b,mn),b.copy(Dt),I=mn),A=W,B=!1}function Pe(W,Ce){W.side===Qr?Se(n.CULL_FACE):Ee(n.CULL_FACE);let ce=W.side===Li;Ce&&(ce=!ce),Re(ce),W.blending===wl&&W.transparent===!1?k(ao):k(W.blending,W.blendEquation,W.blendSrc,W.blendDst,W.blendEquationAlpha,W.blendSrcAlpha,W.blendDstAlpha,W.blendColor,W.blendAlpha,W.premultipliedAlpha),s.setFunc(W.depthFunc),s.setTest(W.depthTest),s.setMask(W.depthWrite),r.setMask(W.colorWrite);const ge=W.stencilWrite;o.setTest(ge),ge&&(o.setMask(W.stencilWriteMask),o.setFunc(W.stencilFunc,W.stencilRef,W.stencilFuncMask),o.setOp(W.stencilFail,W.stencilZFail,W.stencilZPass)),Ze(W.polygonOffset,W.polygonOffsetFactor,W.polygonOffsetUnits),W.alphaToCoverage===!0?Ee(n.SAMPLE_ALPHA_TO_COVERAGE):Se(n.SAMPLE_ALPHA_TO_COVERAGE)}function Re(W){z!==W&&(W?n.frontFace(n.CW):n.frontFace(n.CCW),z=W)}function Ae(W){W!==hL?(Ee(n.CULL_FACE),W!==C&&(W===A1?n.cullFace(n.BACK):W===pL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Se(n.CULL_FACE),C=W}function Ie(W){W!==P&&(le&&n.lineWidth(W),P=W)}function Ze(W,Ce,ce){W?(Ee(n.POLYGON_OFFSET_FILL),(j!==Ce||X!==ce)&&(n.polygonOffset(Ce,ce),j=Ce,X=ce)):Se(n.POLYGON_OFFSET_FILL)}function ze(W){W?Ee(n.SCISSOR_TEST):Se(n.SCISSOR_TEST)}function U(W){W===void 0&&(W=n.TEXTURE0+ee-1),L!==W&&(n.activeTexture(W),L=W)}function F(W,Ce,ce){ce===void 0&&(L===null?ce=n.TEXTURE0+ee-1:ce=L);let ge=G[ce];ge===void 0&&(ge={type:void 0,texture:void 0},G[ce]=ge),(ge.type!==W||ge.texture!==Ce)&&(L!==ce&&(n.activeTexture(ce),L=ce),n.bindTexture(W,Ce||ye[W]),ge.type=W,ge.texture=Ce)}function ne(){const W=G[L];W!==void 0&&W.type!==void 0&&(n.bindTexture(W.type,null),W.type=void 0,W.texture=void 0)}function he(){try{n.compressedTexImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function _e(){try{n.compressedTexImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function me(){try{n.texSubImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function $e(){try{n.texSubImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Be(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Ve(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function bt(){try{n.texStorage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function Me(){try{n.texStorage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function We(){try{n.texImage2D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function pt(){try{n.texImage3D.apply(n,arguments)}catch(W){console.error("THREE.WebGLState:",W)}}function ft(W){ve.equals(W)===!1&&(n.scissor(W.x,W.y,W.z,W.w),ve.copy(W))}function je(W){Le.equals(W)===!1&&(n.viewport(W.x,W.y,W.z,W.w),Le.copy(W))}function J(W,Ce){let ce=l.get(Ce);ce===void 0&&(ce=new WeakMap,l.set(Ce,ce));let ge=ce.get(W);ge===void 0&&(ge=n.getUniformBlockIndex(Ce,W.name),ce.set(W,ge))}function de(W,Ce){const ge=l.get(Ce).get(W);a.get(Ce)!==ge&&(n.uniformBlockBinding(Ce,ge,W.__bindingPointIndex),a.set(Ce,ge))}function Fe(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},L=null,G={},f={},h=new WeakMap,p=[],m=null,v=!1,A=null,x=null,g=null,_=null,S=null,w=null,R=null,b=new De(0,0,0),I=0,B=!1,z=null,C=null,P=null,j=null,X=null,ve.set(0,0,n.canvas.width,n.canvas.height),Le.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Ee,disable:Se,bindFramebuffer:lt,drawBuffers:st,useProgram:ut,setBlending:k,setMaterial:Pe,setFlipSided:Re,setCullFace:Ae,setLineWidth:Ie,setPolygonOffset:Ze,setScissorTest:ze,activeTexture:U,bindTexture:F,unbindTexture:ne,compressedTexImage2D:he,compressedTexImage3D:_e,texImage2D:We,texImage3D:pt,updateUBOMapping:J,uniformBlockBinding:de,texStorage2D:bt,texStorage3D:Me,texSubImage2D:me,texSubImage3D:$e,compressedTexSubImage2D:Be,compressedTexSubImage3D:Ve,scissor:ft,viewport:je,reset:Fe}}function e8(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function t8(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function n8(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function P1(n,e,t,i){const r=i8(i);switch(t){case xM:return n*e;case AM:return n*e;case SM:return n*e*2;case Tv:return n*e/r.components*r.byteLength;case vh:return n*e/r.components*r.byteLength;case MM:return n*e*2/r.components*r.byteLength;case bv:return n*e*2/r.components*r.byteLength;case _M:return n*e*3/r.components*r.byteLength;case mi:return n*e*4/r.components*r.byteLength;case Rv:return n*e*4/r.components*r.byteLength;case ud:case fd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case dd:case hd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case d0:case p0:return Math.max(n,16)*Math.max(e,8)/4;case f0:case h0:return Math.max(n,8)*Math.max(e,8)/2;case m0:case g0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case v0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case y0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case x0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case _0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case A0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case S0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case M0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case w0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case E0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case C0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case T0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case b0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case R0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case P0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case I0:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case pd:case B0:case L0:return Math.ceil(n/4)*Math.ceil(e/4)*16;case wM:case D0:return Math.ceil(n/4)*Math.ceil(e/4)*8;case F0:case N0:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function i8(n){switch(n){case is:case gM:return{byteLength:1,components:1};case Cu:case vM:case Vu:return{byteLength:2,components:1};case Ev:case Cv:return{byteLength:2,components:4};case xo:case wv:case Vi:return{byteLength:4,components:1};case yM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const r8={contain:e8,cover:t8,fill:n8,getByteLength:P1};function s8(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new pe,f=new WeakMap;let h;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(U,F){return m?new OffscreenCanvas(U,F):Qd("canvas")}function A(U,F,ne){let he=1;const _e=ze(U);if((_e.width>ne||_e.height>ne)&&(he=ne/Math.max(_e.width,_e.height)),he<1)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap||typeof VideoFrame<"u"&&U instanceof VideoFrame){const me=Math.floor(he*_e.width),$e=Math.floor(he*_e.height);h===void 0&&(h=v(me,$e));const Be=F?v(me,$e):h;return Be.width=me,Be.height=$e,Be.getContext("2d").drawImage(U,0,0,me,$e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+_e.width+"x"+_e.height+") to ("+me+"x"+$e+")."),Be}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+_e.width+"x"+_e.height+")."),U;return U}function x(U){return U.generateMipmaps&&U.minFilter!==Nn&&U.minFilter!==_n}function g(U){n.generateMipmap(U)}function _(U,F,ne,he,_e=!1){if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let me=F;if(F===n.RED&&(ne===n.FLOAT&&(me=n.R32F),ne===n.HALF_FLOAT&&(me=n.R16F),ne===n.UNSIGNED_BYTE&&(me=n.R8)),F===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(me=n.R8UI),ne===n.UNSIGNED_SHORT&&(me=n.R16UI),ne===n.UNSIGNED_INT&&(me=n.R32UI),ne===n.BYTE&&(me=n.R8I),ne===n.SHORT&&(me=n.R16I),ne===n.INT&&(me=n.R32I)),F===n.RG&&(ne===n.FLOAT&&(me=n.RG32F),ne===n.HALF_FLOAT&&(me=n.RG16F),ne===n.UNSIGNED_BYTE&&(me=n.RG8)),F===n.RG_INTEGER&&(ne===n.UNSIGNED_BYTE&&(me=n.RG8UI),ne===n.UNSIGNED_SHORT&&(me=n.RG16UI),ne===n.UNSIGNED_INT&&(me=n.RG32UI),ne===n.BYTE&&(me=n.RG8I),ne===n.SHORT&&(me=n.RG16I),ne===n.INT&&(me=n.RG32I)),F===n.RGB_INTEGER&&(ne===n.UNSIGNED_BYTE&&(me=n.RGB8UI),ne===n.UNSIGNED_SHORT&&(me=n.RGB16UI),ne===n.UNSIGNED_INT&&(me=n.RGB32UI),ne===n.BYTE&&(me=n.RGB8I),ne===n.SHORT&&(me=n.RGB16I),ne===n.INT&&(me=n.RGB32I)),F===n.RGBA_INTEGER&&(ne===n.UNSIGNED_BYTE&&(me=n.RGBA8UI),ne===n.UNSIGNED_SHORT&&(me=n.RGBA16UI),ne===n.UNSIGNED_INT&&(me=n.RGBA32UI),ne===n.BYTE&&(me=n.RGBA8I),ne===n.SHORT&&(me=n.RGBA16I),ne===n.INT&&(me=n.RGBA32I)),F===n.RGB&&ne===n.UNSIGNED_INT_5_9_9_9_REV&&(me=n.RGB9_E5),F===n.RGBA){const $e=_e?Xd:Vt.getTransfer(he);ne===n.FLOAT&&(me=n.RGBA32F),ne===n.HALF_FLOAT&&(me=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(me=$e===Yt?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(me=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(me=n.RGB5_A1)}return(me===n.R16F||me===n.R32F||me===n.RG16F||me===n.RG32F||me===n.RGBA16F||me===n.RGBA32F)&&e.get("EXT_color_buffer_float"),me}function S(U,F){let ne;return U?F===null||F===xo||F===Ul?ne=n.DEPTH24_STENCIL8:F===Vi?ne=n.DEPTH32F_STENCIL8:F===Cu&&(ne=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===xo||F===Ul?ne=n.DEPTH_COMPONENT24:F===Vi?ne=n.DEPTH_COMPONENT32F:F===Cu&&(ne=n.DEPTH_COMPONENT16),ne}function w(U,F){return x(U)===!0||U.isFramebufferTexture&&U.minFilter!==Nn&&U.minFilter!==_n?Math.log2(Math.max(F.width,F.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?F.mipmaps.length:1}function R(U){const F=U.target;F.removeEventListener("dispose",R),I(F),F.isVideoTexture&&f.delete(F)}function b(U){const F=U.target;F.removeEventListener("dispose",b),z(F)}function I(U){const F=i.get(U);if(F.__webglInit===void 0)return;const ne=U.source,he=p.get(ne);if(he){const _e=he[F.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&B(U),Object.keys(he).length===0&&p.delete(ne)}i.remove(U)}function B(U){const F=i.get(U);n.deleteTexture(F.__webglTexture);const ne=U.source,he=p.get(ne);delete he[F.__cacheKey],o.memory.textures--}function z(U){const F=i.get(U);if(U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(F.__webglFramebuffer[he]))for(let _e=0;_e<F.__webglFramebuffer[he].length;_e++)n.deleteFramebuffer(F.__webglFramebuffer[he][_e]);else n.deleteFramebuffer(F.__webglFramebuffer[he]);F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer[he])}else{if(Array.isArray(F.__webglFramebuffer))for(let he=0;he<F.__webglFramebuffer.length;he++)n.deleteFramebuffer(F.__webglFramebuffer[he]);else n.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&n.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let he=0;he<F.__webglColorRenderbuffer.length;he++)F.__webglColorRenderbuffer[he]&&n.deleteRenderbuffer(F.__webglColorRenderbuffer[he]);F.__webglDepthRenderbuffer&&n.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const ne=U.textures;for(let he=0,_e=ne.length;he<_e;he++){const me=i.get(ne[he]);me.__webglTexture&&(n.deleteTexture(me.__webglTexture),o.memory.textures--),i.remove(ne[he])}i.remove(U)}let C=0;function P(){C=0}function j(){const U=C;return U>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+r.maxTextures),C+=1,U}function X(U){const F=[];return F.push(U.wrapS),F.push(U.wrapT),F.push(U.wrapR||0),F.push(U.magFilter),F.push(U.minFilter),F.push(U.anisotropy),F.push(U.internalFormat),F.push(U.format),F.push(U.type),F.push(U.generateMipmaps),F.push(U.premultiplyAlpha),F.push(U.flipY),F.push(U.unpackAlignment),F.push(U.colorSpace),F.join()}function ee(U,F){const ne=i.get(U);if(U.isVideoTexture&&Ie(U),U.isRenderTargetTexture===!1&&U.version>0&&ne.__version!==U.version){const he=U.image;if(he===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Le(ne,U,F);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+F)}function le(U,F){const ne=i.get(U);if(U.version>0&&ne.__version!==U.version){Le(ne,U,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+F)}function $(U,F){const ne=i.get(U);if(U.version>0&&ne.__version!==U.version){Le(ne,U,F);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+F)}function K(U,F){const ne=i.get(U);if(U.version>0&&ne.__version!==U.version){oe(ne,U,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+F)}const L={[ha]:n.REPEAT,[nr]:n.CLAMP_TO_EDGE,[Eu]:n.MIRRORED_REPEAT},G={[Nn]:n.NEAREST,[Mv]:n.NEAREST_MIPMAP_NEAREST,[dl]:n.NEAREST_MIPMAP_LINEAR,[_n]:n.LINEAR,[hu]:n.LINEAR_MIPMAP_NEAREST,[Ir]:n.LINEAR_MIPMAP_LINEAR},V={[$L]:n.NEVER,[nD]:n.ALWAYS,[QL]:n.LESS,[TM]:n.LEQUAL,[qL]:n.EQUAL,[tD]:n.GEQUAL,[ZL]:n.GREATER,[eD]:n.NOTEQUAL};function te(U,F){if(F.type===Vi&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===_n||F.magFilter===hu||F.magFilter===dl||F.magFilter===Ir||F.minFilter===_n||F.minFilter===hu||F.minFilter===dl||F.minFilter===Ir)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(U,n.TEXTURE_WRAP_S,L[F.wrapS]),n.texParameteri(U,n.TEXTURE_WRAP_T,L[F.wrapT]),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,L[F.wrapR]),n.texParameteri(U,n.TEXTURE_MAG_FILTER,G[F.magFilter]),n.texParameteri(U,n.TEXTURE_MIN_FILTER,G[F.minFilter]),F.compareFunction&&(n.texParameteri(U,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(U,n.TEXTURE_COMPARE_FUNC,V[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===Nn||F.minFilter!==dl&&F.minFilter!==Ir||F.type===Vi&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||i.get(F).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");n.texParameterf(U,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,r.getMaxAnisotropy())),i.get(F).__currentAnisotropy=F.anisotropy}}}function ve(U,F){let ne=!1;U.__webglInit===void 0&&(U.__webglInit=!0,F.addEventListener("dispose",R));const he=F.source;let _e=p.get(he);_e===void 0&&(_e={},p.set(he,_e));const me=X(F);if(me!==U.__cacheKey){_e[me]===void 0&&(_e[me]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),_e[me].usedTimes++;const $e=_e[U.__cacheKey];$e!==void 0&&(_e[U.__cacheKey].usedTimes--,$e.usedTimes===0&&B(F)),U.__cacheKey=me,U.__webglTexture=_e[me].texture}return ne}function Le(U,F,ne){let he=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(he=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(he=n.TEXTURE_3D);const _e=ve(U,F),me=F.source;t.bindTexture(he,U.__webglTexture,n.TEXTURE0+ne);const $e=i.get(me);if(me.version!==$e.__version||_e===!0){t.activeTexture(n.TEXTURE0+ne);const Be=Vt.getPrimaries(Vt.workingColorSpace),Ve=F.colorSpace===Zs?null:Vt.getPrimaries(F.colorSpace),bt=F.colorSpace===Zs||Be===Ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);let Me=A(F.image,!1,r.maxTextureSize);Me=Ze(F,Me);const We=s.convert(F.format,F.colorSpace),pt=s.convert(F.type);let ft=_(F.internalFormat,We,pt,F.colorSpace,F.isVideoTexture);te(he,F);let je;const J=F.mipmaps,de=F.isVideoTexture!==!0,Fe=$e.__version===void 0||_e===!0,W=me.dataReady,Ce=w(F,Me);if(F.isDepthTexture)ft=S(F.format===kl,F.type),Fe&&(de?t.texStorage2D(n.TEXTURE_2D,1,ft,Me.width,Me.height):t.texImage2D(n.TEXTURE_2D,0,ft,Me.width,Me.height,0,We,pt,null));else if(F.isDataTexture)if(J.length>0){de&&Fe&&t.texStorage2D(n.TEXTURE_2D,Ce,ft,J[0].width,J[0].height);for(let ce=0,ge=J.length;ce<ge;ce++)je=J[ce],de?W&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,je.width,je.height,We,pt,je.data):t.texImage2D(n.TEXTURE_2D,ce,ft,je.width,je.height,0,We,pt,je.data);F.generateMipmaps=!1}else de?(Fe&&t.texStorage2D(n.TEXTURE_2D,Ce,ft,Me.width,Me.height),W&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Me.width,Me.height,We,pt,Me.data)):t.texImage2D(n.TEXTURE_2D,0,ft,Me.width,Me.height,0,We,pt,Me.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){de&&Fe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ce,ft,J[0].width,J[0].height,Me.depth);for(let ce=0,ge=J.length;ce<ge;ce++)if(je=J[ce],F.format!==mi)if(We!==null)if(de){if(W)if(F.layerUpdates.size>0){const Ue=P1(je.width,je.height,F.format,F.type);for(const ke of F.layerUpdates){const gt=je.data.subarray(ke*Ue/je.data.BYTES_PER_ELEMENT,(ke+1)*Ue/je.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,ke,je.width,je.height,1,We,gt,0,0)}F.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,je.width,je.height,Me.depth,We,je.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ce,ft,je.width,je.height,Me.depth,0,je.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else de?W&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,je.width,je.height,Me.depth,We,pt,je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ce,ft,je.width,je.height,Me.depth,0,We,pt,je.data)}else{de&&Fe&&t.texStorage2D(n.TEXTURE_2D,Ce,ft,J[0].width,J[0].height);for(let ce=0,ge=J.length;ce<ge;ce++)je=J[ce],F.format!==mi?We!==null?de?W&&t.compressedTexSubImage2D(n.TEXTURE_2D,ce,0,0,je.width,je.height,We,je.data):t.compressedTexImage2D(n.TEXTURE_2D,ce,ft,je.width,je.height,0,je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):de?W&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,je.width,je.height,We,pt,je.data):t.texImage2D(n.TEXTURE_2D,ce,ft,je.width,je.height,0,We,pt,je.data)}else if(F.isDataArrayTexture)if(de){if(Fe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ce,ft,Me.width,Me.height,Me.depth),W)if(F.layerUpdates.size>0){const ce=P1(Me.width,Me.height,F.format,F.type);for(const ge of F.layerUpdates){const Ue=Me.data.subarray(ge*ce/Me.data.BYTES_PER_ELEMENT,(ge+1)*ce/Me.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ge,Me.width,Me.height,1,We,pt,Ue)}F.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Me.width,Me.height,Me.depth,We,pt,Me.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ft,Me.width,Me.height,Me.depth,0,We,pt,Me.data);else if(F.isData3DTexture)de?(Fe&&t.texStorage3D(n.TEXTURE_3D,Ce,ft,Me.width,Me.height,Me.depth),W&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Me.width,Me.height,Me.depth,We,pt,Me.data)):t.texImage3D(n.TEXTURE_3D,0,ft,Me.width,Me.height,Me.depth,0,We,pt,Me.data);else if(F.isFramebufferTexture){if(Fe)if(de)t.texStorage2D(n.TEXTURE_2D,Ce,ft,Me.width,Me.height);else{let ce=Me.width,ge=Me.height;for(let Ue=0;Ue<Ce;Ue++)t.texImage2D(n.TEXTURE_2D,Ue,ft,ce,ge,0,We,pt,null),ce>>=1,ge>>=1}}else if(J.length>0){if(de&&Fe){const ce=ze(J[0]);t.texStorage2D(n.TEXTURE_2D,Ce,ft,ce.width,ce.height)}for(let ce=0,ge=J.length;ce<ge;ce++)je=J[ce],de?W&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,We,pt,je):t.texImage2D(n.TEXTURE_2D,ce,ft,We,pt,je);F.generateMipmaps=!1}else if(de){if(Fe){const ce=ze(Me);t.texStorage2D(n.TEXTURE_2D,Ce,ft,ce.width,ce.height)}W&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,We,pt,Me)}else t.texImage2D(n.TEXTURE_2D,0,ft,We,pt,Me);x(F)&&g(he),$e.__version=me.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function oe(U,F,ne){if(F.image.length!==6)return;const he=ve(U,F),_e=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+ne);const me=i.get(_e);if(_e.version!==me.__version||he===!0){t.activeTexture(n.TEXTURE0+ne);const $e=Vt.getPrimaries(Vt.workingColorSpace),Be=F.colorSpace===Zs?null:Vt.getPrimaries(F.colorSpace),Ve=F.colorSpace===Zs||$e===Be?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ve);const bt=F.isCompressedTexture||F.image[0].isCompressedTexture,Me=F.image[0]&&F.image[0].isDataTexture,We=[];for(let ge=0;ge<6;ge++)!bt&&!Me?We[ge]=A(F.image[ge],!0,r.maxCubemapSize):We[ge]=Me?F.image[ge].image:F.image[ge],We[ge]=Ze(F,We[ge]);const pt=We[0],ft=s.convert(F.format,F.colorSpace),je=s.convert(F.type),J=_(F.internalFormat,ft,je,F.colorSpace),de=F.isVideoTexture!==!0,Fe=me.__version===void 0||he===!0,W=_e.dataReady;let Ce=w(F,pt);te(n.TEXTURE_CUBE_MAP,F);let ce;if(bt){de&&Fe&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ce,J,pt.width,pt.height);for(let ge=0;ge<6;ge++){ce=We[ge].mipmaps;for(let Ue=0;Ue<ce.length;Ue++){const ke=ce[Ue];F.format!==mi?ft!==null?de?W&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ue,0,0,ke.width,ke.height,ft,ke.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ue,J,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):de?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ue,0,0,ke.width,ke.height,ft,je,ke.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ue,J,ke.width,ke.height,0,ft,je,ke.data)}}}else{if(ce=F.mipmaps,de&&Fe){ce.length>0&&Ce++;const ge=ze(We[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ce,J,ge.width,ge.height)}for(let ge=0;ge<6;ge++)if(Me){de?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,0,0,We[ge].width,We[ge].height,ft,je,We[ge].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,J,We[ge].width,We[ge].height,0,ft,je,We[ge].data);for(let Ue=0;Ue<ce.length;Ue++){const gt=ce[Ue].image[ge].image;de?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ue+1,0,0,gt.width,gt.height,ft,je,gt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ue+1,J,gt.width,gt.height,0,ft,je,gt.data)}}else{de?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,0,0,ft,je,We[ge]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,J,ft,je,We[ge]);for(let Ue=0;Ue<ce.length;Ue++){const ke=ce[Ue];de?W&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ue+1,0,0,ft,je,ke.image[ge]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ue+1,J,ft,je,ke.image[ge])}}}x(F)&&g(n.TEXTURE_CUBE_MAP),me.__version=_e.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function ye(U,F,ne,he,_e,me){const $e=s.convert(ne.format,ne.colorSpace),Be=s.convert(ne.type),Ve=_(ne.internalFormat,$e,Be,ne.colorSpace);if(!i.get(F).__hasExternalTextures){const Me=Math.max(1,F.width>>me),We=Math.max(1,F.height>>me);_e===n.TEXTURE_3D||_e===n.TEXTURE_2D_ARRAY?t.texImage3D(_e,me,Ve,Me,We,F.depth,0,$e,Be,null):t.texImage2D(_e,me,Ve,Me,We,0,$e,Be,null)}t.bindFramebuffer(n.FRAMEBUFFER,U),Ae(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,he,_e,i.get(ne).__webglTexture,0,Re(F)):(_e===n.TEXTURE_2D||_e>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&_e<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,he,_e,i.get(ne).__webglTexture,me),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(U,F,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,U),F.depthBuffer){const he=F.depthTexture,_e=he&&he.isDepthTexture?he.type:null,me=S(F.stencilBuffer,_e),$e=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=Re(F);Ae(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Be,me,F.width,F.height):ne?n.renderbufferStorageMultisample(n.RENDERBUFFER,Be,me,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,me,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,$e,n.RENDERBUFFER,U)}else{const he=F.textures;for(let _e=0;_e<he.length;_e++){const me=he[_e],$e=s.convert(me.format,me.colorSpace),Be=s.convert(me.type),Ve=_(me.internalFormat,$e,Be,me.colorSpace),bt=Re(F);ne&&Ae(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,Ve,F.width,F.height):Ae(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,bt,Ve,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,Ve,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Se(U,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,U),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),ee(F.depthTexture,0);const he=i.get(F.depthTexture).__webglTexture,_e=Re(F);if(F.depthTexture.format===El)Ae(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0);else if(F.depthTexture.format===kl)Ae(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0);else throw new Error("Unknown depthTexture format")}function lt(U){const F=i.get(U),ne=U.isWebGLCubeRenderTarget===!0;if(F.__boundDepthTexture!==U.depthTexture){const he=U.depthTexture;if(F.__depthDisposeCallback&&F.__depthDisposeCallback(),he){const _e=()=>{delete F.__boundDepthTexture,delete F.__depthDisposeCallback,he.removeEventListener("dispose",_e)};he.addEventListener("dispose",_e),F.__depthDisposeCallback=_e}F.__boundDepthTexture=he}if(U.depthTexture&&!F.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");Se(F.__webglFramebuffer,U)}else if(ne){F.__webglDepthbuffer=[];for(let he=0;he<6;he++)if(t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[he]),F.__webglDepthbuffer[he]===void 0)F.__webglDepthbuffer[he]=n.createRenderbuffer(),Ee(F.__webglDepthbuffer[he],U,!1);else{const _e=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,me=F.__webglDepthbuffer[he];n.bindRenderbuffer(n.RENDERBUFFER,me),n.framebufferRenderbuffer(n.FRAMEBUFFER,_e,n.RENDERBUFFER,me)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer===void 0)F.__webglDepthbuffer=n.createRenderbuffer(),Ee(F.__webglDepthbuffer,U,!1);else{const he=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,_e=F.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,_e),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,_e)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function st(U,F,ne){const he=i.get(U);F!==void 0&&ye(he.__webglFramebuffer,U,U.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&lt(U)}function ut(U){const F=U.texture,ne=i.get(U),he=i.get(F);U.addEventListener("dispose",b);const _e=U.textures,me=U.isWebGLCubeRenderTarget===!0,$e=_e.length>1;if($e||(he.__webglTexture===void 0&&(he.__webglTexture=n.createTexture()),he.__version=F.version,o.memory.textures++),me){ne.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)if(F.mipmaps&&F.mipmaps.length>0){ne.__webglFramebuffer[Be]=[];for(let Ve=0;Ve<F.mipmaps.length;Ve++)ne.__webglFramebuffer[Be][Ve]=n.createFramebuffer()}else ne.__webglFramebuffer[Be]=n.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Be=0;Be<F.mipmaps.length;Be++)ne.__webglFramebuffer[Be]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if($e)for(let Be=0,Ve=_e.length;Be<Ve;Be++){const bt=i.get(_e[Be]);bt.__webglTexture===void 0&&(bt.__webglTexture=n.createTexture(),o.memory.textures++)}if(U.samples>0&&Ae(U)===!1){ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Be=0;Be<_e.length;Be++){const Ve=_e[Be];ne.__webglColorRenderbuffer[Be]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[Be]);const bt=s.convert(Ve.format,Ve.colorSpace),Me=s.convert(Ve.type),We=_(Ve.internalFormat,bt,Me,Ve.colorSpace,U.isXRRenderTarget===!0),pt=Re(U);n.renderbufferStorageMultisample(n.RENDERBUFFER,pt,We,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Be,n.RENDERBUFFER,ne.__webglColorRenderbuffer[Be])}n.bindRenderbuffer(n.RENDERBUFFER,null),U.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(ne.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(me){t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture),te(n.TEXTURE_CUBE_MAP,F);for(let Be=0;Be<6;Be++)if(F.mipmaps&&F.mipmaps.length>0)for(let Ve=0;Ve<F.mipmaps.length;Ve++)ye(ne.__webglFramebuffer[Be][Ve],U,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,Ve);else ye(ne.__webglFramebuffer[Be],U,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0);x(F)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if($e){for(let Be=0,Ve=_e.length;Be<Ve;Be++){const bt=_e[Be],Me=i.get(bt);t.bindTexture(n.TEXTURE_2D,Me.__webglTexture),te(n.TEXTURE_2D,bt),ye(ne.__webglFramebuffer,U,bt,n.COLOR_ATTACHMENT0+Be,n.TEXTURE_2D,0),x(bt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let Be=n.TEXTURE_2D;if((U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(Be=U.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Be,he.__webglTexture),te(Be,F),F.mipmaps&&F.mipmaps.length>0)for(let Ve=0;Ve<F.mipmaps.length;Ve++)ye(ne.__webglFramebuffer[Ve],U,F,n.COLOR_ATTACHMENT0,Be,Ve);else ye(ne.__webglFramebuffer,U,F,n.COLOR_ATTACHMENT0,Be,0);x(F)&&g(Be),t.unbindTexture()}U.depthBuffer&&lt(U)}function ot(U){const F=U.textures;for(let ne=0,he=F.length;ne<he;ne++){const _e=F[ne];if(x(_e)){const me=U.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,$e=i.get(_e).__webglTexture;t.bindTexture(me,$e),g(me),t.unbindTexture()}}}const xe=[],k=[];function Pe(U){if(U.samples>0){if(Ae(U)===!1){const F=U.textures,ne=U.width,he=U.height;let _e=n.COLOR_BUFFER_BIT;const me=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$e=i.get(U),Be=F.length>1;if(Be)for(let Ve=0;Ve<F.length;Ve++)t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,$e.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglFramebuffer);for(let Ve=0;Ve<F.length;Ve++){if(U.resolveDepthBuffer&&(U.depthBuffer&&(_e|=n.DEPTH_BUFFER_BIT),U.stencilBuffer&&U.resolveStencilBuffer&&(_e|=n.STENCIL_BUFFER_BIT)),Be){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,$e.__webglColorRenderbuffer[Ve]);const bt=i.get(F[Ve]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,bt,0)}n.blitFramebuffer(0,0,ne,he,0,0,ne,he,_e,n.NEAREST),l===!0&&(xe.length=0,k.length=0,xe.push(n.COLOR_ATTACHMENT0+Ve),U.depthBuffer&&U.resolveDepthBuffer===!1&&(xe.push(me),k.push(me),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,k)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,xe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Be)for(let Ve=0;Ve<F.length;Ve++){t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,$e.__webglColorRenderbuffer[Ve]);const bt=i.get(F[Ve]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,bt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglMultisampledFramebuffer)}else if(U.depthBuffer&&U.resolveDepthBuffer===!1&&l){const F=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[F])}}}function Re(U){return Math.min(r.maxSamples,U.samples)}function Ae(U){const F=i.get(U);return U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Ie(U){const F=o.render.frame;f.get(U)!==F&&(f.set(U,F),U.update())}function Ze(U,F){const ne=U.colorSpace,he=U.format,_e=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||ne!==Mo&&ne!==Zs&&(Vt.getTransfer(ne)===Yt?(he!==mi||_e!==is)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),F}function ze(U){return typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement?(c.width=U.naturalWidth||U.width,c.height=U.naturalHeight||U.height):typeof VideoFrame<"u"&&U instanceof VideoFrame?(c.width=U.displayWidth,c.height=U.displayHeight):(c.width=U.width,c.height=U.height),c}this.allocateTextureUnit=j,this.resetTextureUnits=P,this.setTexture2D=ee,this.setTexture2DArray=le,this.setTexture3D=$,this.setTextureCube=K,this.rebindTextures=st,this.setupRenderTarget=ut,this.updateRenderTargetMipmap=ot,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=lt,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=Ae}function gD(n,e){function t(i,r=Zs){let s;const o=Vt.getTransfer(r);if(i===is)return n.UNSIGNED_BYTE;if(i===Ev)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Cv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===yM)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===gM)return n.BYTE;if(i===vM)return n.SHORT;if(i===Cu)return n.UNSIGNED_SHORT;if(i===wv)return n.INT;if(i===xo)return n.UNSIGNED_INT;if(i===Vi)return n.FLOAT;if(i===Vu)return n.HALF_FLOAT;if(i===xM)return n.ALPHA;if(i===_M)return n.RGB;if(i===mi)return n.RGBA;if(i===AM)return n.LUMINANCE;if(i===SM)return n.LUMINANCE_ALPHA;if(i===El)return n.DEPTH_COMPONENT;if(i===kl)return n.DEPTH_STENCIL;if(i===Tv)return n.RED;if(i===vh)return n.RED_INTEGER;if(i===MM)return n.RG;if(i===bv)return n.RG_INTEGER;if(i===Rv)return n.RGBA_INTEGER;if(i===ud||i===fd||i===dd||i===hd)if(o===Yt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===ud)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===fd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===dd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===hd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===ud)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===fd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===dd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===hd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===f0||i===d0||i===h0||i===p0)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===f0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===d0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===h0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===p0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===m0||i===g0||i===v0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===m0||i===g0)return o===Yt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===v0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===y0||i===x0||i===_0||i===A0||i===S0||i===M0||i===w0||i===E0||i===C0||i===T0||i===b0||i===R0||i===P0||i===I0)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===y0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===x0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===_0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===A0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===S0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===M0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===w0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===E0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===C0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===T0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===b0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===R0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===P0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===I0)return o===Yt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===pd||i===B0||i===L0)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===pd)return o===Yt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===B0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===L0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===wM||i===D0||i===F0||i===N0)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===pd)return s.COMPRESSED_RED_RGTC1_EXT;if(i===D0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===F0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===N0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ul?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class vD extends un{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class io extends It{constructor(){super(),this.isGroup=!0,this.type="Group"}}const o8={type:"move"};class C_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new io,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new io,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new io,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const A of e.hand.values()){const x=t.getJointPose(A,i),g=this._getHandJoint(c,A);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const f=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],p=f.position.distanceTo(h.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(o8)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new io;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const a8=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,l8=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class c8{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new en,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new ss({vertexShader:a8,fragmentShader:l8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new En(new Wu(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class u8 extends as{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,f=null,h=null,p=null,m=null,v=null;const A=new c8,x=t.getContextAttributes();let g=null,_=null;const S=[],w=[],R=new pe;let b=null;const I=new un;I.layers.enable(1),I.viewport=new Nt;const B=new un;B.layers.enable(2),B.viewport=new Nt;const z=[I,B],C=new vD;C.layers.enable(1),C.layers.enable(2);let P=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let ye=S[oe];return ye===void 0&&(ye=new C_,S[oe]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(oe){let ye=S[oe];return ye===void 0&&(ye=new C_,S[oe]=ye),ye.getGripSpace()},this.getHand=function(oe){let ye=S[oe];return ye===void 0&&(ye=new C_,S[oe]=ye),ye.getHandSpace()};function X(oe){const ye=w.indexOf(oe.inputSource);if(ye===-1)return;const Ee=S[ye];Ee!==void 0&&(Ee.update(oe.inputSource,oe.frame,c||o),Ee.dispatchEvent({type:oe.type,data:oe.inputSource}))}function ee(){r.removeEventListener("select",X),r.removeEventListener("selectstart",X),r.removeEventListener("selectend",X),r.removeEventListener("squeeze",X),r.removeEventListener("squeezestart",X),r.removeEventListener("squeezeend",X),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",le);for(let oe=0;oe<S.length;oe++){const ye=w[oe];ye!==null&&(w[oe]=null,S[oe].disconnect(ye))}P=null,j=null,A.reset(),e.setRenderTarget(g),m=null,p=null,h=null,r=null,_=null,Le.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(oe){c=oe},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(oe){if(r=oe,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",X),r.addEventListener("selectstart",X),r.addEventListener("selectend",X),r.addEventListener("squeeze",X),r.addEventListener("squeezestart",X),r.addEventListener("squeezeend",X),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",le),x.xrCompatible!==!0&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(R),r.renderState.layers===void 0){const ye={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,ye),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new rs(m.framebufferWidth,m.framebufferHeight,{format:mi,type:is,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let ye=null,Ee=null,Se=null;x.depth&&(Se=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ye=x.stencil?kl:El,Ee=x.stencil?Ul:xo);const lt={colorFormat:t.RGBA8,depthFormat:Se,scaleFactor:s};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(lt),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),_=new rs(p.textureWidth,p.textureHeight,{format:mi,type:is,depthTexture:new FM(p.textureWidth,p.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Le.setContext(r),Le.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function le(oe){for(let ye=0;ye<oe.removed.length;ye++){const Ee=oe.removed[ye],Se=w.indexOf(Ee);Se>=0&&(w[Se]=null,S[Se].disconnect(Ee))}for(let ye=0;ye<oe.added.length;ye++){const Ee=oe.added[ye];let Se=w.indexOf(Ee);if(Se===-1){for(let st=0;st<S.length;st++)if(st>=w.length){w.push(Ee),Se=st;break}else if(w[st]===null){w[st]=Ee,Se=st;break}if(Se===-1)break}const lt=S[Se];lt&&lt.connect(Ee)}}const $=new O,K=new O;function L(oe,ye,Ee){$.setFromMatrixPosition(ye.matrixWorld),K.setFromMatrixPosition(Ee.matrixWorld);const Se=$.distanceTo(K),lt=ye.projectionMatrix.elements,st=Ee.projectionMatrix.elements,ut=lt[14]/(lt[10]-1),ot=lt[14]/(lt[10]+1),xe=(lt[9]+1)/lt[5],k=(lt[9]-1)/lt[5],Pe=(lt[8]-1)/lt[0],Re=(st[8]+1)/st[0],Ae=ut*Pe,Ie=ut*Re,Ze=Se/(-Pe+Re),ze=Ze*-Pe;if(ye.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(ze),oe.translateZ(Ze),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),lt[10]===-1)oe.projectionMatrix.copy(ye.projectionMatrix),oe.projectionMatrixInverse.copy(ye.projectionMatrixInverse);else{const U=ut+Ze,F=ot+Ze,ne=Ae-ze,he=Ie+(Se-ze),_e=xe*ot/F*U,me=k*ot/F*U;oe.projectionMatrix.makePerspective(ne,he,_e,me,U,F),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function G(oe,ye){ye===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(ye.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(r===null)return;let ye=oe.near,Ee=oe.far;A.texture!==null&&(A.depthNear>0&&(ye=A.depthNear),A.depthFar>0&&(Ee=A.depthFar)),C.near=B.near=I.near=ye,C.far=B.far=I.far=Ee,(P!==C.near||j!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),P=C.near,j=C.far);const Se=oe.parent,lt=C.cameras;G(C,Se);for(let st=0;st<lt.length;st++)G(lt[st],Se);lt.length===2?L(C,I,B):C.projectionMatrix.copy(I.projectionMatrix),V(oe,C,Se)};function V(oe,ye,Ee){Ee===null?oe.matrix.copy(ye.matrixWorld):(oe.matrix.copy(Ee.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(ye.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(ye.projectionMatrix),oe.projectionMatrixInverse.copy(ye.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=Ru*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(oe){l=oe,p!==null&&(p.fixedFoveation=oe),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=oe)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(C)};let te=null;function ve(oe,ye){if(f=ye.getViewerPose(c||o),v=ye,f!==null){const Ee=f.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let Se=!1;Ee.length!==C.cameras.length&&(C.cameras.length=0,Se=!0);for(let st=0;st<Ee.length;st++){const ut=Ee[st];let ot=null;if(m!==null)ot=m.getViewport(ut);else{const k=h.getViewSubImage(p,ut);ot=k.viewport,st===0&&(e.setRenderTargetTextures(_,k.colorTexture,p.ignoreDepthValues?void 0:k.depthStencilTexture),e.setRenderTarget(_))}let xe=z[st];xe===void 0&&(xe=new un,xe.layers.enable(st),xe.viewport=new Nt,z[st]=xe),xe.matrix.fromArray(ut.transform.matrix),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),xe.projectionMatrix.fromArray(ut.projectionMatrix),xe.projectionMatrixInverse.copy(xe.projectionMatrix).invert(),xe.viewport.set(ot.x,ot.y,ot.width,ot.height),st===0&&(C.matrix.copy(xe.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),Se===!0&&C.cameras.push(xe)}const lt=r.enabledFeatures;if(lt&&lt.includes("depth-sensing")){const st=h.getDepthInformation(Ee[0]);st&&st.isValid&&st.texture&&A.init(e,st,r.renderState)}}for(let Ee=0;Ee<S.length;Ee++){const Se=w[Ee],lt=S[Ee];Se!==null&&lt!==void 0&&lt.update(Se,ye,c||o)}te&&te(oe,ye),ye.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ye}),v=null}const Le=new fD;Le.setAnimationLoop(ve),this.setAnimationLoop=function(oe){te=oe},this.dispose=function(){}}}const Va=new lr,f8=new rt;function d8(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function i(x,g){g.color.getRGB(x.fogColor.value,cD(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function r(x,g,_,S,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),h(x,g)):g.isMeshPhongMaterial?(s(x,g),f(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,w)):g.isMeshMatcapMaterial?(s(x,g),v(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),A(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,_,S):g.isSpriteMaterial?c(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===Li&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===Li&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const _=e.get(g),S=_.envMap,w=_.envMapRotation;S&&(x.envMap.value=S,Va.copy(w),Va.x*=-1,Va.y*=-1,Va.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Va.y*=-1,Va.z*=-1),x.envMapRotation.value.setFromMatrix4(f8.makeRotationFromEuler(Va)),x.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap&&(x.lightMap.value=g.lightMap,x.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,x.lightMapTransform)),g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,_,S){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*_,x.scale.value=S*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function c(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function f(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function h(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),g.envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,_){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Li&&x.clearcoatNormalScale.value.negate())),g.dispersion>0&&(x.dispersion.value=g.dispersion),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,g){g.matcap&&(x.matcap.value=g.matcap)}function A(x,g){const _=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function h8(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,S){const w=S.program;i.uniformBlockBinding(_,w)}function c(_,S){let w=r[_.id];w===void 0&&(v(_),w=f(_),r[_.id]=w,_.addEventListener("dispose",x));const R=S.program;i.updateUBOMapping(_,R);const b=e.render.frame;s[_.id]!==b&&(p(_),s[_.id]=b)}function f(_){const S=h();_.__bindingPointIndex=S;const w=n.createBuffer(),R=_.__size,b=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,R,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,w),w}function h(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const S=r[_.id],w=_.uniforms,R=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let b=0,I=w.length;b<I;b++){const B=Array.isArray(w[b])?w[b]:[w[b]];for(let z=0,C=B.length;z<C;z++){const P=B[z];if(m(P,b,z,R)===!0){const j=P.__offset,X=Array.isArray(P.value)?P.value:[P.value];let ee=0;for(let le=0;le<X.length;le++){const $=X[le],K=A($);typeof $=="number"||typeof $=="boolean"?(P.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,j+ee,P.__data)):$.isMatrix3?(P.__data[0]=$.elements[0],P.__data[1]=$.elements[1],P.__data[2]=$.elements[2],P.__data[3]=0,P.__data[4]=$.elements[3],P.__data[5]=$.elements[4],P.__data[6]=$.elements[5],P.__data[7]=0,P.__data[8]=$.elements[6],P.__data[9]=$.elements[7],P.__data[10]=$.elements[8],P.__data[11]=0):($.toArray(P.__data,ee),ee+=K.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,j,P.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(_,S,w,R){const b=_.value,I=S+"_"+w;if(R[I]===void 0)return typeof b=="number"||typeof b=="boolean"?R[I]=b:R[I]=b.clone(),!0;{const B=R[I];if(typeof b=="number"||typeof b=="boolean"){if(B!==b)return R[I]=b,!0}else if(B.equals(b)===!1)return B.copy(b),!0}return!1}function v(_){const S=_.uniforms;let w=0;const R=16;for(let I=0,B=S.length;I<B;I++){const z=Array.isArray(S[I])?S[I]:[S[I]];for(let C=0,P=z.length;C<P;C++){const j=z[C],X=Array.isArray(j.value)?j.value:[j.value];for(let ee=0,le=X.length;ee<le;ee++){const $=X[ee],K=A($),L=w%R,G=L%K.boundary,V=L+G;w+=G,V!==0&&R-V<K.storage&&(w+=R-V),j.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=w,w+=K.storage}}}const b=w%R;return b>0&&(w+=R-b),_.__size=w,_.__cache={},this}function A(_){const S={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(S.boundary=4,S.storage=4):_.isVector2?(S.boundary=8,S.storage=8):_.isVector3||_.isColor?(S.boundary=16,S.storage=12):_.isVector4?(S.boundary=16,S.storage=16):_.isMatrix3?(S.boundary=48,S.storage=48):_.isMatrix4?(S.boundary=64,S.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),S}function x(_){const S=_.target;S.removeEventListener("dispose",x);const w=o.indexOf(S.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function g(){for(const _ in r)n.deleteBuffer(r[_]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class yD{constructor(e={}){const{canvas:t=sD(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),v=new Int32Array(4);let A=null,x=null;const g=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Cr,this.toneMapping=Cs,this.toneMappingExposure=1;const S=this;let w=!1,R=0,b=0,I=null,B=-1,z=null;const C=new Nt,P=new Nt;let j=null;const X=new De(0);let ee=0,le=t.width,$=t.height,K=1,L=null,G=null;const V=new Nt(0,0,le,$),te=new Nt(0,0,le,$);let ve=!1;const Le=new Ah;let oe=!1,ye=!1;const Ee=new rt,Se=new rt,lt=new O,st=new Nt,ut={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ot=!1;function xe(){return I===null?K:1}let k=i;function Pe(N,Q){return t.getContext(N,Q)}try{const N={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zu}`),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",Ue,!1),t.addEventListener("webglcontextcreationerror",ke,!1),k===null){const Q="webgl2";if(k=Pe(Q,N),k===null)throw Pe(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}let Re,Ae,Ie,Ze,ze,U,F,ne,he,_e,me,$e,Be,Ve,bt,Me,We,pt,ft,je,J,de,Fe,W;function Ce(){Re=new x9(k),Re.init(),de=new gD(k,Re),Ae=new h9(k,Re,e,de),Ie=new Z5(k),Ae.reverseDepthBuffer&&Ie.buffers.depth.setReversed(!0),Ze=new S9(k),ze=new H5,U=new s8(k,Re,Ie,ze,Ae,de,Ze),F=new m9(S),ne=new y9(S),he=new Rz(k),Fe=new f9(k,he),_e=new _9(k,he,Ze,Fe),me=new w9(k,_e,he,Ze),ft=new M9(k,Ae,U),Me=new p9(ze),$e=new k5(S,F,ne,Re,Ae,Fe,Me),Be=new d8(S,ze),Ve=new G5,bt=new K5(Re),pt=new u9(S,F,ne,Ie,me,p,l),We=new Q5(S,me,Ae),W=new h8(k,Ze,Ae,Ie),je=new d9(k,Re,Ze),J=new A9(k,Re,Ze),Ze.programs=$e.programs,S.capabilities=Ae,S.extensions=Re,S.properties=ze,S.renderLists=Ve,S.shadowMap=We,S.state=Ie,S.info=Ze}Ce();const ce=new u8(S,k);this.xr=ce,this.getContext=function(){return k},this.getContextAttributes=function(){return k.getContextAttributes()},this.forceContextLoss=function(){const N=Re.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=Re.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(N){N!==void 0&&(K=N,this.setSize(le,$,!1))},this.getSize=function(N){return N.set(le,$)},this.setSize=function(N,Q,se=!0){if(ce.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}le=N,$=Q,t.width=Math.floor(N*K),t.height=Math.floor(Q*K),se===!0&&(t.style.width=N+"px",t.style.height=Q+"px"),this.setViewport(0,0,N,Q)},this.getDrawingBufferSize=function(N){return N.set(le*K,$*K).floor()},this.setDrawingBufferSize=function(N,Q,se){le=N,$=Q,K=se,t.width=Math.floor(N*se),t.height=Math.floor(Q*se),this.setViewport(0,0,N,Q)},this.getCurrentViewport=function(N){return N.copy(C)},this.getViewport=function(N){return N.copy(V)},this.setViewport=function(N,Q,se,ae){N.isVector4?V.set(N.x,N.y,N.z,N.w):V.set(N,Q,se,ae),Ie.viewport(C.copy(V).multiplyScalar(K).round())},this.getScissor=function(N){return N.copy(te)},this.setScissor=function(N,Q,se,ae){N.isVector4?te.set(N.x,N.y,N.z,N.w):te.set(N,Q,se,ae),Ie.scissor(P.copy(te).multiplyScalar(K).round())},this.getScissorTest=function(){return ve},this.setScissorTest=function(N){Ie.setScissorTest(ve=N)},this.setOpaqueSort=function(N){L=N},this.setTransparentSort=function(N){G=N},this.getClearColor=function(N){return N.copy(pt.getClearColor())},this.setClearColor=function(){pt.setClearColor.apply(pt,arguments)},this.getClearAlpha=function(){return pt.getClearAlpha()},this.setClearAlpha=function(){pt.setClearAlpha.apply(pt,arguments)},this.clear=function(N=!0,Q=!0,se=!0){let ae=0;if(N){let Z=!1;if(I!==null){const be=I.texture.format;Z=be===Rv||be===bv||be===vh}if(Z){const be=I.texture.type,Ge=be===is||be===xo||be===Cu||be===Ul||be===Ev||be===Cv,Je=pt.getClearColor(),Ke=pt.getClearAlpha(),ct=Je.r,dt=Je.g,et=Je.b;Ge?(m[0]=ct,m[1]=dt,m[2]=et,m[3]=Ke,k.clearBufferuiv(k.COLOR,0,m)):(v[0]=ct,v[1]=dt,v[2]=et,v[3]=Ke,k.clearBufferiv(k.COLOR,0,v))}else ae|=k.COLOR_BUFFER_BIT}Q&&(ae|=k.DEPTH_BUFFER_BIT,k.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),se&&(ae|=k.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),k.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",Ue,!1),t.removeEventListener("webglcontextcreationerror",ke,!1),Ve.dispose(),bt.dispose(),ze.dispose(),F.dispose(),ne.dispose(),me.dispose(),Fe.dispose(),W.dispose(),$e.dispose(),ce.dispose(),ce.removeEventListener("sessionstart",Gh),ce.removeEventListener("sessionend",Vh),Ns.stop()};function ge(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ue(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const N=Ze.autoReset,Q=We.enabled,se=We.autoUpdate,ae=We.needsUpdate,Z=We.type;Ce(),Ze.autoReset=N,We.enabled=Q,We.autoUpdate=se,We.needsUpdate=ae,We.type=Z}function ke(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function gt(N){const Q=N.target;Q.removeEventListener("dispose",gt),Dt(Q)}function Dt(N){mn(N),ze.remove(N)}function mn(N){const Q=ze.get(N).programs;Q!==void 0&&(Q.forEach(function(se){$e.releaseProgram(se)}),N.isShaderMaterial&&$e.releaseShaderCache(N))}this.renderBufferDirect=function(N,Q,se,ae,Z,be){Q===null&&(Q=ut);const Ge=Z.isMesh&&Z.matrixWorld.determinant()<0,Je=yy(N,Q,se,ae,Z);Ie.setMaterial(ae,Ge);let Ke=se.index,ct=1;if(ae.wireframe===!0){if(Ke=_e.getWireframeAttribute(se),Ke===void 0)return;ct=2}const dt=se.drawRange,et=se.attributes.position;let Ft=dt.start*ct,kt=(dt.start+dt.count)*ct;be!==null&&(Ft=Math.max(Ft,be.start*ct),kt=Math.min(kt,(be.start+be.count)*ct)),Ke!==null?(Ft=Math.max(Ft,0),kt=Math.min(kt,Ke.count)):et!=null&&(Ft=Math.max(Ft,0),kt=Math.min(kt,et.count));const Wt=kt-Ft;if(Wt<0||Wt===1/0)return;Fe.setup(Z,ae,Je,se,Ke);let Ct,nt=je;if(Ke!==null&&(Ct=he.get(Ke),nt=J,nt.setIndex(Ct)),Z.isMesh)ae.wireframe===!0?(Ie.setLineWidth(ae.wireframeLinewidth*xe()),nt.setMode(k.LINES)):nt.setMode(k.TRIANGLES);else if(Z.isLine){let Qe=ae.linewidth;Qe===void 0&&(Qe=1),Ie.setLineWidth(Qe*xe()),Z.isLineSegments?nt.setMode(k.LINES):Z.isLineLoop?nt.setMode(k.LINE_LOOP):nt.setMode(k.LINE_STRIP)}else Z.isPoints?nt.setMode(k.POINTS):Z.isSprite&&nt.setMode(k.TRIANGLES);if(Z.isBatchedMesh)if(Z._multiDrawInstances!==null)nt.renderMultiDrawInstances(Z._multiDrawStarts,Z._multiDrawCounts,Z._multiDrawCount,Z._multiDrawInstances);else if(Re.get("WEBGL_multi_draw"))nt.renderMultiDraw(Z._multiDrawStarts,Z._multiDrawCounts,Z._multiDrawCount);else{const Qe=Z._multiDrawStarts,Bt=Z._multiDrawCounts,vt=Z._multiDrawCount,Bn=Ke?he.get(Ke).bytesPerElement:1,Ji=ze.get(ae).currentProgram.getUniforms();for(let Jt=0;Jt<vt;Jt++)Ji.setValue(k,"_gl_DrawID",Jt),nt.render(Qe[Jt]/Bn,Bt[Jt])}else if(Z.isInstancedMesh)nt.renderInstances(Ft,Wt,Z.count);else if(se.isInstancedBufferGeometry){const Qe=se._maxInstanceCount!==void 0?se._maxInstanceCount:1/0,Bt=Math.min(se.instanceCount,Qe);nt.renderInstances(Ft,Wt,Bt)}else nt.render(Ft,Wt)};function wt(N,Q,se){N.transparent===!0&&N.side===Qr&&N.forceSinglePass===!1?(N.side=Li,N.needsUpdate=!0,ic(N,Q,se),N.side=Bs,N.needsUpdate=!0,ic(N,Q,se),N.side=Qr):ic(N,Q,se)}this.compile=function(N,Q,se=null){se===null&&(se=N),x=bt.get(se),x.init(Q),_.push(x),se.traverseVisible(function(Z){Z.isLight&&Z.layers.test(Q.layers)&&(x.pushLight(Z),Z.castShadow&&x.pushShadow(Z))}),N!==se&&N.traverseVisible(function(Z){Z.isLight&&Z.layers.test(Q.layers)&&(x.pushLight(Z),Z.castShadow&&x.pushShadow(Z))}),x.setupLights();const ae=new Set;return N.traverse(function(Z){if(!(Z.isMesh||Z.isPoints||Z.isLine||Z.isSprite))return;const be=Z.material;if(be)if(Array.isArray(be))for(let Ge=0;Ge<be.length;Ge++){const Je=be[Ge];wt(Je,se,Z),ae.add(Je)}else wt(be,se,Z),ae.add(be)}),_.pop(),x=null,ae},this.compileAsync=function(N,Q,se=null){const ae=this.compile(N,Q,se);return new Promise(Z=>{function be(){if(ae.forEach(function(Ge){ze.get(Ge).currentProgram.isReady()&&ae.delete(Ge)}),ae.size===0){Z(N);return}setTimeout(be,10)}Re.get("KHR_parallel_shader_compile")!==null?be():setTimeout(be,10)})};let an=null;function Xn(N){an&&an(N)}function Gh(){Ns.stop()}function Vh(){Ns.start()}const Ns=new fD;Ns.setAnimationLoop(Xn),typeof self<"u"&&Ns.setContext(self),this.setAnimationLoop=function(N){an=N,ce.setAnimationLoop(N),N===null?Ns.stop():Ns.start()},ce.addEventListener("sessionstart",Gh),ce.addEventListener("sessionend",Vh),this.render=function(N,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),ce.enabled===!0&&ce.isPresenting===!0&&(ce.cameraAutoUpdate===!0&&ce.updateCamera(Q),Q=ce.getCamera()),N.isScene===!0&&N.onBeforeRender(S,N,Q,I),x=bt.get(N,_.length),x.init(Q),_.push(x),Se.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),Le.setFromProjectionMatrix(Se),ye=this.localClippingEnabled,oe=Me.init(this.clippingPlanes,ye),A=Ve.get(N,g.length),A.init(),g.push(A),ce.enabled===!0&&ce.isPresenting===!0){const be=S.xr.getDepthSensingMesh();be!==null&&tc(be,Q,-1/0,S.sortObjects)}tc(N,Q,0,S.sortObjects),A.finish(),S.sortObjects===!0&&A.sort(L,G),ot=ce.enabled===!1||ce.isPresenting===!1||ce.hasDepthSensing()===!1,ot&&pt.addToRenderList(A,N),this.info.render.frame++,oe===!0&&Me.beginShadows();const se=x.state.shadowsArray;We.render(se,N,Q),oe===!0&&Me.endShadows(),this.info.autoReset===!0&&this.info.reset();const ae=A.opaque,Z=A.transmissive;if(x.setupLights(),Q.isArrayCamera){const be=Q.cameras;if(Z.length>0)for(let Ge=0,Je=be.length;Ge<Je;Ge++){const Ke=be[Ge];Wh(ae,Z,N,Ke)}ot&&pt.render(N);for(let Ge=0,Je=be.length;Ge<Je;Ge++){const Ke=be[Ge];nc(A,N,Ke,Ke.viewport)}}else Z.length>0&&Wh(ae,Z,N,Q),ot&&pt.render(N),nc(A,N,Q);I!==null&&(U.updateMultisampleRenderTarget(I),U.updateRenderTargetMipmap(I)),N.isScene===!0&&N.onAfterRender(S,N,Q),Fe.resetDefaultState(),B=-1,z=null,_.pop(),_.length>0?(x=_[_.length-1],oe===!0&&Me.setGlobalState(S.clippingPlanes,x.state.camera)):x=null,g.pop(),g.length>0?A=g[g.length-1]:A=null};function tc(N,Q,se,ae){if(N.visible===!1)return;if(N.layers.test(Q.layers)){if(N.isGroup)se=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(Q);else if(N.isLight)x.pushLight(N),N.castShadow&&x.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||Le.intersectsSprite(N)){ae&&st.setFromMatrixPosition(N.matrixWorld).applyMatrix4(Se);const Ge=me.update(N),Je=N.material;Je.visible&&A.push(N,Ge,Je,se,st.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||Le.intersectsObject(N))){const Ge=me.update(N),Je=N.material;if(ae&&(N.boundingSphere!==void 0?(N.boundingSphere===null&&N.computeBoundingSphere(),st.copy(N.boundingSphere.center)):(Ge.boundingSphere===null&&Ge.computeBoundingSphere(),st.copy(Ge.boundingSphere.center)),st.applyMatrix4(N.matrixWorld).applyMatrix4(Se)),Array.isArray(Je)){const Ke=Ge.groups;for(let ct=0,dt=Ke.length;ct<dt;ct++){const et=Ke[ct],Ft=Je[et.materialIndex];Ft&&Ft.visible&&A.push(N,Ge,Ft,se,st.z,et)}}else Je.visible&&A.push(N,Ge,Je,se,st.z,null)}}const be=N.children;for(let Ge=0,Je=be.length;Ge<Je;Ge++)tc(be[Ge],Q,se,ae)}function nc(N,Q,se,ae){const Z=N.opaque,be=N.transmissive,Ge=N.transparent;x.setupLightsView(se),oe===!0&&Me.setGlobalState(S.clippingPlanes,se),ae&&Ie.viewport(C.copy(ae)),Z.length>0&&fs(Z,Q,se),be.length>0&&fs(be,Q,se),Ge.length>0&&fs(Ge,Q,se),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function Wh(N,Q,se,ae){if((se.isScene===!0?se.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[ae.id]===void 0&&(x.state.transmissionRenderTarget[ae.id]=new rs(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")||Re.has("EXT_color_buffer_float")?Vu:is,minFilter:Ir,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Vt.workingColorSpace}));const be=x.state.transmissionRenderTarget[ae.id],Ge=ae.viewport||C;be.setSize(Ge.z,Ge.w);const Je=S.getRenderTarget();S.setRenderTarget(be),S.getClearColor(X),ee=S.getClearAlpha(),ee<1&&S.setClearColor(16777215,.5),S.clear(),ot&&pt.render(se);const Ke=S.toneMapping;S.toneMapping=Cs;const ct=ae.viewport;if(ae.viewport!==void 0&&(ae.viewport=void 0),x.setupLightsView(ae),oe===!0&&Me.setGlobalState(S.clippingPlanes,ae),fs(N,se,ae),U.updateMultisampleRenderTarget(be),U.updateRenderTargetMipmap(be),Re.has("WEBGL_multisampled_render_to_texture")===!1){let dt=!1;for(let et=0,Ft=Q.length;et<Ft;et++){const kt=Q[et],Wt=kt.object,Ct=kt.geometry,nt=kt.material,Qe=kt.group;if(nt.side===Qr&&Wt.layers.test(ae.layers)){const Bt=nt.side;nt.side=Li,nt.needsUpdate=!0,jh(Wt,se,ae,Ct,nt,Qe),nt.side=Bt,nt.needsUpdate=!0,dt=!0}}dt===!0&&(U.updateMultisampleRenderTarget(be),U.updateRenderTargetMipmap(be))}S.setRenderTarget(Je),S.setClearColor(X,ee),ct!==void 0&&(ae.viewport=ct),S.toneMapping=Ke}function fs(N,Q,se){const ae=Q.isScene===!0?Q.overrideMaterial:null;for(let Z=0,be=N.length;Z<be;Z++){const Ge=N[Z],Je=Ge.object,Ke=Ge.geometry,ct=ae===null?Ge.material:ae,dt=Ge.group;Je.layers.test(se.layers)&&jh(Je,Q,se,Ke,ct,dt)}}function jh(N,Q,se,ae,Z,be){N.onBeforeRender(S,Q,se,ae,Z,be),N.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),Z.onBeforeRender(S,Q,se,ae,N,be),Z.transparent===!0&&Z.side===Qr&&Z.forceSinglePass===!1?(Z.side=Li,Z.needsUpdate=!0,S.renderBufferDirect(se,Q,ae,Z,N,be),Z.side=Bs,Z.needsUpdate=!0,S.renderBufferDirect(se,Q,ae,Z,N,be),Z.side=Qr):S.renderBufferDirect(se,Q,ae,Z,N,be),N.onAfterRender(S,Q,se,ae,Z,be)}function ic(N,Q,se){Q.isScene!==!0&&(Q=ut);const ae=ze.get(N),Z=x.state.lights,be=x.state.shadowsArray,Ge=Z.state.version,Je=$e.getParameters(N,Z.state,be,Q,se),Ke=$e.getProgramCacheKey(Je);let ct=ae.programs;ae.environment=N.isMeshStandardMaterial?Q.environment:null,ae.fog=Q.fog,ae.envMap=(N.isMeshStandardMaterial?ne:F).get(N.envMap||ae.environment),ae.envMapRotation=ae.environment!==null&&N.envMap===null?Q.environmentRotation:N.envMapRotation,ct===void 0&&(N.addEventListener("dispose",gt),ct=new Map,ae.programs=ct);let dt=ct.get(Ke);if(dt!==void 0){if(ae.currentProgram===dt&&ae.lightsStateVersion===Ge)return Jh(N,Je),dt}else Je.uniforms=$e.getUniforms(N),N.onBeforeCompile(Je,S),dt=$e.acquireProgram(Je,Ke),ct.set(Ke,dt),ae.uniforms=Je.uniforms;const et=ae.uniforms;return(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(et.clippingPlanes=Me.uniform),Jh(N,Je),ae.needsLights=_y(N),ae.lightsStateVersion=Ge,ae.needsLights&&(et.ambientLightColor.value=Z.state.ambient,et.lightProbe.value=Z.state.probe,et.directionalLights.value=Z.state.directional,et.directionalLightShadows.value=Z.state.directionalShadow,et.spotLights.value=Z.state.spot,et.spotLightShadows.value=Z.state.spotShadow,et.rectAreaLights.value=Z.state.rectArea,et.ltc_1.value=Z.state.rectAreaLTC1,et.ltc_2.value=Z.state.rectAreaLTC2,et.pointLights.value=Z.state.point,et.pointLightShadows.value=Z.state.pointShadow,et.hemisphereLights.value=Z.state.hemi,et.directionalShadowMap.value=Z.state.directionalShadowMap,et.directionalShadowMatrix.value=Z.state.directionalShadowMatrix,et.spotShadowMap.value=Z.state.spotShadowMap,et.spotLightMatrix.value=Z.state.spotLightMatrix,et.spotLightMap.value=Z.state.spotLightMap,et.pointShadowMap.value=Z.state.pointShadowMap,et.pointShadowMatrix.value=Z.state.pointShadowMatrix),ae.currentProgram=dt,ae.uniformsList=null,dt}function Xh(N){if(N.uniformsList===null){const Q=N.currentProgram.getUniforms();N.uniformsList=Ag.seqWithValue(Q.seq,N.uniforms)}return N.uniformsList}function Jh(N,Q){const se=ze.get(N);se.outputColorSpace=Q.outputColorSpace,se.batching=Q.batching,se.batchingColor=Q.batchingColor,se.instancing=Q.instancing,se.instancingColor=Q.instancingColor,se.instancingMorph=Q.instancingMorph,se.skinning=Q.skinning,se.morphTargets=Q.morphTargets,se.morphNormals=Q.morphNormals,se.morphColors=Q.morphColors,se.morphTargetsCount=Q.morphTargetsCount,se.numClippingPlanes=Q.numClippingPlanes,se.numIntersection=Q.numClipIntersection,se.vertexAlphas=Q.vertexAlphas,se.vertexTangents=Q.vertexTangents,se.toneMapping=Q.toneMapping}function yy(N,Q,se,ae,Z){Q.isScene!==!0&&(Q=ut),U.resetTextureUnits();const be=Q.fog,Ge=ae.isMeshStandardMaterial?Q.environment:null,Je=I===null?S.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Mo,Ke=(ae.isMeshStandardMaterial?ne:F).get(ae.envMap||Ge),ct=ae.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,dt=!!se.attributes.tangent&&(!!ae.normalMap||ae.anisotropy>0),et=!!se.morphAttributes.position,Ft=!!se.morphAttributes.normal,kt=!!se.morphAttributes.color;let Wt=Cs;ae.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Wt=S.toneMapping);const Ct=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,nt=Ct!==void 0?Ct.length:0,Qe=ze.get(ae),Bt=x.state.lights;if(oe===!0&&(ye===!0||N!==z)){const Si=N===z&&ae.id===B;Me.setState(ae,N,Si)}let vt=!1;ae.version===Qe.__version?(Qe.needsLights&&Qe.lightsStateVersion!==Bt.state.version||Qe.outputColorSpace!==Je||Z.isBatchedMesh&&Qe.batching===!1||!Z.isBatchedMesh&&Qe.batching===!0||Z.isBatchedMesh&&Qe.batchingColor===!0&&Z.colorTexture===null||Z.isBatchedMesh&&Qe.batchingColor===!1&&Z.colorTexture!==null||Z.isInstancedMesh&&Qe.instancing===!1||!Z.isInstancedMesh&&Qe.instancing===!0||Z.isSkinnedMesh&&Qe.skinning===!1||!Z.isSkinnedMesh&&Qe.skinning===!0||Z.isInstancedMesh&&Qe.instancingColor===!0&&Z.instanceColor===null||Z.isInstancedMesh&&Qe.instancingColor===!1&&Z.instanceColor!==null||Z.isInstancedMesh&&Qe.instancingMorph===!0&&Z.morphTexture===null||Z.isInstancedMesh&&Qe.instancingMorph===!1&&Z.morphTexture!==null||Qe.envMap!==Ke||ae.fog===!0&&Qe.fog!==be||Qe.numClippingPlanes!==void 0&&(Qe.numClippingPlanes!==Me.numPlanes||Qe.numIntersection!==Me.numIntersection)||Qe.vertexAlphas!==ct||Qe.vertexTangents!==dt||Qe.morphTargets!==et||Qe.morphNormals!==Ft||Qe.morphColors!==kt||Qe.toneMapping!==Wt||Qe.morphTargetsCount!==nt)&&(vt=!0):(vt=!0,Qe.__version=ae.version);let Bn=Qe.currentProgram;vt===!0&&(Bn=ic(ae,Q,Z));let Ji=!1,Jt=!1,Eo=!1;const tn=Bn.getUniforms(),Ur=Qe.uniforms;if(Ie.useProgram(Bn.program)&&(Ji=!0,Jt=!0,Eo=!0),ae.id!==B&&(B=ae.id,Jt=!0),Ji||z!==N){Ae.reverseDepthBuffer?(Ee.copy(N.projectionMatrix),Z4(Ee),ez(Ee),tn.setValue(k,"projectionMatrix",Ee)):tn.setValue(k,"projectionMatrix",N.projectionMatrix),tn.setValue(k,"viewMatrix",N.matrixWorldInverse);const Si=tn.map.cameraPosition;Si!==void 0&&Si.setValue(k,lt.setFromMatrixPosition(N.matrixWorld)),Ae.logarithmicDepthBuffer&&tn.setValue(k,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&tn.setValue(k,"isOrthographic",N.isOrthographicCamera===!0),z!==N&&(z=N,Jt=!0,Eo=!0)}if(Z.isSkinnedMesh){tn.setOptional(k,Z,"bindMatrix"),tn.setOptional(k,Z,"bindMatrixInverse");const Si=Z.skeleton;Si&&(Si.boneTexture===null&&Si.computeBoneTexture(),tn.setValue(k,"boneTexture",Si.boneTexture,U))}Z.isBatchedMesh&&(tn.setOptional(k,Z,"batchingTexture"),tn.setValue(k,"batchingTexture",Z._matricesTexture,U),tn.setOptional(k,Z,"batchingIdTexture"),tn.setValue(k,"batchingIdTexture",Z._indirectTexture,U),tn.setOptional(k,Z,"batchingColorTexture"),Z._colorsTexture!==null&&tn.setValue(k,"batchingColorTexture",Z._colorsTexture,U));const Co=se.morphAttributes;if((Co.position!==void 0||Co.normal!==void 0||Co.color!==void 0)&&ft.update(Z,se,Bn),(Jt||Qe.receiveShadow!==Z.receiveShadow)&&(Qe.receiveShadow=Z.receiveShadow,tn.setValue(k,"receiveShadow",Z.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(Ur.envMap.value=Ke,Ur.flipEnvMap.value=Ke.isCubeTexture&&Ke.isRenderTargetTexture===!1?-1:1),ae.isMeshStandardMaterial&&ae.envMap===null&&Q.environment!==null&&(Ur.envMapIntensity.value=Q.environmentIntensity),Jt&&(tn.setValue(k,"toneMappingExposure",S.toneMappingExposure),Qe.needsLights&&xy(Ur,Eo),be&&ae.fog===!0&&Be.refreshFogUniforms(Ur,be),Be.refreshMaterialUniforms(Ur,ae,K,$,x.state.transmissionRenderTarget[N.id]),Ag.upload(k,Xh(Qe),Ur,U)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(Ag.upload(k,Xh(Qe),Ur,U),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&tn.setValue(k,"center",Z.center),tn.setValue(k,"modelViewMatrix",Z.modelViewMatrix),tn.setValue(k,"normalMatrix",Z.normalMatrix),tn.setValue(k,"modelMatrix",Z.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){const Si=ae.uniformsGroups;for(let Mi=0,Ay=Si.length;Mi<Ay;Mi++){const Kh=Si[Mi];W.update(Kh,Bn),W.bind(Kh,Bn)}}return Bn}function xy(N,Q){N.ambientLightColor.needsUpdate=Q,N.lightProbe.needsUpdate=Q,N.directionalLights.needsUpdate=Q,N.directionalLightShadows.needsUpdate=Q,N.pointLights.needsUpdate=Q,N.pointLightShadows.needsUpdate=Q,N.spotLights.needsUpdate=Q,N.spotLightShadows.needsUpdate=Q,N.rectAreaLights.needsUpdate=Q,N.hemisphereLights.needsUpdate=Q}function _y(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(N,Q,se){ze.get(N.texture).__webglTexture=Q,ze.get(N.depthTexture).__webglTexture=se;const ae=ze.get(N);ae.__hasExternalTextures=!0,ae.__autoAllocateDepthBuffer=se===void 0,ae.__autoAllocateDepthBuffer||Re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ae.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(N,Q){const se=ze.get(N);se.__webglFramebuffer=Q,se.__useDefaultFramebuffer=Q===void 0},this.setRenderTarget=function(N,Q=0,se=0){I=N,R=Q,b=se;let ae=!0,Z=null,be=!1,Ge=!1;if(N){const Ke=ze.get(N);if(Ke.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(k.FRAMEBUFFER,null),ae=!1;else if(Ke.__webglFramebuffer===void 0)U.setupRenderTarget(N);else if(Ke.__hasExternalTextures)U.rebindTextures(N,ze.get(N.texture).__webglTexture,ze.get(N.depthTexture).__webglTexture);else if(N.depthBuffer){const et=N.depthTexture;if(Ke.__boundDepthTexture!==et){if(et!==null&&ze.has(et)&&(N.width!==et.image.width||N.height!==et.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");U.setupDepthRenderbuffer(N)}}const ct=N.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&(Ge=!0);const dt=ze.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(Array.isArray(dt[Q])?Z=dt[Q][se]:Z=dt[Q],be=!0):N.samples>0&&U.useMultisampledRTT(N)===!1?Z=ze.get(N).__webglMultisampledFramebuffer:Array.isArray(dt)?Z=dt[se]:Z=dt,C.copy(N.viewport),P.copy(N.scissor),j=N.scissorTest}else C.copy(V).multiplyScalar(K).floor(),P.copy(te).multiplyScalar(K).floor(),j=ve;if(Ie.bindFramebuffer(k.FRAMEBUFFER,Z)&&ae&&Ie.drawBuffers(N,Z),Ie.viewport(C),Ie.scissor(P),Ie.setScissorTest(j),be){const Ke=ze.get(N.texture);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Ke.__webglTexture,se)}else if(Ge){const Ke=ze.get(N.texture),ct=Q||0;k.framebufferTextureLayer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,Ke.__webglTexture,se||0,ct)}B=-1},this.readRenderTargetPixels=function(N,Q,se,ae,Z,be,Ge){if(!(N&&N.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Je=ze.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Ge!==void 0&&(Je=Je[Ge]),Je){Ie.bindFramebuffer(k.FRAMEBUFFER,Je);try{const Ke=N.texture,ct=Ke.format,dt=Ke.type;if(!Ae.textureFormatReadable(ct)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ae.textureTypeReadable(dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=N.width-ae&&se>=0&&se<=N.height-Z&&k.readPixels(Q,se,ae,Z,de.convert(ct),de.convert(dt),be)}finally{const Ke=I!==null?ze.get(I).__webglFramebuffer:null;Ie.bindFramebuffer(k.FRAMEBUFFER,Ke)}}},this.readRenderTargetPixelsAsync=async function(N,Q,se,ae,Z,be,Ge){if(!(N&&N.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Je=ze.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Ge!==void 0&&(Je=Je[Ge]),Je){const Ke=N.texture,ct=Ke.format,dt=Ke.type;if(!Ae.textureFormatReadable(ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ae.textureTypeReadable(dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Q>=0&&Q<=N.width-ae&&se>=0&&se<=N.height-Z){Ie.bindFramebuffer(k.FRAMEBUFFER,Je);const et=k.createBuffer();k.bindBuffer(k.PIXEL_PACK_BUFFER,et),k.bufferData(k.PIXEL_PACK_BUFFER,be.byteLength,k.STREAM_READ),k.readPixels(Q,se,ae,Z,de.convert(ct),de.convert(dt),0);const Ft=I!==null?ze.get(I).__webglFramebuffer:null;Ie.bindFramebuffer(k.FRAMEBUFFER,Ft);const kt=k.fenceSync(k.SYNC_GPU_COMMANDS_COMPLETE,0);return k.flush(),await q4(k,kt,4),k.bindBuffer(k.PIXEL_PACK_BUFFER,et),k.getBufferSubData(k.PIXEL_PACK_BUFFER,0,be),k.deleteBuffer(et),k.deleteSync(kt),be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(N,Q=null,se=0){N.isTexture!==!0&&(_g("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Q=arguments[0]||null,N=arguments[1]);const ae=Math.pow(2,-se),Z=Math.floor(N.image.width*ae),be=Math.floor(N.image.height*ae),Ge=Q!==null?Q.x:0,Je=Q!==null?Q.y:0;U.setTexture2D(N,0),k.copyTexSubImage2D(k.TEXTURE_2D,se,0,0,Ge,Je,Z,be),Ie.unbindTexture()},this.copyTextureToTexture=function(N,Q,se=null,ae=null,Z=0){N.isTexture!==!0&&(_g("WebGLRenderer: copyTextureToTexture function signature has changed."),ae=arguments[0]||null,N=arguments[1],Q=arguments[2],Z=arguments[3]||0,se=null);let be,Ge,Je,Ke,ct,dt;se!==null?(be=se.max.x-se.min.x,Ge=se.max.y-se.min.y,Je=se.min.x,Ke=se.min.y):(be=N.image.width,Ge=N.image.height,Je=0,Ke=0),ae!==null?(ct=ae.x,dt=ae.y):(ct=0,dt=0);const et=de.convert(Q.format),Ft=de.convert(Q.type);U.setTexture2D(Q,0),k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,Q.flipY),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),k.pixelStorei(k.UNPACK_ALIGNMENT,Q.unpackAlignment);const kt=k.getParameter(k.UNPACK_ROW_LENGTH),Wt=k.getParameter(k.UNPACK_IMAGE_HEIGHT),Ct=k.getParameter(k.UNPACK_SKIP_PIXELS),nt=k.getParameter(k.UNPACK_SKIP_ROWS),Qe=k.getParameter(k.UNPACK_SKIP_IMAGES),Bt=N.isCompressedTexture?N.mipmaps[Z]:N.image;k.pixelStorei(k.UNPACK_ROW_LENGTH,Bt.width),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,Bt.height),k.pixelStorei(k.UNPACK_SKIP_PIXELS,Je),k.pixelStorei(k.UNPACK_SKIP_ROWS,Ke),N.isDataTexture?k.texSubImage2D(k.TEXTURE_2D,Z,ct,dt,be,Ge,et,Ft,Bt.data):N.isCompressedTexture?k.compressedTexSubImage2D(k.TEXTURE_2D,Z,ct,dt,Bt.width,Bt.height,et,Bt.data):k.texSubImage2D(k.TEXTURE_2D,Z,ct,dt,be,Ge,et,Ft,Bt),k.pixelStorei(k.UNPACK_ROW_LENGTH,kt),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,Wt),k.pixelStorei(k.UNPACK_SKIP_PIXELS,Ct),k.pixelStorei(k.UNPACK_SKIP_ROWS,nt),k.pixelStorei(k.UNPACK_SKIP_IMAGES,Qe),Z===0&&Q.generateMipmaps&&k.generateMipmap(k.TEXTURE_2D),Ie.unbindTexture()},this.copyTextureToTexture3D=function(N,Q,se=null,ae=null,Z=0){N.isTexture!==!0&&(_g("WebGLRenderer: copyTextureToTexture3D function signature has changed."),se=arguments[0]||null,ae=arguments[1]||null,N=arguments[2],Q=arguments[3],Z=arguments[4]||0);let be,Ge,Je,Ke,ct,dt,et,Ft,kt;const Wt=N.isCompressedTexture?N.mipmaps[Z]:N.image;se!==null?(be=se.max.x-se.min.x,Ge=se.max.y-se.min.y,Je=se.max.z-se.min.z,Ke=se.min.x,ct=se.min.y,dt=se.min.z):(be=Wt.width,Ge=Wt.height,Je=Wt.depth,Ke=0,ct=0,dt=0),ae!==null?(et=ae.x,Ft=ae.y,kt=ae.z):(et=0,Ft=0,kt=0);const Ct=de.convert(Q.format),nt=de.convert(Q.type);let Qe;if(Q.isData3DTexture)U.setTexture3D(Q,0),Qe=k.TEXTURE_3D;else if(Q.isDataArrayTexture||Q.isCompressedArrayTexture)U.setTexture2DArray(Q,0),Qe=k.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,Q.flipY),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),k.pixelStorei(k.UNPACK_ALIGNMENT,Q.unpackAlignment);const Bt=k.getParameter(k.UNPACK_ROW_LENGTH),vt=k.getParameter(k.UNPACK_IMAGE_HEIGHT),Bn=k.getParameter(k.UNPACK_SKIP_PIXELS),Ji=k.getParameter(k.UNPACK_SKIP_ROWS),Jt=k.getParameter(k.UNPACK_SKIP_IMAGES);k.pixelStorei(k.UNPACK_ROW_LENGTH,Wt.width),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,Wt.height),k.pixelStorei(k.UNPACK_SKIP_PIXELS,Ke),k.pixelStorei(k.UNPACK_SKIP_ROWS,ct),k.pixelStorei(k.UNPACK_SKIP_IMAGES,dt),N.isDataTexture||N.isData3DTexture?k.texSubImage3D(Qe,Z,et,Ft,kt,be,Ge,Je,Ct,nt,Wt.data):Q.isCompressedArrayTexture?k.compressedTexSubImage3D(Qe,Z,et,Ft,kt,be,Ge,Je,Ct,Wt.data):k.texSubImage3D(Qe,Z,et,Ft,kt,be,Ge,Je,Ct,nt,Wt),k.pixelStorei(k.UNPACK_ROW_LENGTH,Bt),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,vt),k.pixelStorei(k.UNPACK_SKIP_PIXELS,Bn),k.pixelStorei(k.UNPACK_SKIP_ROWS,Ji),k.pixelStorei(k.UNPACK_SKIP_IMAGES,Jt),Z===0&&Q.generateMipmaps&&k.generateMipmap(Qe),Ie.unbindTexture()},this.initRenderTarget=function(N){ze.get(N).__webglFramebuffer===void 0&&U.setupRenderTarget(N)},this.initTexture=function(N){N.isCubeTexture?U.setTextureCube(N,0):N.isData3DTexture?U.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?U.setTexture2DArray(N,0):U.setTexture2D(N,0),Ie.unbindTexture()},this.resetState=function(){R=0,b=0,I=null,Ie.reset(),Fe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ss}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Iv?"display-p3":"srgb",t.unpackColorSpace=Vt.workingColorSpace===yh?"display-p3":"srgb"}}class Dv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new De(e),this.density=t}clone(){return new Dv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new De(e),this.near=t,this.far=i}clone(){return new Fv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class U0 extends It{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new lr,this.environmentIntensity=1,this.environmentRotation=new lr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Sh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Yd,this.updateRanges=[],this.version=0,this.uuid=sr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=sr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=sr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ci=new O;class pa{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.applyMatrix4(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.applyNormalMatrix(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ci.fromBufferAttribute(this,t),Ci.transformDirection(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ri(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=St(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ri(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ri(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ri(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ri(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ut(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new pa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class UM extends Pn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Pc;const Bf=new O,Ic=new O,Bc=new O,Lc=new pe,Lf=new pe,xD=new rt,wm=new O,Df=new O,Em=new O,Db=new pe,T_=new pe,Fb=new pe;class _D extends It{constructor(e=new UM){if(super(),this.isSprite=!0,this.type="Sprite",Pc===void 0){Pc=new _t;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Sh(t,5);Pc.setIndex([0,1,2,0,2,3]),Pc.setAttribute("position",new pa(i,3,0,!1)),Pc.setAttribute("uv",new pa(i,2,3,!1))}this.geometry=Pc,this.material=e,this.center=new pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ic.setFromMatrixScale(this.matrixWorld),xD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ic.multiplyScalar(-Bc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Cm(wm.set(-.5,-.5,0),Bc,o,Ic,r,s),Cm(Df.set(.5,-.5,0),Bc,o,Ic,r,s),Cm(Em.set(.5,.5,0),Bc,o,Ic,r,s),Db.set(0,0),T_.set(1,0),Fb.set(1,1);let a=e.ray.intersectTriangle(wm,Df,Em,!1,Bf);if(a===null&&(Cm(Df.set(-.5,.5,0),Bc,o,Ic,r,s),T_.set(0,1),a=e.ray.intersectTriangle(wm,Em,Df,!1,Bf),a===null))return;const l=e.ray.origin.distanceTo(Bf);l<e.near||l>e.far||t.push({distance:l,point:Bf.clone(),uv:zi.getInterpolation(Bf,wm,Df,Em,Db,T_,Fb,new pe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Cm(n,e,t,i,r,s){Lc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Lf.x=s*Lc.x-r*Lc.y,Lf.y=r*Lc.x+s*Lc.y):Lf.copy(Lc),n.copy(e),n.x+=Lf.x,n.y+=Lf.y,n.applyMatrix4(xD)}const Tm=new O,Nb=new O;class AD extends It{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Tm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Tm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Tm.setFromMatrixPosition(e.matrixWorld),Nb.setFromMatrixPosition(this.matrixWorld);const i=Tm.distanceTo(Nb)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const Ob=new O,Ub=new Nt,kb=new Nt,p8=new O,Hb=new rt,bm=new O,b_=new Zn,zb=new rt,R_=new $l;class kM extends En{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=E1,this.bindMatrix=new rt,this.bindMatrixInverse=new rt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,bm),this.boundingBox.expandByPoint(bm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zn),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,bm),this.boundingSphere.expandByPoint(bm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),b_.copy(this.boundingSphere),b_.applyMatrix4(r),e.ray.intersectsSphere(b_)!==!1&&(zb.copy(r).invert(),R_.copy(e.ray).applyMatrix4(zb),!(this.boundingBox!==null&&R_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,R_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Nt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===E1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===GL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;Ub.fromBufferAttribute(r.attributes.skinIndex,e),kb.fromBufferAttribute(r.attributes.skinWeight,e),Ob.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=kb.getComponent(s);if(o!==0){const a=Ub.getComponent(s);Hb.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(p8.copy(Ob).applyMatrix4(Hb),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Nv extends It{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ts extends en{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Nn,f=Nn,h,p){super(null,o,a,l,c,f,r,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Gb=new rt,m8=new rt;class Mh{constructor(e=[],t=[]){this.uuid=sr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new rt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new rt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:m8;Gb.multiplyMatrices(a,t[s]),Gb.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Mh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ts(t,e,e,mi,Vi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Nv),this.bones.push(o),this.boneInverses.push(new rt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Hl extends Ut{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Dc=new rt,Vb=new rt,Rm=[],Wb=new vi,g8=new rt,Ff=new En,Nf=new Zn;class HM extends En{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Hl(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,g8)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new vi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Dc),Wb.copy(e.boundingBox).applyMatrix4(Dc),this.boundingBox.union(Wb)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Dc),Nf.copy(e.boundingSphere).applyMatrix4(Dc),this.boundingSphere.union(Nf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Ff.geometry=this.geometry,Ff.material=this.material,Ff.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Nf.copy(this.boundingSphere),Nf.applyMatrix4(i),e.ray.intersectsSphere(Nf)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Dc),Vb.multiplyMatrices(i,Dc),Ff.matrixWorld=Vb,Ff.raycast(e,Rm);for(let o=0,a=Rm.length;o<a;o++){const l=Rm[o];l.instanceId=s,l.object=this,t.push(l)}Rm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Hl(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ts(new Float32Array(r*this.count),r,this.count,Tv,Vi));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function v8(n,e){return n.z-e.z}function y8(n,e){return e.z-n.z}class x8{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=i}reset(){this.list.length=0,this.index=0}}const Go=new rt,P_=new rt,_8=new rt,A8=new De(1,1,1),jb=new rt,I_=new Ah,Pm=new vi,Wa=new Zn,Of=new O,Xb=new O,S8=new O,B_=new x8,ui=new En,Im=[];function M8(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class SD extends En{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,i=t*2,r){super(new _t,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Ts(t,e,e,mi,Vi);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Ts(t,e,e,vh,xo);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Ts(t,e,e,mi,Vi);i.colorSpace=Vt.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,f=new a.constructor(i*l),h=new Ut(f,l,c);t.setAttribute(s,h)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Ut(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Go),this.getBoundingBoxAt(s,Pm).applyMatrix4(Go),e.union(Pm)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zn);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Go),this.getBoundingSphereAt(s,Wa).applyMatrix4(Go),e.union(Wa)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(r=this._availableInstanceIds.pop(),this._drawInfo[r]=i):(r=this._drawInfo.length,this._drawInfo.push(i));const s=this._matricesTexture,o=s.image.data;_8.toArray(o,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(A8.toArray(a.image.data,r*4),a.needsUpdate=!0),r}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),f=c!==null;if(f&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:f?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new vi,sphereInitialized:!1,sphere:new Zn}),this.setGeometryAt(h,e),h}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in i.attributes){const v=t.getAttribute(m),A=i.getAttribute(m);M8(v,A,l);const x=v.itemSize;for(let g=v.count,_=c;g<_;g++){const S=l+g;for(let w=0;w<x;w++)A.setComponent(S,w,0)}A.needsUpdate=!0,A.addUpdateRange(l*x,c*x)}if(r){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,A=a.indexCount;v<A;v++)s.setX(m+v,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const f=this._bounds[e];t.boundingBox!==null?(f.box.copy(t.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,t.boundingSphere!==null?(f.sphere.copy(t.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const h=this._drawRanges[e],p=t.getAttribute("position");return h.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteInstance(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.box,s=this.geometry;if(i.boxInitialized===!1){r.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let c=l.start,f=l.start+l.count;c<f;c++){let h=c;o&&(h=o.getX(h)),r.expandByPoint(Of.fromBufferAttribute(a,h))}i.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,Pm),Pm.getCenter(r.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let c=0;for(let f=l.start,h=l.start+l.count;f<h;f++){let p=f;o&&(p=o.getX(p)),Of.fromBufferAttribute(a,p),c=Math.max(c,r.center.distanceToSquared(Of))}r.radius=Math.sqrt(c),i.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const i=this._drawInfo;return e>=i.length||i[e].active===!1||t<0||t>=this._geometryCount?null:(i[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const i=this._drawRanges[e];return t.start=i.start,t.count=i.count,t}raycast(e,t){const i=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;ui.material=this.material,ui.geometry.index=o.index,ui.geometry.attributes=o.attributes,ui.geometry.boundingBox===null&&(ui.geometry.boundingBox=new vi),ui.geometry.boundingSphere===null&&(ui.geometry.boundingSphere=new Zn);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,f=r[c];ui.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(a,ui.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,ui.geometry.boundingBox),this.getBoundingSphereAt(c,ui.geometry.boundingSphere),ui.raycast(e,Im);for(let h=0,p=Im.length;h<p;h++){const m=Im[h];m.object=this,m.batchId=a,t.push(m)}Im.length=0}ui.material=null,ui.geometry.index=null,ui.geometry.attributes={},ui.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,c=this._multiDrawStarts,f=this._multiDrawCounts,h=this._drawRanges,p=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data;p&&(jb.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),I_.setFromProjectionMatrix(jb,e.coordinateSystem));let A=0;if(this.sortObjects){P_.copy(this.matrixWorld).invert(),Of.setFromMatrixPosition(i.matrixWorld).applyMatrix4(P_),Xb.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(P_);for(let _=0,S=l.length;_<S;_++)if(l[_].visible&&l[_].active){const w=l[_].geometryIndex;this.getMatrixAt(_,Go),this.getBoundingSphereAt(w,Wa).applyMatrix4(Go);let R=!1;if(p&&(R=!I_.intersectsSphere(Wa)),!R){const b=S8.subVectors(Wa.center,Of).dot(Xb);B_.push(h[w],b,_)}}const x=B_.list,g=this.customSort;g===null?x.sort(s.transparent?y8:v8):g.call(this,x,i);for(let _=0,S=x.length;_<S;_++){const w=x[_];c[A]=w.start*a,f[A]=w.count,v[A]=w.index,A++}B_.reset()}else for(let x=0,g=l.length;x<g;x++)if(l[x].visible&&l[x].active){const _=l[x].geometryIndex;let S=!1;if(p&&(this.getMatrixAt(x,Go),this.getBoundingSphereAt(_,Wa).applyMatrix4(Go),S=!I_.intersectsSphere(Wa)),!S){const w=h[_];c[A]=w.start*a,f[A]=w.count,v[A]=x,A++}}m.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class _i extends Pn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new De(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const k0=new O,H0=new O,Jb=new rt,Uf=new $l,Bm=new Zn,L_=new O,Kb=new O;class _o extends It{constructor(e=new _t,t=new _i){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)k0.fromBufferAttribute(t,r-1),H0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=k0.distanceTo(H0);e.setAttribute("lineDistance",new qe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Bm.copy(i.boundingSphere),Bm.applyMatrix4(r),Bm.radius+=s,e.ray.intersectsSphere(Bm)===!1)return;Jb.copy(r).invert(),Uf.copy(e.ray).applyMatrix4(Jb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){const m=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let A=m,x=v-1;A<x;A+=c){const g=f.getX(A),_=f.getX(A+1),S=Lm(this,e,Uf,l,g,_);S&&t.push(S)}if(this.isLineLoop){const A=f.getX(v-1),x=f.getX(m),g=Lm(this,e,Uf,l,A,x);g&&t.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let A=m,x=v-1;A<x;A+=c){const g=Lm(this,e,Uf,l,A,A+1);g&&t.push(g)}if(this.isLineLoop){const A=Lm(this,e,Uf,l,v-1,m);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Lm(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(k0.fromBufferAttribute(o,r),H0.fromBufferAttribute(o,s),t.distanceSqToSegment(k0,H0,L_,Kb)>i)return;L_.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(L_);if(!(l<e.near||l>e.far))return{distance:l,point:Kb.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const Yb=new O,$b=new O;class ls extends _o{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Yb.fromBufferAttribute(t,r),$b.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Yb.distanceTo($b);e.setAttribute("lineDistance",new qe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class zM extends _o{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class wh extends Pn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Qb=new rt,I1=new $l,Dm=new Zn,Fm=new O;let GM=class extends It{constructor(e=new _t,t=new wh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Dm.copy(i.boundingSphere),Dm.applyMatrix4(r),Dm.radius+=s,e.ray.intersectsSphere(Dm)===!1)return;Qb.copy(r).invert(),I1.copy(e.ray).applyMatrix4(Qb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,h=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,A=m;v<A;v++){const x=c.getX(v);Fm.fromBufferAttribute(h,x),qb(Fm,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let v=p,A=m;v<A;v++)Fm.fromBufferAttribute(h,v),qb(Fm,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function qb(n,e,t,i,r,s,o){const a=I1.distanceSqToPoint(n);if(a<t){const l=new O;I1.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class w8 extends en{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:_n,this.magFilter=s!==void 0?s:_n,this.generateMipmaps=!1;const f=this;function h(){f.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class E8 extends en{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Nn,this.minFilter=Nn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ov extends en{constructor(e,t,i,r,s,o,a,l,c,f,h,p){super(null,o,a,l,c,f,r,s,h,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class C8 extends Ov{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=nr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class T8 extends Ov{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,yo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class b8 extends en{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class cs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const f=i[r],p=i[r+1]-f,m=(o-f)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new pe:new O);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new O,r=[],s=[],o=[],a=new O,l=new rt;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new O)}s[0]=new O,o[0]=new O;let c=Number.MAX_VALUE;const f=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=c&&(c=f,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(xn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(xn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Uv extends cs{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new pe){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*f-m*h+this.aX,c=p*h+m*f+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class MD extends Uv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function VM(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,f,h){let p=(o-s)/c-(a-s)/(c+f)+(a-o)/f,m=(a-o)/f-(l-o)/(f+h)+(l-a)/h;p*=f,m*=f,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Nm=new O,D_=new VM,F_=new VM,N_=new VM;class wD extends cs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new O){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,f;this.closed||a>0?c=r[(a-1)%s]:(Nm.subVectors(r[0],r[1]).add(r[0]),c=Nm);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(Nm.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Nm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(h),m),A=Math.pow(h.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(f),m);A<1e-4&&(A=1),v<1e-4&&(v=A),x<1e-4&&(x=A),D_.initNonuniformCatmullRom(c.x,h.x,p.x,f.x,v,A,x),F_.initNonuniformCatmullRom(c.y,h.y,p.y,f.y,v,A,x),N_.initNonuniformCatmullRom(c.z,h.z,p.z,f.z,v,A,x)}else this.curveType==="catmullrom"&&(D_.initCatmullRom(c.x,h.x,p.x,f.x,this.tension),F_.initCatmullRom(c.y,h.y,p.y,f.y,this.tension),N_.initCatmullRom(c.z,h.z,p.z,f.z,this.tension));return i.set(D_.calc(l),F_.calc(l),N_.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new O().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Zb(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function R8(n,e){const t=1-n;return t*t*e}function P8(n,e){return 2*(1-n)*n*e}function I8(n,e){return n*n*e}function gd(n,e,t,i){return R8(n,e)+P8(n,t)+I8(n,i)}function B8(n,e){const t=1-n;return t*t*t*e}function L8(n,e){const t=1-n;return 3*t*t*n*e}function D8(n,e){return 3*(1-n)*n*n*e}function F8(n,e){return n*n*n*e}function vd(n,e,t,i,r){return B8(n,e)+L8(n,t)+D8(n,i)+F8(n,r)}class WM extends cs{constructor(e=new pe,t=new pe,i=new pe,r=new pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new pe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(vd(e,r.x,s.x,o.x,a.x),vd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ED extends cs{constructor(e=new O,t=new O,i=new O,r=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new O){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(vd(e,r.x,s.x,o.x,a.x),vd(e,r.y,s.y,o.y,a.y),vd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jM extends cs{constructor(e=new pe,t=new pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CD extends cs{constructor(e=new O,t=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new O){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new O){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XM extends cs{constructor(e=new pe,t=new pe,i=new pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new pe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gd(e,r.x,s.x,o.x),gd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JM extends cs{constructor(e=new O,t=new O,i=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new O){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gd(e,r.x,s.x,o.x),gd(e,r.y,s.y,o.y),gd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KM extends cs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],f=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(Zb(a,l.x,c.x,f.x,h.x),Zb(a,l.y,c.y,f.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new pe().fromArray(r))}return this}}var z0=Object.freeze({__proto__:null,ArcCurve:MD,CatmullRomCurve3:wD,CubicBezierCurve:WM,CubicBezierCurve3:ED,EllipseCurve:Uv,LineCurve:jM,LineCurve3:CD,QuadraticBezierCurve:XM,QuadraticBezierCurve3:JM,SplineCurve:KM});class TD extends cs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new z0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const f=l[c];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new z0[r.type]().fromJSON(r))}return this}}class qd extends TD{constructor(e){super(),this.type="Path",this.currentPoint=new pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new jM(this.currentPoint.clone(),new pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new XM(this.currentPoint.clone(),new pe(e,t),new pe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new WM(this.currentPoint.clone(),new pe(e,t),new pe(i,r),new pe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new KM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+c,t+f,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Uv(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const f=c.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Eh extends _t{constructor(e=[new pe(0,-.5),new pe(.5,0),new pe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=xn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],f=1/t,h=new O,p=new pe,m=new O,v=new O,A=new O;let x=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,A.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,v.copy(m),m.x+=A.x,m.y+=A.y,m.z+=A.z,m.normalize(),l.push(m.x,m.y,m.z),A.copy(v)}for(let _=0;_<=t;_++){const S=i+_*f*r,w=Math.sin(S),R=Math.cos(S);for(let b=0;b<=e.length-1;b++){h.x=e[b].x*w,h.y=e[b].y,h.z=e[b].x*R,o.push(h.x,h.y,h.z),p.x=_/t,p.y=b/(e.length-1),a.push(p.x,p.y);const I=l[3*b+0]*w,B=l[3*b+1],z=l[3*b+0]*R;c.push(I,B,z)}}for(let _=0;_<t;_++)for(let S=0;S<e.length-1;S++){const w=S+_*e.length,R=w,b=w+e.length,I=w+e.length+1,B=w+1;s.push(R,b,B),s.push(I,B,b)}this.setIndex(s),this.setAttribute("position",new qe(o,3)),this.setAttribute("uv",new qe(a,2)),this.setAttribute("normal",new qe(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eh(e.points,e.segments,e.phiStart,e.phiLength)}}class kv extends Eh{constructor(e=1,t=1,i=4,r=8){const s=new qd;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new kv(e.radius,e.length,e.capSegments,e.radialSegments)}}class Hv extends _t{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new O,f=new pe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const m=i+h/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),f.x=(o[p]/e+1)/2,f.y=(o[p+1]/e+1)/2,l.push(f.x,f.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new qe(o,3)),this.setAttribute("normal",new qe(a,3)),this.setAttribute("uv",new qe(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Xu extends _t{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const f=[],h=[],p=[],m=[];let v=0;const A=[],x=i/2;let g=0;_(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(f),this.setAttribute("position",new qe(h,3)),this.setAttribute("normal",new qe(p,3)),this.setAttribute("uv",new qe(m,2));function _(){const w=new O,R=new O;let b=0;const I=(t-e)/i;for(let B=0;B<=s;B++){const z=[],C=B/s,P=C*(t-e)+e;for(let j=0;j<=r;j++){const X=j/r,ee=X*l+a,le=Math.sin(ee),$=Math.cos(ee);R.x=P*le,R.y=-C*i+x,R.z=P*$,h.push(R.x,R.y,R.z),w.set(le,I,$).normalize(),p.push(w.x,w.y,w.z),m.push(X,1-C),z.push(v++)}A.push(z)}for(let B=0;B<r;B++)for(let z=0;z<s;z++){const C=A[z][B],P=A[z+1][B],j=A[z+1][B+1],X=A[z][B+1];e>0&&(f.push(C,P,X),b+=3),t>0&&(f.push(P,j,X),b+=3)}c.addGroup(g,b,0),g+=b}function S(w){const R=v,b=new pe,I=new O;let B=0;const z=w===!0?e:t,C=w===!0?1:-1;for(let j=1;j<=r;j++)h.push(0,x*C,0),p.push(0,C,0),m.push(.5,.5),v++;const P=v;for(let j=0;j<=r;j++){const ee=j/r*l+a,le=Math.cos(ee),$=Math.sin(ee);I.x=z*$,I.y=x*C,I.z=z*le,h.push(I.x,I.y,I.z),p.push(0,C,0),b.x=le*.5+.5,b.y=$*.5*C+.5,m.push(b.x,b.y),v++}for(let j=0;j<r;j++){const X=R+j,ee=P+j;w===!0?f.push(ee,ee+1,X):f.push(ee+1,ee,X),B+=3}c.addGroup(g,B,w===!0?1:2),g+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zv extends Xu{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new zv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ea extends _t{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),f(),this.setAttribute("position",new qe(s,3)),this.setAttribute("normal",new qe(s.slice(),3)),this.setAttribute("uv",new qe(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const S=new O,w=new O,R=new O;for(let b=0;b<t.length;b+=3)m(t[b+0],S),m(t[b+1],w),m(t[b+2],R),l(S,w,R,_)}function l(_,S,w,R){const b=R+1,I=[];for(let B=0;B<=b;B++){I[B]=[];const z=_.clone().lerp(w,B/b),C=S.clone().lerp(w,B/b),P=b-B;for(let j=0;j<=P;j++)j===0&&B===b?I[B][j]=z:I[B][j]=z.clone().lerp(C,j/P)}for(let B=0;B<b;B++)for(let z=0;z<2*(b-B)-1;z++){const C=Math.floor(z/2);z%2===0?(p(I[B][C+1]),p(I[B+1][C]),p(I[B][C])):(p(I[B][C+1]),p(I[B+1][C+1]),p(I[B+1][C]))}}function c(_){const S=new O;for(let w=0;w<s.length;w+=3)S.x=s[w+0],S.y=s[w+1],S.z=s[w+2],S.normalize().multiplyScalar(_),s[w+0]=S.x,s[w+1]=S.y,s[w+2]=S.z}function f(){const _=new O;for(let S=0;S<s.length;S+=3){_.x=s[S+0],_.y=s[S+1],_.z=s[S+2];const w=x(_)/2/Math.PI+.5,R=g(_)/Math.PI+.5;o.push(w,1-R)}v(),h()}function h(){for(let _=0;_<o.length;_+=6){const S=o[_+0],w=o[_+2],R=o[_+4],b=Math.max(S,w,R),I=Math.min(S,w,R);b>.9&&I<.1&&(S<.2&&(o[_+0]+=1),w<.2&&(o[_+2]+=1),R<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,S){const w=_*3;S.x=e[w+0],S.y=e[w+1],S.z=e[w+2]}function v(){const _=new O,S=new O,w=new O,R=new O,b=new pe,I=new pe,B=new pe;for(let z=0,C=0;z<s.length;z+=9,C+=6){_.set(s[z+0],s[z+1],s[z+2]),S.set(s[z+3],s[z+4],s[z+5]),w.set(s[z+6],s[z+7],s[z+8]),b.set(o[C+0],o[C+1]),I.set(o[C+2],o[C+3]),B.set(o[C+4],o[C+5]),R.copy(_).add(S).add(w).divideScalar(3);const P=x(R);A(b,C+0,_,P),A(I,C+2,S,P),A(B,C+4,w,P)}}function A(_,S,w,R){R<0&&_.x===1&&(o[S]=_.x-1),w.x===0&&w.z===0&&(o[S]=R/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ea(e.vertices,e.indices,e.radius,e.details)}}class Gv extends Ea{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gv(e.radius,e.detail)}}const Om=new O,Um=new O,O_=new O,km=new zi;class bD extends _t{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Tl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],f=["a","b","c"],h=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:A,b:x,c:g}=km;if(A.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),km.getNormal(O_),h[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,h[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,h[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let _=0;_<3;_++){const S=(_+1)%3,w=h[_],R=h[S],b=km[f[_]],I=km[f[S]],B=`${w}_${R}`,z=`${R}_${w}`;z in p&&p[z]?(O_.dot(p[z].normal)<=s&&(m.push(b.x,b.y,b.z),m.push(I.x,I.y,I.z)),p[z]=null):B in p||(p[B]={index0:c[_],index1:c[S],normal:O_.clone()})}}for(const v in p)if(p[v]){const{index0:A,index1:x}=p[v];Om.fromBufferAttribute(a,A),Um.fromBufferAttribute(a,x),m.push(Om.x,Om.y,Om.z),m.push(Um.x,Um.y,Um.z)}this.setAttribute("position",new qe(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Rl extends qd{constructor(e){super(e),this.uuid=sr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new qd().fromJSON(r))}return this}}const N8={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=RD(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,f,h,p,m;if(i&&(s=z8(n,e,s,t)),n.length>80*t){a=c=n[0],l=f=n[1];for(let v=t;v<r;v+=t)h=n[v],p=n[v+1],h<a&&(a=h),p<l&&(l=p),h>c&&(c=h),p>f&&(f=p);m=Math.max(c-a,f-l),m=m!==0?32767/m:0}return Zd(s,o,t,a,l,m,0),o}};function RD(n,e,t,i,r){let s,o;if(r===q8(n,e,t,i)>0)for(s=e;s<t;s+=i)o=eR(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=eR(s,n[s],n[s+1],o);return o&&Vv(o,o.next)&&(th(o),o=o.next),o}function zl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Vv(t,t.next)||fn(t.prev,t,t.next)===0)){if(th(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Zd(n,e,t,i,r,s,o){if(!n)return;!o&&s&&X8(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?U8(n,i,r,s):O8(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),th(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=k8(zl(n),e,t),Zd(n,e,t,i,r,s,2)):o===2&&H8(n,e,t,i,r,s):Zd(zl(n),e,t,i,r,s,1);break}}}function O8(n){const e=n.prev,t=n,i=n.next;if(fn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,f=r<s?r<o?r:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=p&&v.y>=h&&v.y<=m&&eu(r,a,s,l,o,c,v.x,v.y)&&fn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function U8(n,e,t,i){const r=n.prev,s=n,o=n.next;if(fn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,f=r.y,h=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=f<h?f<p?f:p:h<p?h:p,A=a>l?a>c?a:c:l>c?l:c,x=f>h?f>p?f:p:h>p?h:p,g=B1(m,v,e,t,i),_=B1(A,x,e,t,i);let S=n.prevZ,w=n.nextZ;for(;S&&S.z>=g&&w&&w.z<=_;){if(S.x>=m&&S.x<=A&&S.y>=v&&S.y<=x&&S!==r&&S!==o&&eu(a,f,l,h,c,p,S.x,S.y)&&fn(S.prev,S,S.next)>=0||(S=S.prevZ,w.x>=m&&w.x<=A&&w.y>=v&&w.y<=x&&w!==r&&w!==o&&eu(a,f,l,h,c,p,w.x,w.y)&&fn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=A&&S.y>=v&&S.y<=x&&S!==r&&S!==o&&eu(a,f,l,h,c,p,S.x,S.y)&&fn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;w&&w.z<=_;){if(w.x>=m&&w.x<=A&&w.y>=v&&w.y<=x&&w!==r&&w!==o&&eu(a,f,l,h,c,p,w.x,w.y)&&fn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function k8(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Vv(r,s)&&PD(r,i,i.next,s)&&eh(r,s)&&eh(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),th(i),th(i.next),i=n=s),i=i.next}while(i!==n);return zl(i)}function H8(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Y8(o,a)){let l=ID(o,a);o=zl(o,o.next),l=zl(l,l.next),Zd(o,e,t,i,r,s,0),Zd(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function z8(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=RD(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(K8(c));for(r.sort(G8),s=0;s<r.length;s++)t=V8(r[s],t);return t}function G8(n,e){return n.x-e.x}function V8(n,e){const t=W8(n,e);if(!t)return e;const i=ID(t,n);return zl(i,i.next),zl(t,t.next)}function W8(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let f=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&eu(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),eh(t,n)&&(h<f||h===f&&(t.x>r.x||t.x===r.x&&j8(r,t)))&&(r=t,f=h)),t=t.next;while(t!==a);return r}function j8(n,e){return fn(n.prev,n,e.prev)<0&&fn(e.next,n,n.next)<0}function X8(n,e,t,i){let r=n;do r.z===0&&(r.z=B1(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,J8(r)}function J8(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function B1(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function K8(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function eu(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function Y8(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!$8(n,e)&&(eh(n,e)&&eh(e,n)&&Q8(n,e)&&(fn(n.prev,n,e.prev)||fn(n,e.prev,e))||Vv(n,e)&&fn(n.prev,n,n.next)>0&&fn(e.prev,e,e.next)>0)}function fn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Vv(n,e){return n.x===e.x&&n.y===e.y}function PD(n,e,t,i){const r=zm(fn(n,e,t)),s=zm(fn(n,e,i)),o=zm(fn(t,i,n)),a=zm(fn(t,i,e));return!!(r!==s&&o!==a||r===0&&Hm(n,t,e)||s===0&&Hm(n,i,e)||o===0&&Hm(t,n,i)||a===0&&Hm(t,e,i))}function Hm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function zm(n){return n>0?1:n<0?-1:0}function $8(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&PD(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function eh(n,e){return fn(n.prev,n,n.next)<0?fn(n,e,n.next)>=0&&fn(n,n.prev,e)>=0:fn(n,e,n.prev)<0||fn(n,n.next,e)<0}function Q8(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function ID(n,e){const t=new L1(n.i,n.x,n.y),i=new L1(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function eR(n,e,t,i){const r=new L1(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function th(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function L1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function q8(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class bs{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return bs.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];tR(e),nR(i,e);let o=e.length;t.forEach(tR);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,nR(i,t[l]);const a=N8.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function tR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function nR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Wv extends _t{constructor(e=new Rl([new pe(.5,.5),new pe(-.5,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new qe(r,3)),this.setAttribute("uv",new qe(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:Z8;let S,w=!1,R,b,I,B;g&&(S=g.getSpacedPoints(f),w=!0,p=!1,R=g.computeFrenetFrames(f,!1),b=new O,I=new O,B=new O),p||(x=0,m=0,v=0,A=0);const z=a.extractPoints(c);let C=z.shape;const P=z.holes;if(!bs.isClockWise(C)){C=C.reverse();for(let xe=0,k=P.length;xe<k;xe++){const Pe=P[xe];bs.isClockWise(Pe)&&(P[xe]=Pe.reverse())}}const X=bs.triangulateShape(C,P),ee=C;for(let xe=0,k=P.length;xe<k;xe++){const Pe=P[xe];C=C.concat(Pe)}function le(xe,k,Pe){return k||console.error("THREE.ExtrudeGeometry: vec does not exist"),xe.clone().addScaledVector(k,Pe)}const $=C.length,K=X.length;function L(xe,k,Pe){let Re,Ae,Ie;const Ze=xe.x-k.x,ze=xe.y-k.y,U=Pe.x-xe.x,F=Pe.y-xe.y,ne=Ze*Ze+ze*ze,he=Ze*F-ze*U;if(Math.abs(he)>Number.EPSILON){const _e=Math.sqrt(ne),me=Math.sqrt(U*U+F*F),$e=k.x-ze/_e,Be=k.y+Ze/_e,Ve=Pe.x-F/me,bt=Pe.y+U/me,Me=((Ve-$e)*F-(bt-Be)*U)/(Ze*F-ze*U);Re=$e+Ze*Me-xe.x,Ae=Be+ze*Me-xe.y;const We=Re*Re+Ae*Ae;if(We<=2)return new pe(Re,Ae);Ie=Math.sqrt(We/2)}else{let _e=!1;Ze>Number.EPSILON?U>Number.EPSILON&&(_e=!0):Ze<-Number.EPSILON?U<-Number.EPSILON&&(_e=!0):Math.sign(ze)===Math.sign(F)&&(_e=!0),_e?(Re=-ze,Ae=Ze,Ie=Math.sqrt(ne)):(Re=Ze,Ae=ze,Ie=Math.sqrt(ne/2))}return new pe(Re/Ie,Ae/Ie)}const G=[];for(let xe=0,k=ee.length,Pe=k-1,Re=xe+1;xe<k;xe++,Pe++,Re++)Pe===k&&(Pe=0),Re===k&&(Re=0),G[xe]=L(ee[xe],ee[Pe],ee[Re]);const V=[];let te,ve=G.concat();for(let xe=0,k=P.length;xe<k;xe++){const Pe=P[xe];te=[];for(let Re=0,Ae=Pe.length,Ie=Ae-1,Ze=Re+1;Re<Ae;Re++,Ie++,Ze++)Ie===Ae&&(Ie=0),Ze===Ae&&(Ze=0),te[Re]=L(Pe[Re],Pe[Ie],Pe[Ze]);V.push(te),ve=ve.concat(te)}for(let xe=0;xe<x;xe++){const k=xe/x,Pe=m*Math.cos(k*Math.PI/2),Re=v*Math.sin(k*Math.PI/2)+A;for(let Ae=0,Ie=ee.length;Ae<Ie;Ae++){const Ze=le(ee[Ae],G[Ae],Re);Se(Ze.x,Ze.y,-Pe)}for(let Ae=0,Ie=P.length;Ae<Ie;Ae++){const Ze=P[Ae];te=V[Ae];for(let ze=0,U=Ze.length;ze<U;ze++){const F=le(Ze[ze],te[ze],Re);Se(F.x,F.y,-Pe)}}}const Le=v+A;for(let xe=0;xe<$;xe++){const k=p?le(C[xe],ve[xe],Le):C[xe];w?(I.copy(R.normals[0]).multiplyScalar(k.x),b.copy(R.binormals[0]).multiplyScalar(k.y),B.copy(S[0]).add(I).add(b),Se(B.x,B.y,B.z)):Se(k.x,k.y,0)}for(let xe=1;xe<=f;xe++)for(let k=0;k<$;k++){const Pe=p?le(C[k],ve[k],Le):C[k];w?(I.copy(R.normals[xe]).multiplyScalar(Pe.x),b.copy(R.binormals[xe]).multiplyScalar(Pe.y),B.copy(S[xe]).add(I).add(b),Se(B.x,B.y,B.z)):Se(Pe.x,Pe.y,h/f*xe)}for(let xe=x-1;xe>=0;xe--){const k=xe/x,Pe=m*Math.cos(k*Math.PI/2),Re=v*Math.sin(k*Math.PI/2)+A;for(let Ae=0,Ie=ee.length;Ae<Ie;Ae++){const Ze=le(ee[Ae],G[Ae],Re);Se(Ze.x,Ze.y,h+Pe)}for(let Ae=0,Ie=P.length;Ae<Ie;Ae++){const Ze=P[Ae];te=V[Ae];for(let ze=0,U=Ze.length;ze<U;ze++){const F=le(Ze[ze],te[ze],Re);w?Se(F.x,F.y+S[f-1].y,S[f-1].x+Pe):Se(F.x,F.y,h+Pe)}}}oe(),ye();function oe(){const xe=r.length/3;if(p){let k=0,Pe=$*k;for(let Re=0;Re<K;Re++){const Ae=X[Re];lt(Ae[2]+Pe,Ae[1]+Pe,Ae[0]+Pe)}k=f+x*2,Pe=$*k;for(let Re=0;Re<K;Re++){const Ae=X[Re];lt(Ae[0]+Pe,Ae[1]+Pe,Ae[2]+Pe)}}else{for(let k=0;k<K;k++){const Pe=X[k];lt(Pe[2],Pe[1],Pe[0])}for(let k=0;k<K;k++){const Pe=X[k];lt(Pe[0]+$*f,Pe[1]+$*f,Pe[2]+$*f)}}i.addGroup(xe,r.length/3-xe,0)}function ye(){const xe=r.length/3;let k=0;Ee(ee,k),k+=ee.length;for(let Pe=0,Re=P.length;Pe<Re;Pe++){const Ae=P[Pe];Ee(Ae,k),k+=Ae.length}i.addGroup(xe,r.length/3-xe,1)}function Ee(xe,k){let Pe=xe.length;for(;--Pe>=0;){const Re=Pe;let Ae=Pe-1;Ae<0&&(Ae=xe.length-1);for(let Ie=0,Ze=f+x*2;Ie<Ze;Ie++){const ze=$*Ie,U=$*(Ie+1),F=k+Re+ze,ne=k+Ae+ze,he=k+Ae+U,_e=k+Re+U;st(F,ne,he,_e)}}}function Se(xe,k,Pe){l.push(xe),l.push(k),l.push(Pe)}function lt(xe,k,Pe){ut(xe),ut(k),ut(Pe);const Re=r.length/3,Ae=_.generateTopUV(i,r,Re-3,Re-2,Re-1);ot(Ae[0]),ot(Ae[1]),ot(Ae[2])}function st(xe,k,Pe,Re){ut(xe),ut(k),ut(Re),ut(k),ut(Pe),ut(Re);const Ae=r.length/3,Ie=_.generateSideWallUV(i,r,Ae-6,Ae-3,Ae-2,Ae-1);ot(Ie[0]),ot(Ie[1]),ot(Ie[3]),ot(Ie[1]),ot(Ie[2]),ot(Ie[3])}function ut(xe){r.push(l[xe*3+0]),r.push(l[xe*3+1]),r.push(l[xe*3+2])}function ot(xe){s.push(xe.x),s.push(xe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return e6(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new z0[r.type]().fromJSON(r)),new Wv(i,e.options)}}const Z8={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],f=e[r*3+1];return[new pe(s,o),new pe(a,l),new pe(c,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],f=e[i*3+1],h=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],A=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-f)<Math.abs(o-c)?[new pe(o,1-l),new pe(c,1-h),new pe(p,1-v),new pe(A,1-g)]:[new pe(a,1-l),new pe(f,1-h),new pe(m,1-v),new pe(x,1-g)]}};function e6(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class jv extends Ea{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jv(e.radius,e.detail)}}class Ch extends Ea{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ch(e.radius,e.detail)}}class Xv extends _t{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],f=[];let h=e;const p=(t-e)/r,m=new O,v=new pe;for(let A=0;A<=r;A++){for(let x=0;x<=i;x++){const g=s+x/i*o;m.x=h*Math.cos(g),m.y=h*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,f.push(v.x,v.y)}h+=p}for(let A=0;A<r;A++){const x=A*(i+1);for(let g=0;g<i;g++){const _=g+x,S=_,w=_+i+1,R=_+i+2,b=_+1;a.push(S,w,b),a.push(w,R,b)}}this.setIndex(a),this.setAttribute("position",new qe(l,3)),this.setAttribute("normal",new qe(c,3)),this.setAttribute("uv",new qe(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Jv extends _t{constructor(e=new Rl([new pe(0,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let f=0;f<e.length;f++)c(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new qe(r,3)),this.setAttribute("normal",new qe(s,3)),this.setAttribute("uv",new qe(o,2));function c(f){const h=r.length/3,p=f.extractPoints(t);let m=p.shape;const v=p.holes;bs.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=v.length;x<g;x++){const _=v[x];bs.isClockWise(_)===!0&&(v[x]=_.reverse())}const A=bs.triangulateShape(m,v);for(let x=0,g=v.length;x<g;x++){const _=v[x];m=m.concat(_)}for(let x=0,g=m.length;x<g;x++){const _=m[x];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let x=0,g=A.length;x<g;x++){const _=A[x],S=_[0]+h,w=_[1]+h,R=_[2]+h;i.push(S,w,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return t6(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Jv(i,e.curveSegments)}}function t6(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Th extends _t{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const f=[],h=new O,p=new O,m=[],v=[],A=[],x=[];for(let g=0;g<=i;g++){const _=[],S=g/i;let w=0;g===0&&o===0?w=.5/t:g===i&&l===Math.PI&&(w=-.5/t);for(let R=0;R<=t;R++){const b=R/t;h.x=-e*Math.cos(r+b*s)*Math.sin(o+S*a),h.y=e*Math.cos(o+S*a),h.z=e*Math.sin(r+b*s)*Math.sin(o+S*a),v.push(h.x,h.y,h.z),p.copy(h).normalize(),A.push(p.x,p.y,p.z),x.push(b+w,1-S),_.push(c++)}f.push(_)}for(let g=0;g<i;g++)for(let _=0;_<t;_++){const S=f[g][_+1],w=f[g][_],R=f[g+1][_],b=f[g+1][_+1];(g!==0||o>0)&&m.push(S,w,b),(g!==i-1||l<Math.PI)&&m.push(w,R,b)}this.setIndex(m),this.setAttribute("position",new qe(v,3)),this.setAttribute("normal",new qe(A,3)),this.setAttribute("uv",new qe(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Th(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Kv extends Ea{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Kv(e.radius,e.detail)}}class Yv extends _t{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],f=new O,h=new O,p=new O;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const A=v/r*s,x=m/i*Math.PI*2;h.x=(e+t*Math.cos(x))*Math.cos(A),h.y=(e+t*Math.cos(x))*Math.sin(A),h.z=t*Math.sin(x),a.push(h.x,h.y,h.z),f.x=e*Math.cos(A),f.y=e*Math.sin(A),p.subVectors(h,f).normalize(),l.push(p.x,p.y,p.z),c.push(v/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const A=(r+1)*m+v-1,x=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,_=(r+1)*m+v;o.push(A,x,_),o.push(x,g,_)}this.setIndex(o),this.setAttribute("position",new qe(a,3)),this.setAttribute("normal",new qe(l,3)),this.setAttribute("uv",new qe(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $v extends _t{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],f=[],h=new O,p=new O,m=new O,v=new O,A=new O,x=new O,g=new O;for(let S=0;S<=i;++S){const w=S/i*s*Math.PI*2;_(w,s,o,e,m),_(w+.01,s,o,e,v),x.subVectors(v,m),g.addVectors(v,m),A.crossVectors(x,g),g.crossVectors(A,x),A.normalize(),g.normalize();for(let R=0;R<=r;++R){const b=R/r*Math.PI*2,I=-t*Math.cos(b),B=t*Math.sin(b);h.x=m.x+(I*g.x+B*A.x),h.y=m.y+(I*g.y+B*A.y),h.z=m.z+(I*g.z+B*A.z),l.push(h.x,h.y,h.z),p.subVectors(h,m).normalize(),c.push(p.x,p.y,p.z),f.push(S/i),f.push(R/r)}}for(let S=1;S<=i;S++)for(let w=1;w<=r;w++){const R=(r+1)*(S-1)+(w-1),b=(r+1)*S+(w-1),I=(r+1)*S+w,B=(r+1)*(S-1)+w;a.push(R,b,B),a.push(b,I,B)}this.setIndex(a),this.setAttribute("position",new qe(l,3)),this.setAttribute("normal",new qe(c,3)),this.setAttribute("uv",new qe(f,2));function _(S,w,R,b,I){const B=Math.cos(S),z=Math.sin(S),C=R/w*S,P=Math.cos(C);I.x=b*(2+P)*.5*B,I.y=b*(2+P)*z*.5,I.z=b*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $v(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Qv extends _t{constructor(e=new JM(new O(-1,-1,0),new O(-1,1,0),new O(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new O,l=new O,c=new pe;let f=new O;const h=[],p=[],m=[],v=[];A(),this.setIndex(v),this.setAttribute("position",new qe(h,3)),this.setAttribute("normal",new qe(p,3)),this.setAttribute("uv",new qe(m,2));function A(){for(let S=0;S<t;S++)x(S);x(s===!1?t:0),_(),g()}function x(S){f=e.getPointAt(S/t,f);const w=o.normals[S],R=o.binormals[S];for(let b=0;b<=r;b++){const I=b/r*Math.PI*2,B=Math.sin(I),z=-Math.cos(I);l.x=z*w.x+B*R.x,l.y=z*w.y+B*R.y,l.z=z*w.z+B*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let w=1;w<=r;w++){const R=(r+1)*(S-1)+(w-1),b=(r+1)*S+(w-1),I=(r+1)*S+w,B=(r+1)*(S-1)+w;v.push(R,b,B),v.push(b,I,B)}}function _(){for(let S=0;S<=t;S++)for(let w=0;w<=r;w++)c.x=S/t,c.y=w/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Qv(new z0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class BD extends _t{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new O,s=new O;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,f=l.length;c<f;++c){const h=l[c],p=h.start,m=h.count;for(let v=p,A=p+m;v<A;v+=3)for(let x=0;x<3;x++){const g=a.getX(v+x),_=a.getX(v+(x+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),iR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const f=3*a+c,h=3*a+(c+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,h),iR(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new qe(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function iR(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var rR=Object.freeze({__proto__:null,BoxGeometry:Ql,CapsuleGeometry:kv,CircleGeometry:Hv,ConeGeometry:zv,CylinderGeometry:Xu,DodecahedronGeometry:Gv,EdgesGeometry:bD,ExtrudeGeometry:Wv,IcosahedronGeometry:jv,LatheGeometry:Eh,OctahedronGeometry:Ch,PlaneGeometry:Wu,PolyhedronGeometry:Ea,RingGeometry:Xv,ShapeGeometry:Jv,SphereGeometry:Th,TetrahedronGeometry:Kv,TorusGeometry:Yv,TorusKnotGeometry:$v,TubeGeometry:Qv,WireframeGeometry:BD});class LD extends Pn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new De(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class DD extends ss{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class bh extends Pn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new De(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fr extends bh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return xn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new De(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new De(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new De(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class FD extends Pn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new De(16777215),this.specular=new De(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lr,this.combine=gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ND extends Pn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new De(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class OD extends Pn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class UD extends Pn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lr,this.combine=gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kD extends Pn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new De(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HD extends _i{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function zD(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function GD(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function D1(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function YM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function n6(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],f=c.getValueSize(),h=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*r;if(!(v<t||v>=i)){h.push(c.times[m]);for(let A=0;A<f;++A)p.push(c.values[m*f+A])}}h.length!==0&&(c.times=gl(h,c.times.constructor),c.values=gl(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function i6(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let f=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let A;if(s<=a.times[0]){const g=f,_=h-f;A=a.values.slice(g,_)}else if(s>=a.times[v]){const g=v*h+f,_=g+h-f;A=a.values.slice(g,_)}else{const g=a.createInterpolant(),_=f,S=h-f;g.evaluate(s),A=g.resultBuffer.slice(_,S)}l==="quaternion"&&new jn().fromArray(A).normalize().conjugate().toArray(A);const x=c.times.length;for(let g=0;g<x;++g){const _=g*m+p;if(l==="quaternion")jn.multiplyQuaternionsFlat(c.values,_,A,0,c.values,_);else{const S=m-p*2;for(let w=0;w<S;++w)c.values[_+w]-=A[w]}}}return n.blendMode=EM,n}const r6={convertArray:gl,isTypedArray:zD,getKeyframeOrder:GD,sortedArray:D1,flattenJSON:YM,subclip:n6,makeClipAdditive:i6};class Ju{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class VD extends Ju{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:hl,endingEnd:hl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case pl:s=e,a=2*t-i;break;case jd:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case pl:o=e,l=2*i-t;break;case jd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,f=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,f=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),A=v*v,x=A*v,g=-p*x+2*p*A-p*v,_=(1+p)*x+(-1.5-2*p)*A+(-.5+p)*v+1,S=(-1-m)*x+(1.5+m)*A+.5*v,w=m*x-m*A;for(let R=0;R!==a;++R)s[R]=g*o[f+R]+_*o[c+R]+S*o[l+R]+w*o[h+R];return s}}class $M extends Ju{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,f=(i-t)/(r-t),h=1-f;for(let p=0;p!==a;++p)s[p]=o[c+p]*h+o[l+p]*f;return s}}class WD extends Ju{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class us{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gl(t,this.TimeBufferType),this.values=gl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:gl(e.times,Array),values:gl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new WD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $M(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new VD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Tu:t=this.InterpolantFactoryMethodDiscrete;break;case bu:t=this.InterpolantFactoryMethodLinear;break;case xg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tu;case this.InterpolantFactoryMethodLinear:return bu;case this.InterpolantFactoryMethodSmooth:return xg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&zD(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===xg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],f=e[a+1];if(c!==f&&(a!==1||c!==e[0]))if(r)l=!0;else{const h=a*i,p=h-i,m=h+i;for(let v=0;v!==i;++v){const A=t[h+v];if(A!==t[p+v]||A!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}us.prototype.TimeBufferType=Float32Array;us.prototype.ValueBufferType=Float32Array;us.prototype.DefaultInterpolation=bu;class ql extends us{constructor(e,t,i){super(e,t,i)}}ql.prototype.ValueTypeName="bool";ql.prototype.ValueBufferType=Array;ql.prototype.DefaultInterpolation=Tu;ql.prototype.InterpolantFactoryMethodLinear=void 0;ql.prototype.InterpolantFactoryMethodSmooth=void 0;class QM extends us{}QM.prototype.ValueTypeName="color";class Gl extends us{}Gl.prototype.ValueTypeName="number";class jD extends Ju{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let f=c+a;c!==f;c+=4)jn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Vl extends us{InterpolantFactoryMethodLinear(e){return new jD(this.times,this.values,this.getValueSize(),e)}}Vl.prototype.ValueTypeName="quaternion";Vl.prototype.InterpolantFactoryMethodSmooth=void 0;class Zl extends us{constructor(e,t,i){super(e,t,i)}}Zl.prototype.ValueTypeName="string";Zl.prototype.ValueBufferType=Array;Zl.prototype.DefaultInterpolation=Tu;Zl.prototype.InterpolantFactoryMethodLinear=void 0;Zl.prototype.InterpolantFactoryMethodSmooth=void 0;class Wl extends us{}Wl.prototype.ValueTypeName="vector";class Iu{constructor(e="",t=-1,i=[],r=Pv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=sr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(o6(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(us.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const f=GD(l);l=D1(l,1,f),c=D1(c,1,f),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Gl(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],f=c.name.match(s);if(f&&f.length>1){const h=f[1];let p=r[h];p||(r[h]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,p,m,v,A){if(m.length!==0){const x=[],g=[];YM(m,x,g,v),x.length!==0&&A.push(new h(p,x,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const p=c[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let A=0;A<p[v].morphTargets.length;A++)m[p[v].morphTargets[A]]=-1;for(const A in m){const x=[],g=[];for(let _=0;_!==p[v].morphTargets.length;++_){const S=p[v];x.push(S.time),g.push(S.morphTarget===A?1:0)}r.push(new Gl(".morphTargetInfluence["+A+"]",x,g))}l=m.length*o}else{const m=".bones["+t[h].name+"]";i(Wl,m+".position",p,"pos",r),i(Vl,m+".quaternion",p,"rot",r),i(Wl,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function s6(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gl;case"vector":case"vector2":case"vector3":case"vector4":return Wl;case"color":return QM;case"quaternion":return Vl;case"bool":case"boolean":return ql;case"string":return Zl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function o6(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=s6(n.type);if(n.times===void 0){const t=[],i=[];YM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ro={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class qM{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return c.push(f,h),this},this.removeHandler=function(f){const h=c.indexOf(f);return h!==-1&&c.splice(h,2),this},this.getHandler=function(f){for(let h=0,p=c.length;h<p;h+=2){const m=c[h],v=c[h+1];if(m.global&&(m.lastIndex=0),m.test(f))return v}return null}}}const XD=new qM;let Ai=class{constructor(e){this.manager=e!==void 0?e:XD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Ai.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ks={};class a6 extends Error{constructor(e,t){super(e),this.response=t}}class cr extends Ai{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ro.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ks[e]!==void 0){Ks[e].push({onLoad:t,onProgress:i,onError:r});return}Ks[e]=[],Ks[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const f=Ks[e],h=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let A=0;const x=new ReadableStream({start(g){_();function _(){h.read().then(({done:S,value:w})=>{if(S)g.close();else{A+=w.byteLength;const R=new ProgressEvent("progress",{lengthComputable:v,loaded:A,total:m});for(let b=0,I=f.length;b<I;b++){const B=f[b];B.onProgress&&B.onProgress(R)}g.enqueue(w),_()}},S=>{g.error(S)})}}});return new Response(x)}else throw new a6(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{ro.add(e,c);const f=Ks[e];delete Ks[e];for(let h=0,p=f.length;h<p;h++){const m=f[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const f=Ks[e];if(f===void 0)throw this.manager.itemError(e),c;delete Ks[e];for(let h=0,p=f.length;h<p;h++){const m=f[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class l6 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new cr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Iu.parse(e[i]);t.push(r)}return t}}class c6 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Ov,l=new cr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function f(h){l.load(e[h],function(p){const m=s.parse(p,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=_n),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)f(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let A=0;A<p.mipmapCount;A++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+A]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=_n),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class nh extends Ai{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ro.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Qd("img");function l(){f(),ro.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){f(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class u6 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=new _h;s.colorSpace=Cr;const o=new nh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(f){s.images[c]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class f6 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ts,a=new cr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:nr,o.wrapT=c.wrapT!==void 0?c.wrapT:nr,o.magFilter=c.magFilter!==void 0?c.magFilter:_n,o.minFilter=c.minFilter!==void 0?c.minFilter:_n,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ir),c.mipmapCount===1&&(o.minFilter=_n),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class JD extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=new en,o=new nh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Ca extends It{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new De(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class KD extends Ca{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(It.DEFAULT_UP),this.updateMatrix(),this.groundColor=new De(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const U_=new rt,sR=new O,oR=new O;class ZM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pe(512,512),this.map=null,this.mapPass=null,this.matrix=new rt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ah,this._frameExtents=new pe(1,1),this._viewportCount=1,this._viewports=[new Nt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;sR.setFromMatrixPosition(e.matrixWorld),t.position.copy(sR),oR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(oR),t.updateMatrixWorld(),U_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(U_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(U_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class d6 extends ZM{constructor(){super(new un(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Ru*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ew extends Ca{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(It.DEFAULT_UP),this.updateMatrix(),this.target=new It,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new d6}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const aR=new rt,kf=new O,k_=new O;class h6 extends ZM{constructor(){super(new un(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pe(4,2),this._viewportCount=6,this._viewports=[new Nt(2,1,1,1),new Nt(0,1,1,1),new Nt(3,1,1,1),new Nt(1,1,1,1),new Nt(3,0,1,1),new Nt(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),kf.setFromMatrixPosition(e.matrixWorld),i.position.copy(kf),k_.copy(i.position),k_.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(k_),i.updateMatrixWorld(),r.makeTranslation(-kf.x,-kf.y,-kf.z),aR.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aR)}}class tw extends Ca{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new h6}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class p6 extends ZM{constructor(){super(new Ms(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nw extends Ca{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(It.DEFAULT_UP),this.updateMatrix(),this.target=new It,this.shadow=new p6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class YD extends Ca{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class $D extends Ca{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class QD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new O)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class qD extends Ca{constructor(e=new QD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class qv extends Ai{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new cr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new De().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new De().setHex(o.value);break;case"v2":r.uniforms[s].value=new pe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new O().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Nt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new At().fromArray(o.value);break;case"m4":r.uniforms[s].value=new rt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new pe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new pe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return qv.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:LD,SpriteMaterial:UM,RawShaderMaterial:DD,ShaderMaterial:ss,PointsMaterial:wh,MeshPhysicalMaterial:Fr,MeshStandardMaterial:bh,MeshPhongMaterial:FD,MeshToonMaterial:ND,MeshNormalMaterial:OD,MeshLambertMaterial:UD,MeshDepthMaterial:NM,MeshDistanceMaterial:OM,MeshBasicMaterial:ir,MeshMatcapMaterial:kD,LineDashedMaterial:HD,LineBasicMaterial:_i,Material:Pn};return new t[e]}}class ca{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ZD extends _t{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class eF extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new cr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const x=m.interleavedBuffers[v],g=s(m,x.buffer),_=qc(x.type,g),S=new Sh(_,x.stride);return S.uuid=x.uuid,t[v]=S,S}function s(m,v){if(i[v]!==void 0)return i[v];const x=m.arrayBuffers[v],g=new Uint32Array(x).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new ZD:new _t,a=e.data.index;if(a!==void 0){const m=qc(a.type,a.array);o.setIndex(new Ut(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let A;if(v.isInterleavedBufferAttribute){const x=r(e.data,v.data);A=new pa(x,v.itemSize,v.offset,v.normalized)}else{const x=qc(v.type,v.array),g=v.isInstancedBufferAttribute?Hl:Ut;A=new g(x,v.itemSize,v.normalized)}v.name!==void 0&&(A.name=v.name),v.usage!==void 0&&A.setUsage(v.usage),o.setAttribute(m,A)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],A=[];for(let x=0,g=v.length;x<g;x++){const _=v[x];let S;if(_.isInterleavedBufferAttribute){const w=r(e.data,_.data);S=new pa(w,_.itemSize,_.offset,_.normalized)}else{const w=qc(_.type,_.array);S=new Ut(w,_.itemSize,_.normalized)}_.name!==void 0&&(S.name=_.name),A.push(S)}o.morphAttributes[m]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,v=h.length;m!==v;++m){const A=h[m];o.addGroup(A.start,A.count,A.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new O;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Zn(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class m6 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?ca.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new cr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?ca.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new cr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),f=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,f),this.bindLightTargets(c),t!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Rl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Mh().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new eF;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in rR?a=rR[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new qv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Iu.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(f)}else return l.data?{data:qc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new qM(t);s=new nh(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,f=e.length;c<f;c++){const h=e[c],p=h.url;if(Array.isArray(p)){const m=[];for(let v=0,A=p.length;v<A;v++){const x=p[v],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Ts(g.data,g.width,g.height)))}r[h.uuid]=new ml(m)}else{const m=a(h.url);r[h.uuid]=new ml(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:qc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new nh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const f=[];for(let h=0,p=c.length;h<p;h++){const m=c[h],v=await s(m);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new Ts(v.data,v.width,v.height)))}i[l.uuid]=new ml(f)}else{const f=await s(l.url);i[l.uuid]=new ml(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let f;Array.isArray(c)?(f=new _h,c.length===6&&(f.needsUpdate=!0)):(c&&c.data?f=new Ts:f=new en,c&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,g6)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],lR),f.wrapT=i(a.wrap[1],lR)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,cR)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,cR)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,A=p.length;v<A;v++){const x=p[v];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let f,h;switch(e.type){case"Scene":o=new U0,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new De(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Fv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Dv(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new un(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ms(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new YD(e.color,e.intensity);break;case"DirectionalLight":o=new nw(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new tw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new $D(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new ew(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new KD(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new qD().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),h=l(e.material),o=new kM(f,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),h=l(e.material),o=new En(f,h);break;case"InstancedMesh":f=a(e.geometry),h=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new HM(f,h,p),o.instanceMatrix=new Hl(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Hl(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":f=a(e.geometry),h=l(e.material),o=new SD(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const x=new vi;x.min.fromArray(A.boxMin),x.max.fromArray(A.boxMax);const g=new Zn;return g.radius=A.sphereRadius,g.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:x,sphereInitialized:A.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new AD;break;case"Line":o=new _o(a(e.geometry),l(e.material));break;case"LineLoop":o=new zM(a(e.geometry),l(e.material));break;case"LineSegments":o=new ls(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new GM(a(e.geometry),l(e.material));break;case"Sprite":o=new _D(l(e.material));break;case"Group":o=new io;break;case"Bone":o=new Nv;break;default:o=new It}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],A=o.getObjectByProperty("uuid",v.object);A!==void 0&&o.addLevel(A,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new It}})}}const g6={UVMapping:Sv,CubeReflectionMapping:yo,CubeRefractionMapping:da,EquirectangularReflectionMapping:Vd,EquirectangularRefractionMapping:Wd,CubeUVReflectionMapping:Gu},lR={RepeatWrapping:ha,ClampToEdgeWrapping:nr,MirroredRepeatWrapping:Eu},cR={NearestFilter:Nn,NearestMipmapNearestFilter:Mv,NearestMipmapLinearFilter:dl,LinearFilter:_n,LinearMipmapNearestFilter:hu,LinearMipmapLinearFilter:Ir};class tF extends Ai{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ro.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return ro.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),ro.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ro.add(e,l),s.manager.itemStart(e)}}let Gm;class iw{static getContext(){return Gm===void 0&&(Gm=new(window.AudioContext||window.webkitAudioContext)),Gm}static setContext(e){Gm=e}}class v6 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new cr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);iw.getContext().decodeAudioData(c,function(h){t(h)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const uR=new rt,fR=new rt,ja=new rt;class y6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new un,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new un,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ja.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Tl*t.fov*.5)/t.zoom;let a,l;fR.elements[12]=-r,uR.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,ja.elements[0]=2*t.near/(l-a),ja.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ja),a=-o*t.aspect-s,l=o*t.aspect-s,ja.elements[0]=2*t.near/(l-a),ja.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ja)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(fR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(uR)}}class rw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=dR();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function dR(){return performance.now()}const Xa=new O,hR=new jn,x6=new O,Ja=new O;class _6 extends It{constructor(){super(),this.type="AudioListener",this.context=iw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xa,hR,x6),Ja.set(0,0,-1).applyQuaternion(hR),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Xa.x,r),t.positionY.linearRampToValueAtTime(Xa.y,r),t.positionZ.linearRampToValueAtTime(Xa.z,r),t.forwardX.linearRampToValueAtTime(Ja.x,r),t.forwardY.linearRampToValueAtTime(Ja.y,r),t.forwardZ.linearRampToValueAtTime(Ja.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Xa.x,Xa.y,Xa.z),t.setOrientation(Ja.x,Ja.y,Ja.z,i.x,i.y,i.z)}}class nF extends It{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ka=new O,pR=new jn,A6=new O,Ya=new O;class S6 extends nF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ka,pR,A6),Ya.set(0,0,1).applyQuaternion(pR);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ka.x,i),t.positionY.linearRampToValueAtTime(Ka.y,i),t.positionZ.linearRampToValueAtTime(Ka.z,i),t.orientationX.linearRampToValueAtTime(Ya.x,i),t.orientationY.linearRampToValueAtTime(Ya.y,i),t.orientationZ.linearRampToValueAtTime(Ya.z,i)}else t.setPosition(Ka.x,Ka.y,Ka.z),t.setOrientation(Ya.x,Ya.y,Ya.z)}}class M6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class iF{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){jn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;jn.multiplyQuaternionsFlat(e,o,e,t,e,i),jn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const sw="\\[\\]\\.:\\/",w6=new RegExp("["+sw+"]","g"),ow="[^"+sw+"]",E6="[^"+sw.replace("\\.","")+"]",C6=/((?:WC+[\/:])*)/.source.replace("WC",ow),T6=/(WCOD+)?/.source.replace("WCOD",E6),b6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ow),R6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ow),P6=new RegExp("^"+C6+T6+b6+R6+"$"),I6=["material","materials","bones","map"];class B6{constructor(e,t,i){const r=i||Lt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Lt{constructor(e,t,i){this.path=t,this.parsedPath=i||Lt.parseTrackName(t),this.node=Lt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Lt.Composite(e,t,i):new Lt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(w6,"")}static parseTrackName(e){const t=P6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);I6.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Lt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===c){c=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Lt.Composite=B6;Lt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Lt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Lt.prototype.GetterByBindingType=[Lt.prototype._getValue_direct,Lt.prototype._getValue_array,Lt.prototype._getValue_arrayElement,Lt.prototype._getValue_toArray];Lt.prototype.SetterByBindingTypeAndVersioning=[[Lt.prototype._setValue_direct,Lt.prototype._setValue_direct_setNeedsUpdate,Lt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_array,Lt.prototype._setValue_array_setNeedsUpdate,Lt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_arrayElement,Lt.prototype._setValue_arrayElement_setNeedsUpdate,Lt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Lt.prototype._setValue_fromArray,Lt.prototype._setValue_fromArray_setNeedsUpdate,Lt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class L6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=sr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let f=0,h=arguments.length;f!==h;++f){const p=arguments[f],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let A=0,x=o;A!==x;++A)s[A].push(new Lt(p,i[A],r[A]))}else if(v<c){a=e[v];const A=--c,x=e[A];t[x.uuid]=v,e[v]=x,t[m]=A,e[A]=p;for(let g=0,_=o;g!==_;++g){const S=s[g],w=S[A];let R=S[v];S[v]=w,R===void 0&&(R=new Lt(p,i[g],r[g])),S[A]=R}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,f=t[c];if(f!==void 0&&f>=s){const h=s++,p=e[h];t[p.uuid]=f,e[f]=p,t[c]=h,e[h]=l;for(let m=0,v=r;m!==v;++m){const A=i[m],x=A[h],g=A[f];A[f]=x,A[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],f=c.uuid,h=t[f];if(h!==void 0)if(delete t[f],h<s){const p=--s,m=e[p],v=--o,A=e[v];t[m.uuid]=h,e[h]=m,t[A.uuid]=p,e[p]=A,e.pop();for(let x=0,g=r;x!==g;++x){const _=i[x],S=_[p],w=_[v];_[h]=S,_[p]=w,_.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let v=0,A=r;v!==A;++v){const x=i[v];x[h]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,f=this.nCachedObjects_,h=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(h);for(let p=f,m=l.length;p!==m;++p){const v=l[p];h[p]=new Lt(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class rF{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:hl,endingEnd:hl};for(let c=0;c!==o;++c){const f=s[c].createInterpolant(null);a[c]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=WL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case EM:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(o),c[f].accumulateAdditive(a);break;case Pv:default:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(o),c[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===jL;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===VL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=pl,r.endingEnd=pl):(e?r.endingStart=this.zeroSlopeAtStart?pl:hl:r.endingStart=jd,t?r.endingEnd=this.zeroSlopeAtEnd?pl:hl:r.endingEnd=jd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const D6=new Float32Array(1);class F6 extends as{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let f=c[l];f===void 0&&(f={},c[l]=f);for(let h=0;h!==s;++h){const p=r[h],m=p.name;let v=f[m];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const A=t&&t._propertyBindings[h].binding.parsedPath;v=new iF(Lt.create(i,m,A),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],f=e._byClipCacheIndex;c._byClipCacheIndex=f,l[f]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new $M(new Float32Array(2),new Float32Array(2),1,D6),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Iu.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Pv),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const f=new rF(this,o,t,i);return this._bindAction(f,c),this._addInactiveAction(f,a,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Iu.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const f=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=f,t[f]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class aw{constructor(e){this.value=e}clone(){return new aw(this.value.clone===void 0?this.value:this.value.clone())}}let N6=0;class O6 extends as{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:N6++}),this.name="",this.usage=Yd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class U6 extends Sh{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class k6{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const mR=new rt;class sF{constructor(e,t,i=0,r=1/0){this.ray=new $l(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new bl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return mR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(mR),this}intersectObject(e,t=!0,i=[]){return F1(e,this,i,t),i.sort(gR),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)F1(e[r],this,i,t);return i.sort(gR),i}}function gR(n,e){return n.distance-e.distance}function F1(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)F1(s[o],e,t,!0)}}class N1{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(xn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class H6{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class lw{constructor(e,t,i,r){lw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const vR=new pe;class z6{constructor(e=new pe(1/0,1/0),t=new pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=vR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yR=new O,Vm=new O;class G6{constructor(e=new O,t=new O){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){yR.subVectors(e,this.start),Vm.subVectors(this.end,this.start);const i=Vm.dot(Vm);let s=Vm.dot(yR)/i;return t&&(s=xn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const xR=new O;class V6 extends It{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new _t,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new qe(r,3));const s=new _i({fog:!1,toneMapped:!1});this.cone=new ls(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),xR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(xR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Vo=new O,Wm=new rt,H_=new rt;class W6 extends ls{constructor(e){const t=oF(e),i=new _t,r=[],s=[],o=new De(0,0,1),a=new De(0,1,0);for(let c=0;c<t.length;c++){const f=t[c];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new qe(r,3)),i.setAttribute("color",new qe(s,3));const l=new _i({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");H_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Wm.multiplyMatrices(H_,a.matrixWorld),Vo.setFromMatrixPosition(Wm),r.setXYZ(o,Vo.x,Vo.y,Vo.z),Wm.multiplyMatrices(H_,a.parent.matrixWorld),Vo.setFromMatrixPosition(Wm),r.setXYZ(o+1,Vo.x,Vo.y,Vo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function oF(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,oF(n.children[t]));return e}class j6 extends En{constructor(e,t,i){const r=new Th(t,4,2),s=new ir({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const X6=new O,_R=new De,AR=new De;class J6 extends It{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Ch(t);r.rotateY(Math.PI*.5),this.material=new ir({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Ut(o,3)),this.add(new En(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");_R.copy(this.light.color),AR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?_R:AR;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(X6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class K6 extends ls{constructor(e=10,t=10,i=4473924,r=8947848){i=new De(i),r=new De(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const A=p===s?i:r;A.toArray(c,m),m+=3,A.toArray(c,m),m+=3,A.toArray(c,m),m+=3,A.toArray(c,m),m+=3}const f=new _t;f.setAttribute("position",new qe(l,3)),f.setAttribute("color",new qe(c,3));const h=new _i({vertexColors:!0,toneMapped:!1});super(f,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Y6 extends ls{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new De(s),o=new De(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const A=h&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let h=0;h<i;h++){const p=h&1?s:o,m=e-e/i*h;for(let v=0;v<r;v++){let A=v/r*(Math.PI*2),x=Math.sin(A)*m,g=Math.cos(A)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),A=(v+1)/r*(Math.PI*2),x=Math.sin(A)*m,g=Math.cos(A)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const c=new _t;c.setAttribute("position",new qe(a,3)),c.setAttribute("color",new qe(l,3));const f=new _i({vertexColors:!0,toneMapped:!1});super(c,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const SR=new O,jm=new O,MR=new O;class $6 extends It{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new _t;r.setAttribute("position",new qe([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new _i({fog:!1,toneMapped:!1});this.lightPlane=new _o(r,s),this.add(this.lightPlane),r=new _t,r.setAttribute("position",new qe([0,0,0,0,0,1],3)),this.targetLine=new _o(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),SR.setFromMatrixPosition(this.light.matrixWorld),jm.setFromMatrixPosition(this.light.target.matrixWorld),MR.subVectors(jm,SR),this.lightPlane.lookAt(jm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(jm),this.targetLine.scale.z=MR.length()}}const Xm=new O,vn=new xh;class Q6 extends ls{constructor(e){const t=new _t,i=new _i({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,A){l(v),l(A)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new qe(r,3)),t.setAttribute("color",new qe(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new De(16755200),f=new De(16711680),h=new De(43775),p=new De(16777215),m=new De(3355443);this.setColors(c,f,h,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;vn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Sn("c",t,e,vn,0,0,-1),Sn("t",t,e,vn,0,0,1),Sn("n1",t,e,vn,-i,-r,-1),Sn("n2",t,e,vn,i,-r,-1),Sn("n3",t,e,vn,-i,r,-1),Sn("n4",t,e,vn,i,r,-1),Sn("f1",t,e,vn,-i,-r,1),Sn("f2",t,e,vn,i,-r,1),Sn("f3",t,e,vn,-i,r,1),Sn("f4",t,e,vn,i,r,1),Sn("u1",t,e,vn,i*.7,r*1.1,-1),Sn("u2",t,e,vn,-i*.7,r*1.1,-1),Sn("u3",t,e,vn,0,r*2,-1),Sn("cf1",t,e,vn,-i,0,1),Sn("cf2",t,e,vn,i,0,1),Sn("cf3",t,e,vn,0,-r,1),Sn("cf4",t,e,vn,0,r,1),Sn("cn1",t,e,vn,-i,0,-1),Sn("cn2",t,e,vn,i,0,-1),Sn("cn3",t,e,vn,0,-r,-1),Sn("cn4",t,e,vn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Sn(n,e,t,i,r,s,o){Xm.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,f=a.length;c<f;c++)l.setXYZ(a[c],Xm.x,Xm.y,Xm.z)}}const Jm=new vi;class q6 extends ls{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new _t;s.setIndex(new Ut(i,1)),s.setAttribute("position",new Ut(r,3)),super(s,new _i({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Jm.setFromObject(this.object),Jm.isEmpty())return;const t=Jm.min,i=Jm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z6 extends ls{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new _t;s.setIndex(new Ut(i,1)),s.setAttribute("position",new qe(r,3)),super(s,new _i({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class eW extends _o{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new _t;o.setAttribute("position",new qe(s,3)),o.computeBoundingSphere(),super(o,new _i({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new _t;l.setAttribute("position",new qe(a,3)),l.computeBoundingSphere(),this.add(new En(l,new ir({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const wR=new O;let Km,z_;class tW extends It{constructor(e=new O(0,0,1),t=new O(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Km===void 0&&(Km=new _t,Km.setAttribute("position",new qe([0,0,0,0,1,0],3)),z_=new Xu(0,.5,1,5,1),z_.translate(0,-.5,0)),this.position.copy(t),this.line=new _o(Km,new _i({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new En(z_,new ir({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{wR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(wR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class nW extends ls{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new _t;r.setAttribute("position",new qe(t,3)),r.setAttribute("color",new qe(i,3));const s=new _i({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new De,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class iW{constructor(){this.type="ShapePath",this.color=new De,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new qd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const _=[];for(let S=0,w=g.length;S<w;S++){const R=g[S],b=new Rl;b.curves=R.curves,_.push(b)}return _}function i(g,_){const S=_.length;let w=!1;for(let R=S-1,b=0;b<S;R=b++){let I=_[R],B=_[b],z=B.x-I.x,C=B.y-I.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(I=_[b],z=-z,B=_[R],C=-C),g.y<I.y||g.y>B.y)continue;if(g.y===I.y){if(g.x===I.x)return!0}else{const P=C*(g.x-I.x)-z*(g.y-I.y);if(P===0)return!0;if(P<0)continue;w=!w}}else{if(g.y!==I.y)continue;if(B.x<=g.x&&g.x<=I.x||I.x<=g.x&&g.x<=B.x)return!0}}return w}const r=bs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Rl,l.curves=a.curves,c.push(l),c;let f=!r(s[0].getPoints());f=e?!f:f;const h=[],p=[];let m=[],v=0,A;p[v]=void 0,m[v]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],A=a.getPoints(),o=r(A),o=e?!o:o,o?(!f&&p[v]&&v++,p[v]={s:new Rl,p:A},p[v].s.curves=a.curves,f&&v++,m[v]=[]):m[v].push({h:a,p:A[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,_=0;for(let S=0,w=p.length;S<w;S++)h[S]=[];for(let S=0,w=p.length;S<w;S++){const R=m[S];for(let b=0;b<R.length;b++){const I=R[b];let B=!0;for(let z=0;z<p.length;z++)i(I.p,p[z].p)&&(S!==z&&_++,B?(B=!1,h[z].push(I)):g=!0);B&&h[S].push(I)}}_>0&&g===!1&&(m=h)}let x;for(let g=0,_=p.length;g<_;g++){l=p[g].s,c.push(l),x=m[g];for(let S=0,w=x.length;S<w;S++)l.holes.push(x[S].h)}return c}}class rW extends as{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class sW extends rs{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zu}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zu);const oW=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mM,AddEquation:qo,AddOperation:FL,AdditiveAnimationBlendMode:EM,AdditiveBlending:S1,AgXToneMapping:HL,AlphaFormat:xM,AlwaysCompare:nD,AlwaysDepth:s0,AlwaysStencilFunc:C1,AmbientLight:YD,AnimationAction:rF,AnimationClip:Iu,AnimationLoader:l6,AnimationMixer:F6,AnimationObjectGroup:L6,AnimationUtils:r6,ArcCurve:MD,ArrayCamera:vD,ArrowHelper:tW,AttachedBindMode:E1,Audio:nF,AudioAnalyser:M6,AudioContext:iw,AudioListener:_6,AudioLoader:v6,AxesHelper:nW,BackSide:Li,BasicDepthPacking:JL,BasicShadowMap:mL,BatchedMesh:SD,Bone:Nv,BooleanKeyframeTrack:ql,Box2:z6,Box3:vi,Box3Helper:Z6,BoxGeometry:Ql,BoxHelper:q6,BufferAttribute:Ut,BufferGeometry:_t,BufferGeometryLoader:eF,ByteType:gM,Cache:ro,Camera:xh,CameraHelper:Q6,CanvasTexture:b8,CapsuleGeometry:kv,CatmullRomCurve3:wD,CineonToneMapping:UL,CircleGeometry:Hv,ClampToEdgeWrapping:nr,Clock:rw,Color:De,ColorKeyframeTrack:QM,ColorManagement:Vt,CompressedArrayTexture:C8,CompressedCubeTexture:T8,CompressedTexture:Ov,CompressedTextureLoader:c6,ConeGeometry:zv,ConstantAlphaFactor:BL,ConstantColorFactor:PL,Controls:rW,CubeCamera:BM,CubeReflectionMapping:yo,CubeRefractionMapping:da,CubeTexture:_h,CubeTextureLoader:u6,CubeUVReflectionMapping:Gu,CubicBezierCurve:WM,CubicBezierCurve3:ED,CubicInterpolant:VD,CullFaceBack:A1,CullFaceFront:pL,CullFaceFrontBack:s4,CullFaceNone:hL,Curve:cs,CurvePath:TD,CustomBlending:gL,CustomToneMapping:kL,CylinderGeometry:Xu,Cylindrical:H6,Data3DTexture:RM,DataArrayTexture:Bv,DataTexture:Ts,DataTextureLoader:f6,DataUtils:mz,DecrementStencilOp:g4,DecrementWrapStencilOp:y4,DefaultLoadingManager:XD,DepthFormat:El,DepthStencilFormat:kl,DepthTexture:FM,DetachedBindMode:GL,DirectionalLight:nw,DirectionalLightHelper:$6,DiscreteInterpolant:WD,DisplayP3ColorSpace:Iv,DodecahedronGeometry:Gv,DoubleSide:Qr,DstAlphaFactor:EL,DstColorFactor:TL,DynamicCopyUsage:B4,DynamicDrawUsage:Cl,DynamicReadUsage:R4,EdgesGeometry:bD,EllipseCurve:Uv,EqualCompare:qL,EqualDepth:a0,EqualStencilFunc:S4,EquirectangularReflectionMapping:Vd,EquirectangularRefractionMapping:Wd,Euler:lr,EventDispatcher:as,ExtrudeGeometry:Wv,FileLoader:cr,Float16BufferAttribute:Az,Float32BufferAttribute:qe,FloatType:Vi,Fog:Fv,FogExp2:Dv,FramebufferTexture:E8,FrontSide:Bs,Frustum:Ah,GLBufferAttribute:k6,GLSL1:D4,GLSL3:T1,GreaterCompare:ZL,GreaterDepth:c0,GreaterEqualCompare:tD,GreaterEqualDepth:l0,GreaterEqualStencilFunc:C4,GreaterStencilFunc:w4,GridHelper:K6,Group:io,HalfFloatType:Vu,HemisphereLight:KD,HemisphereLightHelper:J6,IcosahedronGeometry:jv,ImageBitmapLoader:tF,ImageLoader:nh,ImageUtils:oD,IncrementStencilOp:m4,IncrementWrapStencilOp:v4,InstancedBufferAttribute:Hl,InstancedBufferGeometry:ZD,InstancedInterleavedBuffer:U6,InstancedMesh:HM,Int16BufferAttribute:xz,Int32BufferAttribute:_z,Int8BufferAttribute:gz,IntType:wv,InterleavedBuffer:Sh,InterleavedBufferAttribute:pa,Interpolant:Ju,InterpolateDiscrete:Tu,InterpolateLinear:bu,InterpolateSmooth:xg,InvertStencilOp:x4,KeepStencilOp:il,KeyframeTrack:us,LOD:AD,LatheGeometry:Eh,Layers:bl,LessCompare:QL,LessDepth:o0,LessEqualCompare:TM,LessEqualDepth:Ol,LessEqualStencilFunc:M4,LessStencilFunc:A4,Light:Ca,LightProbe:qD,Line:_o,Line3:G6,LineBasicMaterial:_i,LineCurve:jM,LineCurve3:CD,LineDashedMaterial:HD,LineLoop:zM,LineSegments:ls,LinearDisplayP3ColorSpace:yh,LinearFilter:_n,LinearInterpolant:$M,LinearMipMapLinearFilter:c4,LinearMipMapNearestFilter:l4,LinearMipmapLinearFilter:Ir,LinearMipmapNearestFilter:hu,LinearSRGBColorSpace:Mo,LinearToneMapping:NL,LinearTransfer:Xd,Loader:Ai,LoaderUtils:ca,LoadingManager:qM,LoopOnce:VL,LoopPingPong:jL,LoopRepeat:WL,LuminanceAlphaFormat:SM,LuminanceFormat:AM,MOUSE:tl,Material:Pn,MaterialLoader:qv,MathUtils:iD,Matrix2:lw,Matrix3:At,Matrix4:rt,MaxEquation:_L,Mesh:En,MeshBasicMaterial:ir,MeshDepthMaterial:NM,MeshDistanceMaterial:OM,MeshLambertMaterial:UD,MeshMatcapMaterial:kD,MeshNormalMaterial:OD,MeshPhongMaterial:FD,MeshPhysicalMaterial:Fr,MeshStandardMaterial:bh,MeshToonMaterial:ND,MinEquation:xL,MirroredRepeatWrapping:Eu,MixOperation:DL,MultiplyBlending:w1,MultiplyOperation:gh,NearestFilter:Nn,NearestMipMapLinearFilter:a4,NearestMipMapNearestFilter:o4,NearestMipmapLinearFilter:dl,NearestMipmapNearestFilter:Mv,NeutralToneMapping:zL,NeverCompare:$L,NeverDepth:r0,NeverStencilFunc:_4,NoBlending:ao,NoColorSpace:Zs,NoToneMapping:Cs,NormalAnimationBlendMode:Pv,NormalBlending:wl,NotEqualCompare:eD,NotEqualDepth:u0,NotEqualStencilFunc:E4,NumberKeyframeTrack:Gl,Object3D:It,ObjectLoader:m6,ObjectSpaceNormalMap:YL,OctahedronGeometry:Ch,OneFactor:SL,OneMinusConstantAlphaFactor:LL,OneMinusConstantColorFactor:IL,OneMinusDstAlphaFactor:CL,OneMinusDstColorFactor:bL,OneMinusSrcAlphaFactor:i0,OneMinusSrcColorFactor:wL,OrthographicCamera:Ms,P3Primaries:Kd,PCFShadowMap:Av,PCFSoftShadowMap:cd,PMREMGenerator:b1,Path:qd,PerspectiveCamera:un,Plane:qs,PlaneGeometry:Wu,PlaneHelper:eW,PointLight:tw,PointLightHelper:j6,Points:GM,PointsMaterial:wh,PolarGridHelper:Y6,PolyhedronGeometry:Ea,PositionalAudio:S6,PropertyBinding:Lt,PropertyMixer:iF,QuadraticBezierCurve:XM,QuadraticBezierCurve3:JM,Quaternion:jn,QuaternionKeyframeTrack:Vl,QuaternionLinearInterpolant:jD,RED_GREEN_RGTC2_Format:F0,RED_RGTC1_Format:wM,REVISION:zu,RGBADepthPacking:KL,RGBAFormat:mi,RGBAIntegerFormat:Rv,RGBA_ASTC_10x10_Format:R0,RGBA_ASTC_10x5_Format:C0,RGBA_ASTC_10x6_Format:T0,RGBA_ASTC_10x8_Format:b0,RGBA_ASTC_12x10_Format:P0,RGBA_ASTC_12x12_Format:I0,RGBA_ASTC_4x4_Format:y0,RGBA_ASTC_5x4_Format:x0,RGBA_ASTC_5x5_Format:_0,RGBA_ASTC_6x5_Format:A0,RGBA_ASTC_6x6_Format:S0,RGBA_ASTC_8x5_Format:M0,RGBA_ASTC_8x6_Format:w0,RGBA_ASTC_8x8_Format:E0,RGBA_BPTC_Format:pd,RGBA_ETC2_EAC_Format:v0,RGBA_PVRTC_2BPPV1_Format:p0,RGBA_PVRTC_4BPPV1_Format:h0,RGBA_S3TC_DXT1_Format:fd,RGBA_S3TC_DXT3_Format:dd,RGBA_S3TC_DXT5_Format:hd,RGBDepthPacking:f4,RGBFormat:_M,RGBIntegerFormat:u4,RGB_BPTC_SIGNED_Format:B0,RGB_BPTC_UNSIGNED_Format:L0,RGB_ETC1_Format:m0,RGB_ETC2_Format:g0,RGB_PVRTC_2BPPV1_Format:d0,RGB_PVRTC_4BPPV1_Format:f0,RGB_S3TC_DXT1_Format:ud,RGDepthPacking:d4,RGFormat:MM,RGIntegerFormat:bv,RawShaderMaterial:DD,Ray:$l,Raycaster:sF,Rec709Primaries:Jd,RectAreaLight:$D,RedFormat:Tv,RedIntegerFormat:vh,ReinhardToneMapping:OL,RenderTarget:aD,RepeatWrapping:ha,ReplaceStencilOp:p4,ReverseSubtractEquation:yL,RingGeometry:Xv,SIGNED_RED_GREEN_RGTC2_Format:N0,SIGNED_RED_RGTC1_Format:D0,SRGBColorSpace:Cr,SRGBTransfer:Yt,Scene:U0,ShaderChunk:Mt,ShaderLib:$r,ShaderMaterial:ss,ShadowMaterial:LD,Shape:Rl,ShapeGeometry:Jv,ShapePath:iW,ShapeUtils:bs,ShortType:vM,Skeleton:Mh,SkeletonHelper:W6,SkinnedMesh:kM,Source:ml,Sphere:Zn,SphereGeometry:Th,Spherical:N1,SphericalHarmonics3:QD,SplineCurve:KM,SpotLight:ew,SpotLightHelper:V6,Sprite:_D,SpriteMaterial:UM,SrcAlphaFactor:n0,SrcAlphaSaturateFactor:RL,SrcColorFactor:ML,StaticCopyUsage:I4,StaticDrawUsage:Yd,StaticReadUsage:b4,StereoCamera:y6,StreamCopyUsage:L4,StreamDrawUsage:T4,StreamReadUsage:P4,StringKeyframeTrack:Zl,SubtractEquation:vL,SubtractiveBlending:M1,TOUCH:nl,TangentSpaceNormalMap:wa,TetrahedronGeometry:Kv,Texture:en,TextureLoader:JD,TextureUtils:r8,TorusGeometry:Yv,TorusKnotGeometry:$v,Triangle:zi,TriangleFanDrawMode:O0,TriangleStripDrawMode:CM,TrianglesDrawMode:XL,TubeGeometry:Qv,UVMapping:Sv,Uint16BufferAttribute:PM,Uint32BufferAttribute:IM,Uint8BufferAttribute:vz,Uint8ClampedBufferAttribute:yz,Uniform:aw,UniformsGroup:O6,UniformsLib:Ne,UniformsUtils:uD,UnsignedByteType:is,UnsignedInt248Type:Ul,UnsignedInt5999Type:yM,UnsignedIntType:xo,UnsignedShort4444Type:Ev,UnsignedShort5551Type:Cv,UnsignedShortType:Cu,VSMShadowMap:Xr,Vector2:pe,Vector3:O,Vector4:Nt,VectorKeyframeTrack:Wl,VideoTexture:w8,WebGL3DRenderTarget:sz,WebGLArrayRenderTarget:rz,WebGLCoordinateSystem:Ss,WebGLCubeRenderTarget:LM,WebGLMultipleRenderTargets:sW,WebGLRenderTarget:rs,WebGLRenderer:yD,WebGLUtils:gD,WebGPUCoordinateSystem:$d,WireframeGeometry:BD,WrapAroundEnding:jd,ZeroCurvatureEnding:hl,ZeroFactor:AL,ZeroSlopeEnding:pl,ZeroStencilOp:h4,createCanvasElement:sD},Symbol.toStringTag,{value:"Module"}));var aF={exports:{}},ec={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ec.ConcurrentRoot=1;ec.ContinuousEventPriority=4;ec.DefaultEventPriority=16;ec.DiscreteEventPriority=1;ec.IdleEventPriority=536870912;ec.LegacyRoot=0;aF.exports=ec;var tu=aF.exports;function aW(n){let e;const t=new Set,i=(c,f)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const p=e;e=f?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,f=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=f(e);function m(){const v=f(e);if(!h(p,v)){const A=p;c(p=v,A)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,f,h)=>f||h?s(c,f,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const lW=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ER=lW?D.useEffect:D.useLayoutEffect;function cW(n){const e=typeof n=="function"?aW(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=D.useReducer(x=>x+1,0),o=e.getState(),a=D.useRef(o),l=D.useRef(i),c=D.useRef(r),f=D.useRef(!1),h=D.useRef();h.current===void 0&&(h.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||f.current)&&(p=i(o),m=!r(h.current,p)),ER(()=>{m&&(h.current=p),a.current=o,l.current=i,c.current=r,f.current=!1});const v=D.useRef(o);ER(()=>{const x=()=>{try{const _=e.getState(),S=l.current(_);c.current(h.current,S)||(a.current=_,h.current=S,s())}catch{f.current=!0,s()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const A=m?p:h.current;return D.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const uW=n=>typeof n=="object"&&typeof n.then=="function",vl=[];function lF(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function cF(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of vl)if(lF(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=vl.indexOf(r);s!==-1&&vl.splice(s,1)},promise:(uW(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(vl.push(r),!t)throw r.promise}const fW=(n,e,t)=>cF(n,e,!1,t),dW=(n,e,t)=>void cF(n,e,!0,t),hW=n=>{if(n===void 0||n.length===0)vl.splice(0,vl.length);else{const e=vl.find(t=>lF(n,t.keys,t.equal));e&&e.remove()}};var uF={exports:{}},G_={exports:{}},V_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR;function pW(){return CR||(CR=1,function(n){function e(L,G){var V=L.length;L.push(G);e:for(;0<V;){var te=V-1>>>1,ve=L[te];if(0<r(ve,G))L[te]=G,L[V]=ve,V=te;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var G=L[0],V=L.pop();if(V!==G){L[0]=V;e:for(var te=0,ve=L.length,Le=ve>>>1;te<Le;){var oe=2*(te+1)-1,ye=L[oe],Ee=oe+1,Se=L[Ee];if(0>r(ye,V))Ee<ve&&0>r(Se,ye)?(L[te]=Se,L[Ee]=V,te=Ee):(L[te]=ye,L[oe]=V,te=oe);else if(Ee<ve&&0>r(Se,V))L[te]=Se,L[Ee]=V,te=Ee;else break e}}return G}function r(L,G){var V=L.sortIndex-G.sortIndex;return V!==0?V:L.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,h=null,p=3,m=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var G=t(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=L)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function w(L){if(A=!1,S(L),!v)if(t(l)!==null)v=!0,$(R);else{var G=t(c);G!==null&&K(w,G.startTime-L)}}function R(L,G){v=!1,A&&(A=!1,g(B),B=-1),m=!0;var V=p;try{for(S(G),h=t(l);h!==null&&(!(h.expirationTime>G)||L&&!P());){var te=h.callback;if(typeof te=="function"){h.callback=null,p=h.priorityLevel;var ve=te(h.expirationTime<=G);G=n.unstable_now(),typeof ve=="function"?h.callback=ve:h===t(l)&&i(l),S(G)}else i(l);h=t(l)}if(h!==null)var Le=!0;else{var oe=t(c);oe!==null&&K(w,oe.startTime-G),Le=!1}return Le}finally{h=null,p=V,m=!1}}var b=!1,I=null,B=-1,z=5,C=-1;function P(){return!(n.unstable_now()-C<z)}function j(){if(I!==null){var L=n.unstable_now();C=L;var G=!0;try{G=I(!0,L)}finally{G?X():(b=!1,I=null)}}else b=!1}var X;if(typeof _=="function")X=function(){_(j)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,le=ee.port2;ee.port1.onmessage=j,X=function(){le.postMessage(null)}}else X=function(){x(j,0)};function $(L){I=L,b||(b=!0,X())}function K(L,G){B=x(function(){L(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,$(R))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var V=p;p=G;try{return L()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=p;p=L;try{return G()}finally{p=V}},n.unstable_scheduleCallback=function(L,G,V){var te=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,L){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=V+ve,L={id:f++,callback:G,priorityLevel:L,startTime:V,expirationTime:ve,sortIndex:-1},V>te?(L.sortIndex=V,e(c,L),t(l)===null&&L===t(c)&&(A?(g(B),B=-1):A=!0,K(w,V-te))):(L.sortIndex=ve,e(l,L),v||m||(v=!0,$(R))),L},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(L){var G=p;return function(){var V=p;p=G;try{return L.apply(this,arguments)}finally{p=V}}}}(V_)),V_}var TR;function mW(){return TR||(TR=1,G_.exports=pW()),G_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gW=function(e){var t={},i=D,r=mW(),s=Object.assign;function o(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),R=Symbol.iterator;function b(u){return u===null||typeof u!="object"?null:(u=R&&u[R]||u["@@iterator"],typeof u=="function"?u:null)}function I(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case f:return"Fragment";case c:return"Portal";case p:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case A:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case _:return d=u.displayName||null,d!==null?d:I(u.type)||"Memo";case S:d=u._payload,u=u._init;try{return I(u(d))}catch{}}return null}function B(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(d);case 8:return d===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function z(u){var d=u,y=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(y=d.return),u=d.return;while(u)}return d.tag===3?y:null}function C(u){if(z(u)!==u)throw Error(o(188))}function P(u){var d=u.alternate;if(!d){if(d=z(u),d===null)throw Error(o(188));return d!==u?null:u}for(var y=u,M=d;;){var E=y.return;if(E===null)break;var T=E.alternate;if(T===null){if(M=E.return,M!==null){y=M;continue}break}if(E.child===T.child){for(T=E.child;T;){if(T===y)return C(E),u;if(T===M)return C(E),d;T=T.sibling}throw Error(o(188))}if(y.return!==M.return)y=E,M=T;else{for(var H=!1,Y=E.child;Y;){if(Y===y){H=!0,y=E,M=T;break}if(Y===M){H=!0,M=E,y=T;break}Y=Y.sibling}if(!H){for(Y=T.child;Y;){if(Y===y){H=!0,y=T,M=E;break}if(Y===M){H=!0,M=T,y=E;break}Y=Y.sibling}if(!H)throw Error(o(189))}}if(y.alternate!==M)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?u:d}function j(u){return u=P(u),u!==null?X(u):null}function X(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=X(u);if(d!==null)return d;u=u.sibling}return null}function ee(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=ee(u);if(d!==null)return d}u=u.sibling}return null}var le=Array.isArray,$=e.getPublicInstance,K=e.getRootHostContext,L=e.getChildHostContext,G=e.prepareForCommit,V=e.resetAfterCommit,te=e.createInstance,ve=e.appendInitialChild,Le=e.finalizeInitialChildren,oe=e.prepareUpdate,ye=e.shouldSetTextContent,Ee=e.createTextInstance,Se=e.scheduleTimeout,lt=e.cancelTimeout,st=e.noTimeout,ut=e.isPrimaryRenderer,ot=e.supportsMutation,xe=e.supportsPersistence,k=e.supportsHydration,Pe=e.getInstanceFromNode,Re=e.preparePortalMount,Ae=e.getCurrentEventPriority,Ie=e.detachDeletedInstance,Ze=e.supportsMicrotasks,ze=e.scheduleMicrotask,U=e.supportsTestSelectors,F=e.findFiberRoot,ne=e.getBoundingRect,he=e.getTextContent,_e=e.isHiddenSubtree,me=e.matchAccessibilityRole,$e=e.setFocusIfFocusable,Be=e.setupIntersectionObserver,Ve=e.appendChild,bt=e.appendChildToContainer,Me=e.commitTextUpdate,We=e.commitMount,pt=e.commitUpdate,ft=e.insertBefore,je=e.insertInContainerBefore,J=e.removeChild,de=e.removeChildFromContainer,Fe=e.resetTextContent,W=e.hideInstance,Ce=e.hideTextInstance,ce=e.unhideInstance,ge=e.unhideTextInstance,Ue=e.clearContainer,ke=e.cloneInstance,gt=e.createContainerChildSet,Dt=e.appendChildToContainerChildSet,mn=e.finalizeContainerChildren,wt=e.replaceContainerChildren,an=e.cloneHiddenInstance,Xn=e.cloneHiddenTextInstance,Gh=e.canHydrateInstance,Vh=e.canHydrateTextInstance,Ns=e.canHydrateSuspenseInstance,tc=e.isSuspenseInstancePending,nc=e.isSuspenseInstanceFallback,Wh=e.registerSuspenseInstanceRetry,fs=e.getNextHydratableSibling,jh=e.getFirstHydratableChild,ic=e.getFirstHydratableChildWithinContainer,Xh=e.getFirstHydratableChildWithinSuspenseInstance,Jh=e.hydrateInstance,yy=e.hydrateTextInstance,xy=e.hydrateSuspenseInstance,_y=e.getNextHydratableInstanceAfterSuspenseInstance,N=e.commitHydratedContainer,Q=e.commitHydratedSuspenseInstance,se=e.clearSuspenseBoundary,ae=e.clearSuspenseBoundaryFromContainer,Z=e.shouldDeleteUnhydratedTailInstances,be=e.didNotMatchHydratedContainerTextInstance,Ge=e.didNotMatchHydratedTextInstance,Je;function Ke(u){if(Je===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);Je=d&&d[1]||""}return`
`+Je+u}var ct=!1;function dt(u,d){if(!u||ct)return"";ct=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Te){var M=Te}Reflect.construct(u,[],d)}else{try{d.call()}catch(Te){M=Te}u.call(d.prototype)}else{try{throw Error()}catch(Te){M=Te}u()}}catch(Te){if(Te&&M&&typeof Te.stack=="string"){for(var E=Te.stack.split(`
`),T=M.stack.split(`
`),H=E.length-1,Y=T.length-1;1<=H&&0<=Y&&E[H]!==T[Y];)Y--;for(;1<=H&&0<=Y;H--,Y--)if(E[H]!==T[Y]){if(H!==1||Y!==1)do if(H--,Y--,0>Y||E[H]!==T[Y]){var fe=`
`+E[H].replace(" at new "," at ");return u.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",u.displayName)),fe}while(1<=H&&0<=Y);break}}}finally{ct=!1,Error.prepareStackTrace=y}return(u=u?u.displayName||u.name:"")?Ke(u):""}var et=Object.prototype.hasOwnProperty,Ft=[],kt=-1;function Wt(u){return{current:u}}function Ct(u){0>kt||(u.current=Ft[kt],Ft[kt]=null,kt--)}function nt(u,d){kt++,Ft[kt]=u.current,u.current=d}var Qe={},Bt=Wt(Qe),vt=Wt(!1),Bn=Qe;function Ji(u,d){var y=u.type.contextTypes;if(!y)return Qe;var M=u.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===d)return M.__reactInternalMemoizedMaskedChildContext;var E={},T;for(T in y)E[T]=d[T];return M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function Jt(u){return u=u.childContextTypes,u!=null}function Eo(){Ct(vt),Ct(Bt)}function tn(u,d,y){if(Bt.current!==Qe)throw Error(o(168));nt(Bt,d),nt(vt,y)}function Ur(u,d,y){var M=u.stateNode;if(d=d.childContextTypes,typeof M.getChildContext!="function")return y;M=M.getChildContext();for(var E in M)if(!(E in d))throw Error(o(108,B(u)||"Unknown",E));return s({},y,M)}function Co(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Qe,Bn=Bt.current,nt(Bt,u),nt(vt,vt.current),!0}function Si(u,d,y){var M=u.stateNode;if(!M)throw Error(o(169));y?(u=Ur(u,d,Bn),M.__reactInternalMemoizedMergedChildContext=u,Ct(vt),Ct(Bt),nt(Bt,u)):Ct(vt),nt(vt,y)}var Mi=Math.clz32?Math.clz32:mO,Ay=Math.log,Kh=Math.LN2;function mO(u){return u>>>=0,u===0?32:31-(Ay(u)/Kh|0)|0}var Yh=64,$h=4194304;function Zu(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Qh(u,d){var y=u.pendingLanes;if(y===0)return 0;var M=0,E=u.suspendedLanes,T=u.pingedLanes,H=y&268435455;if(H!==0){var Y=H&~E;Y!==0?M=Zu(Y):(T&=H,T!==0&&(M=Zu(T)))}else H=y&~E,H!==0?M=Zu(H):T!==0&&(M=Zu(T));if(M===0)return 0;if(d!==0&&d!==M&&!(d&E)&&(E=M&-M,T=d&-d,E>=T||E===16&&(T&4194240)!==0))return d;if(M&4&&(M|=y&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=M;0<d;)y=31-Mi(d),E=1<<y,M|=u[y],d&=~E;return M}function gO(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vO(u,d){for(var y=u.suspendedLanes,M=u.pingedLanes,E=u.expirationTimes,T=u.pendingLanes;0<T;){var H=31-Mi(T),Y=1<<H,fe=E[H];fe===-1?(!(Y&y)||Y&M)&&(E[H]=gO(Y,d)):fe<=d&&(u.expiredLanes|=Y),T&=~Y}}function Sy(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function My(u){for(var d=[],y=0;31>y;y++)d.push(u);return d}function ef(u,d,y){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-Mi(d),u[d]=y}function yO(u,d){var y=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var M=u.eventTimes;for(u=u.expirationTimes;0<y;){var E=31-Mi(y),T=1<<E;d[E]=0,M[E]=-1,u[E]=-1,y&=~T}}function wy(u,d){var y=u.entangledLanes|=d;for(u=u.entanglements;y;){var M=31-Mi(y),E=1<<M;E&d|u[M]&d&&(u[M]|=d),y&=~E}}var Ht=0;function nE(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Ey=r.unstable_scheduleCallback,iE=r.unstable_cancelCallback,xO=r.unstable_shouldYield,_O=r.unstable_requestPaint,kn=r.unstable_now,Cy=r.unstable_ImmediatePriority,AO=r.unstable_UserBlockingPriority,Ty=r.unstable_NormalPriority,SO=r.unstable_IdlePriority,qh=null,ds=null;function MO(u){if(ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(qh,u,void 0,(u.current.flags&128)===128)}catch{}}function wO(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var hs=typeof Object.is=="function"?Object.is:wO,Os=null,Zh=!1,by=!1;function rE(u){Os===null?Os=[u]:Os.push(u)}function EO(u){Zh=!0,rE(u)}function ps(){if(!by&&Os!==null){by=!0;var u=0,d=Ht;try{var y=Os;for(Ht=1;u<y.length;u++){var M=y[u];do M=M(!0);while(M!==null)}Os=null,Zh=!1}catch(E){throw Os!==null&&(Os=Os.slice(u+1)),Ey(Cy,ps),E}finally{Ht=d,by=!1}}return null}var CO=a.ReactCurrentBatchConfig;function ep(u,d){if(hs(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var y=Object.keys(u),M=Object.keys(d);if(y.length!==M.length)return!1;for(M=0;M<y.length;M++){var E=y[M];if(!et.call(d,E)||!hs(u[E],d[E]))return!1}return!0}function TO(u){switch(u.tag){case 5:return Ke(u.type);case 16:return Ke("Lazy");case 13:return Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 2:case 15:return u=dt(u.type,!1),u;case 11:return u=dt(u.type.render,!1),u;case 1:return u=dt(u.type,!0),u;default:return""}}function kr(u,d){if(u&&u.defaultProps){d=s({},d),u=u.defaultProps;for(var y in u)d[y]===void 0&&(d[y]=u[y]);return d}return d}var tp=Wt(null),np=null,rc=null,Ry=null;function Py(){Ry=rc=np=null}function sE(u,d,y){ut?(nt(tp,d._currentValue),d._currentValue=y):(nt(tp,d._currentValue2),d._currentValue2=y)}function Iy(u){var d=tp.current;Ct(tp),ut?u._currentValue=d:u._currentValue2=d}function By(u,d,y){for(;u!==null;){var M=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),u===y)break;u=u.return}}function sc(u,d){np=u,Ry=rc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&($i=!0),u.firstContext=null)}function hr(u){var d=ut?u._currentValue:u._currentValue2;if(Ry!==u)if(u={context:u,memoizedValue:d,next:null},rc===null){if(np===null)throw Error(o(308));rc=u,np.dependencies={lanes:0,firstContext:u}}else rc=rc.next=u;return d}var ms=null,To=!1;function Ly(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oE(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Us(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function bo(u,d){var y=u.updateQueue;y!==null&&(y=y.shared,Cn!==null&&u.mode&1&&!(Tt&2)?(u=y.interleaved,u===null?(d.next=d,ms===null?ms=[y]:ms.push(y)):(d.next=u.next,u.next=d),y.interleaved=d):(u=y.pending,u===null?d.next=d:(d.next=u.next,u.next=d),y.pending=d))}function ip(u,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var M=d.lanes;M&=u.pendingLanes,y|=M,d.lanes=y,wy(u,y)}}function aE(u,d){var y=u.updateQueue,M=u.alternate;if(M!==null&&(M=M.updateQueue,y===M)){var E=null,T=null;if(y=y.firstBaseUpdate,y!==null){do{var H={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};T===null?E=T=H:T=T.next=H,y=y.next}while(y!==null);T===null?E=T=d:T=T.next=d}else E=T=d;y={baseState:M.baseState,firstBaseUpdate:E,lastBaseUpdate:T,shared:M.shared,effects:M.effects},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=d}function rp(u,d,y,M){var E=u.updateQueue;To=!1;var T=E.firstBaseUpdate,H=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var fe=Y,Te=fe.next;fe.next=null,H===null?T=Te:H.next=Te,H=fe;var Ye=u.alternate;Ye!==null&&(Ye=Ye.updateQueue,Y=Ye.lastBaseUpdate,Y!==H&&(Y===null?Ye.firstBaseUpdate=Te:Y.next=Te,Ye.lastBaseUpdate=fe))}if(T!==null){var yt=E.baseState;H=0,Ye=Te=fe=null,Y=T;do{var at=Y.lane,Kt=Y.eventTime;if((M&at)===at){Ye!==null&&(Ye=Ye.next={eventTime:Kt,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var it=u,si=Y;switch(at=d,Kt=y,si.tag){case 1:if(it=si.payload,typeof it=="function"){yt=it.call(Kt,yt,at);break e}yt=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=si.payload,at=typeof it=="function"?it.call(Kt,yt,at):it,at==null)break e;yt=s({},yt,at);break e;case 2:To=!0}}Y.callback!==null&&Y.lane!==0&&(u.flags|=64,at=E.effects,at===null?E.effects=[Y]:at.push(Y))}else Kt={eventTime:Kt,lane:at,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ye===null?(Te=Ye=Kt,fe=yt):Ye=Ye.next=Kt,H|=at;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;at=Y,Y=at.next,at.next=null,E.lastBaseUpdate=at,E.shared.pending=null}}while(!0);if(Ye===null&&(fe=yt),E.baseState=fe,E.firstBaseUpdate=Te,E.lastBaseUpdate=Ye,d=E.shared.interleaved,d!==null){E=d;do H|=E.lane,E=E.next;while(E!==d)}else T===null&&(E.shared.lanes=0);pc|=H,u.lanes=H,u.memoizedState=yt}}function lE(u,d,y){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var M=u[d],E=M.callback;if(E!==null){if(M.callback=null,M=y,typeof E!="function")throw Error(o(191,E));E.call(M)}}}var cE=new i.Component().refs;function Dy(u,d,y,M){d=u.memoizedState,y=y(M,d),y=y==null?d:s({},d,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var sp={isMounted:function(u){return(u=u._reactInternals)?z(u)===u:!1},enqueueSetState:function(u,d,y){u=u._reactInternals;var M=Ei(),E=Io(u),T=Us(M,E);T.payload=d,y!=null&&(T.callback=y),bo(u,T),d=yr(u,E,M),d!==null&&ip(d,u,E)},enqueueReplaceState:function(u,d,y){u=u._reactInternals;var M=Ei(),E=Io(u),T=Us(M,E);T.tag=1,T.payload=d,y!=null&&(T.callback=y),bo(u,T),d=yr(u,E,M),d!==null&&ip(d,u,E)},enqueueForceUpdate:function(u,d){u=u._reactInternals;var y=Ei(),M=Io(u),E=Us(y,M);E.tag=2,d!=null&&(E.callback=d),bo(u,E),d=yr(u,M,y),d!==null&&ip(d,u,M)}};function uE(u,d,y,M,E,T,H){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(M,T,H):d.prototype&&d.prototype.isPureReactComponent?!ep(y,M)||!ep(E,T):!0}function fE(u,d,y){var M=!1,E=Qe,T=d.contextType;return typeof T=="object"&&T!==null?T=hr(T):(E=Jt(d)?Bn:Bt.current,M=d.contextTypes,T=(M=M!=null)?Ji(u,E):Qe),d=new d(y,T),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sp,u.stateNode=d,d._reactInternals=u,M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=T),d}function dE(u,d,y,M){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,M),d.state!==u&&sp.enqueueReplaceState(d,d.state,null)}function Fy(u,d,y,M){var E=u.stateNode;E.props=y,E.state=u.memoizedState,E.refs=cE,Ly(u);var T=d.contextType;typeof T=="object"&&T!==null?E.context=hr(T):(T=Jt(d)?Bn:Bt.current,E.context=Ji(u,T)),E.state=u.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(Dy(u,d,T,y),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&sp.enqueueReplaceState(E,E.state,null),rp(u,y,E,M),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}var oc=[],ac=0,op=null,ap=0,pr=[],mr=0,Ra=null,ks=1,Hs="";function Pa(u,d){oc[ac++]=ap,oc[ac++]=op,op=u,ap=d}function hE(u,d,y){pr[mr++]=ks,pr[mr++]=Hs,pr[mr++]=Ra,Ra=u;var M=ks;u=Hs;var E=32-Mi(M)-1;M&=~(1<<E),y+=1;var T=32-Mi(d)+E;if(30<T){var H=E-E%5;T=(M&(1<<H)-1).toString(32),M>>=H,E-=H,ks=1<<32-Mi(d)+E|y<<E|M,Hs=T+u}else ks=1<<T|y<<E|M,Hs=u}function Ny(u){u.return!==null&&(Pa(u,1),hE(u,1,0))}function Oy(u){for(;u===op;)op=oc[--ac],oc[ac]=null,ap=oc[--ac],oc[ac]=null;for(;u===Ra;)Ra=pr[--mr],pr[mr]=null,Hs=pr[--mr],pr[mr]=null,ks=pr[--mr],pr[mr]=null}var Ki=null,Yi=null,nn=!1,tf=!1,Hr=null;function pE(u,d){var y=xr(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=u,d=u.deletions,d===null?(u.deletions=[y],u.flags|=16):d.push(y)}function mE(u,d){switch(u.tag){case 5:return d=Gh(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,Ki=u,Yi=jh(d),!0):!1;case 6:return d=Vh(d,u.pendingProps),d!==null?(u.stateNode=d,Ki=u,Yi=null,!0):!1;case 13:if(d=Ns(d),d!==null){var y=Ra!==null?{id:ks,overflow:Hs}:null;return u.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=xr(18,null,null,0),y.stateNode=d,y.return=u,u.child=y,Ki=u,Yi=null,!0}return!1;default:return!1}}function Uy(u){return(u.mode&1)!==0&&(u.flags&128)===0}function ky(u){if(nn){var d=Yi;if(d){var y=d;if(!mE(u,d)){if(Uy(u))throw Error(o(418));d=fs(y);var M=Ki;d&&mE(u,d)?pE(M,y):(u.flags=u.flags&-4097|2,nn=!1,Ki=u)}}else{if(Uy(u))throw Error(o(418));u.flags=u.flags&-4097|2,nn=!1,Ki=u}}}function gE(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Ki=u}function nf(u){if(!k||u!==Ki)return!1;if(!nn)return gE(u),nn=!0,!1;if(u.tag!==3&&(u.tag!==5||Z(u.type)&&!ye(u.type,u.memoizedProps))){var d=Yi;if(d){if(Uy(u)){for(u=Yi;u;)u=fs(u);throw Error(o(418))}for(;d;)pE(u,d),d=fs(d)}}if(gE(u),u.tag===13){if(!k)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Yi=_y(u)}else Yi=Ki?fs(u.stateNode):null;return!0}function lc(){k&&(Yi=Ki=null,tf=nn=!1)}function Hy(u){Hr===null?Hr=[u]:Hr.push(u)}function rf(u,d,y){if(u=y.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var M=y.stateNode}if(!M)throw Error(o(147,u));var E=M,T=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===T?d.ref:(d=function(H){var Y=E.refs;Y===cE&&(Y=E.refs={}),H===null?delete Y[T]:Y[T]=H},d._stringRef=T,d)}if(typeof u!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,u))}return u}function lp(u,d){throw u=Object.prototype.toString.call(d),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function vE(u){var d=u._init;return d(u._payload)}function yE(u){function d(re,q){if(u){var ue=re.deletions;ue===null?(re.deletions=[q],re.flags|=16):ue.push(q)}}function y(re,q){if(!u)return null;for(;q!==null;)d(re,q),q=q.sibling;return null}function M(re,q){for(re=new Map;q!==null;)q.key!==null?re.set(q.key,q):re.set(q.index,q),q=q.sibling;return re}function E(re,q){return re=Lo(re,q),re.index=0,re.sibling=null,re}function T(re,q,ue){return re.index=ue,u?(ue=re.alternate,ue!==null?(ue=ue.index,ue<q?(re.flags|=2,q):ue):(re.flags|=2,q)):(re.flags|=1048576,q)}function H(re){return u&&re.alternate===null&&(re.flags|=2),re}function Y(re,q,ue,He){return q===null||q.tag!==6?(q=Mx(ue,re.mode,He),q.return=re,q):(q=E(q,ue),q.return=re,q)}function fe(re,q,ue,He){var tt=ue.type;return tt===f?Ye(re,q,ue.props.children,He,ue.key):q!==null&&(q.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===S&&vE(tt)===q.type)?(He=E(q,ue.props),He.ref=rf(re,q,ue),He.return=re,He):(He=kp(ue.type,ue.key,ue.props,null,re.mode,He),He.ref=rf(re,q,ue),He.return=re,He)}function Te(re,q,ue,He){return q===null||q.tag!==4||q.stateNode.containerInfo!==ue.containerInfo||q.stateNode.implementation!==ue.implementation?(q=wx(ue,re.mode,He),q.return=re,q):(q=E(q,ue.children||[]),q.return=re,q)}function Ye(re,q,ue,He,tt){return q===null||q.tag!==7?(q=Oa(ue,re.mode,He,tt),q.return=re,q):(q=E(q,ue),q.return=re,q)}function yt(re,q,ue){if(typeof q=="string"&&q!==""||typeof q=="number")return q=Mx(""+q,re.mode,ue),q.return=re,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case l:return ue=kp(q.type,q.key,q.props,null,re.mode,ue),ue.ref=rf(re,null,q),ue.return=re,ue;case c:return q=wx(q,re.mode,ue),q.return=re,q;case S:var He=q._init;return yt(re,He(q._payload),ue)}if(le(q)||b(q))return q=Oa(q,re.mode,ue,null),q.return=re,q;lp(re,q)}return null}function at(re,q,ue,He){var tt=q!==null?q.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return tt!==null?null:Y(re,q,""+ue,He);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return ue.key===tt?fe(re,q,ue,He):null;case c:return ue.key===tt?Te(re,q,ue,He):null;case S:return tt=ue._init,at(re,q,tt(ue._payload),He)}if(le(ue)||b(ue))return tt!==null?null:Ye(re,q,ue,He,null);lp(re,ue)}return null}function Kt(re,q,ue,He,tt){if(typeof He=="string"&&He!==""||typeof He=="number")return re=re.get(ue)||null,Y(q,re,""+He,tt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case l:return re=re.get(He.key===null?ue:He.key)||null,fe(q,re,He,tt);case c:return re=re.get(He.key===null?ue:He.key)||null,Te(q,re,He,tt);case S:var Et=He._init;return Kt(re,q,ue,Et(He._payload),tt)}if(le(He)||b(He))return re=re.get(ue)||null,Ye(q,re,He,tt,null);lp(q,He)}return null}function it(re,q,ue,He){for(var tt=null,Et=null,xt=q,zt=q=0,zn=null;xt!==null&&zt<ue.length;zt++){xt.index>zt?(zn=xt,xt=null):zn=xt.sibling;var Gt=at(re,xt,ue[zt],He);if(Gt===null){xt===null&&(xt=zn);break}u&&xt&&Gt.alternate===null&&d(re,xt),q=T(Gt,q,zt),Et===null?tt=Gt:Et.sibling=Gt,Et=Gt,xt=zn}if(zt===ue.length)return y(re,xt),nn&&Pa(re,zt),tt;if(xt===null){for(;zt<ue.length;zt++)xt=yt(re,ue[zt],He),xt!==null&&(q=T(xt,q,zt),Et===null?tt=xt:Et.sibling=xt,Et=xt);return nn&&Pa(re,zt),tt}for(xt=M(re,xt);zt<ue.length;zt++)zn=Kt(xt,re,zt,ue[zt],He),zn!==null&&(u&&zn.alternate!==null&&xt.delete(zn.key===null?zt:zn.key),q=T(zn,q,zt),Et===null?tt=zn:Et.sibling=zn,Et=zn);return u&&xt.forEach(function(Do){return d(re,Do)}),nn&&Pa(re,zt),tt}function si(re,q,ue,He){var tt=b(ue);if(typeof tt!="function")throw Error(o(150));if(ue=tt.call(ue),ue==null)throw Error(o(151));for(var Et=tt=null,xt=q,zt=q=0,zn=null,Gt=ue.next();xt!==null&&!Gt.done;zt++,Gt=ue.next()){xt.index>zt?(zn=xt,xt=null):zn=xt.sibling;var Do=at(re,xt,Gt.value,He);if(Do===null){xt===null&&(xt=zn);break}u&&xt&&Do.alternate===null&&d(re,xt),q=T(Do,q,zt),Et===null?tt=Do:Et.sibling=Do,Et=Do,xt=zn}if(Gt.done)return y(re,xt),nn&&Pa(re,zt),tt;if(xt===null){for(;!Gt.done;zt++,Gt=ue.next())Gt=yt(re,Gt.value,He),Gt!==null&&(q=T(Gt,q,zt),Et===null?tt=Gt:Et.sibling=Gt,Et=Gt);return nn&&Pa(re,zt),tt}for(xt=M(re,xt);!Gt.done;zt++,Gt=ue.next())Gt=Kt(xt,re,zt,Gt.value,He),Gt!==null&&(u&&Gt.alternate!==null&&xt.delete(Gt.key===null?zt:Gt.key),q=T(Gt,q,zt),Et===null?tt=Gt:Et.sibling=Gt,Et=Gt);return u&&xt.forEach(function(iU){return d(re,iU)}),nn&&Pa(re,zt),tt}function _r(re,q,ue,He){if(typeof ue=="object"&&ue!==null&&ue.type===f&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:e:{for(var tt=ue.key,Et=q;Et!==null;){if(Et.key===tt){if(tt=ue.type,tt===f){if(Et.tag===7){y(re,Et.sibling),q=E(Et,ue.props.children),q.return=re,re=q;break e}}else if(Et.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===S&&vE(tt)===Et.type){y(re,Et.sibling),q=E(Et,ue.props),q.ref=rf(re,Et,ue),q.return=re,re=q;break e}y(re,Et);break}else d(re,Et);Et=Et.sibling}ue.type===f?(q=Oa(ue.props.children,re.mode,He,ue.key),q.return=re,re=q):(He=kp(ue.type,ue.key,ue.props,null,re.mode,He),He.ref=rf(re,q,ue),He.return=re,re=He)}return H(re);case c:e:{for(Et=ue.key;q!==null;){if(q.key===Et)if(q.tag===4&&q.stateNode.containerInfo===ue.containerInfo&&q.stateNode.implementation===ue.implementation){y(re,q.sibling),q=E(q,ue.children||[]),q.return=re,re=q;break e}else{y(re,q);break}else d(re,q);q=q.sibling}q=wx(ue,re.mode,He),q.return=re,re=q}return H(re);case S:return Et=ue._init,_r(re,q,Et(ue._payload),He)}if(le(ue))return it(re,q,ue,He);if(b(ue))return si(re,q,ue,He);lp(re,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,q!==null&&q.tag===6?(y(re,q.sibling),q=E(q,ue),q.return=re,re=q):(y(re,q),q=Mx(ue,re.mode,He),q.return=re,re=q),H(re)):y(re,q)}return _r}var cc=yE(!0),xE=yE(!1),sf={},gr=Wt(sf),of=Wt(sf),uc=Wt(sf);function gs(u){if(u===sf)throw Error(o(174));return u}function zy(u,d){nt(uc,d),nt(of,u),nt(gr,sf),u=K(d),Ct(gr),nt(gr,u)}function fc(){Ct(gr),Ct(of),Ct(uc)}function _E(u){var d=gs(uc.current),y=gs(gr.current);d=L(y,u.type,d),y!==d&&(nt(of,u),nt(gr,d))}function Gy(u){of.current===u&&(Ct(gr),Ct(of))}var ln=Wt(0);function cp(u){for(var d=u;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||tc(y)||nc(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Vy=[];function Wy(){for(var u=0;u<Vy.length;u++){var d=Vy[u];ut?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}Vy.length=0}var up=a.ReactCurrentDispatcher,vr=a.ReactCurrentBatchConfig,dc=0,gn=null,ni=null,Hn=null,fp=!1,af=!1,lf=0,bO=0;function ii(){throw Error(o(321))}function jy(u,d){if(d===null)return!1;for(var y=0;y<d.length&&y<u.length;y++)if(!hs(u[y],d[y]))return!1;return!0}function Xy(u,d,y,M,E,T){if(dc=T,gn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,up.current=u===null||u.memoizedState===null?BO:LO,u=y(M,E),af){T=0;do{if(af=!1,lf=0,25<=T)throw Error(o(301));T+=1,Hn=ni=null,d.updateQueue=null,up.current=DO,u=y(M,E)}while(af)}if(up.current=gp,d=ni!==null&&ni.next!==null,dc=0,Hn=ni=gn=null,fp=!1,d)throw Error(o(300));return u}function Jy(){var u=lf!==0;return lf=0,u}function zs(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?gn.memoizedState=Hn=u:Hn=Hn.next=u,Hn}function vs(){if(ni===null){var u=gn.alternate;u=u!==null?u.memoizedState:null}else u=ni.next;var d=Hn===null?gn.memoizedState:Hn.next;if(d!==null)Hn=d,ni=u;else{if(u===null)throw Error(o(310));ni=u,u={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},Hn===null?gn.memoizedState=Hn=u:Hn=Hn.next=u}return Hn}function Ia(u,d){return typeof d=="function"?d(u):d}function dp(u){var d=vs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var M=ni,E=M.baseQueue,T=y.pending;if(T!==null){if(E!==null){var H=E.next;E.next=T.next,T.next=H}M.baseQueue=E=T,y.pending=null}if(E!==null){T=E.next,M=M.baseState;var Y=H=null,fe=null,Te=T;do{var Ye=Te.lane;if((dc&Ye)===Ye)fe!==null&&(fe=fe.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),M=Te.hasEagerState?Te.eagerState:u(M,Te.action);else{var yt={lane:Ye,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};fe===null?(Y=fe=yt,H=M):fe=fe.next=yt,gn.lanes|=Ye,pc|=Ye}Te=Te.next}while(Te!==null&&Te!==T);fe===null?H=M:fe.next=Y,hs(M,d.memoizedState)||($i=!0),d.memoizedState=M,d.baseState=H,d.baseQueue=fe,y.lastRenderedState=M}if(u=y.interleaved,u!==null){E=u;do T=E.lane,gn.lanes|=T,pc|=T,E=E.next;while(E!==u)}else E===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function hp(u){var d=vs(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var M=y.dispatch,E=y.pending,T=d.memoizedState;if(E!==null){y.pending=null;var H=E=E.next;do T=u(T,H.action),H=H.next;while(H!==E);hs(T,d.memoizedState)||($i=!0),d.memoizedState=T,d.baseQueue===null&&(d.baseState=T),y.lastRenderedState=T}return[T,M]}function AE(){}function SE(u,d){var y=gn,M=vs(),E=d(),T=!hs(M.memoizedState,E);if(T&&(M.memoizedState=E,$i=!0),M=M.queue,uf(EE.bind(null,y,M,u),[u]),M.getSnapshot!==d||T||Hn!==null&&Hn.memoizedState.tag&1){if(y.flags|=2048,cf(9,wE.bind(null,y,M,E,d),void 0,null),Cn===null)throw Error(o(349));dc&30||ME(y,d,E)}return E}function ME(u,d,y){u.flags|=16384,u={getSnapshot:d,value:y},d=gn.updateQueue,d===null?(d={lastEffect:null,stores:null},gn.updateQueue=d,d.stores=[u]):(y=d.stores,y===null?d.stores=[u]:y.push(u))}function wE(u,d,y,M){d.value=y,d.getSnapshot=M,CE(d)&&yr(u,1,-1)}function EE(u,d,y){return y(function(){CE(d)&&yr(u,1,-1)})}function CE(u){var d=u.getSnapshot;u=u.value;try{var y=d();return!hs(u,y)}catch{return!0}}function Ky(u){var d=zs();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:u},d.queue=u,u=u.dispatch=IO.bind(null,gn,u),[d.memoizedState,u]}function cf(u,d,y,M){return u={tag:u,create:d,destroy:y,deps:M,next:null},d=gn.updateQueue,d===null?(d={lastEffect:null,stores:null},gn.updateQueue=d,d.lastEffect=u.next=u):(y=d.lastEffect,y===null?d.lastEffect=u.next=u:(M=y.next,y.next=u,u.next=M,d.lastEffect=u)),u}function TE(){return vs().memoizedState}function pp(u,d,y,M){var E=zs();gn.flags|=u,E.memoizedState=cf(1|d,y,void 0,M===void 0?null:M)}function mp(u,d,y,M){var E=vs();M=M===void 0?null:M;var T=void 0;if(ni!==null){var H=ni.memoizedState;if(T=H.destroy,M!==null&&jy(M,H.deps)){E.memoizedState=cf(d,y,T,M);return}}gn.flags|=u,E.memoizedState=cf(1|d,y,T,M)}function Yy(u,d){return pp(8390656,8,u,d)}function uf(u,d){return mp(2048,8,u,d)}function bE(u,d){return mp(4,2,u,d)}function RE(u,d){return mp(4,4,u,d)}function PE(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function IE(u,d,y){return y=y!=null?y.concat([u]):null,mp(4,4,PE.bind(null,d,u),y)}function $y(){}function BE(u,d){var y=vs();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&jy(d,M[1])?M[0]:(y.memoizedState=[u,d],u)}function LE(u,d){var y=vs();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&jy(d,M[1])?M[0]:(u=u(),y.memoizedState=[u,d],u)}function RO(u,d){var y=Ht;Ht=y!==0&&4>y?y:4,u(!0);var M=vr.transition;vr.transition={};try{u(!1),d()}finally{Ht=y,vr.transition=M}}function DE(){return vs().memoizedState}function PO(u,d,y){var M=Io(u);y={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null},FE(u)?NE(d,y):(OE(u,d,y),y=Ei(),u=yr(u,M,y),u!==null&&UE(u,d,M))}function IO(u,d,y){var M=Io(u),E={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null};if(FE(u))NE(d,E);else{OE(u,d,E);var T=u.alternate;if(u.lanes===0&&(T===null||T.lanes===0)&&(T=d.lastRenderedReducer,T!==null))try{var H=d.lastRenderedState,Y=T(H,y);if(E.hasEagerState=!0,E.eagerState=Y,hs(Y,H))return}catch{}finally{}y=Ei(),u=yr(u,M,y),u!==null&&UE(u,d,M)}}function FE(u){var d=u.alternate;return u===gn||d!==null&&d===gn}function NE(u,d){af=fp=!0;var y=u.pending;y===null?d.next=d:(d.next=y.next,y.next=d),u.pending=d}function OE(u,d,y){Cn!==null&&u.mode&1&&!(Tt&2)?(u=d.interleaved,u===null?(y.next=y,ms===null?ms=[d]:ms.push(d)):(y.next=u.next,u.next=y),d.interleaved=y):(u=d.pending,u===null?y.next=y:(y.next=u.next,u.next=y),d.pending=y)}function UE(u,d,y){if(y&4194240){var M=d.lanes;M&=u.pendingLanes,y|=M,d.lanes=y,wy(u,y)}}var gp={readContext:hr,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},BO={readContext:hr,useCallback:function(u,d){return zs().memoizedState=[u,d===void 0?null:d],u},useContext:hr,useEffect:Yy,useImperativeHandle:function(u,d,y){return y=y!=null?y.concat([u]):null,pp(4194308,4,PE.bind(null,d,u),y)},useLayoutEffect:function(u,d){return pp(4194308,4,u,d)},useInsertionEffect:function(u,d){return pp(4,2,u,d)},useMemo:function(u,d){var y=zs();return d=d===void 0?null:d,u=u(),y.memoizedState=[u,d],u},useReducer:function(u,d,y){var M=zs();return d=y!==void 0?y(d):d,M.memoizedState=M.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},M.queue=u,u=u.dispatch=PO.bind(null,gn,u),[M.memoizedState,u]},useRef:function(u){var d=zs();return u={current:u},d.memoizedState=u},useState:Ky,useDebugValue:$y,useDeferredValue:function(u){var d=Ky(u),y=d[0],M=d[1];return Yy(function(){var E=vr.transition;vr.transition={};try{M(u)}finally{vr.transition=E}},[u]),y},useTransition:function(){var u=Ky(!1),d=u[0];return u=RO.bind(null,u[1]),zs().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,y){var M=gn,E=zs();if(nn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=d(),Cn===null)throw Error(o(349));dc&30||ME(M,d,y)}E.memoizedState=y;var T={value:y,getSnapshot:d};return E.queue=T,Yy(EE.bind(null,M,T,u),[u]),M.flags|=2048,cf(9,wE.bind(null,M,T,y,d),void 0,null),y},useId:function(){var u=zs(),d=Cn.identifierPrefix;if(nn){var y=Hs,M=ks;y=(M&~(1<<32-Mi(M)-1)).toString(32)+y,d=":"+d+"R"+y,y=lf++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=bO++,d=":"+d+"r"+y.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},LO={readContext:hr,useCallback:BE,useContext:hr,useEffect:uf,useImperativeHandle:IE,useInsertionEffect:bE,useLayoutEffect:RE,useMemo:LE,useReducer:dp,useRef:TE,useState:function(){return dp(Ia)},useDebugValue:$y,useDeferredValue:function(u){var d=dp(Ia),y=d[0],M=d[1];return uf(function(){var E=vr.transition;vr.transition={};try{M(u)}finally{vr.transition=E}},[u]),y},useTransition:function(){var u=dp(Ia)[0],d=vs().memoizedState;return[u,d]},useMutableSource:AE,useSyncExternalStore:SE,useId:DE,unstable_isNewReconciler:!1},DO={readContext:hr,useCallback:BE,useContext:hr,useEffect:uf,useImperativeHandle:IE,useInsertionEffect:bE,useLayoutEffect:RE,useMemo:LE,useReducer:hp,useRef:TE,useState:function(){return hp(Ia)},useDebugValue:$y,useDeferredValue:function(u){var d=hp(Ia),y=d[0],M=d[1];return uf(function(){var E=vr.transition;vr.transition={};try{M(u)}finally{vr.transition=E}},[u]),y},useTransition:function(){var u=hp(Ia)[0],d=vs().memoizedState;return[u,d]},useMutableSource:AE,useSyncExternalStore:SE,useId:DE,unstable_isNewReconciler:!1};function Qy(u,d){try{var y="",M=d;do y+=TO(M),M=M.return;while(M);var E=y}catch(T){E=`
Error generating stack: `+T.message+`
`+T.stack}return{value:u,source:d,stack:E}}function qy(u,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var FO=typeof WeakMap=="function"?WeakMap:Map;function kE(u,d,y){y=Us(-1,y),y.tag=3,y.payload={element:null};var M=d.value;return y.callback=function(){Bp||(Bp=!0,gx=M),qy(u,d)},y}function HE(u,d,y){y=Us(-1,y),y.tag=3;var M=u.type.getDerivedStateFromError;if(typeof M=="function"){var E=d.value;y.payload=function(){return M(E)},y.callback=function(){qy(u,d)}}var T=u.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(y.callback=function(){qy(u,d),typeof M!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var H=d.stack;this.componentDidCatch(d.value,{componentStack:H!==null?H:""})}),y}function zE(u,d,y){var M=u.pingCache;if(M===null){M=u.pingCache=new FO;var E=new Set;M.set(d,E)}else E=M.get(d),E===void 0&&(E=new Set,M.set(d,E));E.has(y)||(E.add(y),u=YO.bind(null,u,d,y),d.then(u,u))}function GE(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function VE(u,d,y,M,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===d?u.flags|=65536:(u.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=Us(-1,1),d.tag=2,bo(y,d))),y.lanes|=1),u)}function ys(u){u.flags|=4}function WE(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var ff,df,vp,yp;if(ot)ff=function(u,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)ve(u,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},df=function(){},vp=function(u,d,y,M,E){if(u=u.memoizedProps,u!==M){var T=d.stateNode,H=gs(gr.current);y=oe(T,y,u,M,E,H),(d.updateQueue=y)&&ys(d)}},yp=function(u,d,y,M){y!==M&&ys(d)};else if(xe){ff=function(u,d,y,M){for(var E=d.child;E!==null;){if(E.tag===5){var T=E.stateNode;y&&M&&(T=an(T,E.type,E.memoizedProps,E)),ve(u,T)}else if(E.tag===6)T=E.stateNode,y&&M&&(T=Xn(T,E.memoizedProps,E)),ve(u,T);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)T=E.child,T!==null&&(T.return=E),ff(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var jE=function(u,d,y,M){for(var E=d.child;E!==null;){if(E.tag===5){var T=E.stateNode;y&&M&&(T=an(T,E.type,E.memoizedProps,E)),Dt(u,T)}else if(E.tag===6)T=E.stateNode,y&&M&&(T=Xn(T,E.memoizedProps,E)),Dt(u,T);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)T=E.child,T!==null&&(T.return=E),jE(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};df=function(u,d){var y=d.stateNode;if(!WE(u,d)){u=y.containerInfo;var M=gt(u);jE(M,d,!1,!1),y.pendingChildren=M,ys(d),mn(u,M)}},vp=function(u,d,y,M,E){var T=u.stateNode,H=u.memoizedProps;if((u=WE(u,d))&&H===M)d.stateNode=T;else{var Y=d.stateNode,fe=gs(gr.current),Te=null;H!==M&&(Te=oe(Y,y,H,M,E,fe)),u&&Te===null?d.stateNode=T:(T=ke(T,Te,y,H,M,d,u,Y),Le(T,y,M,E,fe)&&ys(d),d.stateNode=T,u?ys(d):ff(T,d,!1,!1))}},yp=function(u,d,y,M){y!==M?(u=gs(uc.current),y=gs(gr.current),d.stateNode=Ee(M,u,y,d),ys(d)):d.stateNode=u.stateNode}}else df=function(){},vp=function(){},yp=function(){};function hf(u,d){if(!nn)switch(u.tailMode){case"hidden":d=u.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var M=null;y!==null;)y.alternate!==null&&(M=y),y=y.sibling;M===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:M.sibling=null}}function ri(u){var d=u.alternate!==null&&u.alternate.child===u.child,y=0,M=0;if(d)for(var E=u.child;E!==null;)y|=E.lanes|E.childLanes,M|=E.subtreeFlags&14680064,M|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)y|=E.lanes|E.childLanes,M|=E.subtreeFlags,M|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=M,u.childLanes=y,d}function NO(u,d,y){var M=d.pendingProps;switch(Oy(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(d),null;case 1:return Jt(d.type)&&Eo(),ri(d),null;case 3:return M=d.stateNode,fc(),Ct(vt),Ct(Bt),Wy(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(u===null||u.child===null)&&(nf(d)?ys(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Hr!==null&&(xx(Hr),Hr=null))),df(u,d),ri(d),null;case 5:Gy(d),y=gs(uc.current);var E=d.type;if(u!==null&&d.stateNode!=null)vp(u,d,E,M,y),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!M){if(d.stateNode===null)throw Error(o(166));return ri(d),null}if(u=gs(gr.current),nf(d)){if(!k)throw Error(o(175));u=Jh(d.stateNode,d.type,d.memoizedProps,y,u,d,!tf),d.updateQueue=u,u!==null&&ys(d)}else{var T=te(E,M,y,u,d);ff(T,d,!1,!1),d.stateNode=T,Le(T,E,M,y,u)&&ys(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return ri(d),null;case 6:if(u&&d.stateNode!=null)yp(u,d,u.memoizedProps,M);else{if(typeof M!="string"&&d.stateNode===null)throw Error(o(166));if(u=gs(uc.current),y=gs(gr.current),nf(d)){if(!k)throw Error(o(176));if(u=d.stateNode,M=d.memoizedProps,(y=yy(u,M,d,!tf))&&(E=Ki,E!==null))switch(T=(E.mode&1)!==0,E.tag){case 3:be(E.stateNode.containerInfo,u,M,T);break;case 5:Ge(E.type,E.memoizedProps,E.stateNode,u,M,T)}y&&ys(d)}else d.stateNode=Ee(M,u,y,d)}return ri(d),null;case 13:if(Ct(ln),M=d.memoizedState,nn&&Yi!==null&&d.mode&1&&!(d.flags&128)){for(u=Yi;u;)u=fs(u);return lc(),d.flags|=98560,d}if(M!==null&&M.dehydrated!==null){if(M=nf(d),u===null){if(!M)throw Error(o(318));if(!k)throw Error(o(344));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));xy(u,d)}else lc(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return ri(d),null}return Hr!==null&&(xx(Hr),Hr=null),d.flags&128?(d.lanes=y,d):(M=M!==null,y=!1,u===null?nf(d):y=u.memoizedState!==null,M&&!y&&(d.child.flags|=8192,d.mode&1&&(u===null||ln.current&1?Ln===0&&(Ln=3):Ax())),d.updateQueue!==null&&(d.flags|=4),ri(d),null);case 4:return fc(),df(u,d),u===null&&Re(d.stateNode.containerInfo),ri(d),null;case 10:return Iy(d.type._context),ri(d),null;case 17:return Jt(d.type)&&Eo(),ri(d),null;case 19:if(Ct(ln),E=d.memoizedState,E===null)return ri(d),null;if(M=(d.flags&128)!==0,T=E.rendering,T===null)if(M)hf(E,!1);else{if(Ln!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(T=cp(u),T!==null){for(d.flags|=128,hf(E,!1),u=T.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=y,M=d.child;M!==null;)y=M,E=u,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=E,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,E=T.dependencies,y.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),M=M.sibling;return nt(ln,ln.current&1|2),d.child}u=u.sibling}E.tail!==null&&kn()>mx&&(d.flags|=128,M=!0,hf(E,!1),d.lanes=4194304)}else{if(!M)if(u=cp(T),u!==null){if(d.flags|=128,M=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),hf(E,!0),E.tail===null&&E.tailMode==="hidden"&&!T.alternate&&!nn)return ri(d),null}else 2*kn()-E.renderingStartTime>mx&&y!==1073741824&&(d.flags|=128,M=!0,hf(E,!1),d.lanes=4194304);E.isBackwards?(T.sibling=d.child,d.child=T):(u=E.last,u!==null?u.sibling=T:d.child=T,E.last=T)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=kn(),d.sibling=null,u=ln.current,nt(ln,M?u&1|2:u&1),d):(ri(d),null);case 22:case 23:return _x(),M=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==M&&(d.flags|=8192),M&&d.mode&1?Qi&1073741824&&(ri(d),ot&&d.subtreeFlags&6&&(d.flags|=8192)):ri(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var OO=a.ReactCurrentOwner,$i=!1;function wi(u,d,y,M){d.child=u===null?xE(d,null,y,M):cc(d,u.child,y,M)}function XE(u,d,y,M,E){y=y.render;var T=d.ref;return sc(d,E),M=Xy(u,d,y,M,T,E),y=Jy(),u!==null&&!$i?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Gs(u,d,E)):(nn&&y&&Ny(d),d.flags|=1,wi(u,d,M,E),d.child)}function JE(u,d,y,M,E){if(u===null){var T=y.type;return typeof T=="function"&&!Sx(T)&&T.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=T,KE(u,d,T,M,E)):(u=kp(y.type,null,M,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if(T=u.child,!(u.lanes&E)){var H=T.memoizedProps;if(y=y.compare,y=y!==null?y:ep,y(H,M)&&u.ref===d.ref)return Gs(u,d,E)}return d.flags|=1,u=Lo(T,M),u.ref=d.ref,u.return=d,d.child=u}function KE(u,d,y,M,E){if(u!==null&&ep(u.memoizedProps,M)&&u.ref===d.ref)if($i=!1,(u.lanes&E)!==0)u.flags&131072&&($i=!0);else return d.lanes=u.lanes,Gs(u,d,E);return Zy(u,d,y,M,E)}function YE(u,d,y){var M=d.pendingProps,E=M.children,T=u!==null?u.memoizedState:null;if(M.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},nt(hc,Qi),Qi|=y;else if(y&1073741824)d.memoizedState={baseLanes:0,cachePool:null},M=T!==null?T.baseLanes:y,nt(hc,Qi),Qi|=M;else return u=T!==null?T.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null},d.updateQueue=null,nt(hc,Qi),Qi|=u,null;else T!==null?(M=T.baseLanes|y,d.memoizedState=null):M=y,nt(hc,Qi),Qi|=M;return wi(u,d,E,y),d.child}function $E(u,d){var y=d.ref;(u===null&&y!==null||u!==null&&u.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function Zy(u,d,y,M,E){var T=Jt(y)?Bn:Bt.current;return T=Ji(d,T),sc(d,E),y=Xy(u,d,y,M,T,E),M=Jy(),u!==null&&!$i?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Gs(u,d,E)):(nn&&M&&Ny(d),d.flags|=1,wi(u,d,y,E),d.child)}function QE(u,d,y,M,E){if(Jt(y)){var T=!0;Co(d)}else T=!1;if(sc(d,E),d.stateNode===null)u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),fE(d,y,M),Fy(d,y,M,E),M=!0;else if(u===null){var H=d.stateNode,Y=d.memoizedProps;H.props=Y;var fe=H.context,Te=y.contextType;typeof Te=="object"&&Te!==null?Te=hr(Te):(Te=Jt(y)?Bn:Bt.current,Te=Ji(d,Te));var Ye=y.getDerivedStateFromProps,yt=typeof Ye=="function"||typeof H.getSnapshotBeforeUpdate=="function";yt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Y!==M||fe!==Te)&&dE(d,H,M,Te),To=!1;var at=d.memoizedState;H.state=at,rp(d,M,H,E),fe=d.memoizedState,Y!==M||at!==fe||vt.current||To?(typeof Ye=="function"&&(Dy(d,y,Ye,M),fe=d.memoizedState),(Y=To||uE(d,y,Y,M,at,fe,Te))?(yt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(d.flags|=4194308)):(typeof H.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=fe),H.props=M,H.state=fe,H.context=Te,M=Y):(typeof H.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{H=d.stateNode,oE(u,d),Y=d.memoizedProps,Te=d.type===d.elementType?Y:kr(d.type,Y),H.props=Te,yt=d.pendingProps,at=H.context,fe=y.contextType,typeof fe=="object"&&fe!==null?fe=hr(fe):(fe=Jt(y)?Bn:Bt.current,fe=Ji(d,fe));var Kt=y.getDerivedStateFromProps;(Ye=typeof Kt=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Y!==yt||at!==fe)&&dE(d,H,M,fe),To=!1,at=d.memoizedState,H.state=at,rp(d,M,H,E);var it=d.memoizedState;Y!==yt||at!==it||vt.current||To?(typeof Kt=="function"&&(Dy(d,y,Kt,M),it=d.memoizedState),(Te=To||uE(d,y,Te,M,at,it,fe)||!1)?(Ye||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(M,it,fe),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(M,it,fe)),typeof H.componentDidUpdate=="function"&&(d.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof H.componentDidUpdate!="function"||Y===u.memoizedProps&&at===u.memoizedState||(d.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&at===u.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=it),H.props=M,H.state=it,H.context=fe,M=Te):(typeof H.componentDidUpdate!="function"||Y===u.memoizedProps&&at===u.memoizedState||(d.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&at===u.memoizedState||(d.flags|=1024),M=!1)}return ex(u,d,y,M,T,E)}function ex(u,d,y,M,E,T){$E(u,d);var H=(d.flags&128)!==0;if(!M&&!H)return E&&Si(d,y,!1),Gs(u,d,T);M=d.stateNode,OO.current=d;var Y=H&&typeof y.getDerivedStateFromError!="function"?null:M.render();return d.flags|=1,u!==null&&H?(d.child=cc(d,u.child,null,T),d.child=cc(d,null,Y,T)):wi(u,d,Y,T),d.memoizedState=M.state,E&&Si(d,y,!0),d.child}function qE(u){var d=u.stateNode;d.pendingContext?tn(u,d.pendingContext,d.pendingContext!==d.context):d.context&&tn(u,d.context,!1),zy(u,d.containerInfo)}function ZE(u,d,y,M,E){return lc(),Hy(E),d.flags|=256,wi(u,d,y,M),d.child}var xp={dehydrated:null,treeContext:null,retryLane:0};function _p(u){return{baseLanes:u,cachePool:null}}function eC(u,d,y){var M=d.pendingProps,E=ln.current,T=!1,H=(d.flags&128)!==0,Y;if((Y=H)||(Y=u!==null&&u.memoizedState===null?!1:(E&2)!==0),Y?(T=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),nt(ln,E&1),u===null)return ky(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?nc(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(E=M.children,u=M.fallback,T?(M=d.mode,T=d.child,E={mode:"hidden",children:E},!(M&1)&&T!==null?(T.childLanes=0,T.pendingProps=E):T=Hp(E,M,0,null),u=Oa(u,M,y,null),T.return=d,u.return=d,T.sibling=u,d.child=T,d.child.memoizedState=_p(y),d.memoizedState=xp,u):tx(d,E));if(E=u.memoizedState,E!==null){if(Y=E.dehydrated,Y!==null){if(H)return d.flags&256?(d.flags&=-257,Ap(u,d,y,Error(o(422)))):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(T=M.fallback,E=d.mode,M=Hp({mode:"visible",children:M.children},E,0,null),T=Oa(T,E,y,null),T.flags|=2,M.return=d,T.return=d,M.sibling=T,d.child=M,d.mode&1&&cc(d,u.child,null,y),d.child.memoizedState=_p(y),d.memoizedState=xp,T);if(!(d.mode&1))d=Ap(u,d,y,null);else if(nc(Y))d=Ap(u,d,y,Error(o(419)));else if(M=(y&u.childLanes)!==0,$i||M){if(M=Cn,M!==null){switch(y&-y){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}M=T&(M.suspendedLanes|y)?0:T,M!==0&&M!==E.retryLane&&(E.retryLane=M,yr(u,M,-1))}Ax(),d=Ap(u,d,y,Error(o(421)))}else tc(Y)?(d.flags|=128,d.child=u.child,d=$O.bind(null,u),Wh(Y,d),d=null):(y=E.treeContext,k&&(Yi=Xh(Y),Ki=d,nn=!0,Hr=null,tf=!1,y!==null&&(pr[mr++]=ks,pr[mr++]=Hs,pr[mr++]=Ra,ks=y.id,Hs=y.overflow,Ra=d)),d=tx(d,d.pendingProps.children),d.flags|=4096);return d}return T?(M=nC(u,d,M.children,M.fallback,y),T=d.child,E=u.child.memoizedState,T.memoizedState=E===null?_p(y):{baseLanes:E.baseLanes|y,cachePool:null},T.childLanes=u.childLanes&~y,d.memoizedState=xp,M):(y=tC(u,d,M.children,y),d.memoizedState=null,y)}return T?(M=nC(u,d,M.children,M.fallback,y),T=d.child,E=u.child.memoizedState,T.memoizedState=E===null?_p(y):{baseLanes:E.baseLanes|y,cachePool:null},T.childLanes=u.childLanes&~y,d.memoizedState=xp,M):(y=tC(u,d,M.children,y),d.memoizedState=null,y)}function tx(u,d){return d=Hp({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function tC(u,d,y,M){var E=u.child;return u=E.sibling,y=Lo(E,{mode:"visible",children:y}),!(d.mode&1)&&(y.lanes=M),y.return=d,y.sibling=null,u!==null&&(M=d.deletions,M===null?(d.deletions=[u],d.flags|=16):M.push(u)),d.child=y}function nC(u,d,y,M,E){var T=d.mode;u=u.child;var H=u.sibling,Y={mode:"hidden",children:y};return!(T&1)&&d.child!==u?(y=d.child,y.childLanes=0,y.pendingProps=Y,d.deletions=null):(y=Lo(u,Y),y.subtreeFlags=u.subtreeFlags&14680064),H!==null?M=Lo(H,M):(M=Oa(M,T,E,null),M.flags|=2),M.return=d,y.return=d,y.sibling=M,d.child=y,M}function Ap(u,d,y,M){return M!==null&&Hy(M),cc(d,u.child,null,y),u=tx(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function iC(u,d,y){u.lanes|=d;var M=u.alternate;M!==null&&(M.lanes|=d),By(u.return,d,y)}function nx(u,d,y,M,E){var T=u.memoizedState;T===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:y,tailMode:E}:(T.isBackwards=d,T.rendering=null,T.renderingStartTime=0,T.last=M,T.tail=y,T.tailMode=E)}function rC(u,d,y){var M=d.pendingProps,E=M.revealOrder,T=M.tail;if(wi(u,d,M.children,y),M=ln.current,M&2)M=M&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&iC(u,y,d);else if(u.tag===19)iC(u,y,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}M&=1}if(nt(ln,M),!(d.mode&1))d.memoizedState=null;else switch(E){case"forwards":for(y=d.child,E=null;y!==null;)u=y.alternate,u!==null&&cp(u)===null&&(E=y),y=y.sibling;y=E,y===null?(E=d.child,d.child=null):(E=y.sibling,y.sibling=null),nx(d,!1,E,y,T);break;case"backwards":for(y=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&cp(u)===null){d.child=E;break}u=E.sibling,E.sibling=y,y=E,E=u}nx(d,!0,y,null,T);break;case"together":nx(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Gs(u,d,y){if(u!==null&&(d.dependencies=u.dependencies),pc|=d.lanes,!(y&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(o(153));if(d.child!==null){for(u=d.child,y=Lo(u,u.pendingProps),d.child=y,y.return=d;u.sibling!==null;)u=u.sibling,y=y.sibling=Lo(u,u.pendingProps),y.return=d;y.sibling=null}return d.child}function UO(u,d,y){switch(d.tag){case 3:qE(d),lc();break;case 5:_E(d);break;case 1:Jt(d.type)&&Co(d);break;case 4:zy(d,d.stateNode.containerInfo);break;case 10:sE(d,d.type._context,d.memoizedProps.value);break;case 13:var M=d.memoizedState;if(M!==null)return M.dehydrated!==null?(nt(ln,ln.current&1),d.flags|=128,null):y&d.child.childLanes?eC(u,d,y):(nt(ln,ln.current&1),u=Gs(u,d,y),u!==null?u.sibling:null);nt(ln,ln.current&1);break;case 19:if(M=(y&d.childLanes)!==0,u.flags&128){if(M)return rC(u,d,y);d.flags|=128}var E=d.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),nt(ln,ln.current),M)break;return null;case 22:case 23:return d.lanes=0,YE(u,d,y)}return Gs(u,d,y)}function kO(u,d){switch(Oy(d),d.tag){case 1:return Jt(d.type)&&Eo(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return fc(),Ct(vt),Ct(Bt),Wy(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return Gy(d),null;case 13:if(Ct(ln),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(o(340));lc()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return Ct(ln),null;case 4:return fc(),null;case 10:return Iy(d.type._context),null;case 22:case 23:return _x(),null;case 24:return null;default:return null}}var Sp=!1,Ba=!1,HO=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Mp(u,d){var y=u.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(M){Ui(u,d,M)}else y.current=null}function ix(u,d,y){try{y()}catch(M){Ui(u,d,M)}}var sC=!1;function zO(u,d){for(G(u.containerInfo),Oe=d;Oe!==null;)if(u=Oe,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,Oe=d;else for(;Oe!==null;){u=Oe;try{var y=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,E=y.memoizedState,T=u.stateNode,H=T.getSnapshotBeforeUpdate(u.elementType===u.type?M:kr(u.type,M),E);T.__reactInternalSnapshotBeforeUpdate=H}break;case 3:ot&&Ue(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){Ui(u,u.return,Y)}if(d=u.sibling,d!==null){d.return=u.return,Oe=d;break}Oe=u.return}return y=sC,sC=!1,y}function La(u,d,y){var M=d.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var E=M=M.next;do{if((E.tag&u)===u){var T=E.destroy;E.destroy=void 0,T!==void 0&&ix(d,y,T)}E=E.next}while(E!==M)}}function pf(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&u)===u){var M=y.create;y.destroy=M()}y=y.next}while(y!==d)}}function rx(u){var d=u.ref;if(d!==null){var y=u.stateNode;switch(u.tag){case 5:u=$(y);break;default:u=y}typeof d=="function"?d(u):d.current=u}}function oC(u,d,y){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(qh,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(u=d.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var M=u=u.next;do{var E=M,T=E.destroy;E=E.tag,T!==void 0&&(E&2||E&4)&&ix(d,y,T),M=M.next}while(M!==u)}break;case 1:if(Mp(d,y),u=d.stateNode,typeof u.componentWillUnmount=="function")try{u.props=d.memoizedProps,u.state=d.memoizedState,u.componentWillUnmount()}catch(H){Ui(d,y,H)}break;case 5:Mp(d,y);break;case 4:ot?dC(u,d,y):xe&&xe&&(d=d.stateNode.containerInfo,y=gt(d),wt(d,y))}}function aC(u,d,y){for(var M=d;;)if(oC(u,M,y),M.child===null||ot&&M.tag===4){if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function lC(u){var d=u.alternate;d!==null&&(u.alternate=null,lC(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&Ie(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function cC(u){return u.tag===5||u.tag===3||u.tag===4}function uC(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||cC(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function fC(u){if(ot){e:{for(var d=u.return;d!==null;){if(cC(d))break e;d=d.return}throw Error(o(160))}var y=d;switch(y.tag){case 5:d=y.stateNode,y.flags&32&&(Fe(d),y.flags&=-33),y=uC(u),ox(u,y,d);break;case 3:case 4:d=y.stateNode.containerInfo,y=uC(u),sx(u,y,d);break;default:throw Error(o(161))}}}function sx(u,d,y){var M=u.tag;if(M===5||M===6)u=u.stateNode,d?je(y,u,d):bt(y,u);else if(M!==4&&(u=u.child,u!==null))for(sx(u,d,y),u=u.sibling;u!==null;)sx(u,d,y),u=u.sibling}function ox(u,d,y){var M=u.tag;if(M===5||M===6)u=u.stateNode,d?ft(y,u,d):Ve(y,u);else if(M!==4&&(u=u.child,u!==null))for(ox(u,d,y),u=u.sibling;u!==null;)ox(u,d,y),u=u.sibling}function dC(u,d,y){for(var M=d,E=!1,T,H;;){if(!E){E=M.return;e:for(;;){if(E===null)throw Error(o(160));switch(T=E.stateNode,E.tag){case 5:H=!1;break e;case 3:T=T.containerInfo,H=!0;break e;case 4:T=T.containerInfo,H=!0;break e}E=E.return}E=!0}if(M.tag===5||M.tag===6)aC(u,M,y),H?de(T,M.stateNode):J(T,M.stateNode);else if(M.tag===18)H?ae(T,M.stateNode):se(T,M.stateNode);else if(M.tag===4){if(M.child!==null){T=M.stateNode.containerInfo,H=!0,M.child.return=M,M=M.child;continue}}else if(oC(u,M,y),M.child!==null){M.child.return=M,M=M.child;continue}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return,M.tag===4&&(E=!1)}M.sibling.return=M.return,M=M.sibling}}function ax(u,d){if(ot){switch(d.tag){case 0:case 11:case 14:case 15:La(3,d,d.return),pf(3,d),La(5,d,d.return);return;case 1:return;case 5:var y=d.stateNode;if(y!=null){var M=d.memoizedProps;u=u!==null?u.memoizedProps:M;var E=d.type,T=d.updateQueue;d.updateQueue=null,T!==null&&pt(y,T,E,u,M,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));y=d.memoizedProps,Me(d.stateNode,u!==null?u.memoizedProps:y,y);return;case 3:k&&u!==null&&u.memoizedState.isDehydrated&&N(d.stateNode.containerInfo);return;case 12:return;case 13:wp(d);return;case 19:wp(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:La(3,d,d.return),pf(3,d),La(5,d,d.return);return;case 12:return;case 13:wp(d);return;case 19:wp(d);return;case 3:k&&u!==null&&u.memoizedState.isDehydrated&&N(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(xe){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,wt(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function wp(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var y=u.stateNode;y===null&&(y=u.stateNode=new HO),d.forEach(function(M){var E=QO.bind(null,u,M);y.has(M)||(y.add(M),M.then(E,E))})}}function GO(u,d){for(Oe=d;Oe!==null;){d=Oe;var y=d.deletions;if(y!==null)for(var M=0;M<y.length;M++){var E=y[M];try{var T=u;ot?dC(T,E,d):aC(T,E,d);var H=E.alternate;H!==null&&(H.return=null),E.return=null}catch(tt){Ui(E,d,tt)}}if(y=d.child,d.subtreeFlags&12854&&y!==null)y.return=d,Oe=y;else for(;Oe!==null;){d=Oe;try{var Y=d.flags;if(Y&32&&ot&&Fe(d.stateNode),Y&512){var fe=d.alternate;if(fe!==null){var Te=fe.ref;Te!==null&&(typeof Te=="function"?Te(null):Te.current=null)}}if(Y&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var Ye=d.alternate;(Ye===null||Ye.memoizedState===null)&&(px=kn())}break;case 22:var yt=d.memoizedState!==null,at=d.alternate,Kt=at!==null&&at.memoizedState!==null;if(y=d,ot){e:if(M=y,E=yt,T=null,ot)for(var it=M;;){if(it.tag===5){if(T===null){T=it;var si=it.stateNode;E?W(si):ce(it.stateNode,it.memoizedProps)}}else if(it.tag===6){if(T===null){var _r=it.stateNode;E?Ce(_r):ge(_r,it.memoizedProps)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===M)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===M)break;for(;it.sibling===null;){if(it.return===null||it.return===M)break e;T===it&&(T=null),it=it.return}T===it&&(T=null),it.sibling.return=it.return,it=it.sibling}}if(yt&&!Kt&&y.mode&1){Oe=y;for(var re=y.child;re!==null;){for(y=Oe=re;Oe!==null;){M=Oe;var q=M.child;switch(M.tag){case 0:case 11:case 14:case 15:La(4,M,M.return);break;case 1:Mp(M,M.return);var ue=M.stateNode;if(typeof ue.componentWillUnmount=="function"){var He=M.return;try{ue.props=M.memoizedProps,ue.state=M.memoizedState,ue.componentWillUnmount()}catch(tt){Ui(M,He,tt)}}break;case 5:Mp(M,M.return);break;case 22:if(M.memoizedState!==null){mC(y);continue}}q!==null?(q.return=M,Oe=q):mC(y)}re=re.sibling}}}switch(Y&4102){case 2:fC(d),d.flags&=-3;break;case 6:fC(d),d.flags&=-3,ax(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,ax(d.alternate,d);break;case 4:ax(d.alternate,d)}}catch(tt){Ui(d,d.return,tt)}if(y=d.sibling,y!==null){y.return=d.return,Oe=y;break}Oe=d.return}}}function VO(u,d,y){Oe=u,hC(u)}function hC(u,d,y){for(var M=(u.mode&1)!==0;Oe!==null;){var E=Oe,T=E.child;if(E.tag===22&&M){var H=E.memoizedState!==null||Sp;if(!H){var Y=E.alternate,fe=Y!==null&&Y.memoizedState!==null||Ba;Y=Sp;var Te=Ba;if(Sp=H,(Ba=fe)&&!Te)for(Oe=E;Oe!==null;)H=Oe,fe=H.child,H.tag===22&&H.memoizedState!==null?gC(E):fe!==null?(fe.return=H,Oe=fe):gC(E);for(;T!==null;)Oe=T,hC(T),T=T.sibling;Oe=E,Sp=Y,Ba=Te}pC(u)}else E.subtreeFlags&8772&&T!==null?(T.return=E,Oe=T):pC(u)}}function pC(u){for(;Oe!==null;){var d=Oe;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Ba||pf(5,d);break;case 1:var M=d.stateNode;if(d.flags&4&&!Ba)if(y===null)M.componentDidMount();else{var E=d.elementType===d.type?y.memoizedProps:kr(d.type,y.memoizedProps);M.componentDidUpdate(E,y.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var T=d.updateQueue;T!==null&&lE(d,T,M);break;case 3:var H=d.updateQueue;if(H!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=$(d.child.stateNode);break;case 1:y=d.child.stateNode}lE(d,H,y)}break;case 5:var Y=d.stateNode;y===null&&d.flags&4&&We(Y,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(k&&d.memoizedState===null){var fe=d.alternate;if(fe!==null){var Te=fe.memoizedState;if(Te!==null){var Ye=Te.dehydrated;Ye!==null&&Q(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ba||d.flags&512&&rx(d)}catch(yt){Ui(d,d.return,yt)}}if(d===u){Oe=null;break}if(y=d.sibling,y!==null){y.return=d.return,Oe=y;break}Oe=d.return}}function mC(u){for(;Oe!==null;){var d=Oe;if(d===u){Oe=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Oe=y;break}Oe=d.return}}function gC(u){for(;Oe!==null;){var d=Oe;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{pf(4,d)}catch(fe){Ui(d,y,fe)}break;case 1:var M=d.stateNode;if(typeof M.componentDidMount=="function"){var E=d.return;try{M.componentDidMount()}catch(fe){Ui(d,E,fe)}}var T=d.return;try{rx(d)}catch(fe){Ui(d,T,fe)}break;case 5:var H=d.return;try{rx(d)}catch(fe){Ui(d,H,fe)}}}catch(fe){Ui(d,d.return,fe)}if(d===u){Oe=null;break}var Y=d.sibling;if(Y!==null){Y.return=d.return,Oe=Y;break}Oe=d.return}}var Ep=0,Cp=1,Tp=2,bp=3,Rp=4;if(typeof Symbol=="function"&&Symbol.for){var mf=Symbol.for;Ep=mf("selector.component"),Cp=mf("selector.has_pseudo_class"),Tp=mf("selector.role"),bp=mf("selector.test_id"),Rp=mf("selector.text")}function lx(u){var d=Pe(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(u=F(u),u===null)throw Error(o(362));return u.stateNode.current}function cx(u,d){switch(d.$$typeof){case Ep:if(u.type===d.value)return!0;break;case Cp:e:{d=d.value,u=[u,0];for(var y=0;y<u.length;){var M=u[y++],E=u[y++],T=d[E];if(M.tag!==5||!_e(M)){for(;T!=null&&cx(M,T);)E++,T=d[E];if(E===d.length){d=!0;break e}else for(M=M.child;M!==null;)u.push(M,E),M=M.sibling}}d=!1}return d;case Tp:if(u.tag===5&&me(u.stateNode,d.value))return!0;break;case Rp:if((u.tag===5||u.tag===6)&&(u=he(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case bp:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function ux(u){switch(u.$$typeof){case Ep:return"<"+(I(u.value)||"Unknown")+">";case Cp:return":has("+(ux(u)||"")+")";case Tp:return'[role="'+u.value+'"]';case Rp:return'"'+u.value+'"';case bp:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function vC(u,d){var y=[];u=[u,0];for(var M=0;M<u.length;){var E=u[M++],T=u[M++],H=d[T];if(E.tag!==5||!_e(E)){for(;H!=null&&cx(E,H);)T++,H=d[T];if(T===d.length)y.push(E);else for(E=E.child;E!==null;)u.push(E,T),E=E.sibling}}return y}function fx(u,d){if(!U)throw Error(o(363));u=lx(u),u=vC(u,d),d=[],u=Array.from(u);for(var y=0;y<u.length;){var M=u[y++];if(M.tag===5)_e(M)||d.push(M.stateNode);else for(M=M.child;M!==null;)u.push(M),M=M.sibling}return d}var WO=Math.ceil,Pp=a.ReactCurrentDispatcher,dx=a.ReactCurrentOwner,An=a.ReactCurrentBatchConfig,Tt=0,Cn=null,Tn=null,Jn=0,Qi=0,hc=Wt(0),Ln=0,gf=null,pc=0,Ip=0,hx=0,vf=null,Ni=null,px=0,mx=1/0;function mc(){mx=kn()+500}var Bp=!1,gx=null,Ro=null,Lp=!1,Po=null,Dp=0,yf=0,vx=null,Fp=-1,Np=0;function Ei(){return Tt&6?kn():Fp!==-1?Fp:Fp=kn()}function Io(u){return u.mode&1?Tt&2&&Jn!==0?Jn&-Jn:CO.transition!==null?(Np===0&&(u=Yh,Yh<<=1,!(Yh&4194240)&&(Yh=64),Np=u),Np):(u=Ht,u!==0?u:Ae()):1}function yr(u,d,y){if(50<yf)throw yf=0,vx=null,Error(o(185));var M=Op(u,d);return M===null?null:(ef(M,d,y),(!(Tt&2)||M!==Cn)&&(M===Cn&&(!(Tt&2)&&(Ip|=d),Ln===4&&Bo(M,Jn)),Oi(M,y),d===1&&Tt===0&&!(u.mode&1)&&(mc(),Zh&&ps())),M)}function Op(u,d){u.lanes|=d;var y=u.alternate;for(y!==null&&(y.lanes|=d),y=u,u=u.return;u!==null;)u.childLanes|=d,y=u.alternate,y!==null&&(y.childLanes|=d),y=u,u=u.return;return y.tag===3?y.stateNode:null}function Oi(u,d){var y=u.callbackNode;vO(u,d);var M=Qh(u,u===Cn?Jn:0);if(M===0)y!==null&&iE(y),u.callbackNode=null,u.callbackPriority=0;else if(d=M&-M,u.callbackPriority!==d){if(y!=null&&iE(y),d===1)u.tag===0?EO(xC.bind(null,u)):rE(xC.bind(null,u)),Ze?ze(function(){Tt===0&&ps()}):Ey(Cy,ps),y=null;else{switch(nE(M)){case 1:y=Cy;break;case 4:y=AO;break;case 16:y=Ty;break;case 536870912:y=SO;break;default:y=Ty}y=bC(y,yC.bind(null,u))}u.callbackPriority=d,u.callbackNode=y}}function yC(u,d){if(Fp=-1,Np=0,Tt&6)throw Error(o(327));var y=u.callbackNode;if(Na()&&u.callbackNode!==y)return null;var M=Qh(u,u===Cn?Jn:0);if(M===0)return null;if(M&30||M&u.expiredLanes||d)d=Up(u,M);else{d=M;var E=Tt;Tt|=2;var T=SC();(Cn!==u||Jn!==d)&&(mc(),Da(u,d));do try{JO();break}catch(Y){AC(u,Y)}while(!0);Py(),Pp.current=T,Tt=E,Tn!==null?d=0:(Cn=null,Jn=0,d=Ln)}if(d!==0){if(d===2&&(E=Sy(u),E!==0&&(M=E,d=yx(u,E))),d===1)throw y=gf,Da(u,0),Bo(u,M),Oi(u,kn()),y;if(d===6)Bo(u,M);else{if(E=u.current.alternate,!(M&30)&&!jO(E)&&(d=Up(u,M),d===2&&(T=Sy(u),T!==0&&(M=T,d=yx(u,T))),d===1))throw y=gf,Da(u,0),Bo(u,M),Oi(u,kn()),y;switch(u.finishedWork=E,u.finishedLanes=M,d){case 0:case 1:throw Error(o(345));case 2:Fa(u,Ni);break;case 3:if(Bo(u,M),(M&130023424)===M&&(d=px+500-kn(),10<d)){if(Qh(u,0)!==0)break;if(E=u.suspendedLanes,(E&M)!==M){Ei(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=Se(Fa.bind(null,u,Ni),d);break}Fa(u,Ni);break;case 4:if(Bo(u,M),(M&4194240)===M)break;for(d=u.eventTimes,E=-1;0<M;){var H=31-Mi(M);T=1<<H,H=d[H],H>E&&(E=H),M&=~T}if(M=E,M=kn()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*WO(M/1960))-M,10<M){u.timeoutHandle=Se(Fa.bind(null,u,Ni),M);break}Fa(u,Ni);break;case 5:Fa(u,Ni);break;default:throw Error(o(329))}}}return Oi(u,kn()),u.callbackNode===y?yC.bind(null,u):null}function yx(u,d){var y=vf;return u.current.memoizedState.isDehydrated&&(Da(u,d).flags|=256),u=Up(u,d),u!==2&&(d=Ni,Ni=y,d!==null&&xx(d)),u}function xx(u){Ni===null?Ni=u:Ni.push.apply(Ni,u)}function jO(u){for(var d=u;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var M=0;M<y.length;M++){var E=y[M],T=E.getSnapshot;E=E.value;try{if(!hs(T(),E))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Bo(u,d){for(d&=~hx,d&=~Ip,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var y=31-Mi(d),M=1<<y;u[y]=-1,d&=~M}}function xC(u){if(Tt&6)throw Error(o(327));Na();var d=Qh(u,0);if(!(d&1))return Oi(u,kn()),null;var y=Up(u,d);if(u.tag!==0&&y===2){var M=Sy(u);M!==0&&(d=M,y=yx(u,M))}if(y===1)throw y=gf,Da(u,0),Bo(u,d),Oi(u,kn()),y;if(y===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Fa(u,Ni),Oi(u,kn()),null}function _C(u){Po!==null&&Po.tag===0&&!(Tt&6)&&Na();var d=Tt;Tt|=1;var y=An.transition,M=Ht;try{if(An.transition=null,Ht=1,u)return u()}finally{Ht=M,An.transition=y,Tt=d,!(Tt&6)&&ps()}}function _x(){Qi=hc.current,Ct(hc)}function Da(u,d){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;if(y!==st&&(u.timeoutHandle=st,lt(y)),Tn!==null)for(y=Tn.return;y!==null;){var M=y;switch(Oy(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Eo();break;case 3:fc(),Ct(vt),Ct(Bt),Wy();break;case 5:Gy(M);break;case 4:fc();break;case 13:Ct(ln);break;case 19:Ct(ln);break;case 10:Iy(M.type._context);break;case 22:case 23:_x()}y=y.return}if(Cn=u,Tn=u=Lo(u.current,null),Jn=Qi=d,Ln=0,gf=null,hx=Ip=pc=0,Ni=vf=null,ms!==null){for(d=0;d<ms.length;d++)if(y=ms[d],M=y.interleaved,M!==null){y.interleaved=null;var E=M.next,T=y.pending;if(T!==null){var H=T.next;T.next=E,M.next=H}y.pending=M}ms=null}return u}function AC(u,d){do{var y=Tn;try{if(Py(),up.current=gp,fp){for(var M=gn.memoizedState;M!==null;){var E=M.queue;E!==null&&(E.pending=null),M=M.next}fp=!1}if(dc=0,Hn=ni=gn=null,af=!1,lf=0,dx.current=null,y===null||y.return===null){Ln=1,gf=d,Tn=null;break}e:{var T=u,H=y.return,Y=y,fe=d;if(d=Jn,Y.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Te=fe,Ye=Y,yt=Ye.tag;if(!(Ye.mode&1)&&(yt===0||yt===11||yt===15)){var at=Ye.alternate;at?(Ye.updateQueue=at.updateQueue,Ye.memoizedState=at.memoizedState,Ye.lanes=at.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var Kt=GE(H);if(Kt!==null){Kt.flags&=-257,VE(Kt,H,Y,T,d),Kt.mode&1&&zE(T,Te,d),d=Kt,fe=Te;var it=d.updateQueue;if(it===null){var si=new Set;si.add(fe),d.updateQueue=si}else it.add(fe);break e}else{if(!(d&1)){zE(T,Te,d),Ax();break e}fe=Error(o(426))}}else if(nn&&Y.mode&1){var _r=GE(H);if(_r!==null){!(_r.flags&65536)&&(_r.flags|=256),VE(_r,H,Y,T,d),Hy(fe);break e}}T=fe,Ln!==4&&(Ln=2),vf===null?vf=[T]:vf.push(T),fe=Qy(fe,Y),Y=H;do{switch(Y.tag){case 3:Y.flags|=65536,d&=-d,Y.lanes|=d;var re=kE(Y,fe,d);aE(Y,re);break e;case 1:T=fe;var q=Y.type,ue=Y.stateNode;if(!(Y.flags&128)&&(typeof q.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(Ro===null||!Ro.has(ue)))){Y.flags|=65536,d&=-d,Y.lanes|=d;var He=HE(Y,T,d);aE(Y,He);break e}}Y=Y.return}while(Y!==null)}wC(y)}catch(tt){d=tt,Tn===y&&y!==null&&(Tn=y=y.return);continue}break}while(!0)}function SC(){var u=Pp.current;return Pp.current=gp,u===null?gp:u}function Ax(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Cn===null||!(pc&268435455)&&!(Ip&268435455)||Bo(Cn,Jn)}function Up(u,d){var y=Tt;Tt|=2;var M=SC();Cn===u&&Jn===d||Da(u,d);do try{XO();break}catch(E){AC(u,E)}while(!0);if(Py(),Tt=y,Pp.current=M,Tn!==null)throw Error(o(261));return Cn=null,Jn=0,Ln}function XO(){for(;Tn!==null;)MC(Tn)}function JO(){for(;Tn!==null&&!xO();)MC(Tn)}function MC(u){var d=TC(u.alternate,u,Qi);u.memoizedProps=u.pendingProps,d===null?wC(u):Tn=d,dx.current=null}function wC(u){var d=u;do{var y=d.alternate;if(u=d.return,d.flags&32768){if(y=kO(y,d),y!==null){y.flags&=32767,Tn=y;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Ln=6,Tn=null;return}}else if(y=NO(y,d,Qi),y!==null){Tn=y;return}if(d=d.sibling,d!==null){Tn=d;return}Tn=d=u}while(d!==null);Ln===0&&(Ln=5)}function Fa(u,d){var y=Ht,M=An.transition;try{An.transition=null,Ht=1,KO(u,d,y)}finally{An.transition=M,Ht=y}return null}function KO(u,d,y){do Na();while(Po!==null);if(Tt&6)throw Error(o(327));var M=u.finishedWork,E=u.finishedLanes;if(M===null)return null;if(u.finishedWork=null,u.finishedLanes=0,M===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var T=M.lanes|M.childLanes;if(yO(u,T),u===Cn&&(Tn=Cn=null,Jn=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Lp||(Lp=!0,bC(Ty,function(){return Na(),null})),T=(M.flags&15990)!==0,M.subtreeFlags&15990||T){T=An.transition,An.transition=null;var H=Ht;Ht=1;var Y=Tt;Tt|=4,dx.current=null,zO(u,M),GO(u,M),V(u.containerInfo),u.current=M,VO(M),_O(),Tt=Y,Ht=H,An.transition=T}else u.current=M;if(Lp&&(Lp=!1,Po=u,Dp=E),T=u.pendingLanes,T===0&&(Ro=null),MO(M.stateNode),Oi(u,kn()),d!==null)for(y=u.onRecoverableError,M=0;M<d.length;M++)y(d[M]);if(Bp)throw Bp=!1,u=gx,gx=null,u;return Dp&1&&u.tag!==0&&Na(),T=u.pendingLanes,T&1?u===vx?yf++:(yf=0,vx=u):yf=0,ps(),null}function Na(){if(Po!==null){var u=nE(Dp),d=An.transition,y=Ht;try{if(An.transition=null,Ht=16>u?16:u,Po===null)var M=!1;else{if(u=Po,Po=null,Dp=0,Tt&6)throw Error(o(331));var E=Tt;for(Tt|=4,Oe=u.current;Oe!==null;){var T=Oe,H=T.child;if(Oe.flags&16){var Y=T.deletions;if(Y!==null){for(var fe=0;fe<Y.length;fe++){var Te=Y[fe];for(Oe=Te;Oe!==null;){var Ye=Oe;switch(Ye.tag){case 0:case 11:case 15:La(8,Ye,T)}var yt=Ye.child;if(yt!==null)yt.return=Ye,Oe=yt;else for(;Oe!==null;){Ye=Oe;var at=Ye.sibling,Kt=Ye.return;if(lC(Ye),Ye===Te){Oe=null;break}if(at!==null){at.return=Kt,Oe=at;break}Oe=Kt}}}var it=T.alternate;if(it!==null){var si=it.child;if(si!==null){it.child=null;do{var _r=si.sibling;si.sibling=null,si=_r}while(si!==null)}}Oe=T}}if(T.subtreeFlags&2064&&H!==null)H.return=T,Oe=H;else e:for(;Oe!==null;){if(T=Oe,T.flags&2048)switch(T.tag){case 0:case 11:case 15:La(9,T,T.return)}var re=T.sibling;if(re!==null){re.return=T.return,Oe=re;break e}Oe=T.return}}var q=u.current;for(Oe=q;Oe!==null;){H=Oe;var ue=H.child;if(H.subtreeFlags&2064&&ue!==null)ue.return=H,Oe=ue;else e:for(H=q;Oe!==null;){if(Y=Oe,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:pf(9,Y)}}catch(tt){Ui(Y,Y.return,tt)}if(Y===H){Oe=null;break e}var He=Y.sibling;if(He!==null){He.return=Y.return,Oe=He;break e}Oe=Y.return}}if(Tt=E,ps(),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(qh,u)}catch{}M=!0}return M}finally{Ht=y,An.transition=d}}return!1}function EC(u,d,y){d=Qy(y,d),d=kE(u,d,1),bo(u,d),d=Ei(),u=Op(u,1),u!==null&&(ef(u,1,d),Oi(u,d))}function Ui(u,d,y){if(u.tag===3)EC(u,u,y);else for(;d!==null;){if(d.tag===3){EC(d,u,y);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Ro===null||!Ro.has(M))){u=Qy(y,u),u=HE(d,u,1),bo(d,u),u=Ei(),d=Op(d,1),d!==null&&(ef(d,1,u),Oi(d,u));break}}d=d.return}}function YO(u,d,y){var M=u.pingCache;M!==null&&M.delete(d),d=Ei(),u.pingedLanes|=u.suspendedLanes&y,Cn===u&&(Jn&y)===y&&(Ln===4||Ln===3&&(Jn&130023424)===Jn&&500>kn()-px?Da(u,0):hx|=y),Oi(u,d)}function CC(u,d){d===0&&(u.mode&1?(d=$h,$h<<=1,!($h&130023424)&&($h=4194304)):d=1);var y=Ei();u=Op(u,d),u!==null&&(ef(u,d,y),Oi(u,y))}function $O(u){var d=u.memoizedState,y=0;d!==null&&(y=d.retryLane),CC(u,y)}function QO(u,d){var y=0;switch(u.tag){case 13:var M=u.stateNode,E=u.memoizedState;E!==null&&(y=E.retryLane);break;case 19:M=u.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(d),CC(u,y)}var TC;TC=function(u,d,y){if(u!==null)if(u.memoizedProps!==d.pendingProps||vt.current)$i=!0;else{if(!(u.lanes&y)&&!(d.flags&128))return $i=!1,UO(u,d,y);$i=!!(u.flags&131072)}else $i=!1,nn&&d.flags&1048576&&hE(d,ap,d.index);switch(d.lanes=0,d.tag){case 2:var M=d.type;u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps;var E=Ji(d,Bt.current);sc(d,y),E=Xy(null,d,M,u,E,y);var T=Jy();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Jt(M)?(T=!0,Co(d)):T=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Ly(d),E.updater=sp,d.stateNode=E,E._reactInternals=d,Fy(d,M,u,y),d=ex(null,d,M,!0,T,y)):(d.tag=0,nn&&T&&Ny(d),wi(null,d,E,y),d=d.child),d;case 16:M=d.elementType;e:{switch(u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps,E=M._init,M=E(M._payload),d.type=M,E=d.tag=ZO(M),u=kr(M,u),E){case 0:d=Zy(null,d,M,u,y);break e;case 1:d=QE(null,d,M,u,y);break e;case 11:d=XE(null,d,M,u,y);break e;case 14:d=JE(null,d,M,kr(M.type,u),y);break e}throw Error(o(306,M,""))}return d;case 0:return M=d.type,E=d.pendingProps,E=d.elementType===M?E:kr(M,E),Zy(u,d,M,E,y);case 1:return M=d.type,E=d.pendingProps,E=d.elementType===M?E:kr(M,E),QE(u,d,M,E,y);case 3:e:{if(qE(d),u===null)throw Error(o(387));M=d.pendingProps,T=d.memoizedState,E=T.element,oE(u,d),rp(d,M,null,y);var H=d.memoizedState;if(M=H.element,k&&T.isDehydrated)if(T={element:M,isDehydrated:!1,cache:H.cache,transitions:H.transitions},d.updateQueue.baseState=T,d.memoizedState=T,d.flags&256){E=Error(o(423)),d=ZE(u,d,M,y,E);break e}else if(M!==E){E=Error(o(424)),d=ZE(u,d,M,y,E);break e}else for(k&&(Yi=ic(d.stateNode.containerInfo),Ki=d,nn=!0,Hr=null,tf=!1),y=xE(d,null,M,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(lc(),M===E){d=Gs(u,d,y);break e}wi(u,d,M,y)}d=d.child}return d;case 5:return _E(d),u===null&&ky(d),M=d.type,E=d.pendingProps,T=u!==null?u.memoizedProps:null,H=E.children,ye(M,E)?H=null:T!==null&&ye(M,T)&&(d.flags|=32),$E(u,d),wi(u,d,H,y),d.child;case 6:return u===null&&ky(d),null;case 13:return eC(u,d,y);case 4:return zy(d,d.stateNode.containerInfo),M=d.pendingProps,u===null?d.child=cc(d,null,M,y):wi(u,d,M,y),d.child;case 11:return M=d.type,E=d.pendingProps,E=d.elementType===M?E:kr(M,E),XE(u,d,M,E,y);case 7:return wi(u,d,d.pendingProps,y),d.child;case 8:return wi(u,d,d.pendingProps.children,y),d.child;case 12:return wi(u,d,d.pendingProps.children,y),d.child;case 10:e:{if(M=d.type._context,E=d.pendingProps,T=d.memoizedProps,H=E.value,sE(d,M,H),T!==null)if(hs(T.value,H)){if(T.children===E.children&&!vt.current){d=Gs(u,d,y);break e}}else for(T=d.child,T!==null&&(T.return=d);T!==null;){var Y=T.dependencies;if(Y!==null){H=T.child;for(var fe=Y.firstContext;fe!==null;){if(fe.context===M){if(T.tag===1){fe=Us(-1,y&-y),fe.tag=2;var Te=T.updateQueue;if(Te!==null){Te=Te.shared;var Ye=Te.pending;Ye===null?fe.next=fe:(fe.next=Ye.next,Ye.next=fe),Te.pending=fe}}T.lanes|=y,fe=T.alternate,fe!==null&&(fe.lanes|=y),By(T.return,y,d),Y.lanes|=y;break}fe=fe.next}}else if(T.tag===10)H=T.type===d.type?null:T.child;else if(T.tag===18){if(H=T.return,H===null)throw Error(o(341));H.lanes|=y,Y=H.alternate,Y!==null&&(Y.lanes|=y),By(H,y,d),H=T.sibling}else H=T.child;if(H!==null)H.return=T;else for(H=T;H!==null;){if(H===d){H=null;break}if(T=H.sibling,T!==null){T.return=H.return,H=T;break}H=H.return}T=H}wi(u,d,E.children,y),d=d.child}return d;case 9:return E=d.type,M=d.pendingProps.children,sc(d,y),E=hr(E),M=M(E),d.flags|=1,wi(u,d,M,y),d.child;case 14:return M=d.type,E=kr(M,d.pendingProps),E=kr(M.type,E),JE(u,d,M,E,y);case 15:return KE(u,d,d.type,d.pendingProps,y);case 17:return M=d.type,E=d.pendingProps,E=d.elementType===M?E:kr(M,E),u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,Jt(M)?(u=!0,Co(d)):u=!1,sc(d,y),fE(d,M,E),Fy(d,M,E,y),ex(null,d,M,!0,u,y);case 19:return rC(u,d,y);case 22:return YE(u,d,y)}throw Error(o(156,d.tag))};function bC(u,d){return Ey(u,d)}function qO(u,d,y,M){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(u,d,y,M){return new qO(u,d,y,M)}function Sx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function ZO(u){if(typeof u=="function")return Sx(u)?1:0;if(u!=null){if(u=u.$$typeof,u===A)return 11;if(u===_)return 14}return 2}function Lo(u,d){var y=u.alternate;return y===null?(y=xr(u.tag,d,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=d,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&14680064,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,d=u.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y}function kp(u,d,y,M,E,T){var H=2;if(M=u,typeof u=="function")Sx(u)&&(H=1);else if(typeof u=="string")H=5;else e:switch(u){case f:return Oa(y.children,E,T,d);case h:H=8,E|=8;break;case p:return u=xr(12,y,d,E|2),u.elementType=p,u.lanes=T,u;case x:return u=xr(13,y,d,E),u.elementType=x,u.lanes=T,u;case g:return u=xr(19,y,d,E),u.elementType=g,u.lanes=T,u;case w:return Hp(y,E,T,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:H=10;break e;case v:H=9;break e;case A:H=11;break e;case _:H=14;break e;case S:H=16,M=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return d=xr(H,y,d,E),d.elementType=u,d.type=M,d.lanes=T,d}function Oa(u,d,y,M){return u=xr(7,u,M,d),u.lanes=y,u}function Hp(u,d,y,M){return u=xr(22,u,M,d),u.elementType=w,u.lanes=y,u.stateNode={},u}function Mx(u,d,y){return u=xr(6,u,null,d),u.lanes=y,u}function wx(u,d,y){return d=xr(4,u.children!==null?u.children:[],u.key,d),d.lanes=y,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function eU(u,d,y,M,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=st,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=My(0),this.expirationTimes=My(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=My(0),this.identifierPrefix=M,this.onRecoverableError=E,k&&(this.mutableSourceEagerHydrationData=null)}function RC(u,d,y,M,E,T,H,Y,fe){return u=new eU(u,d,y,Y,fe),d===1?(d=1,T===!0&&(d|=8)):d=0,T=xr(3,null,null,d),u.current=T,T.stateNode=u,T.memoizedState={element:M,isDehydrated:y,cache:null,transitions:null},Ly(T),u}function PC(u){if(!u)return Qe;u=u._reactInternals;e:{if(z(u)!==u||u.tag!==1)throw Error(o(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Jt(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(u.tag===1){var y=u.type;if(Jt(y))return Ur(u,y,d)}return d}function IC(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=j(d),u===null?null:u.stateNode}function BC(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<d?y:d}}function Ex(u,d){BC(u,d),(u=u.alternate)&&BC(u,d)}function tU(u){return u=j(u),u===null?null:u.stateNode}function nU(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var d=Ei();yr(u,134217728,d),Ex(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Ei(),y=Io(u);yr(u,y,d),Ex(u,y)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var y=Zu(d.pendingLanes);y!==0&&(wy(d,y|1),Oi(d,kn()),!(Tt&6)&&(mc(),ps()))}break;case 13:var M=Ei();_C(function(){return yr(u,1,M)}),Ex(u,1)}},t.batchedUpdates=function(u,d){var y=Tt;Tt|=1;try{return u(d)}finally{Tt=y,Tt===0&&(mc(),Zh&&ps())}},t.createComponentSelector=function(u){return{$$typeof:Ep,value:u}},t.createContainer=function(u,d,y,M,E,T,H){return RC(u,d,!1,null,y,M,E,T,H)},t.createHasPseudoClassSelector=function(u){return{$$typeof:Cp,value:u}},t.createHydrationContainer=function(u,d,y,M,E,T,H,Y,fe){return u=RC(y,M,!0,u,E,T,H,Y,fe),u.context=PC(null),y=u.current,M=Ei(),E=Io(y),T=Us(M,E),T.callback=d??null,bo(y,T),u.current.lanes=E,ef(u,E,M),Oi(u,M),u},t.createPortal=function(u,d,y){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:M==null?null:""+M,children:u,containerInfo:d,implementation:y}},t.createRoleSelector=function(u){return{$$typeof:Tp,value:u}},t.createTestNameSelector=function(u){return{$$typeof:bp,value:u}},t.createTextSelector=function(u){return{$$typeof:Rp,value:u}},t.deferredUpdates=function(u){var d=Ht,y=An.transition;try{return An.transition=null,Ht=16,u()}finally{Ht=d,An.transition=y}},t.discreteUpdates=function(u,d,y,M,E){var T=Ht,H=An.transition;try{return An.transition=null,Ht=1,u(d,y,M,E)}finally{Ht=T,An.transition=H,Tt===0&&mc()}},t.findAllNodes=fx,t.findBoundingRects=function(u,d){if(!U)throw Error(o(363));d=fx(u,d),u=[];for(var y=0;y<d.length;y++)u.push(ne(d[y]));for(d=u.length-1;0<d;d--){y=u[d];for(var M=y.x,E=M+y.width,T=y.y,H=T+y.height,Y=d-1;0<=Y;Y--)if(d!==Y){var fe=u[Y],Te=fe.x,Ye=Te+fe.width,yt=fe.y,at=yt+fe.height;if(M>=Te&&T>=yt&&E<=Ye&&H<=at){u.splice(d,1);break}else if(M!==Te||y.width!==fe.width||at<T||yt>H){if(!(T!==yt||y.height!==fe.height||Ye<M||Te>E)){Te>M&&(fe.width+=Te-M,fe.x=M),Ye<E&&(fe.width=E-Te),u.splice(d,1);break}}else{yt>T&&(fe.height+=yt-T,fe.y=T),at<H&&(fe.height=H-yt),u.splice(d,1);break}}}return u},t.findHostInstance=IC,t.findHostInstanceWithNoPortals=function(u){return u=P(u),u=u!==null?ee(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return IC(u)},t.flushControlled=function(u){var d=Tt;Tt|=1;var y=An.transition,M=Ht;try{An.transition=null,Ht=1,u()}finally{Ht=M,An.transition=y,Tt=d,Tt===0&&(mc(),ps())}},t.flushPassiveEffects=Na,t.flushSync=_C,t.focusWithin=function(u,d){if(!U)throw Error(o(363));for(u=lx(u),d=vC(u,d),d=Array.from(d),u=0;u<d.length;){var y=d[u++];if(!_e(y)){if(y.tag===5&&$e(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ht},t.getFindAllNodesFailureDescription=function(u,d){if(!U)throw Error(o(363));var y=0,M=[];u=[lx(u),0];for(var E=0;E<u.length;){var T=u[E++],H=u[E++],Y=d[H];if((T.tag!==5||!_e(T))&&(cx(T,Y)&&(M.push(ux(Y)),H++,H>y&&(y=H)),H<d.length))for(T=T.child;T!==null;)u.push(T,H),T=T.sibling}if(y<d.length){for(u=[];y<d.length;y++)u.push(ux(d[y]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return $(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:tU,findFiberByHostInstance:u.findFiberByHostInstance||nU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{qh=d.inject(u),ds=d}catch{}u=!!d.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,d,y,M){if(!U)throw Error(o(363));u=fx(u,d);var E=Be(u,y,M).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(u,d){var y=d._getVersion;y=y(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,y]:u.mutableSourceEagerHydrationData.push(d,y)},t.runWithPriority=function(u,d){var y=Ht;try{return Ht=u,d()}finally{Ht=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,d,y,M){var E=d.current,T=Ei(),H=Io(E);return y=PC(y),d.context===null?d.context=y:d.pendingContext=y,d=Us(T,H),d.payload={element:u},M=M===void 0?null:M,M!==null&&(d.callback=M),bo(E,d),u=yr(E,H,T),u!==null&&ip(u,E,H),H},t};uF.exports=gW;var vW=uF.exports;const yW=yS(vW);var fF={exports:{}},dF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,G){var V=L.length;L.push(G);e:for(;0<V;){var te=V-1>>>1,ve=L[te];if(0<r(ve,G))L[te]=G,L[V]=ve,V=te;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var G=L[0],V=L.pop();if(V!==G){L[0]=V;e:for(var te=0,ve=L.length,Le=ve>>>1;te<Le;){var oe=2*(te+1)-1,ye=L[oe],Ee=oe+1,Se=L[Ee];if(0>r(ye,V))Ee<ve&&0>r(Se,ye)?(L[te]=Se,L[Ee]=V,te=Ee):(L[te]=ye,L[oe]=V,te=oe);else if(Ee<ve&&0>r(Se,V))L[te]=Se,L[Ee]=V,te=Ee;else break e}}return G}function r(L,G){var V=L.sortIndex-G.sortIndex;return V!==0?V:L.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,h=null,p=3,m=!1,v=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var G=t(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=L)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function w(L){if(A=!1,S(L),!v)if(t(l)!==null)v=!0,$(R);else{var G=t(c);G!==null&&K(w,G.startTime-L)}}function R(L,G){v=!1,A&&(A=!1,g(B),B=-1),m=!0;var V=p;try{for(S(G),h=t(l);h!==null&&(!(h.expirationTime>G)||L&&!P());){var te=h.callback;if(typeof te=="function"){h.callback=null,p=h.priorityLevel;var ve=te(h.expirationTime<=G);G=n.unstable_now(),typeof ve=="function"?h.callback=ve:h===t(l)&&i(l),S(G)}else i(l);h=t(l)}if(h!==null)var Le=!0;else{var oe=t(c);oe!==null&&K(w,oe.startTime-G),Le=!1}return Le}finally{h=null,p=V,m=!1}}var b=!1,I=null,B=-1,z=5,C=-1;function P(){return!(n.unstable_now()-C<z)}function j(){if(I!==null){var L=n.unstable_now();C=L;var G=!0;try{G=I(!0,L)}finally{G?X():(b=!1,I=null)}}else b=!1}var X;if(typeof _=="function")X=function(){_(j)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,le=ee.port2;ee.port1.onmessage=j,X=function(){le.postMessage(null)}}else X=function(){x(j,0)};function $(L){I=L,b||(b=!0,X())}function K(L,G){B=x(function(){L(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,$(R))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var V=p;p=G;try{return L()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=p;p=L;try{return G()}finally{p=V}},n.unstable_scheduleCallback=function(L,G,V){var te=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,L){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=V+ve,L={id:f++,callback:G,priorityLevel:L,startTime:V,expirationTime:ve,sortIndex:-1},V>te?(L.sortIndex=V,e(c,L),t(l)===null&&L===t(c)&&(A?(g(B),B=-1):A=!0,K(w,V-te))):(L.sortIndex=ve,e(l,L),v||m||(v=!0,$(R))),L},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(L){var G=p;return function(){var V=p;p=G;try{return L.apply(this,arguments)}finally{p=V}}}})(dF);fF.exports=dF;var bR=fF.exports;const cw={},xW=n=>void Object.assign(cw,n);function _W(n,e){function t(f,{args:h=[],attach:p,...m},v){let A=`${f[0].toUpperCase()}${f.slice(1)}`,x;if(f==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=Uc(g,{type:f,root:v,attach:p,primitive:!0})}else{const g=cw[A];if(!g)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=Uc(new g(...h),{type:f,root:v,attach:p,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x instanceof _t?x.__r3f.attach="geometry":x instanceof Pn&&(x.__r3f.attach="material")),A!=="inject"&&X_(x,m),x}function i(f,h){let p=!1;if(h){var m,v;(m=h.__r3f)!=null&&m.attach?j_(f,h,h.__r3f.attach):h.isObject3D&&f.isObject3D&&(f.add(h),p=!0),p||(v=f.__r3f)==null||v.objects.push(h),h.__r3f||Uc(h,{}),h.__r3f.parent=f,U1(h),kc(h)}}function r(f,h,p){let m=!1;if(h){var v,A;if((v=h.__r3f)!=null&&v.attach)j_(f,h,h.__r3f.attach);else if(h.isObject3D&&f.isObject3D){h.parent=f,h.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:h});const x=f.children.filter(_=>_!==h),g=x.indexOf(p);f.children=[...x.slice(0,g),h,...x.slice(g)],m=!0}m||(A=f.__r3f)==null||A.objects.push(h),h.__r3f||Uc(h,{}),h.__r3f.parent=f,U1(h),kc(h)}}function s(f,h,p=!1){f&&[...f].forEach(m=>o(h,m,p))}function o(f,h,p){if(h){var m,v,A;if(h.__r3f&&(h.__r3f.parent=null),(m=f.__r3f)!=null&&m.objects&&(f.__r3f.objects=f.__r3f.objects.filter(w=>w!==h)),(v=h.__r3f)!=null&&v.attach)LR(f,h,h.__r3f.attach);else if(h.isObject3D&&f.isObject3D){var x;f.remove(h),(x=h.__r3f)!=null&&x.root&&RW(Sg(h),h)}const _=(A=h.__r3f)==null?void 0:A.primitive,S=!_&&(p===void 0?h.dispose!==null:p);if(!_){var g;s((g=h.__r3f)==null?void 0:g.objects,h,S),s(h.children,h,S)}if(delete h.__r3f,S&&h.dispose&&h.type!=="Scene"){const w=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?bR.unstable_scheduleCallback(bR.unstable_IdlePriority,w):w()}kc(f)}}function a(f,h,p,m){var v;const A=(v=f.__r3f)==null?void 0:v.parent;if(!A)return;const x=t(h,p,f.__r3f.root);if(f.children){for(const g of f.children)g.__r3f&&i(x,g);f.children=f.children.filter(g=>!g.__r3f)}f.__r3f.objects.forEach(g=>i(x,g)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(A,f),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(A,x),x.raycast&&x.__r3f.eventCount&&Sg(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:yW({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,h)=>{if(!h)return;const p=f.getState().scene;p.__r3f&&(p.__r3f.root=f,i(p,h))},removeChildFromContainer:(f,h)=>{h&&o(f.getState().scene,h)},insertInContainerBefore:(f,h,p)=>{if(!h||!p)return;const m=f.getState().scene;m.__r3f&&r(m,h,p)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var h;return!!((h=f==null?void 0:f.__r3f)!=null?h:{}).handlers},prepareUpdate(f,h,p,m){var v;if(((v=f==null?void 0:f.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==f)return[!0];{const{args:x=[],children:g,..._}=m,{args:S=[],children:w,...R}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((I,B)=>I!==S[B]))return[!0];const b=xF(f,_,R,!0);return b.changes.length?[!1,b]:null}},commitUpdate(f,[h,p],m,v,A,x){h?a(f,m,A,x):X_(f,p)},commitMount(f,h,p,m){var v;const A=(v=f.__r3f)!=null?v:{};f.raycast&&A.handlers&&A.eventCount&&Sg(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Uc(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var h;const{attach:p,parent:m}=(h=f.__r3f)!=null?h:{};p&&m&&LR(m,f,p),f.isObject3D&&(f.visible=!1),kc(f)},unhideInstance(f,h){var p;const{attach:m,parent:v}=(p=f.__r3f)!=null?p:{};m&&v&&j_(v,f,m),(f.isObject3D&&h.visible==null||h.visible)&&(f.visible=!0),kc(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():tu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&$t.fun(performance.now)?performance.now:$t.fun(Date.now)?Date.now:()=>0,scheduleTimeout:$t.fun(setTimeout)?setTimeout:void 0,cancelTimeout:$t.fun(clearTimeout)?clearTimeout:void 0}),applyProps:X_}}var RR,PR;const W_=n=>"colorSpace"in n||"outputColorSpace"in n,hF=()=>{var n;return(n=cw.ColorManagement)!=null?n:null},pF=n=>n&&n.isOrthographicCamera,AW=n=>n&&n.hasOwnProperty("current"),Rh=typeof window<"u"&&((RR=window.document)!=null&&RR.createElement||((PR=window.navigator)==null?void 0:PR.product)==="ReactNative")?D.useLayoutEffect:D.useEffect;function mF(n){const e=D.useRef(n);return Rh(()=>void(e.current=n),[n]),e}function SW({set:n}){return Rh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class gF extends D.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}gF.getDerivedStateFromError=()=>({error:!0});const vF="__default",IR=new Map,MW=n=>n&&!!n.memoized&&!!n.changes;function yF(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Hf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Sg(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const $t={obj:n=>n===Object(n)&&!$t.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if($t.str(n)||$t.num(n)||$t.boo(n))return n===e;const s=$t.obj(n);if(s&&i==="reference")return n===e;const o=$t.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!$t.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if($t.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function wW(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function EW(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Uc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function O1(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const BR=/-\d+$/;function j_(n,e,t){if($t.str(t)){if(BR.test(t)){const s=t.replace(BR,""),{target:o,key:a}=O1(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=O1(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function LR(n,e,t){var i,r;if($t.str(t)){const{target:s,key:o}=O1(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function xF(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const f=n.__r3f,h=Object.entries(r),p=[];if(c){const v=Object.keys(l);for(let A=0;A<v.length;A++)r.hasOwnProperty(v[A])||h.unshift([v[A],vF+"remove"])}h.forEach(([v,A])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&v==="object"||$t.equ(A,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,A,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,A,!1,g]);for(const _ in r){const S=r[_];_.startsWith(`${v}-`)&&p.push([_,S,!1,_.split("-")])}});const m={...r};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(m.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(m.attach=f.memoizedProps.attach),{memoized:m,changes:p}}const CW=typeof process<"u"&&!1;function X_(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=MW(e)?e:xF(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let f=0;f<a.length;f++){let[h,p,m,v]=a[f];if(W_(n)){const _="srgb",S="srgb-linear";h==="encoding"?(h="colorSpace",p=p===3001?_:S):h==="outputEncoding"&&(h="outputColorSpace",p=p===3001?_:S)}let A=n,x=A[h];if(v.length&&(x=v.reduce((g,_)=>g[_],n),!(x&&x.set))){const[g,..._]=v.reverse();A=_.reverse().reduce((S,w)=>S[w],n),h=g}if(p===vF+"remove")if(A.constructor){let g=IR.get(A.constructor);g||(g=new A.constructor,IR.set(A.constructor,g)),p=g[h]}else p=0;if(m&&i)p?i.handlers[h]=p:delete i.handlers[h],i.eventCount=Object.keys(i.handlers).length;else if(x&&x.set&&(x.copy||x instanceof bl)){if(Array.isArray(p))x.fromArray?x.fromArray(p):x.set(...p);else if(x.copy&&p&&p.constructor&&(CW?x.constructor.name===p.constructor.name:x.constructor===p.constructor))x.copy(p);else if(p!==void 0){const g=x instanceof De;!g&&x.setScalar?x.setScalar(p):x instanceof bl&&p instanceof bl?x.mask=p.mask:x.set(p),!hF()&&s&&!s.linear&&g&&x.convertSRGBToLinear()}}else if(A[h]=p,A[h]instanceof en&&A[h].format===mi&&A[h].type===is&&s){const g=A[h];W_(g)&&W_(s.gl)?g.colorSpace=s.gl.outputColorSpace:g.encoding=s.gl.outputEncoding}kc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const f=Sg(n).getState().internal,h=f.interaction.indexOf(n);h>-1&&f.interaction.splice(h,1),i.eventCount&&f.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&U1(n),n}function kc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function U1(n){n.onUpdate==null||n.onUpdate(n)}function TW(n,e){n.manual||(pF(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Ym(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function bW(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return tu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return tu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return tu.ContinuousEventPriority;default:return tu.DefaultEventPriority}}function _F(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function RW(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{_F(t.capturedMap,e,i,r)})}function PW(n){function e(l){const{internal:c}=n.getState(),f=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(f*f+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(f=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+f]}))}function i(l,c){const f=n.getState(),h=new Set,p=[],m=c?c(f.internal.interaction):f.internal.interaction;for(let g=0;g<m.length;g++){const _=Hf(m[g]);_&&(_.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function v(g){const _=Hf(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var S;_.events.compute==null||_.events.compute(l,_,(S=_.previousRoot)==null?void 0:S.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let A=m.flatMap(v).sort((g,_)=>{const S=Hf(g.object),w=Hf(_.object);return!S||!w?g.distance-_.distance:w.events.priority-S.events.priority||g.distance-_.distance}).filter(g=>{const _=Ym(g);return h.has(_)?!1:(h.add(_),!0)});f.events.filter&&(A=f.events.filter(A,f));for(const g of A){let _=g.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let g of f.internal.capturedMap.get(l.pointerId).values())h.has(Ym(g.intersection))||p.push(g.intersection);return p}function r(l,c,f,h){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const A=Hf(v.object)||p,{raycaster:x,pointer:g,camera:_,internal:S}=A,w=new O(g.x,g.y,0).unproject(_),R=C=>{var P,j;return(P=(j=S.capturedMap.get(C))==null?void 0:j.has(v.eventObject))!=null?P:!1},b=C=>{const P={intersection:v,target:c.target};S.capturedMap.has(C)?S.capturedMap.get(C).set(v.eventObject,P):S.capturedMap.set(C,new Map([[v.eventObject,P]])),c.target.setPointerCapture(C)},I=C=>{const P=S.capturedMap.get(C);P&&_F(S.capturedMap,v.eventObject,P,C)};let B={};for(let C in c){let P=c[C];typeof P!="function"&&(B[C]=P)}let z={...v,...B,pointer:g,intersections:l,stopped:m.stopped,delta:f,unprojectedPoint:w,ray:x.ray,camera:_,stopPropagation(){const C="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!C||C.has(v.eventObject))&&(z.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(P=>P.eventObject===v.eventObject))){const P=l.slice(0,l.indexOf(v));s([...P,v])}},target:{hasPointerCapture:R,setPointerCapture:b,releasePointerCapture:I},currentTarget:{hasPointerCapture:R,setPointerCapture:b,releasePointerCapture:I},nativeEvent:c};if(h(z),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const f of c.hovered.values())if(!l.length||!l.find(h=>h.object===f.object&&h.index===f.index&&h.instanceId===f.instanceId)){const p=f.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Ym(f)),p!=null&&p.eventCount){const v={...f,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let f=0;f<c.length;f++){const h=c[f].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:f}=n.getState();"pointerId"in c&&f.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(c.pointerId)&&(f.capturedMap.delete(c.pointerId),s([]))})}}return function(f){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=f;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(f,m?t:void 0),g=v?e(f):0;l==="onPointerDown"&&(p.initialClick=[f.offsetX,f.offsetY],p.initialHits=x.map(S=>S.eventObject)),v&&!x.length&&g<=2&&(o(f,p.interaction),h&&h(f)),m&&s(x);function _(S){const w=S.eventObject,R=w.__r3f,b=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(m){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const I=Ym(S),B=p.hovered.get(I);B?B.stopped&&S.stopPropagation():(p.hovered.set(I,S),b.onPointerOver==null||b.onPointerOver(S),b.onPointerEnter==null||b.onPointerEnter(S))}b.onPointerMove==null||b.onPointerMove(S)}else{const I=b[l];I?(!v||p.initialHits.includes(w))&&(o(f,p.interaction.filter(B=>!p.initialHits.includes(B))),I(S)):v&&p.initialHits.includes(w)&&o(f,p.interaction.filter(B=>!p.initialHits.includes(B)))}}r(x,f,g,_)}}return{handlePointer:a}}const AF=n=>!!(n!=null&&n.render),SF=D.createContext(null),IW=(n,e)=>{const t=cW((a,l)=>{const c=new O,f=new O,h=new O;function p(g=l().camera,_=f,S=l().size){const{width:w,height:R,top:b,left:I}=S,B=w/R;_ instanceof O?h.copy(_):h.set(..._);const z=g.getWorldPosition(c).distanceTo(h);if(pF(g))return{width:w/g.zoom,height:R/g.zoom,top:b,left:I,factor:1,distance:z,aspect:B};{const C=g.fov*Math.PI/180,P=2*Math.tan(C/2)*z,j=P*(w/R);return{width:j,height:P,top:b,left:I,factor:w/j,distance:z,aspect:B}}}let m;const v=g=>a(_=>({performance:{..._.performance,current:g}})),A=new pe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new rw,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,S,w,R)=>{const b=l().camera,I={width:g,height:_,top:w||0,left:R||0,updateStyle:S};a(B=>({size:I,viewport:{...B.viewport,...p(b,f,I)}}))},setDpr:g=>a(_=>{const S=yF(g);return{viewport:{..._.viewport,dpr:S,initialDpr:_.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:D.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,S)=>{const w=l().internal;return w.priority=w.priority+(_>0?1:0),w.subscribers.push({ref:g,priority:_,store:S}),w.subscribers=w.subscribers.sort((R,b)=>R.priority-b.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(_>0?1:0),R.subscribers=R.subscribers.filter(b=>b.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:f,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,TW(a,l),f.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let $m,BW=new Set,LW=new Set,DW=new Set;function J_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function zf(n,e){switch(n){case"before":return J_(BW,e);case"after":return J_(LW,e);case"tail":return J_(DW,e)}}let K_,Y_;function $_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),K_=e.internal.subscribers,$m=0;$m<K_.length;$m++)Y_=K_[$m],Y_.ref.current(Y_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function FW(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,zf("before",c),t=!0;for(const h of n.values()){var f;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(i+=$_(c,s))}if(t=!1,zf("after",c),i===0)return zf("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,f=1){var h;if(!c)return n.forEach(p=>a(p.store.getState(),f));(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(f>1?c.internal.frames=Math.min(60,c.internal.frames+f):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,f=!0,h,p){if(f&&zf("before",c),h)$_(c,h,p);else for(const m of n.values())$_(c,m.store.getState());f&&zf("after",c)}return{loop:o,invalidate:a,advance:l}}function MF(){const n=D.useContext(SF);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Jr(n=t=>t,e){return MF()(n,e)}function Zv(n,e=0){const t=MF(),i=t.getState().internal.subscribe,r=mF(n);return Rh(()=>i(r,e,t),[e,i,t]),null}const DR=new WeakMap;function wF(n,e){return function(t,...i){let r=DR.get(t);return r||(r=new t,DR.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,wW(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Ph(n,e,t,i){const r=Array.isArray(e)?e:[e],s=fW(wF(t,i),[n,...r],{equal:$t.equ});return Array.isArray(e)?s:s[0]}Ph.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return dW(wF(t),[n,...i])};Ph.clear=function(n,e){const t=Array.isArray(e)?e:[e];return hW([n,...t])};const Bu=new Map,{invalidate:FR,advance:NR}=FW(Bu),{reconciler:G0,applyProps:Fc}=_W(Bu,bW),Nc={objects:"shallow",strict:!1},NW=(n,e)=>{const t=typeof n=="function"?n(e):n;return AF(t)?t:new yD({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function OW(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function UW(n){const e=Bu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||IW(FR,NR),o=t||G0.createContainer(s,tu.ConcurrentRoot,null,!1,null,"",r,null);e||Bu.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(f={}){let{gl:h,size:p,scene:m,events:v,onCreated:A,shadows:x=!1,linear:g=!1,flat:_=!1,legacy:S=!1,orthographic:w=!1,frameloop:R="always",dpr:b=[1,2],performance:I,raycaster:B,camera:z,onPointerMissed:C}=f,P=s.getState(),j=P.gl;P.gl||P.set({gl:j=NW(h,n)});let X=P.raycaster;X||P.set({raycaster:X=new sF});const{params:ee,...le}=B||{};if($t.equ(le,X,Nc)||Fc(X,{...le}),$t.equ(ee,X.params,Nc)||Fc(X,{params:{...X.params,...ee}}),!P.camera||P.camera===c&&!$t.equ(c,z,Nc)){c=z;const V=z instanceof xh,te=V?z:w?new Ms(0,0,0,0,.1,1e3):new un(75,0,.1,1e3);V||(te.position.z=5,z&&(Fc(te,z),("aspect"in z||"left"in z||"right"in z||"bottom"in z||"top"in z)&&(te.manual=!0,te.updateProjectionMatrix())),!P.camera&&!(z!=null&&z.rotation)&&te.lookAt(0,0,0)),P.set({camera:te}),X.camera=te}if(!P.scene){let V;m instanceof U0?V=m:(V=new U0,m&&Fc(V,m)),P.set({scene:Uc(V)})}if(!P.xr){var $;const V=(Le,oe)=>{const ye=s.getState();ye.frameloop!=="never"&&NR(Le,!0,ye,oe)},te=()=>{const Le=s.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?V:null),Le.gl.xr.isPresenting||FR(Le)},ve={connect(){const Le=s.getState().gl;Le.xr.addEventListener("sessionstart",te),Le.xr.addEventListener("sessionend",te)},disconnect(){const Le=s.getState().gl;Le.xr.removeEventListener("sessionstart",te),Le.xr.removeEventListener("sessionend",te)}};typeof(($=j.xr)==null?void 0:$.addEventListener)=="function"&&ve.connect(),P.set({xr:ve})}if(j.shadowMap){const V=j.shadowMap.enabled,te=j.shadowMap.type;if(j.shadowMap.enabled=!!x,$t.boo(x))j.shadowMap.type=cd;else if($t.str(x)){var K;const ve={basic:mL,percentage:Av,soft:cd,variance:Xr};j.shadowMap.type=(K=ve[x])!=null?K:cd}else $t.obj(x)&&Object.assign(j.shadowMap,x);(V!==j.shadowMap.enabled||te!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const L=hF();L&&("enabled"in L?L.enabled=!S:"legacyMode"in L&&(L.legacyMode=S)),l||Fc(j,{outputEncoding:g?3e3:3001,toneMapping:_?Cs:mM}),P.legacy!==S&&P.set(()=>({legacy:S})),P.linear!==g&&P.set(()=>({linear:g})),P.flat!==_&&P.set(()=>({flat:_})),h&&!$t.fun(h)&&!AF(h)&&!$t.equ(h,j,Nc)&&Fc(j,h),v&&!P.events.handlers&&P.set({events:v(s)});const G=OW(n,p);return $t.equ(G,P.size,Nc)||P.setSize(G.width,G.height,G.updateStyle,G.top,G.left),b&&P.viewport.dpr!==yF(b)&&P.setDpr(b),P.frameloop!==R&&P.setFrameloop(R),P.onPointerMissed||P.set({onPointerMissed:C}),I&&!$t.equ(I,P.performance,Nc)&&P.set(V=>({performance:{...V.performance,...I}})),a=A,l=!0,this},render(f){return l||this.configure(),G0.updateContainer(ie.jsx(kW,{store:s,children:f,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){EF(n)}}}function kW({store:n,children:e,onCreated:t,rootElement:i}){return Rh(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),ie.jsx(SF.Provider,{value:n,children:e})}function EF(n,e){const t=Bu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),G0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),EW(r),Bu.delete(n)}catch{}},500)})}}G0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:D.version});const Q_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function HW(n){const{handlePointer:e}=PW(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Q_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=Q_[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Q_[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function k1(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var f=Date.now()-o;f<e&&f>=0?i=setTimeout(l,e-f):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var f=t&&!i;return i||(i=setTimeout(l,e)),f&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}k1.debounce=k1;var zW=k1;const OR=yS(zW);var GW=Object.defineProperty,VW=Object.defineProperties,WW=Object.getOwnPropertyDescriptors,UR=Object.getOwnPropertySymbols,jW=Object.prototype.hasOwnProperty,XW=Object.prototype.propertyIsEnumerable,kR=(n,e,t)=>e in n?GW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,HR=(n,e)=>{for(var t in e||(e={}))jW.call(e,t)&&kR(n,t,e[t]);if(UR)for(var t of UR(e))XW.call(e,t)&&kR(n,t,e[t]);return n},JW=(n,e)=>VW(n,WW(e)),zR,GR;typeof window<"u"&&((zR=window.document)!=null&&zR.createElement||((GR=window.navigator)==null?void 0:GR.product)==="ReactNative")?D.useLayoutEffect:D.useEffect;function CF(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=CF(i,e,t);if(r)return r;i=i.sibling}}function TF(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const VR=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=VR;return}return VR.apply(this,arguments)};const uw=TF(D.createContext(null));class bF extends D.Component{render(){return D.createElement(uw.Provider,{value:this._reactInternals},this.props.children)}}function KW(){const n=D.useContext(uw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=D.useId();return D.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=CF(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function YW(){const n=KW(),[e]=D.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==uw&&!e.has(r)&&e.set(r,D.useContext(TF(r)))}t=t.return}return e}function $W(){const n=YW();return D.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>D.createElement(e,null,D.createElement(t.Provider,JW(HR({},i),{value:n.get(t)}))),e=>D.createElement(bF,HR({},e))),[n])}function QW({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||typeof window<"u"&&window.ResizeObserver,[s,o]=D.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!r)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=D.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,f=D.useRef(!1);D.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,p,m]=D.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:_,top:S,width:w,height:R,bottom:b,right:I,x:B,y:z}=a.current.element.getBoundingClientRect(),C={left:_,top:S,width:w,height:R,bottom:b,right:I,x:B,y:z};a.current.element instanceof HTMLElement&&i&&(C.height=a.current.element.offsetHeight,C.width=a.current.element.offsetWidth),Object.freeze(C),f.current&&!t7(a.current.lastBounds,C)&&o(a.current.lastBounds=C)};return[g,c?OR(g,c):g,l?OR(g,l):g]},[o,i,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null)}function A(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})))}const x=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=RF(g),A())};return ZW(m,!!e),qW(p),D.useEffect(()=>{v(),A()},[e,m,p]),D.useEffect(()=>v,[]),[x,s,h]}function qW(n){D.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function ZW(n,e){D.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function RF(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...RF(n.parentElement)]}const e7=["x","y","top","bottom","left","right","width","height"],t7=(n,e)=>e7.every(t=>n[t]===e[t]),n7=D.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=HW,eventSource:a,eventPrefix:l,shadows:c,linear:f,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:A,performance:x,raycaster:g,camera:_,scene:S,onPointerMissed:w,onCreated:R,...b},I){D.useMemo(()=>xW(oW),[]);const B=$W(),[z,C]=QW({scroll:!0,debounce:{scroll:50,resize:0},...i}),P=D.useRef(null),j=D.useRef(null);D.useImperativeHandle(I,()=>P.current);const X=mF(w),[ee,le]=D.useState(!1),[$,K]=D.useState(!1);if(ee)throw ee;if($)throw $;const L=D.useRef(null);Rh(()=>{const V=P.current;C.width>0&&C.height>0&&V&&(L.current||(L.current=UW(V)),L.current.configure({gl:s,events:o,shadows:c,linear:f,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:A,performance:x,raycaster:g,camera:_,scene:S,size:C,onPointerMissed:(...te)=>X.current==null?void 0:X.current(...te),onCreated:te=>{te.events.connect==null||te.events.connect(a?AW(a)?a.current:a:j.current),l&&te.setEvents({compute:(ve,Le)=>{const oe=ve[l+"X"],ye=ve[l+"Y"];Le.pointer.set(oe/Le.size.width*2-1,-(ye/Le.size.height)*2+1),Le.raycaster.setFromCamera(Le.pointer,Le.camera)}}),R==null||R(te)}}),L.current.render(ie.jsx(B,{children:ie.jsx(gF,{set:K,children:ie.jsx(D.Suspense,{fallback:ie.jsx(SW,{set:le}),children:e})})})))}),D.useEffect(()=>{const V=P.current;if(V)return()=>EF(V)},[]);const G=a?"none":"auto";return ie.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...r},...b,children:ie.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:ie.jsx("canvas",{ref:P,style:{display:"block"},children:t})})})}),PF=D.forwardRef(function(e,t){return ie.jsx(bF,{children:ie.jsx(n7,{...e,ref:t})})});function ma(){return ma=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ma.apply(null,arguments)}function mu(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function jR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WR(Object(t),!0).forEach(function(i){mu(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}new pe;new pe;function IF(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Sr=function n(e,t,i){var r=this;IF(this,n),mu(this,"dot2",function(s,o){return r.x*s+r.y*o}),mu(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},i7=[new Sr(1,1,0),new Sr(-1,1,0),new Sr(1,-1,0),new Sr(-1,-1,0),new Sr(1,0,1),new Sr(-1,0,1),new Sr(1,0,-1),new Sr(-1,0,-1),new Sr(0,1,1),new Sr(0,-1,1),new Sr(0,1,-1),new Sr(0,-1,-1)],XR=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],JR=new Array(512),KR=new Array(512),r7=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=XR[t]^e&255:i=XR[t]^e>>8&255,JR[t]=JR[t+256]=i,KR[t]=KR[t+256]=i7[i%12]}};r7(0);function s7(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function YR(n){var e=s7(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var o7=function n(e){var t=this;IF(this,n),mu(this,"seed",0),mu(this,"init",function(i){t.seed=i,t.value=YR(i)}),mu(this,"value",YR(this.seed)),this.init(e)},a7=new o7(Math.random()),l7={radius:1,center:[0,0,0]};function c7(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a7,i=jR(jR({},l7),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,c=t.value()*2-1,f=t.value()*2-1,h=Math.sqrt(l*l+c*c+f*f);l=a*l/h,c=a*c/h,f=a*f/h,n[o]=l*r+s[0],n[o+1]=c*r+s[1],n[o+2]=f*r+s[2]}return n}const u7=parseInt(zu.replace(/\D+/g,""));function $R(n,e){if(e===XL)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===O0||e===CM){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===O0)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var f7=Object.defineProperty,d7=(n,e,t)=>e in n?f7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mt=(n,e,t)=>(d7(n,typeof e!="symbol"?e+"":e,t),t);const Qm=new $l,QR=new qs,h7=Math.cos(70*(Math.PI/180)),qR=(n,e)=>(n%e+e)%e;let p7=class extends as{constructor(e,t){super(),mt(this,"object"),mt(this,"domElement"),mt(this,"enabled",!0),mt(this,"target",new O),mt(this,"minDistance",0),mt(this,"maxDistance",1/0),mt(this,"minZoom",0),mt(this,"maxZoom",1/0),mt(this,"minPolarAngle",0),mt(this,"maxPolarAngle",Math.PI),mt(this,"minAzimuthAngle",-1/0),mt(this,"maxAzimuthAngle",1/0),mt(this,"enableDamping",!1),mt(this,"dampingFactor",.05),mt(this,"enableZoom",!0),mt(this,"zoomSpeed",1),mt(this,"enableRotate",!0),mt(this,"rotateSpeed",1),mt(this,"enablePan",!0),mt(this,"panSpeed",1),mt(this,"screenSpacePanning",!0),mt(this,"keyPanSpeed",7),mt(this,"zoomToCursor",!1),mt(this,"autoRotate",!1),mt(this,"autoRotateSpeed",2),mt(this,"reverseOrbit",!1),mt(this,"reverseHorizontalOrbit",!1),mt(this,"reverseVerticalOrbit",!1),mt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),mt(this,"mouseButtons",{LEFT:tl.ROTATE,MIDDLE:tl.DOLLY,RIGHT:tl.PAN}),mt(this,"touches",{ONE:nl.ROTATE,TWO:nl.DOLLY_PAN}),mt(this,"target0"),mt(this,"position0"),mt(this,"zoom0"),mt(this,"_domElementKeyEvents",null),mt(this,"getPolarAngle"),mt(this,"getAzimuthalAngle"),mt(this,"setPolarAngle"),mt(this,"setAzimuthalAngle"),mt(this,"getDistance"),mt(this,"listenToKeyEvents"),mt(this,"stopListenToKeyEvents"),mt(this,"saveState"),mt(this,"reset"),mt(this,"update"),mt(this,"connect"),mt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=J=>{let de=qR(J,2*Math.PI),Fe=f.phi;Fe<0&&(Fe+=2*Math.PI),de<0&&(de+=2*Math.PI);let W=Math.abs(de-Fe);2*Math.PI-W<W&&(de<Fe?de+=2*Math.PI:Fe+=2*Math.PI),h.phi=de-Fe,i.update()},this.setAzimuthalAngle=J=>{let de=qR(J,2*Math.PI),Fe=f.theta;Fe<0&&(Fe+=2*Math.PI),de<0&&(de+=2*Math.PI);let W=Math.abs(de-Fe);2*Math.PI-W<W&&(de<Fe?de+=2*Math.PI:Fe+=2*Math.PI),h.theta=de-Fe,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=J=>{J.addEventListener("keydown",Be),this._domElementKeyEvents=J},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Be),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const J=new O,de=new O(0,1,0),Fe=new jn().setFromUnitVectors(e.up,de),W=Fe.clone().invert(),Ce=new O,ce=new jn,ge=2*Math.PI;return function(){const ke=i.object.position;Fe.setFromUnitVectors(e.up,de),W.copy(Fe).invert(),J.copy(ke).sub(i.target),J.applyQuaternion(Fe),f.setFromVector3(J),i.autoRotate&&l===a.NONE&&ee(j()),i.enableDamping?(f.theta+=h.theta*i.dampingFactor,f.phi+=h.phi*i.dampingFactor):(f.theta+=h.theta,f.phi+=h.phi);let gt=i.minAzimuthAngle,Dt=i.maxAzimuthAngle;isFinite(gt)&&isFinite(Dt)&&(gt<-Math.PI?gt+=ge:gt>Math.PI&&(gt-=ge),Dt<-Math.PI?Dt+=ge:Dt>Math.PI&&(Dt-=ge),gt<=Dt?f.theta=Math.max(gt,Math.min(Dt,f.theta)):f.theta=f.theta>(gt+Dt)/2?Math.max(gt,f.theta):Math.min(Dt,f.theta)),f.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,f.phi)),f.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&z||i.object.isOrthographicCamera?f.radius=ve(f.radius):f.radius=ve(f.radius*p),J.setFromSpherical(f),J.applyQuaternion(W),ke.copy(i.target).add(J),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),m.set(0,0,0));let mn=!1;if(i.zoomToCursor&&z){let wt=null;if(i.object instanceof un&&i.object.isPerspectiveCamera){const an=J.length();wt=ve(an*p);const Xn=an-wt;i.object.position.addScaledVector(I,Xn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const an=new O(B.x,B.y,0);an.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),mn=!0;const Xn=new O(B.x,B.y,0);Xn.unproject(i.object),i.object.position.sub(Xn).add(an),i.object.updateMatrixWorld(),wt=J.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;wt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(wt).add(i.object.position):(Qm.origin.copy(i.object.position),Qm.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Qm.direction))<h7?e.lookAt(i.target):(QR.setFromNormalAndCoplanarPoint(i.object.up,i.target),Qm.intersectPlane(QR,i.target))))}else i.object instanceof Ms&&i.object.isOrthographicCamera&&(mn=p!==1,mn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,z=!1,mn||Ce.distanceToSquared(i.object.position)>c||8*(1-ce.dot(i.object.quaternion))>c?(i.dispatchEvent(r),Ce.copy(i.object.position),ce.copy(i.object.quaternion),mn=!1,!0):!1}})(),this.connect=J=>{i.domElement=J,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Me),i.domElement.addEventListener("pointerdown",F),i.domElement.addEventListener("pointercancel",he),i.domElement.addEventListener("wheel",$e)},this.dispose=()=>{var J,de,Fe,W,Ce,ce;i.domElement&&(i.domElement.style.touchAction="auto"),(J=i.domElement)==null||J.removeEventListener("contextmenu",Me),(de=i.domElement)==null||de.removeEventListener("pointerdown",F),(Fe=i.domElement)==null||Fe.removeEventListener("pointercancel",he),(W=i.domElement)==null||W.removeEventListener("wheel",$e),(Ce=i.domElement)==null||Ce.ownerDocument.removeEventListener("pointermove",ne),(ce=i.domElement)==null||ce.ownerDocument.removeEventListener("pointerup",he),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Be)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,f=new N1,h=new N1;let p=1;const m=new O,v=new pe,A=new pe,x=new pe,g=new pe,_=new pe,S=new pe,w=new pe,R=new pe,b=new pe,I=new O,B=new pe;let z=!1;const C=[],P={};function j(){return 2*Math.PI/60/60*i.autoRotateSpeed}function X(){return Math.pow(.95,i.zoomSpeed)}function ee(J){i.reverseOrbit||i.reverseHorizontalOrbit?h.theta+=J:h.theta-=J}function le(J){i.reverseOrbit||i.reverseVerticalOrbit?h.phi+=J:h.phi-=J}const $=(()=>{const J=new O;return function(Fe,W){J.setFromMatrixColumn(W,0),J.multiplyScalar(-Fe),m.add(J)}})(),K=(()=>{const J=new O;return function(Fe,W){i.screenSpacePanning===!0?J.setFromMatrixColumn(W,1):(J.setFromMatrixColumn(W,0),J.crossVectors(i.object.up,J)),J.multiplyScalar(Fe),m.add(J)}})(),L=(()=>{const J=new O;return function(Fe,W){const Ce=i.domElement;if(Ce&&i.object instanceof un&&i.object.isPerspectiveCamera){const ce=i.object.position;J.copy(ce).sub(i.target);let ge=J.length();ge*=Math.tan(i.object.fov/2*Math.PI/180),$(2*Fe*ge/Ce.clientHeight,i.object.matrix),K(2*W*ge/Ce.clientHeight,i.object.matrix)}else Ce&&i.object instanceof Ms&&i.object.isOrthographicCamera?($(Fe*(i.object.right-i.object.left)/i.object.zoom/Ce.clientWidth,i.object.matrix),K(W*(i.object.top-i.object.bottom)/i.object.zoom/Ce.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function G(J){i.object instanceof un&&i.object.isPerspectiveCamera||i.object instanceof Ms&&i.object.isOrthographicCamera?p/=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function V(J){i.object instanceof un&&i.object.isPerspectiveCamera||i.object instanceof Ms&&i.object.isOrthographicCamera?p*=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function te(J){if(!i.zoomToCursor||!i.domElement)return;z=!0;const de=i.domElement.getBoundingClientRect(),Fe=J.clientX-de.left,W=J.clientY-de.top,Ce=de.width,ce=de.height;B.x=Fe/Ce*2-1,B.y=-(W/ce)*2+1,I.set(B.x,B.y,1).unproject(i.object).sub(i.object.position).normalize()}function ve(J){return Math.max(i.minDistance,Math.min(i.maxDistance,J))}function Le(J){v.set(J.clientX,J.clientY)}function oe(J){te(J),w.set(J.clientX,J.clientY)}function ye(J){g.set(J.clientX,J.clientY)}function Ee(J){A.set(J.clientX,J.clientY),x.subVectors(A,v).multiplyScalar(i.rotateSpeed);const de=i.domElement;de&&(ee(2*Math.PI*x.x/de.clientHeight),le(2*Math.PI*x.y/de.clientHeight)),v.copy(A),i.update()}function Se(J){R.set(J.clientX,J.clientY),b.subVectors(R,w),b.y>0?G(X()):b.y<0&&V(X()),w.copy(R),i.update()}function lt(J){_.set(J.clientX,J.clientY),S.subVectors(_,g).multiplyScalar(i.panSpeed),L(S.x,S.y),g.copy(_),i.update()}function st(J){te(J),J.deltaY<0?V(X()):J.deltaY>0&&G(X()),i.update()}function ut(J){let de=!1;switch(J.code){case i.keys.UP:L(0,i.keyPanSpeed),de=!0;break;case i.keys.BOTTOM:L(0,-i.keyPanSpeed),de=!0;break;case i.keys.LEFT:L(i.keyPanSpeed,0),de=!0;break;case i.keys.RIGHT:L(-i.keyPanSpeed,0),de=!0;break}de&&(J.preventDefault(),i.update())}function ot(){if(C.length==1)v.set(C[0].pageX,C[0].pageY);else{const J=.5*(C[0].pageX+C[1].pageX),de=.5*(C[0].pageY+C[1].pageY);v.set(J,de)}}function xe(){if(C.length==1)g.set(C[0].pageX,C[0].pageY);else{const J=.5*(C[0].pageX+C[1].pageX),de=.5*(C[0].pageY+C[1].pageY);g.set(J,de)}}function k(){const J=C[0].pageX-C[1].pageX,de=C[0].pageY-C[1].pageY,Fe=Math.sqrt(J*J+de*de);w.set(0,Fe)}function Pe(){i.enableZoom&&k(),i.enablePan&&xe()}function Re(){i.enableZoom&&k(),i.enableRotate&&ot()}function Ae(J){if(C.length==1)A.set(J.pageX,J.pageY);else{const Fe=je(J),W=.5*(J.pageX+Fe.x),Ce=.5*(J.pageY+Fe.y);A.set(W,Ce)}x.subVectors(A,v).multiplyScalar(i.rotateSpeed);const de=i.domElement;de&&(ee(2*Math.PI*x.x/de.clientHeight),le(2*Math.PI*x.y/de.clientHeight)),v.copy(A)}function Ie(J){if(C.length==1)_.set(J.pageX,J.pageY);else{const de=je(J),Fe=.5*(J.pageX+de.x),W=.5*(J.pageY+de.y);_.set(Fe,W)}S.subVectors(_,g).multiplyScalar(i.panSpeed),L(S.x,S.y),g.copy(_)}function Ze(J){const de=je(J),Fe=J.pageX-de.x,W=J.pageY-de.y,Ce=Math.sqrt(Fe*Fe+W*W);R.set(0,Ce),b.set(0,Math.pow(R.y/w.y,i.zoomSpeed)),G(b.y),w.copy(R)}function ze(J){i.enableZoom&&Ze(J),i.enablePan&&Ie(J)}function U(J){i.enableZoom&&Ze(J),i.enableRotate&&Ae(J)}function F(J){var de,Fe;i.enabled!==!1&&(C.length===0&&((de=i.domElement)==null||de.ownerDocument.addEventListener("pointermove",ne),(Fe=i.domElement)==null||Fe.ownerDocument.addEventListener("pointerup",he)),We(J),J.pointerType==="touch"?Ve(J):_e(J))}function ne(J){i.enabled!==!1&&(J.pointerType==="touch"?bt(J):me(J))}function he(J){var de,Fe,W;pt(J),C.length===0&&((de=i.domElement)==null||de.releasePointerCapture(J.pointerId),(Fe=i.domElement)==null||Fe.ownerDocument.removeEventListener("pointermove",ne),(W=i.domElement)==null||W.ownerDocument.removeEventListener("pointerup",he)),i.dispatchEvent(o),l=a.NONE}function _e(J){let de;switch(J.button){case 0:de=i.mouseButtons.LEFT;break;case 1:de=i.mouseButtons.MIDDLE;break;case 2:de=i.mouseButtons.RIGHT;break;default:de=-1}switch(de){case tl.DOLLY:if(i.enableZoom===!1)return;oe(J),l=a.DOLLY;break;case tl.ROTATE:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enablePan===!1)return;ye(J),l=a.PAN}else{if(i.enableRotate===!1)return;Le(J),l=a.ROTATE}break;case tl.PAN:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enableRotate===!1)return;Le(J),l=a.ROTATE}else{if(i.enablePan===!1)return;ye(J),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function me(J){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Ee(J);break;case a.DOLLY:if(i.enableZoom===!1)return;Se(J);break;case a.PAN:if(i.enablePan===!1)return;lt(J);break}}function $e(J){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(J.preventDefault(),i.dispatchEvent(s),st(J),i.dispatchEvent(o))}function Be(J){i.enabled===!1||i.enablePan===!1||ut(J)}function Ve(J){switch(ft(J),C.length){case 1:switch(i.touches.ONE){case nl.ROTATE:if(i.enableRotate===!1)return;ot(),l=a.TOUCH_ROTATE;break;case nl.PAN:if(i.enablePan===!1)return;xe(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case nl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Pe(),l=a.TOUCH_DOLLY_PAN;break;case nl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Re(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function bt(J){switch(ft(J),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ae(J),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ie(J),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ze(J),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;U(J),i.update();break;default:l=a.NONE}}function Me(J){i.enabled!==!1&&J.preventDefault()}function We(J){C.push(J)}function pt(J){delete P[J.pointerId];for(let de=0;de<C.length;de++)if(C[de].pointerId==J.pointerId){C.splice(de,1);return}}function ft(J){let de=P[J.pointerId];de===void 0&&(de=new pe,P[J.pointerId]=de),de.set(J.pageX,J.pageY)}function je(J){const de=J.pointerId===C[0].pointerId?C[1]:C[0];return P[de.pointerId]}t!==void 0&&this.connect(t),this.update()}};function V0(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const yl="srgb",lo="srgb-linear",ZR=3001,m7=3e3;class fw extends Ai{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new _7(t)}),this.register(function(t){return new A7(t)}),this.register(function(t){return new P7(t)}),this.register(function(t){return new I7(t)}),this.register(function(t){return new B7(t)}),this.register(function(t){return new M7(t)}),this.register(function(t){return new w7(t)}),this.register(function(t){return new E7(t)}),this.register(function(t){return new C7(t)}),this.register(function(t){return new x7(t)}),this.register(function(t){return new T7(t)}),this.register(function(t){return new S7(t)}),this.register(function(t){return new R7(t)}),this.register(function(t){return new b7(t)}),this.register(function(t){return new v7(t)}),this.register(function(t){return new L7(t)}),this.register(function(t){return new D7(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=ca.extractUrlBase(e);o=ca.resolveURL(c,this.path)}else o=ca.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new cr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(f){t(f),s.manager.itemEnd(e)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(V0(new Uint8Array(e.slice(0,4)))===BF){try{o[Rt.KHR_BINARY_GLTF]=new F7(e)}catch(f){r&&r(f);return}s=JSON.parse(o[Rt.KHR_BINARY_GLTF].content)}else s=JSON.parse(V0(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new K7(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const f=this.pluginCallbacks[c](l);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,o[f.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const f=s.extensionsUsed[c],h=s.extensionsRequired||[];switch(f){case Rt.KHR_MATERIALS_UNLIT:o[f]=new y7;break;case Rt.KHR_DRACO_MESH_COMPRESSION:o[f]=new N7(s,this.dracoLoader);break;case Rt.KHR_TEXTURE_TRANSFORM:o[f]=new O7;break;case Rt.KHR_MESH_QUANTIZATION:o[f]=new U7;break;default:h.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function g7(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Rt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class v7{constructor(e){this.parser=e,this.name=Rt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const f=new De(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],lo);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new nw(f),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new tw(f),c.distance=h;break;case"spot":c=new ew(f),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,$s(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class y7{constructor(){this.name=Rt.KHR_MATERIALS_UNLIT}getMaterialType(){return ir}extendParams(e,t,i){const r=[];e.color=new De(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],lo),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,yl))}return Promise.all(r)}}class x7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class _7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new pe(a,a)}return Promise.all(s)}}class A7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class S7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class M7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new De(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],lo)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,yl)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class w7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class E7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new De().setRGB(a[0],a[1],a[2],lo),Promise.all(s)}}class C7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class T7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new De().setRGB(a[0],a[1],a[2],lo),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,yl)),Promise.all(s)}}class b7{constructor(e){this.parser=e,this.name=Rt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class R7{constructor(e){this.parser=e,this.name=Rt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Fr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class P7{constructor(e){this.parser=e,this.name=Rt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class I7{constructor(e){this.parser=e,this.name=Rt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class B7{constructor(e){this.parser=e,this.name=Rt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class L7{constructor(e){this.name=Rt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,f=r.count,h=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,h,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(f*h);return o.decodeGltfBuffer(new Uint8Array(m),f,h,p,r.mode,r.filter),m})})}else return null}}class D7{constructor(e){this.name=Rt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Er.TRIANGLES&&c.mode!==Er.TRIANGLE_STRIP&&c.mode!==Er.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(f=>(l[c]=f,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const f=c.pop(),h=f.isGroup?f.children:[f],p=c[0].count,m=[];for(const v of h){const A=new rt,x=new O,g=new jn,_=new O(1,1,1),S=new HM(v.geometry,v.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&_.fromBufferAttribute(l.SCALE,w),S.setMatrixAt(w,A.compose(x,g,_));for(const w in l)if(w==="_COLOR_0"){const R=l[w];S.instanceColor=new Hl(R.array,R.itemSize,R.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&v.geometry.setAttribute(w,l[w]);It.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),m.push(S)}return f.isGroup?(f.clear(),f.add(...m),f):m[0]}))}}const BF="glTF",Gf=12,eP={JSON:1313821514,BIN:5130562};class F7{constructor(e){this.name=Rt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Gf);if(this.header={magic:V0(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==BF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Gf,r=new DataView(e,Gf);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===eP.JSON){const l=new Uint8Array(e,Gf+s,o);this.content=V0(l)}else if(a===eP.BIN){const l=Gf+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class N7{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const f in o){const h=H1[f]||f.toLowerCase();a[h]=o[f]}for(const f in e.attributes){const h=H1[f]||f.toLowerCase();if(o[f]!==void 0){const p=i.accessors[e.attributes[f]],m=gu[p.componentType];c[h]=m.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(f){return new Promise(function(h,p){r.decodeDracoFile(f,function(m){for(const v in m.attributes){const A=m.attributes[v],x=l[v];x!==void 0&&(A.normalized=x)}h(m)},a,c,lo,p)})})}}class O7{constructor(){this.name=Rt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class U7{constructor(){this.name=Rt.KHR_MESH_QUANTIZATION}}class LF extends Ju{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,f=r-t,h=(i-t)/f,p=h*h,m=p*h,v=e*c,A=v-c,x=-2*m+3*p,g=m-p,_=1-x,S=g-p+h;for(let w=0;w!==a;w++){const R=o[A+w+a],b=o[A+w+l]*f,I=o[v+w+a],B=o[v+w]*f;s[w]=_*R+S*b+x*I+g*B}return s}}const k7=new jn;class H7 extends LF{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return k7.fromArray(s).normalize().toArray(s),s}}const Er={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},gu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tP={9728:Nn,9729:_n,9984:Mv,9985:hu,9986:dl,9987:Ir},nP={33071:nr,33648:Eu,10497:ha},q_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},H1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...u7>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Wo={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},z7={CUBICSPLINE:void 0,LINEAR:bu,STEP:Tu},Z_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function G7(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new bh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Bs})),n.DefaultMaterial}function $a(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function $s(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function V7(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,f=e.length;c<f;c++){const h=e[c];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,f=e.length;c<f;c++){const h=e[c];if(i){const p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(p)}if(r){const p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const f=c[0],h=c[1],p=c[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function W7(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function j7(n){let e;const t=n.extensions&&n.extensions[Rt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+eA(t.attributes):e=n.indices+":"+eA(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+eA(n.targets[i]);return e}function eA(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function z1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function X7(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const J7=new rt;class K7{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new g7,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new JD(this.options.manager):this.textureLoader=new tF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new cr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return $a(s,a,r),$s(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,f]of o.children.entries())s(f,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Rt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(ca.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=q_[r.type],a=gu[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Ut(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=q_[r.type],c=gu[r.componentType],f=c.BYTES_PER_ELEMENT,h=f*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let A,x;if(m&&m!==h){const g=Math.floor(p/m),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let S=t.cache.get(_);S||(A=new c(a,g*m,r.count*m/f),S=new Sh(A,m/f),t.cache.add(_,S)),x=new pa(S,l,p%m/f,v)}else a===null?A=new c(r.count*l):A=new c(a,p,r.count*l),x=new Ut(A,l,v);if(r.sparse!==void 0){const g=q_.SCALAR,_=gu[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,R=new _(o[1],S,r.sparse.count*g),b=new c(o[2],w,r.sparse.count*l);a!==null&&(x=new Ut(x.array.slice(),x.itemSize,x.normalized));for(let I=0,B=R.length;I<B;I++){const z=R[I];if(x.setX(z,b[I*l]),l>=2&&x.setY(z,b[I*l+1]),l>=3&&x.setZ(z,b[I*l+2]),l>=4&&x.setW(z,b[I*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=o.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return f.magFilter=tP[p.magFilter]||_n,f.minFilter=tP[p.minFilter]||Ir,f.wrapS=nP[p.wrapS]||ha,f.wrapT=nP[p.wrapT]||ha,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(A){const x=new en(A);x.needsUpdate=!0,p(x)}),t.load(ca.resolveURL(h,s.path),v,void 0,m)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),$s(h,o),h.userData.mimeType=o.mimeType||X7(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Rt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Rt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Rt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===ZR?yl:lo),"colorSpace"in o?o.colorSpace=r:o.encoding=r===yl?ZR:m7),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new wh,Pn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new _i,Pn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return bh}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Rt.KHR_MATERIALS_UNLIT]){const h=r[Rt.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new De(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],lo),a.opacity=p[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,yl)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Qr);const f=s.alphaMode||Z_.OPAQUE;if(f===Z_.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===Z_.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ir&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new pe(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&o!==ir&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ir){const h=s.emissiveFactor;a.emissive=new De().setRGB(h[0],h[1],h[2],lo)}return s.emissiveTexture!==void 0&&o!==ir&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,yl)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),$s(h,s),t.associations.set(h,{materials:e}),s.extensions&&$a(r,h,s),h})}createUniqueName(e){const t=Lt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Rt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return iP(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],f=j7(c),h=r[f];if(h)o.push(h.promise);else{let p;c.extensions&&c.extensions[Rt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=iP(new _t,c,t),r[f]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const f=o[l].material===void 0?G7(this.cache):this.getDependency("material",o[l].material);a.push(f)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),f=l[l.length-1],h=[];for(let m=0,v=f.length;m<v;m++){const A=f[m],x=o[m];let g;const _=c[m];if(x.mode===Er.TRIANGLES||x.mode===Er.TRIANGLE_STRIP||x.mode===Er.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new kM(A,_):new En(A,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===Er.TRIANGLE_STRIP?g.geometry=$R(g.geometry,CM):x.mode===Er.TRIANGLE_FAN&&(g.geometry=$R(g.geometry,O0));else if(x.mode===Er.LINES)g=new ls(A,_);else if(x.mode===Er.LINE_STRIP)g=new _o(A,_);else if(x.mode===Er.LINE_LOOP)g=new zM(A,_);else if(x.mode===Er.POINTS)g=new GM(A,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&W7(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),$s(g,s),x.extensions&&$a(r,g,x),t.assignFinalMaterial(g),h.push(g)}for(let m=0,v=h.length;m<v;m++)t.associations.set(h[m],{meshes:e,primitives:m});if(h.length===1)return s.extensions&&$a(r,h[0],s),h[0];const p=new io;s.extensions&&$a(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=h.length;m<v;m++)p.add(h[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new un(iD.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Ms(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),$s(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,f=o.length;c<f;c++){const h=o[c];if(h){a.push(h);const p=new rt;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Mh(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],f=[];for(let h=0,p=r.channels.length;h<p;h++){const m=r.channels[h],v=r.samplers[m.sampler],A=m.target,x=A.node,g=r.parameters!==void 0?r.parameters[v.input]:v.input,_=r.parameters!==void 0?r.parameters[v.output]:v.output;A.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",_)),c.push(v),f.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(f)]).then(function(h){const p=h[0],m=h[1],v=h[2],A=h[3],x=h[4],g=[];for(let _=0,S=p.length;_<S;_++){const w=p[_],R=m[_],b=v[_],I=A[_],B=x[_];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const z=i._createAnimationTracks(w,R,b,I,B);if(z)for(let C=0;C<z.length;C++)g.push(z[C])}return new Iu(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,f=a.length;c<f;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const f=c[0],h=c[1],p=c[2];p!==null&&f.traverse(function(m){m.isSkinnedMesh&&m.bind(p,J7)});for(let m=0,v=h.length;m<v;m++)f.add(h[m]);return f})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let f;if(s.isBone===!0?f=new Nv:c.length>1?f=new io:c.length===1?f=c[0]:f=new It,f!==c[0])for(let h=0,p=c.length;h<p;h++)f.add(c[h]);if(s.name&&(f.userData.name=s.name,f.name=o),$s(f,s),s.extensions&&$a(i,f,s),s.matrix!==void 0){const h=new rt;h.fromArray(s.matrix),f.applyMatrix4(h)}else s.translation!==void 0&&f.position.fromArray(s.translation),s.rotation!==void 0&&f.quaternion.fromArray(s.rotation),s.scale!==void 0&&f.scale.fromArray(s.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new io;i.name&&(s.name=r.createUniqueName(i.name)),$s(s,i),i.extensions&&$a(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let f=0,h=l.length;f<h;f++)s.add(l[f]);const c=f=>{const h=new Map;for(const[p,m]of r.associations)(p instanceof Pn||p instanceof en)&&h.set(p,m);return f.traverse(p=>{const m=r.associations.get(p);m!=null&&h.set(p,m)}),h};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Wo[s.path]===Wo.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(Wo[s.path]){case Wo.weights:c=Gl;break;case Wo.rotation:c=Vl;break;case Wo.position:case Wo.scale:c=Wl;break;default:switch(i.itemSize){case 1:c=Gl;break;case 2:case 3:default:c=Wl;break}break}const f=r.interpolation!==void 0?z7[r.interpolation]:bu,h=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const v=new c(l[p]+"."+Wo[s.path],t.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=z1(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Vl?H7:LF;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Y7(n,e,t){const i=e.attributes,r=new vi;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new O(l[0],l[1],l[2]),new O(c[0],c[1],c[2])),a.normalized){const f=z1(gu[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new O,l=new O;for(let c=0,f=s.length;c<f;c++){const h=s[c];if(h.POSITION!==void 0){const p=t.json.accessors[h.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const A=z1(gu[p.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Zn;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function iP(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=H1[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return $s(n,e),Y7(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?V7(n,e.targets,t):n})}const tA=new WeakMap;class $7 extends Ai{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new cr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(tA.has(e)){const l=tA.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,f)=>{r._callbacks[s]={resolve:c,reject:f},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),tA.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new _t;e.index&&t.setIndex(new Ut(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Ut(o,a))}return t}_loadLibrary(e,t){const i=new cr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=Q7.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Q7(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(f){n.onModuleLoaded=function(h){f({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(f=>{const h=f.draco,p=new h.Decoder,m=new h.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(h,p,m,c),A=v.attributes.map(x=>x.array.buffer);v.index&&A.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},A)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{h.destroy(m),h.destroy(p)}});break}};function t(o,a,l,c){const f=c.attributeIDs,h=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const A={index:null,attributes:[]};for(const x in f){const g=self[h[x]];let _,S;if(c.useUniqueIDs)S=f[x],_=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[f[x]]),S===-1)continue;_=a.GetAttribute(p,S)}A.attributes.push(r(o,a,p,x,g,_))}return v===o.TRIANGULAR_MESH&&(A.index=i(o,a,p)),o.destroy(p),A}function i(o,a,l){const f=l.num_faces()*3,h=f*4,p=o._malloc(h);a.GetTrianglesUInt32Array(l,h,p);const m=new Uint32Array(o.HEAPF32.buffer,p,f).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,c,f,h){const p=h.num_components(),v=l.num_points()*p,A=v*f.BYTES_PER_ELEMENT,x=s(o,f),g=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,h,x,A,g);const _=new f(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:_,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let qm;const nA=()=>{if(qm)return qm;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const p=new Uint8Array(h.length);for(let v=0;v<h.length;++v){const A=h.charCodeAt(v);p[v]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let m=0;for(let v=0;v<h.length;++v)p[m++]=p[v]<60?i[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(h,p,m,v,A,x){const g=s.exports.sbrk,_=m+3&-4,S=g(_*v),w=g(A.length),R=new Uint8Array(s.exports.memory.buffer);R.set(A,w);const b=h(S,m,v,w,A.length);if(b===0&&x&&x(S,_,v),p.set(R.subarray(S,S+m*v)),g(S-g(0)),b!==0)throw new Error(`Malformed buffer data: ${b}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return qm={ready:o,supported:!0,decodeVertexBuffer(h,p,m,v,A){l(s.exports.meshopt_decodeVertexBuffer,h,p,m,v,s.exports[c[A]])},decodeIndexBuffer(h,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,h,p,m,v)},decodeIndexSequence(h,p,m,v){l(s.exports.meshopt_decodeIndexSequence,h,p,m,v)},decodeGltfBuffer(h,p,m,v,A,x){l(s.exports[f[A]],h,p,m,v,s.exports[c[x]])}},qm},q7=()=>parseInt(zu.replace(/\D+/g,"")),DF=q7();let Zm=null,FF="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function NF(n,e,t){return i=>{t&&t(i),n&&(Zm||(Zm=new $7),Zm.setDecoderPath(typeof n=="string"?n:FF),i.setDRACOLoader(Zm)),e&&i.setMeshoptDecoder(typeof nA=="function"?nA():nA)}}function ey(n,e=!0,t=!0,i){return Ph(fw,n,NF(e,t,i))}ey.preload=(n,e=!0,t=!0,i)=>Ph.preload(fw,n,NF(e,t,i));ey.clear=n=>Ph.clear(fw,n);ey.setDecoderPath=n=>{FF=n};const Z7=D.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},f)=>{const h=Jr(b=>b.invalidate),p=Jr(b=>b.camera),m=Jr(b=>b.gl),v=Jr(b=>b.events),A=Jr(b=>b.setEvents),x=Jr(b=>b.set),g=Jr(b=>b.get),_=Jr(b=>b.performance),S=e||p,w=i||v.connected||m.domElement,R=D.useMemo(()=>new p7(S),[S]);return Zv(()=>{R.enabled&&R.update()},-1),D.useEffect(()=>(s&&R.connect(s===!0?w:s),R.connect(w),()=>void R.dispose()),[s,w,t,R,h]),D.useEffect(()=>{const b=z=>{h(),t&&_.regress(),o&&o(z)},I=z=>{a&&a(z)},B=z=>{l&&l(z)};return R.addEventListener("change",b),R.addEventListener("start",I),R.addEventListener("end",B),()=>{R.removeEventListener("start",I),R.removeEventListener("end",B),R.removeEventListener("change",b)}},[o,a,l,R,h,A]),D.useEffect(()=>{if(n){const b=g().controls;return x({controls:R}),()=>x({controls:b})}},[n,R]),D.createElement("primitive",ma({ref:f,object:R,enableDamping:r},c))});var OF={exports:{}},ej="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tj=ej,nj=tj;function UF(){}function kF(){}kF.resetWarningCache=UF;var ij=function(){function n(i,r,s,o,a,l){if(l!==nj){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:kF,resetWarningCache:UF};return t.PropTypes=t,t};OF.exports=ij();var HF=OF.exports;const iA=DF>=154?"opaque_fragment":"output_fragment";class rj extends wh{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${iA}>`,`
        ${r?`#include <${iA}>`:`#extension GL_OES_standard_derivatives : enable
#include <${iA}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${DF>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const sj=D.forwardRef((n,e)=>{const[t]=D.useState(()=>new rj(null));return D.createElement("primitive",ma({},n,{object:t,ref:e,attach:"material"}))});let Qa,Vf;const oj=D.createContext(null),rP=new rt,sP=new O,aj=D.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=D.useRef(null);D.useImperativeHandle(r,()=>s.current,[]);const[o,a]=D.useState([]),[[l,c,f]]=D.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);D.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Zv(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),rP.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),Qa=0;Qa<o.length;Qa++)Vf=o[Qa].current,Vf.getWorldPosition(sP).applyMatrix4(rP),sP.toArray(l,Qa*3),s.current.geometry.attributes.position.needsUpdate=!0,Vf.matrixWorldNeedsUpdate=!0,Vf.color.toArray(c,Qa*3),s.current.geometry.attributes.color.needsUpdate=!0,f.set([Vf.size],Qa),s.current.geometry.attributes.size.needsUpdate=!0});const h=D.useMemo(()=>({getParent:()=>s,subscribe:p=>(a(m=>[...m,p]),()=>a(m=>m.filter(v=>v.current!==p.current)))}),[]);return D.createElement("points",ma({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},i),D.createElement("bufferGeometry",null,D.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Cl}),D.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:Cl}),D.createElement("bufferAttribute",{attach:"attributes-size",count:f.length,array:f,itemSize:1,usage:Cl})),D.createElement(oj.Provider,{value:h},n))}),lj=D.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=D.useRef(null);return D.useImperativeHandle(o,()=>a.current,[]),Zv(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),D.createElement("points",ma({ref:a},s),D.createElement("bufferGeometry",null,D.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:Cl}),t&&D.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:Cl}),i&&D.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:Cl})),n)}),cj=D.forwardRef((n,e)=>n.positions instanceof Float32Array?D.createElement(lj,ma({},n,{ref:e})):D.createElement(aj,ma({},n,{ref:e})));function zF({all:n,scene:e,camera:t}){const i=Jr(({gl:o})=>o),r=Jr(({camera:o})=>o),s=Jr(({scene:o})=>o);return D.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,t||r);const a=new LM(128);new BM(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}const uj=()=>ie.jsx("div",{children:"Loader"}),fj=()=>{const n=ey("./planet/scene.gltf");return ie.jsx("primitive",{object:n.scene,scale:2,"position-y":0,"rotation-y":0})},dj=()=>ie.jsx(PF,{shadows:!0,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:ie.jsxs(D.Suspense,{fallback:ie.jsx(uj,{}),children:[ie.jsx(Z7,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),ie.jsx(fj,{}),ie.jsx(zF,{all:!0})]})});function ih(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const G1=n=>Array.isArray(n);function GF(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function rh(n){return typeof n=="string"||Array.isArray(n)}function oP(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function dw(n,e,t,i){if(typeof e=="function"){const[r,s]=oP(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=oP(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function ty(n,e,t){const i=n.getProps();return dw(i,e,t!==void 0?t:i.custom,n)}const hw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pw=["initial",...hw],Ih=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ta=new Set(Ih),co=n=>n*1e3,uo=n=>n/1e3,hj={type:"spring",stiffness:500,damping:25,restSpeed:10},pj=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),mj={type:"keyframes",duration:.8},gj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vj=(n,{keyframes:e})=>e.length>2?mj:Ta.has(n)?n.startsWith("scale")?pj(e[1]):hj:gj;function yj({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...f}){return!!Object.keys(f).length}function mw(n,e){return n[e]||n.default||n}const xj={skipAnimations:!1,useManualTiming:!1},_j=n=>n!==null;function ny(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(_j),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const yi=n=>n;function Aj(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,f=!1,h=!1)=>{const m=h&&i?e:t;return f&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],t.clear(),e.forEach(a),i=!1,r&&(r=!1,l.process(c))}};return l}const eg=["read","resolveKeyframes","update","preRender","render","postRender"],Sj=40;function VF(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=eg.reduce((g,_)=>(g[_]=Aj(s),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:f,render:h,postRender:p}=o,m=()=>{const g=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,Sj),1),r.timestamp=g,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),f.process(r),h.process(r),p.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(m))},v=()=>{t=!0,i=!0,r.isProcessing||n(m)};return{schedule:eg.reduce((g,_)=>{const S=o[_];return g[_]=(w,R=!1,b=!1)=>(t||v(),S.schedule(w,R,b)),g},{}),cancel:g=>{for(let _=0;_<eg.length;_++)o[eg[_]].cancel(g)},state:r,steps:o}}const{schedule:jt,cancel:Ao,state:Yn,steps:rA}=VF(typeof requestAnimationFrame<"u"?requestAnimationFrame:yi,!0),WF=n=>/^0[^.\s]+$/u.test(n);function Mj(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||WF(n):!0}let V1=yi;const jF=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),XF=n=>e=>typeof e=="string"&&e.startsWith(n),JF=XF("--"),wj=XF("var(--"),gw=n=>wj(n)?Ej.test(n.split("/*")[0].trim()):!1,Ej=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Cj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Tj(n){const e=Cj.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function KF(n,e,t=1){const[i,r]=Tj(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return jF(o)?parseFloat(o):o}return gw(r)?KF(r,e,t+1):r}const ga=(n,e,t)=>t>e?e:t<n?n:t,Ku={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},yd={...Ku,transform:n=>ga(0,1,n)},tg={...Ku,default:1},xd=n=>Math.round(n*1e5)/1e5,vw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,bj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,Rj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Bh(n){return typeof n=="string"}function Pj(n){return n==null}const Lh=n=>({test:e=>Bh(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Jo=Lh("deg"),Rs=Lh("%"),ht=Lh("px"),Ij=Lh("vh"),Bj=Lh("vw"),aP={...Rs,parse:n=>Rs.parse(n)/100,transform:n=>Rs.transform(n*100)},Lj=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),lP=n=>n===Ku||n===ht,cP=(n,e)=>parseFloat(n.split(", ")[e]),uP=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return cP(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?cP(s[1],n):0}},Dj=new Set(["x","y","z"]),Fj=Ih.filter(n=>!Dj.has(n));function Nj(n){const e=[];return Fj.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Lu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:uP(4,13),y:uP(5,14)};Lu.translateX=Lu.x;Lu.translateY=Lu.y;const YF=n=>e=>e.test(n),Oj={test:n=>n==="auto",parse:n=>n},$F=[Ku,ht,Rs,Jo,Bj,Ij,Oj],fP=n=>$F.find(YF(n)),Pl=new Set;let W1=!1,j1=!1;function QF(){if(j1){const n=Array.from(Pl).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=Nj(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}j1=!1,W1=!1,Pl.forEach(n=>n.complete()),Pl.clear()}function qF(){Pl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(j1=!0)})}function Uj(){qF(),QF()}class yw{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Pl.add(this),W1||(W1=!0,jt.read(qF),jt.resolveKeyframes(QF))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Pl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Pl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const xw=(n,e)=>t=>!!(Bh(t)&&Rj.test(t)&&t.startsWith(n)||e&&!Pj(t)&&Object.prototype.hasOwnProperty.call(t,e)),ZF=(n,e,t)=>i=>{if(!Bh(i))return i;const[r,s,o,a]=i.match(vw);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},kj=n=>ga(0,255,n),sA={...Ku,transform:n=>Math.round(kj(n))},xl={test:xw("rgb","red"),parse:ZF("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+sA.transform(n)+", "+sA.transform(e)+", "+sA.transform(t)+", "+xd(yd.transform(i))+")"};function Hj(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const X1={test:xw("#"),parse:Hj,transform:xl.transform},nu={test:xw("hsl","hue"),parse:ZF("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Rs.transform(xd(e))+", "+Rs.transform(xd(t))+", "+xd(yd.transform(i))+")"},fi={test:n=>xl.test(n)||X1.test(n)||nu.test(n),parse:n=>xl.test(n)?xl.parse(n):nu.test(n)?nu.parse(n):X1.parse(n),transform:n=>Bh(n)?n:n.hasOwnProperty("red")?xl.transform(n):nu.transform(n)};function zj(n){var e,t;return isNaN(n)&&Bh(n)&&(((e=n.match(vw))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(bj))===null||t===void 0?void 0:t.length)||0)>0}const eN="number",tN="color",Gj="var",Vj="var(",dP="${}",Wj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function sh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(Wj,l=>(fi.test(l)?(i.color.push(s),r.push(tN),t.push(fi.parse(l))):l.startsWith(Vj)?(i.var.push(s),r.push(Gj),t.push(l)):(i.number.push(s),r.push(eN),t.push(parseFloat(l))),++s,dP)).split(dP);return{values:t,split:a,indexes:i,types:r}}function nN(n){return sh(n).values}function iN(n){const{split:e,types:t}=sh(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===eN?s+=xd(r[o]):a===tN?s+=fi.transform(r[o]):s+=r[o]}return s}}const jj=n=>typeof n=="number"?0:n;function Xj(n){const e=nN(n);return iN(n)(e.map(jj))}const va={test:zj,parse:nN,createTransformer:iN,getAnimatableNone:Xj},Jj=new Set(["brightness","contrast","saturate","opacity"]);function Kj(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(vw)||[];if(!i)return n;const r=t.replace(i,"");let s=Jj.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Yj=/\b([a-z-]*)\(.*?\)/gu,J1={...va,getAnimatableNone:n=>{const e=n.match(Yj);return e?e.map(Kj).join(" "):n}},hP={...Ku,transform:Math.round},_w={borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,radius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,size:ht,top:ht,right:ht,bottom:ht,left:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,rotate:Jo,rotateX:Jo,rotateY:Jo,rotateZ:Jo,scale:tg,scaleX:tg,scaleY:tg,scaleZ:tg,skew:Jo,skewX:Jo,skewY:Jo,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:yd,originX:aP,originY:aP,originZ:ht,zIndex:hP,backgroundPositionX:ht,backgroundPositionY:ht,fillOpacity:yd,strokeOpacity:yd,numOctaves:hP},$j={..._w,color:fi,backgroundColor:fi,outlineColor:fi,fill:fi,stroke:fi,borderColor:fi,borderTopColor:fi,borderRightColor:fi,borderBottomColor:fi,borderLeftColor:fi,filter:J1,WebkitFilter:J1},Aw=n=>$j[n];function rN(n,e){let t=Aw(n);return t!==J1&&(t=va),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Qj=new Set(["auto","none","0"]);function qj(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!Qj.has(s)&&sh(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=rN(t,r)}class sN extends yw{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),gw(c))){const f=KF(c,t.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Lj.has(i)||e.length!==2)return;const[r,s]=e,o=fP(r),a=fP(s);if(o!==a)if(lP(o)&&lP(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)Mj(e[r])&&i.push(r);i.length&&qj(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Lu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Lu[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function oN(n){let e;return()=>(e===void 0&&(e=n()),e)}let Mg;function Zj(){Mg=void 0}const Ps={now:()=>(Mg===void 0&&Ps.set(Yn.isProcessing||xj.useManualTiming?Yn.timestamp:performance.now()),Mg),set:n=>{Mg=n,queueMicrotask(Zj)}},pP=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(va.test(n)||n==="0")&&!n.startsWith("url("));function eX(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function tX(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=pP(r,e),a=pP(s,e);return!o||!a?!1:eX(n)||t==="spring"&&i}const nX=40;class aN{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ps.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>nX?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Uj(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Ps.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!tX(e,i,r,s))if(o)this.options.duration=0;else{l==null||l(ny(e,this.options,t)),a==null||a(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,t);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...f},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function lN(n,e){return e?n*(1e3/e):0}const iX=5;function cN(n,e,t){const i=Math.max(e-iX,0);return lN(t-n(i),e-i)}const oA=.001,rX=.01,sX=10,oX=.05,aX=1;function lX({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=ga(oX,aX,o),n=ga(rX,sX,uo(n)),o<1?(r=c=>{const f=c*o,h=f*n,p=f-t,m=K1(c,o),v=Math.exp(-h);return oA-p/m*v},s=c=>{const h=c*o*n,p=h*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-h),A=K1(Math.pow(c,2),o);return(-r(c)+oA>0?-1:1)*((p-m)*v)/A}):(r=c=>{const f=Math.exp(-c*n),h=(c-t)*n+1;return-oA+f*h},s=c=>{const f=Math.exp(-c*n),h=(t-c)*(n*n);return f*h});const a=5/n,l=uX(r,s,a);if(n=co(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const cX=12;function uX(n,e,t){let i=t;for(let r=1;r<cX;r++)i=i-n(i)/e(i);return i}function K1(n,e){return n*Math.sqrt(1-e*e)}const fX=["duration","bounce"],dX=["stiffness","damping","mass"];function mP(n,e){return e.some(t=>n[t]!==void 0)}function hX(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!mP(n,dX)&&mP(n,fX)){const t=lX(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function uN({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,duration:f,velocity:h,isResolvedFromDuration:p}=hX({...i,velocity:-uo(i.velocity||0)}),m=h||0,v=l/(2*Math.sqrt(a*c)),A=s-r,x=uo(Math.sqrt(a/c)),g=Math.abs(A)<5;t||(t=g?.01:2),e||(e=g?.005:.5);let _;if(v<1){const S=K1(x,v);_=w=>{const R=Math.exp(-v*x*w);return s-R*((m+v*x*A)/S*Math.sin(S*w)+A*Math.cos(S*w))}}else if(v===1)_=S=>s-Math.exp(-x*S)*(A+(m+x*A)*S);else{const S=x*Math.sqrt(v*v-1);_=w=>{const R=Math.exp(-v*x*w),b=Math.min(S*w,300);return s-R*((m+v*x*A)*Math.sinh(b)+S*A*Math.cosh(b))/S}}return{calculatedDuration:p&&f||null,next:S=>{const w=_(S);if(p)o.done=S>=f;else{let R=0;v<1&&(R=S===0?co(m):cN(_,S,w));const b=Math.abs(R)<=t,I=Math.abs(s-w)<=e;o.done=b&&I}return o.value=o.done?s:w,o}}}function gP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:f}){const h=n[0],p={done:!1,value:h},m=B=>a!==void 0&&B<a||l!==void 0&&B>l,v=B=>a===void 0?l:l===void 0||Math.abs(a-B)<Math.abs(l-B)?a:l;let A=t*e;const x=h+A,g=o===void 0?x:o(x);g!==x&&(A=g-h);const _=B=>-A*Math.exp(-B/i),S=B=>g+_(B),w=B=>{const z=_(B),C=S(B);p.done=Math.abs(z)<=c,p.value=p.done?g:C};let R,b;const I=B=>{m(p.value)&&(R=B,b=uN({keyframes:[p.value,v(p.value)],velocity:cN(S,B,p.value),damping:r,stiffness:s,restDelta:c,restSpeed:f}))};return I(0),{calculatedDuration:null,next:B=>{let z=!1;return!b&&R===void 0&&(z=!0,w(B),I(B)),R!==void 0&&B>=R?b.next(B-R):(!z&&w(B),p)}}}const fN=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,pX=1e-7,mX=12;function gX(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=fN(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>pX&&++a<mX);return o}function Dh(n,e,t,i){if(n===e&&t===i)return yi;const r=s=>gX(s,0,1,n,t);return s=>s===0||s===1?s:fN(r(s),e,i)}const vX=Dh(.42,0,1,1),yX=Dh(0,0,.58,1),dN=Dh(.42,0,.58,1),xX=n=>Array.isArray(n)&&typeof n[0]!="number",hN=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,pN=n=>e=>1-n(1-e),Sw=n=>1-Math.sin(Math.acos(n)),mN=pN(Sw),_X=hN(Sw),gN=Dh(.33,1.53,.69,.99),Mw=pN(gN),AX=hN(Mw),SX=n=>(n*=2)<1?.5*Mw(n):.5*(2-Math.pow(2,-10*(n-1))),vP={linear:yi,easeIn:vX,easeInOut:dN,easeOut:yX,circIn:Sw,circInOut:_X,circOut:mN,backIn:Mw,backInOut:AX,backOut:gN,anticipate:SX},yP=n=>{if(Array.isArray(n)){V1(n.length===4);const[e,t,i,r]=n;return Dh(e,t,i,r)}else if(typeof n=="string")return V1(vP[n]!==void 0),vP[n];return n},MX=(n,e)=>t=>e(n(t)),fo=(...n)=>n.reduce(MX),oh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},dn=(n,e,t)=>n+(e-n)*t;function aA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function wX({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=aA(l,a,n+1/3),s=aA(l,a,n),o=aA(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function W0(n,e){return t=>t>0?e:n}const lA=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},EX=[X1,xl,nu],CX=n=>EX.find(e=>e.test(n));function xP(n){const e=CX(n);if(!e)return!1;let t=e.parse(n);return e===nu&&(t=wX(t)),t}const _P=(n,e)=>{const t=xP(n),i=xP(e);if(!t||!i)return W0(n,e);const r={...t};return s=>(r.red=lA(t.red,i.red,s),r.green=lA(t.green,i.green,s),r.blue=lA(t.blue,i.blue,s),r.alpha=dn(t.alpha,i.alpha,s),xl.transform(r))},Y1=new Set(["none","hidden"]);function TX(n,e){return Y1.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function bX(n,e){return t=>dn(n,e,t)}function ww(n){return typeof n=="number"?bX:typeof n=="string"?gw(n)?W0:fi.test(n)?_P:IX:Array.isArray(n)?vN:typeof n=="object"?fi.test(n)?_P:RX:W0}function vN(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>ww(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function RX(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=ww(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function PX(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const IX=(n,e)=>{const t=va.createTransformer(e),i=sh(n),r=sh(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Y1.has(n)&&!r.values.length||Y1.has(e)&&!i.values.length?TX(n,e):fo(vN(PX(i,r),r.values),t):W0(n,e)};function yN(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?dn(n,e,t):ww(n)(n,e)}function BX(n,e,t){const i=[],r=t||yN,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||yi:e;a=fo(l,a)}i.push(a)}return i}function LX(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(V1(s===e.length),s===1)return()=>e[0];if(s===2&&n[0]===n[1])return()=>e[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=BX(e,i,r),a=o.length,l=c=>{let f=0;if(a>1)for(;f<n.length-2&&!(c<n[f+1]);f++);const h=oh(n[f],n[f+1],c);return o[f](h)};return t?c=>l(ga(n[0],n[s-1],c)):l}function DX(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=oh(0,e,i);n.push(dn(t,1,r))}}function FX(n){const e=[0];return DX(e,n.length-1),e}function NX(n,e){return n.map(t=>t*e)}function OX(n,e){return n.map(()=>e||dN).splice(0,n.length-1)}function j0({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=xX(i)?i.map(yP):yP(i),s={done:!1,value:e[0]},o=NX(t&&t.length===e.length?t:FX(e),n),a=LX(o,e,{ease:Array.isArray(r)?r:OX(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const AP=2e4;function UX(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<AP;)e+=t,i=n.next(e);return e>=AP?1/0:e}const kX=n=>{const e=({timestamp:t})=>n(t);return{start:()=>jt.update(e,!0),stop:()=>Ao(e),now:()=>Yn.isProcessing?Yn.timestamp:Ps.now()}},HX={decay:gP,inertia:gP,tween:j0,keyframes:j0,spring:uN},zX=n=>n/100;class Ew extends aN{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||yw,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=HX[t]||j0;let l,c;a!==j0&&typeof e[0]!="number"&&(l=fo(zX,yN(e[0],e[1])),e=[0,100]);const f=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=UX(f));const{calculatedDuration:h}=f,p=h+r,m=p*(i+1)-r;return{generator:f,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:B}=this.options;return{done:!0,value:B[B.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:f,resolvedDuration:h}=i;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:v,repeatDelay:A,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),_=this.speed>=0?g<0:g>f;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let S=this.currentTime,w=s;if(m){const B=Math.min(this.currentTime,f)/h;let z=Math.floor(B),C=B%1;!C&&B>=1&&(C=1),C===1&&z--,z=Math.min(z,m+1),!!(z%2)&&(v==="reverse"?(C=1-C,A&&(C-=A/h)):v==="mirror"&&(w=o)),S=ga(0,1,C)*h}const R=_?{done:!1,value:l[0]}:w.next(S);a&&(R.value=a(R.value));let{done:b}=R;!_&&c!==null&&(b=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return I&&r!==void 0&&(R.value=ny(l,this.options,r)),x&&x(R.value),I&&this.finish(),R}get duration(){const{resolved:e}=this;return e?uo(e.calculatedDuration):0}get time(){return uo(this.currentTime)}set time(e){e=co(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=uo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=kX,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const xN=new Set(["opacity","clipPath","filter","transform"]),_N=n=>Array.isArray(n)&&typeof n[0]=="number";function AN(n){return!!(!n||typeof n=="string"&&n in Cw||_N(n)||Array.isArray(n)&&n.every(AN))}const qf=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Cw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qf([0,.65,.55,1]),circOut:qf([.55,0,1,.45]),backIn:qf([.31,.01,.66,-.59]),backOut:qf([.33,1.53,.69,.99])};function GX(n){return SN(n)||Cw.easeOut}function SN(n){if(n)return _N(n)?qf(n):Array.isArray(n)?n.map(GX):Cw[n]}function VX(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const f=SN(a);return Array.isArray(f)&&(c.easing=f),n.animate(c,{delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const WX=oN(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),X0=10,jX=2e4;function XX(n){return n.type==="spring"||!AN(n.ease)}function JX(n,e){const t=new Ew({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<jX;)i=t.sample(s),r.push(i.value),s+=X0;return{times:void 0,keyframes:r,duration:s-X0,ease:"linear"}}class SP extends aN{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new sN(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){var i;let{duration:r=300,times:s,ease:o,type:a,motionValue:l,name:c,startTime:f}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(XX(this.options)){const{onComplete:p,onUpdate:m,motionValue:v,element:A,...x}=this.options,g=JX(e,x);e=g.keyframes,e.length===1&&(e[1]=e[0]),r=g.duration,s=g.times,o=g.ease,a="keyframes"}const h=VX(l.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return h.startTime=f??this.calcStartTime(),this.pendingTimeline?(h.timeline=this.pendingTimeline,this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:p}=this.options;l.set(ny(e,this.options,t)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return uo(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return uo(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=co(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return yi;const{animation:i}=t;i.timeline=e,i.onfinish=null}return yi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:f,onComplete:h,element:p,...m}=this.options,v=new Ew({...m,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),A=co(this.time);c.setWithVelocity(v.sample(A-X0).value,v.sample(A).value,X0)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;return WX()&&i&&xN.has(i)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}function KX(n,e){let t;const i=()=>{const{currentTime:r}=e,o=(r===null?0:r.value)/100;t!==o&&n(o),t=o};return jt.update(i,!0),()=>Ao(i)}const YX=oN(()=>window.ScrollTimeline!==void 0);class $X{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e){const t=this.animations.map(i=>{if(YX()&&i.attachTimeline)i.attachTimeline(e);else return i.pause(),KX(r=>{i.time=i.duration*r},e)});return()=>{t.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Tw=(n,e,t,i={},r,s,o)=>a=>{const l=mw(i,n)||{},c=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-co(c);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete(),o&&o()},onStop:o,name:n,motionValue:e,element:s?void 0:r};yj(l)||(h={...h,...vj(n,h)}),h.duration&&(h.duration=co(h.duration)),h.repeatDelay&&(h.repeatDelay=co(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const m=ny(h.keyframes,l);if(m!==void 0)return jt.update(()=>{h.onUpdate(m),h.onComplete()}),new $X([])}return!s&&SP.supports(h)?new SP(h):new Ew(h)},QX=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),qX=n=>G1(n)?n[n.length-1]||0:n;function iy(n,e){n.indexOf(e)===-1&&n.push(e)}function ry(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class bw{constructor(){this.subscriptions=[]}add(e){return iy(this.subscriptions,e),()=>ry(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MP=30,ZX=n=>!isNaN(parseFloat(n));class MN{constructor(e,t={}){this.version="11.5.6",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Ps.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ps.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new bw);const i=this.events[e].add(t);return e==="change"?()=>{i(),jt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ps.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MP)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MP);return lN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ah(n,e){return new MN(n,e)}function eJ(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ah(t))}function tJ(n,e){const t=ty(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=qX(s[o]);eJ(n,o,a)}}const sy=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nJ="framerAppearId",wN="data-"+sy(nJ);function EN(n){return n.props[wN]}function CN(n){if(Ta.has(n))return"transform";if(xN.has(n))return sy(n)}class iJ extends MN{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(e){const t=CN(e);if(!t)return;const i=this.counts.get(t)||0;this.counts.set(t,i+1),i===0&&(this.output.push(t),this.update());let r=!1;return()=>{if(r)return;r=!0;const s=this.counts.get(t)-1;this.counts.set(t,s),s===0&&(ry(this.output,t),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}const gi=n=>!!(n&&n.getVelocity);function rJ(n){return!!(gi(n)&&n.add)}function $1(n,e){var t;if(!n.applyWillChange)return;let i=n.getValue("willChange");if(!i&&!(!((t=n.props.style)===null||t===void 0)&&t.willChange)&&(i=new iJ("auto"),n.addValue("willChange",i)),rJ(i))return i.add(e)}function sJ({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function TN(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const h in l){const p=n.getValue(h,(s=n.latestValues[h])!==null&&s!==void 0?s:null),m=l[h];if(m===void 0||f&&sJ(f,h))continue;const v={delay:t,...mw(o||{},h)};let A=!1;if(window.MotionHandoffAnimation){const g=EN(n);if(g){const _=window.MotionHandoffAnimation(g,h,jt);_!==null&&(v.startTime=_,A=!0)}}p.start(Tw(h,p,m,n.shouldReduceMotion&&Ta.has(h)?{type:!1}:v,n,A,$1(n,h)));const x=p.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{jt.update(()=>{a&&tJ(n,a)})}),c}function Q1(n,e,t={}){var i;const r=ty(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(TN(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:p}=s;return oJ(n,e,f+c,h,p,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,f]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>f())}else return Promise.all([o(),a(t.delay)])}function oJ(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(aJ).forEach((c,f)=>{c.notify("AnimationStart",e),o.push(Q1(c,e,{...s,delay:t+l(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function aJ(n,e){return n.sortNodePosition(e)}function lJ(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Q1(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=Q1(n,e,t);else{const r=typeof e=="function"?ty(n,e,t.custom):e;i=Promise.all(TN(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const cJ=pw.length;function bN(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?bN(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<cJ;t++){const i=pw[t],r=n.props[i];(rh(r)||r===!1)&&(e[i]=r)}return e}const uJ=[...hw].reverse(),fJ=hw.length;function dJ(n){return e=>Promise.all(e.map(({animation:t,options:i})=>lJ(n,t,i)))}function hJ(n){let e=dJ(n),t=wP(),i=!0;const r=l=>(c,f)=>{var h;const p=ty(n,f,l==="exit"?(h=n.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:v,...A}=p;c={...c,...A,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,f=bN(n.parent)||{},h=[],p=new Set;let m={},v=1/0;for(let x=0;x<fJ;x++){const g=uJ[x],_=t[g],S=c[g]!==void 0?c[g]:f[g],w=rh(S),R=g===l?_.isActive:null;R===!1&&(v=x);let b=S===f[g]&&S!==c[g]&&w;if(b&&i&&n.manuallyAnimateOnMount&&(b=!1),_.protectedKeys={...m},!_.isActive&&R===null||!S&&!_.prevProp||ih(S)||typeof S=="boolean")continue;const I=pJ(_.prevProp,S);let B=I||g===l&&_.isActive&&!b&&w||x>v&&w,z=!1;const C=Array.isArray(S)?S:[S];let P=C.reduce(r(g),{});R===!1&&(P={});const{prevResolvedValues:j={}}=_,X={...j,...P},ee=K=>{B=!0,p.has(K)&&(z=!0,p.delete(K)),_.needsAnimating[K]=!0;const L=n.getValue(K);L&&(L.liveStyle=!1)};for(const K in X){const L=P[K],G=j[K];if(m.hasOwnProperty(K))continue;let V=!1;G1(L)&&G1(G)?V=!GF(L,G):V=L!==G,V?L!=null?ee(K):p.add(K):L!==void 0&&p.has(K)?ee(K):_.protectedKeys[K]=!0}_.prevProp=S,_.prevResolvedValues=P,_.isActive&&(m={...m,...P}),i&&n.blockInitialAnimation&&(B=!1),B&&(!(b&&I)||z)&&h.push(...C.map(K=>({animation:K,options:{type:g}})))}if(p.size){const x={};p.forEach(g=>{const _=n.getBaseTarget(g),S=n.getValue(g);S&&(S.liveStyle=!0),x[g]=_??null}),h.push({animation:x})}let A=!!h.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(h):Promise.resolve()}function a(l,c){var f;if(t[l].isActive===c)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),t[l].isActive=c;const h=o(l);for(const p in t)t[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=wP(),i=!0}}}function pJ(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!GF(e,n):!1}function qa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wP(){return{animate:qa(!0),whileInView:qa(),whileHover:qa(),whileTap:qa(),whileDrag:qa(),whileFocus:qa(),exit:qa()}}class ba{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mJ extends ba{constructor(e){super(e),e.animationState||(e.animationState=hJ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ih(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let gJ=0;class vJ extends ba{constructor(){super(...arguments),this.id=gJ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const yJ={animation:{Feature:mJ},exit:{Feature:vJ}},RN=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function oy(n,e="page"){return{point:{x:n[`${e}X`],y:n[`${e}Y`]}}}const xJ=n=>e=>RN(e)&&n(e,oy(e));function so(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function ho(n,e,t,i){return so(n,e,xJ(t),i)}const EP=(n,e)=>Math.abs(n-e);function _J(n,e){const t=EP(n.x,e.x),i=EP(n.y,e.y);return Math.sqrt(t**2+i**2)}class PN{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=uA(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=_J(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=h,{timestamp:A}=Yn;this.history.push({...v,timestamp:A});const{onStart:x,onMove:g}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=cA(p,this.transformPagePoint),jt.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=uA(h.type==="pointercancel"?this.lastMoveEventInfo:cA(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),v&&v(h,x)},!RN(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=oy(e),a=cA(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Yn;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=t;f&&f(e,uA(a,this.history)),this.removeListeners=fo(ho(this.contextWindow,"pointermove",this.handlePointerMove),ho(this.contextWindow,"pointerup",this.handlePointerUp),ho(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ao(this.updatePoint)}}function cA(n,e){return e?{point:e(n.point)}:n}function CP(n,e){return{x:n.x-e.x,y:n.y-e.y}}function uA({point:n},e){return{point:n,delta:CP(n,IN(e)),offset:CP(n,AJ(e)),velocity:SJ(e,.1)}}function AJ(n){return n[0]}function IN(n){return n[n.length-1]}function SJ(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=IN(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>co(e)));)t--;if(!i)return{x:0,y:0};const s=uo(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function BN(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const TP=BN("dragHorizontal"),bP=BN("dragVertical");function LN(n){let e=!1;if(n==="y")e=bP();else if(n==="x")e=TP();else{const t=TP(),i=bP();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function DN(){const n=LN(!0);return n?(n(),!1):!0}function iu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}const FN=1e-4,MJ=1-FN,wJ=1+FN,NN=.01,EJ=0-NN,CJ=0+NN;function ur(n){return n.max-n.min}function TJ(n,e,t){return Math.abs(n-e)<=t}function RP(n,e,t,i=.5){n.origin=i,n.originPoint=dn(e.min,e.max,n.origin),n.scale=ur(t)/ur(e),n.translate=dn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=MJ&&n.scale<=wJ||isNaN(n.scale))&&(n.scale=1),(n.translate>=EJ&&n.translate<=CJ||isNaN(n.translate))&&(n.translate=0)}function _d(n,e,t,i){RP(n.x,e.x,t.x,i?i.originX:void 0),RP(n.y,e.y,t.y,i?i.originY:void 0)}function PP(n,e,t){n.min=t.min+e.min,n.max=n.min+ur(e)}function bJ(n,e,t){PP(n.x,e.x,t.x),PP(n.y,e.y,t.y)}function IP(n,e,t){n.min=e.min-t.min,n.max=n.min+ur(e)}function Ad(n,e,t){IP(n.x,e.x,t.x),IP(n.y,e.y,t.y)}function RJ(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?dn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?dn(t,n,i.max):Math.min(n,t)),n}function BP(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function PJ(n,{top:e,left:t,bottom:i,right:r}){return{x:BP(n.x,t,r),y:BP(n.y,e,i)}}function LP(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function IJ(n,e){return{x:LP(n.x,e.x),y:LP(n.y,e.y)}}function BJ(n,e){let t=.5;const i=ur(n),r=ur(e);return r>i?t=oh(e.min,e.max-i,n.min):i>r&&(t=oh(n.min,n.max-r,e.min)),ga(0,1,t)}function LJ(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const q1=.35;function DJ(n=q1){return n===!1?n=0:n===!0&&(n=q1),{x:DP(n,"left","right"),y:DP(n,"top","bottom")}}function DP(n,e,t){return{min:FP(n,e),max:FP(n,t)}}function FP(n,e){return typeof n=="number"?n:n[e]||0}const NP=()=>({translate:0,scale:1,origin:0,originPoint:0}),ru=()=>({x:NP(),y:NP()}),OP=()=>({min:0,max:0}),Mn=()=>({x:OP(),y:OP()});function wr(n){return[n("x"),n("y")]}function ON({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function FJ({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function NJ(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function fA(n){return n===void 0||n===1}function Z1({scale:n,scaleX:e,scaleY:t}){return!fA(n)||!fA(e)||!fA(t)}function sl(n){return Z1(n)||UN(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function UN(n){return UP(n.x)||UP(n.y)}function UP(n){return n&&n!=="0%"}function J0(n,e,t){const i=n-t,r=e*i;return t+r}function kP(n,e,t,i,r){return r!==void 0&&(n=J0(n,r,i)),J0(n,t,i)+e}function eS(n,e=0,t=1,i,r){n.min=kP(n.min,e,t,i,r),n.max=kP(n.max,e,t,i,r)}function kN(n,{x:e,y:t}){eS(n.x,e.translate,e.scale,e.originPoint),eS(n.y,t.translate,t.scale,t.originPoint)}const HP=.999999999999,zP=1.0000000000001;function OJ(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ou(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,kN(n,o)),i&&sl(s.latestValues)&&ou(n,s.latestValues))}e.x<zP&&e.x>HP&&(e.x=1),e.y<zP&&e.y>HP&&(e.y=1)}function su(n,e){n.min=n.min+e,n.max=n.max+e}function GP(n,e,t,i,r=.5){const s=dn(n.min,n.max,r);eS(n,e,t,s,i)}function ou(n,e){GP(n.x,e.x,e.scaleX,e.scale,e.originX),GP(n.y,e.y,e.scaleY,e.scale,e.originY)}function HN(n,e){return ON(NJ(n.getBoundingClientRect(),e))}function UJ(n,e,t){const i=HN(n,t),{scroll:r}=e;return r&&(su(i.x,r.offset.x),su(i.y,r.offset.y)),i}const zN=({current:n})=>n?n.ownerDocument.defaultView:null,kJ=new WeakMap;class HJ{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(oy(f,"page").point)},s=(f,h)=>{var p;const{drag:m,dragPropagation:v,onDragStart:A}=this.getProps();if(m&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=LN(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wr(g=>{let _=this.getAxisMotionValue(g).get()||0;if(Rs.test(_)){const{projection:S}=this.visualElement;if(S&&S.layout){const w=S.layout.layoutBox[g];w&&(_=ur(w)*(parseFloat(_)/100))}}this.originPoint[g]=_}),A&&jt.postRender(()=>A(f,h)),(p=this.removeWillChange)===null||p===void 0||p.call(this),this.removeWillChange=$1(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(f,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:A}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=zJ(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),A&&A(f,h)},a=(f,h)=>this.stop(f,h),l=()=>wr(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new PN(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:zN(this.visualElement)})}stop(e,t){var i;(i=this.removeWillChange)===null||i===void 0||i.call(this);const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&jt.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!ng(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=RJ(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&iu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=PJ(r.layoutBox,t):this.constraints=!1,this.elastic=DJ(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=LJ(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!iu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=UJ(i,r.root,this.visualElement.getTransformPagePoint());let o=IJ(r.layout.layoutBox,s);if(t){const a=t(FJ(o));this.hasMutatedConstraints=!!a,a&&(o=ON(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=wr(f=>{if(!ng(f,t,this.currentDirection))return;let h=l&&l[f]||{};o&&(h={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[f]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(f,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(Tw(e,i,0,t,this.visualElement,!1,$1(this.visualElement,e)))}stopAnimation(){wr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){wr(t=>{const{drag:i}=this.getProps();if(!ng(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-dn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!iu(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};wr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=BJ({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),wr(o=>{if(!ng(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(dn(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;kJ.set(this.visualElement,this);const e=this.visualElement.current,t=ho(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();iu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),jt.read(i);const o=so(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(wr(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=l[f].translate,h.set(h.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=q1,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ng(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function zJ(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class GJ extends ba{constructor(e){super(e),this.removeGroupControls=yi,this.removeListeners=yi,this.controls=new HJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yi}unmount(){this.removeGroupControls(),this.removeListeners()}}const VP=n=>(e,t)=>{n&&jt.postRender(()=>n(e,t))};class VJ extends ba{constructor(){super(...arguments),this.removePointerDownListener=yi}onPointerDown(e){this.session=new PN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:VP(e),onStart:VP(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&jt.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=ho(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Rw=D.createContext(null);function WJ(){const n=D.useContext(Rw);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=D.useId();D.useEffect(()=>i(r),[]);const s=D.useCallback(()=>t&&t(r),[r,t]);return!e&&t?[!1,s]:[!0]}const GN=D.createContext({}),VN=D.createContext({}),wg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WP(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Wf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ht.test(n))n=parseFloat(n);else return n;const t=WP(n,e.target.x),i=WP(n,e.target.y);return`${t}% ${i}%`}},jJ={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=va.parse(n);if(r.length>5)return i;const s=va.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=dn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}},K0={};function XJ(n){Object.assign(K0,n)}const{schedule:Pw,cancel:cee}=VF(queueMicrotask,!1);class JJ extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;XJ(KJ),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),wg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||jt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Pw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function WN(n){const[e,t]=WJ(),i=D.useContext(GN);return ie.jsx(JJ,{...n,layoutGroup:i,switchLayoutGroup:D.useContext(VN),isPresent:e,safeToRemove:t})}const KJ={borderRadius:{...Wf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wf,borderTopRightRadius:Wf,borderBottomLeftRadius:Wf,borderBottomRightRadius:Wf,boxShadow:jJ},jN=["TopLeft","TopRight","BottomLeft","BottomRight"],YJ=jN.length,jP=n=>typeof n=="string"?parseFloat(n):n,XP=n=>typeof n=="number"||ht.test(n);function $J(n,e,t,i,r,s){r?(n.opacity=dn(0,t.opacity!==void 0?t.opacity:1,QJ(i)),n.opacityExit=dn(e.opacity!==void 0?e.opacity:1,0,qJ(i))):s&&(n.opacity=dn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<YJ;o++){const a=`border${jN[o]}Radius`;let l=JP(e,a),c=JP(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||XP(l)===XP(c)?(n[a]=Math.max(dn(jP(l),jP(c),i),0),(Rs.test(c)||Rs.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=dn(e.rotate||0,t.rotate||0,i))}function JP(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const QJ=XN(0,.5,mN),qJ=XN(.5,.95,yi);function XN(n,e,t){return i=>i<n?0:i>e?1:t(oh(n,e,i))}function KP(n,e){n.min=e.min,n.max=e.max}function Mr(n,e){KP(n.x,e.x),KP(n.y,e.y)}function YP(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function $P(n,e,t,i,r){return n-=e,n=J0(n,1/t,i),r!==void 0&&(n=J0(n,1/r,i)),n}function ZJ(n,e=0,t=1,i=.5,r,s=n,o=n){if(Rs.test(e)&&(e=parseFloat(e),e=dn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=dn(s.min,s.max,i);n===s&&(a-=e),n.min=$P(n.min,e,t,a,r),n.max=$P(n.max,e,t,a,r)}function QP(n,e,[t,i,r],s,o){ZJ(n,e[t],e[i],e[r],e.scale,s,o)}const eK=["x","scaleX","originX"],tK=["y","scaleY","originY"];function qP(n,e,t,i){QP(n.x,e,eK,t?t.x:void 0,i?i.x:void 0),QP(n.y,e,tK,t?t.y:void 0,i?i.y:void 0)}function ZP(n){return n.translate===0&&n.scale===1}function JN(n){return ZP(n.x)&&ZP(n.y)}function e2(n,e){return n.min===e.min&&n.max===e.max}function nK(n,e){return e2(n.x,e.x)&&e2(n.y,e.y)}function t2(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function KN(n,e){return t2(n.x,e.x)&&t2(n.y,e.y)}function n2(n){return ur(n.x)/ur(n.y)}function i2(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class iK{constructor(){this.members=[]}add(e){iy(this.members,e),e.scheduleRender()}remove(e){if(ry(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rK(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:f,rotateX:h,rotateY:p,skewX:m,skewY:v}=t;c&&(i=`perspective(${c}px) ${i}`),f&&(i+=`rotate(${f}deg) `),h&&(i+=`rotateX(${h}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const sK=(n,e)=>n.depth-e.depth;class oK{constructor(){this.children=[],this.isDirty=!1}add(e){iy(this.children,e),this.isDirty=!0}remove(e){ry(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sK),this.isDirty=!1,this.children.forEach(e)}}function Eg(n){const e=gi(n)?n.get():n;return QX(e)?e.toValue():e}function aK(n,e){const t=Ps.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Ao(i),n(s-e))};return jt.read(i,!0),()=>Ao(i)}function lK(n){return n instanceof SVGElement&&n.tagName!=="svg"}function cK(n,e,t){const i=gi(n)?n:ah(n);return i.start(Tw("",i,e,t)),i.animation}const ol={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Zf=typeof window<"u"&&window.MotionDebug!==void 0,dA=["","X","Y","Z"],uK={visibility:"hidden"},r2=1e3;let fK=0;function hA(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function YN(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=EN(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",jt,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&YN(i)}function $N({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=fK++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Zf&&(ol.totalNodes=ol.resolvedTargetDeltas=ol.recalculatedProjection=0),this.nodes.forEach(pK),this.nodes.forEach(xK),this.nodes.forEach(_K),this.nodes.forEach(mK),Zf&&window.MotionDebug.record(ol)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new oK)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new bw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=lK(o),this.instance=o;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let h;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=aK(p,250),wg.hasAnimatedSinceResize&&(wg.hasAnimatedSinceResize=!1,this.nodes.forEach(o2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||f.getDefaultTransition()||EK,{onLayoutAnimationStart:x,onLayoutAnimationComplete:g}=f.getProps(),_=!this.targetLayout||!KN(this.targetLayout,v)||m,S=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,S);const w={...mw(A,"layout"),onPlay:x,onComplete:g};(f.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||o2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ao(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&YN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(s2);return}this.isUpdating||this.nodes.forEach(vK),this.isUpdating=!1,this.nodes.forEach(yK),this.nodes.forEach(dK),this.nodes.forEach(hK),this.clearAllSnapshots();const a=Ps.now();Yn.delta=ga(0,1e3/60,a-Yn.timestamp),Yn.timestamp=a,Yn.isProcessing=!0,rA.update.process(Yn),rA.preRender.process(Yn),rA.render.process(Yn),Yn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gK),this.sharedNodes.forEach(SK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!JN(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;o&&(a||sl(this.latestValues)||f)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),CK(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Mn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(TK))){const{scroll:f}=this.root;f&&(su(l.x,f.offset.x),su(l.y,f.offset.y))}return l}removeElementScroll(o){var a;const l=Mn();if(Mr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:h,options:p}=f;f!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Mr(l,o),su(l.x,h.offset.x),su(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Mn();Mr(l,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&ou(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),sl(f.latestValues)&&ou(l,f.latestValues)}return sl(this.latestValues)&&ou(l,this.latestValues),l}removeTransform(o){const a=Mn();Mr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!sl(c.latestValues))continue;Z1(c.latestValues)&&c.updateSnapshot();const f=Mn(),h=c.measurePageBox();Mr(f,h),qP(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return sl(this.latestValues)&&qP(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Yn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),Ad(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Mn(),this.targetWithTransforms=Mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mr(this.target,this.layout.layoutBox),kN(this.target,this.targetDelta)):Mr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),Ad(this.relativeTargetOrigin,this.target,m.target),Mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zf&&ol.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Z1(this.parent.latestValues)||UN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Yn.timestamp&&(c=!1),c)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;Mr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;OJ(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Mn());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YP(this.prevProjectionDelta.x,this.projectionDelta.x),YP(this.prevProjectionDelta.y,this.projectionDelta.y)),_d(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!i2(this.projectionDelta.x,this.prevProjectionDelta.x)||!i2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Zf&&ol.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ru(),this.projectionDelta=ru(),this.projectionDeltaWithTransform=ru()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},h=ru();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Mn(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,A=m!==v,x=this.getStack(),g=!x||x.members.length<=1,_=!!(A&&!g&&this.options.crossfade===!0&&!this.path.some(wK));this.animationProgress=0;let S;this.mixTargetDelta=w=>{const R=w/1e3;a2(h.x,o.x,R),a2(h.y,o.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ad(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MK(this.relativeTarget,this.relativeTargetOrigin,p,R),S&&nK(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Mn()),Mr(S,this.relativeTarget)),A&&(this.animationValues=f,$J(f,c,this.latestValues,R,_,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ao(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jt.update(()=>{wg.hasAnimatedSinceResize=!0,this.currentAnimation=cK(0,r2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(r2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:f}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&QN(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Mn();const h=ur(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=ur(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Mr(a,l),ou(a,f),_d(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new iK),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&hA("z",o,c,this.animationValues);for(let f=0;f<dA.length;f++)hA(`rotate${dA[f]}`,o,c,this.animationValues),hA(`skew${dA[f]}`,o,c,this.animationValues);o.render();for(const f in c)o.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return uK;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Eg(o==null?void 0:o.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=Eg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!sl(this.latestValues)&&(A.transform=f?f({},""):"none",this.hasProjected=!1),A}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=rK(this.projectionDeltaWithTransform,this.treeScale,p),f&&(c.transform=f(p,c.transform));const{x:m,y:v}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in K0){if(p[A]===void 0)continue;const{correct:x,applyTo:g}=K0[A],_=c.transform==="none"?p[A]:x(p[A],h);if(g){const S=g.length;for(let w=0;w<S;w++)c[g[w]]=_}else c[A]=_}return this.options.layoutId&&(c.pointerEvents=h===this?Eg(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(s2),this.root.sharedNodes.clear()}}}function dK(n){n.updateLayout()}function hK(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?wr(h=>{const p=o?t.measuredBox[h]:t.layoutBox[h],m=ur(p);p.min=i[h].min,p.max=p.min+m}):QN(s,t.layoutBox,i)&&wr(h=>{const p=o?t.measuredBox[h]:t.layoutBox[h],m=ur(i[h]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const a=ru();_d(a,i,t.layoutBox);const l=ru();o?_d(l,n.applyTransform(r,!0),t.measuredBox):_d(l,i,t.layoutBox);const c=!JN(a);let f=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const v=Mn();Ad(v,t.layoutBox,p.layoutBox);const A=Mn();Ad(A,i,m.layoutBox),KN(v,A)||(f=!0),h.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=v,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function pK(n){Zf&&ol.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function mK(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function gK(n){n.clearSnapshot()}function s2(n){n.clearMeasurements()}function vK(n){n.isLayoutDirty=!1}function yK(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function o2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function xK(n){n.resolveTargetDelta()}function _K(n){n.calcProjection()}function AK(n){n.resetSkewAndRotation()}function SK(n){n.removeLeadSnapshot()}function a2(n,e,t){n.translate=dn(e.translate,0,t),n.scale=dn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function l2(n,e,t,i){n.min=dn(e.min,t.min,i),n.max=dn(e.max,t.max,i)}function MK(n,e,t,i){l2(n.x,e.x,t.x,i),l2(n.y,e.y,t.y,i)}function wK(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const EK={duration:.45,ease:[.4,0,.1,1]},c2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),u2=c2("applewebkit/")&&!c2("chrome/")?Math.round:yi;function f2(n){n.min=u2(n.min),n.max=u2(n.max)}function CK(n){f2(n.x),f2(n.y)}function QN(n,e,t){return n==="position"||n==="preserve-aspect"&&!TJ(n2(e),n2(t),.2)}function TK(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const bK=$N({attachResizeListener:(n,e)=>so(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pA={current:void 0},qN=$N({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!pA.current){const n=new bK({});n.mount(window),n.setOptions({layoutScroll:!0}),pA.current=n}return pA.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),RK={pan:{Feature:VJ},drag:{Feature:GJ,ProjectionNode:qN,MeasureLayout:WN}};function d2(n,e){const t=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",r=(s,o)=>{if(s.pointerType==="touch"||DN())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e);const l=a[i];l&&jt.postRender(()=>l(s,o))};return ho(n.current,t,r,{passive:!n.getProps()[i]})}class PK extends ba{mount(){this.unmount=fo(d2(this.node,!0),d2(this.node,!1))}unmount(){}}class IK extends ba{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fo(so(this.node.current,"focus",()=>this.onFocus()),so(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ZN=(n,e)=>e?n===e?!0:ZN(n,e.parentElement):!1;function mA(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,oy(t))}class BK extends ba{constructor(){super(...arguments),this.removeStartListeners=yi,this.removeEndListeners=yi,this.removeAccessibleListeners=yi,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=ho(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:f,globalTapTarget:h}=this.node.getProps(),p=!h&&!ZN(this.node.current,a.target)?f:c;p&&jt.update(()=>p(a,l))},{passive:!(i.onTap||i.onPointerUp)}),o=ho(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=fo(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||mA("up",(l,c)=>{const{onTap:f}=this.node.getProps();f&&jt.postRender(()=>f(l,c))})};this.removeEndListeners(),this.removeEndListeners=so(this.node.current,"keyup",o),mA("down",(a,l)=>{this.startPress(a,l)})},t=so(this.node.current,"keydown",e),i=()=>{this.isPressing&&mA("cancel",(s,o)=>this.cancelPress(s,o))},r=so(this.node.current,"blur",i);this.removeAccessibleListeners=fo(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&jt.postRender(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!DN()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&jt.postRender(()=>i(e,t))}mount(){const e=this.node.getProps(),t=ho(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=so(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=fo(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const tS=new WeakMap,gA=new WeakMap,LK=n=>{const e=tS.get(n.target);e&&e(n)},DK=n=>{n.forEach(LK)};function FK({root:n,...e}){const t=n||document;gA.has(t)||gA.set(t,{});const i=gA.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(DK,{root:n,...e})),i[r]}function NK(n,e,t){const i=FK(e);return tS.set(n,t),i.observe(n),()=>{tS.delete(n),i.unobserve(n)}}const OK={some:0,all:1};class UK extends ba{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:OK[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),p=c?f:h;p&&p(l)};return NK(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(kK(e,t))&&this.startObserver()}unmount(){}}function kK({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const HK={inView:{Feature:UK},tap:{Feature:BK},focus:{Feature:IK},hover:{Feature:PK}},zK={layout:{ProjectionNode:qN,MeasureLayout:WN}},e3=D.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),ay=D.createContext({}),Iw=typeof window<"u",GK=Iw?D.useLayoutEffect:D.useEffect,t3=D.createContext({strict:!1});let h2=!1;function VK(n,e,t,i,r){var s;const{visualElement:o}=D.useContext(ay),a=D.useContext(t3),l=D.useContext(Rw),c=D.useContext(e3).reducedMotion,f=D.useRef();i=i||a.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:o,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,p=D.useContext(VN);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&jK(f.current,t,r,p),D.useInsertionEffect(()=>{h&&h.update(t,l)});const m=t[wN],v=D.useRef(!!m&&!window.MotionHandoffIsComplete&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,m)));return GK(()=>{h&&(h.updateFeatures(),Pw.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),D.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current=!1,h2||(h2=!0,queueMicrotask(WK)))}),h}function WK(){window.MotionHandoffIsComplete=!0}function jK(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:n3(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&iu(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function n3(n){if(n)return n.options.allowProjection!==!1?n.projection:n3(n.parent)}function XK(n,e,t){return D.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):iu(t)&&(t.current=i))},[e])}function ly(n){return ih(n.animate)||pw.some(e=>rh(n[e]))}function i3(n){return!!(ly(n)||n.variants)}function JK(n,e){if(ly(n)){const{initial:t,animate:i}=n;return{initial:t===!1||rh(t)?t:void 0,animate:rh(i)?i:void 0}}return n.inherit!==!1?e:{}}function KK(n){const{initial:e,animate:t}=JK(n,D.useContext(ay));return D.useMemo(()=>({initial:e,animate:t}),[p2(e),p2(t)])}function p2(n){return Array.isArray(n)?n.join(" "):n}const m2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Du={};for(const n in m2)Du[n]={isEnabled:e=>m2[n].some(t=>!!e[t])};function YK(n){for(const e in n)Du[e]={...Du[e],...n[e]}}const $K=Symbol.for("motionComponentSymbol");function QK({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&YK(n);function s(a,l){let c;const f={...D.useContext(e3),...a,layoutId:qK(a)},{isStatic:h}=f,p=KK(a),m=i(a,h);if(!h&&Iw){ZK();const v=eY(f);c=v.MeasureLayout,p.visualElement=VK(r,m,f,e,v.ProjectionNode)}return ie.jsxs(ay.Provider,{value:p,children:[c&&p.visualElement?ie.jsx(c,{visualElement:p.visualElement,...f}):null,t(r,a,XK(m,p.visualElement,l),m,h,p.visualElement)]})}const o=D.forwardRef(s);return o[$K]=r,o}function qK({layoutId:n}){const e=D.useContext(GN).id;return e&&n!==void 0?e+"-"+n:n}function ZK(n,e){D.useContext(t3).strict}function eY(n){const{drag:e,layout:t}=Du;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const tY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bw(n){return typeof n!="string"||n.includes("-")?!1:!!(tY.indexOf(n)>-1||/[A-Z]/u.test(n))}function r3(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const s3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o3(n,e,t,i){r3(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(s3.has(r)?r:sy(r),e.attrs[r])}function a3(n,{layout:e,layoutId:t}){return Ta.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!K0[n]||n==="opacity")}function Lw(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(gi(r[o])||e.style&&gi(e.style[o])||a3(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return t&&r&&typeof r.willChange=="string"&&(t.applyWillChange=!1),s}function l3(n,e,t){const i=Lw(n,e,t);for(const r in n)if(gi(n[r])||gi(e[r])){const s=Ih.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function nY(n){const e=D.useRef(null);return e.current===null&&(e.current=n()),e.current}function iY({applyWillChange:n=!1,scrapeMotionValuesFromProps:e,createRenderState:t,onMount:i},r,s,o,a){const l={latestValues:sY(r,s,o,a?!1:n,e),renderState:t()};return i&&(l.mount=c=>i(r,c,l)),l}const c3=n=>(e,t)=>{const i=D.useContext(ay),r=D.useContext(Rw),s=()=>iY(n,e,i,r,t);return t?s():nY(s)};function rY(n,e){const t=CN(e);t&&iy(n,t)}function g2(n,e,t){const i=Array.isArray(e)?e:[e];for(let r=0;r<i.length;r++){const s=dw(n,i[r]);if(s){const{transitionEnd:o,transition:a,...l}=s;t(l,o)}}}function sY(n,e,t,i,r){var s;const o={},a=[],l=i&&((s=n.style)===null||s===void 0?void 0:s.willChange)===void 0,c=r(n,{});for(const x in c)o[x]=Eg(c[x]);let{initial:f,animate:h}=n;const p=ly(n),m=i3(n);e&&m&&!p&&n.inherit!==!1&&(f===void 0&&(f=e.initial),h===void 0&&(h=e.animate));let v=t?t.initial===!1:!1;v=v||f===!1;const A=v?h:f;return A&&typeof A!="boolean"&&!ih(A)&&g2(n,A,(x,g)=>{for(const _ in x){let S=x[_];if(Array.isArray(S)){const w=v?S.length-1:0;S=S[w]}S!==null&&(o[_]=S)}for(const _ in g)o[_]=g[_]}),l&&(h&&f!==!1&&!ih(h)&&g2(n,h,x=>{for(const g in x)rY(a,g)}),a.length&&(o.willChange=a.join(","))),o}const Dw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),u3=()=>({...Dw(),attrs:{}}),f3=(n,e)=>e&&typeof n=="number"?e.transform(n):n,oY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aY=Ih.length;function lY(n,e,t){let i="",r=!0;for(let s=0;s<aY;s++){const o=Ih[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=f3(a,_w[o]);if(!l){r=!1;const f=oY[o]||o;i+=`${f}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function Fw(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ta.has(l)){o=!0;continue}else if(JF(l)){r[l]=c;continue}else{const f=f3(c,_w[l]);l.startsWith("origin")?(a=!0,s[l]=f):i[l]=f}}if(e.transform||(o||t?i.transform=lY(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:f=0}=s;i.transformOrigin=`${l} ${c} ${f}`}}function v2(n,e,t){return typeof n=="string"?n:ht.transform(e+t*n)}function cY(n,e,t){const i=v2(e,n.x,n.width),r=v2(t,n.y,n.height);return`${i} ${r}`}const uY={offset:"stroke-dashoffset",array:"stroke-dasharray"},fY={offset:"strokeDashoffset",array:"strokeDasharray"};function dY(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?uY:fY;n[s.offset]=ht.transform(-i);const o=ht.transform(e),a=ht.transform(t);n[s.array]=`${o} ${a}`}function Nw(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},f,h){if(Fw(n,c,h),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m,dimensions:v}=n;p.transform&&(v&&(m.transform=p.transform),delete p.transform),v&&(r!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=cY(v,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),i!==void 0&&(p.scale=i),o!==void 0&&dY(p,o,a,l,!1)}const Ow=n=>typeof n=="string"&&n.toLowerCase()==="svg",hY={useVisualState:c3({scrapeMotionValuesFromProps:l3,createRenderState:u3,onMount:(n,e,{renderState:t,latestValues:i})=>{jt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),jt.render(()=>{Nw(t,i,Ow(e.tagName),n.transformTemplate),o3(e,t)})}})},pY={useVisualState:c3({applyWillChange:!0,scrapeMotionValuesFromProps:Lw,createRenderState:Dw})};function d3(n,e,t){for(const i in e)!gi(e[i])&&!a3(i,t)&&(n[i]=e[i])}function mY({transformTemplate:n},e){return D.useMemo(()=>{const t=Dw();return Fw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function gY(n,e){const t=n.style||{},i={};return d3(i,t,n),Object.assign(i,mY(n,e)),i}function vY(n,e){const t={},i=gY(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const yY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Y0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||yY.has(n)}let h3=n=>!Y0(n);function xY(n){n&&(h3=e=>e.startsWith("on")?!Y0(e):n(e))}try{xY(require("@emotion/is-prop-valid").default)}catch{}function _Y(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(h3(r)||t===!0&&Y0(r)||!e&&!Y0(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function AY(n,e,t,i){const r=D.useMemo(()=>{const s=u3();return Nw(s,e,Ow(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};d3(s,n.style,n),r.style={...s,...r.style}}return r}function SY(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(Bw(t)?AY:vY)(i,s,o,t),c=_Y(i,typeof t=="string",n),f=t!==D.Fragment?{...c,...l,ref:r}:{},{children:h}=i,p=D.useMemo(()=>gi(h)?h.get():h,[h]);return D.createElement(t,{...f,children:p})}}function MY(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...Bw(i)?hY:pY,preloadedFeatures:n,useRender:SY(r),createVisualElement:e,Component:i};return QK(o)}}const nS={current:null},p3={current:!1};function wY(){if(p3.current=!0,!!Iw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>nS.current=n.matches;n.addListener(e),e()}else nS.current=!1}function EY(n,e,t){for(const i in e){const r=e[i],s=t[i];if(gi(r))n.addValue(i,r);else if(gi(s))n.addValue(i,ah(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,ah(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const y2=new WeakMap,CY=[...$F,fi,va],TY=n=>CY.find(YF(n)),x2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bY{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ps.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,jt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=ly(t),this.isVariantNode=i3(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in h){const m=h[p];l[p]!==void 0&&gi(m)&&m.set(l[p],!1)}}mount(e){this.current=e,y2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),p3.current||wY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:nS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){y2.delete(this.current),this.projection&&this.projection.unmount(),Ao(this.notifyUpdate),Ao(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ta.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&jt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Du){const t=Du[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<x2.length;i++){const r=x2[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=EY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=ah(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(jF(r)||WF(r))?r=parseFloat(r):!TY(r)&&va.test(t)&&(r=rN(e,t)),this.setBaseTarget(e,gi(r)?r.get():r)),gi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=dw(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!gi(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new bw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class m3 extends bY{constructor(){super(...arguments),this.KeyframeResolver=sN}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}}function RY(n){return window.getComputedStyle(n)}class PY extends m3{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=r3}readValueFromInstance(e,t){if(Ta.has(t)){const i=Aw(t);return i&&i.default||0}else{const i=RY(e),r=(JF(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return HN(e,t)}build(e,t,i){Fw(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Lw(e,t,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class IY extends m3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ta.has(t)){const i=Aw(t);return i&&i.default||0}return t=s3.has(t)?t:sy(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return l3(e,t,i)}build(e,t,i){Nw(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){o3(e,t,i,r)}mount(e){this.isSVGTag=Ow(e.tagName),super.mount(e)}}const BY=(n,e)=>Bw(n)?new IY(e):new PY(e,{allowProjection:n!==D.Fragment}),LY=MY({...yJ,...HK,...RK,...zK},BY),DY=n=>{const e=D.useRef(),[t]=D.useState(()=>c7(new Float32Array(5e3),{radius:1.2}));return Zv((i,r)=>{e.current.rotation.x-=r/10,e.current.rotation.y-=r/15}),ie.jsx("group",{rotation:[0,0,Math.PI/4],children:ie.jsx(cj,{ref:e,positions:t,stride:3,frustumCulled:!0,...n,children:ie.jsx(sj,{transparent:!0,color:"#f272c8",size:.003,sizeAttenuation:!0,depthWrite:!1})})})},FY=()=>ie.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:ie.jsxs(PF,{camera:{position:[0,0,1]},children:[ie.jsx(D.Suspense,{fallback:null,children:ie.jsx(DY,{})}),ie.jsx(zF,{all:!0})]})});function NY(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const Is=NY(LY),ei={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[60px] sm:text-[40px] xs:text-[30px] text-[20px] lg:leading-[50px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},OY=()=>ie.jsx("section",{className:"relative w-full h-screen mx-auto",children:ie.jsxs("div",{className:`${ei.paddingX} absolute inset-0 top-[120px] max-w-7xl mx-auto flex flex-row items-start gap-5`,children:[ie.jsx("div",{className:"flex flex-col justify-center items-center mt-5",children:ie.jsx("div",{className:"w-5 h-5 rounded-full bg-[#804dee]",children:ie.jsx("div",{className:"ml-2 w-1 sm:h-80 h-40 violet-gradient"})})}),ie.jsxs("div",{children:[ie.jsxs("h1",{className:`${ei.heroHeadText} text-white`,children:["Hi, I'm",ie.jsx("span",{className:"text-[#915eff]",children:" Muhamad Riski Padilah"})]}),ie.jsx("p",{className:`${ei.heroSubText} text-white-100 mt-2`,children:"I am a front end web developer, have a great interest in creating unique and revolutionary designs in the developer world."})]})]})}),UY="data:image/svg+xml,%3csvg%20width='20'%20height='12'%20viewBox='0%200%2020%2012'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%202L19%202C19.2652%202%2019.5196%201.89464%2019.7071%201.70711C19.8946%201.51957%2020%201.26522%2020%201C20%200.734784%2019.8946%200.480429%2019.7071%200.292892C19.5196%200.105356%2019.2652%200%2019%200L9%200C8.73478%200%208.48043%200.105356%208.29289%200.292892C8.10536%200.480429%208%200.734784%208%201C8%201.26522%208.10536%201.51957%208.29289%201.70711C8.48043%201.89464%208.73478%202%209%202ZM19%2010L1%2010C0.734784%2010%200.480429%2010.1054%200.292892%2010.2929C0.105356%2010.4804%200%2010.7348%200%2011C0%2011.2652%200.105356%2011.5196%200.292892%2011.7071C0.480429%2011.8946%200.734784%2012%201%2012L19%2012C19.2652%2012%2019.5196%2011.8946%2019.7071%2011.7071C19.8946%2011.5196%2020%2011.2652%2020%2011C20%2010.7348%2019.8946%2010.4804%2019.7071%2010.2929C19.5196%2010.1054%2019.2652%2010%2019%2010V10ZM1%207L19%207C19.2652%207%2019.5196%206.89464%2019.7071%206.70711C19.8946%206.51957%2020%206.26522%2020%206C20%205.73478%2019.8946%205.48043%2019.7071%205.29289C19.5196%205.10536%2019.2652%205%2019%205L1%205C0.734784%205%200.480429%205.10536%200.292892%205.29289C0.105356%205.48043%200%205.73478%200%206C0%206.26522%200.105356%206.51957%200.292892%206.70711C0.480429%206.89464%200.734784%207%201%207Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",kY="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.4099%209L16.7099%202.71C16.8982%202.5217%2017.004%202.2663%2017.004%202C17.004%201.7337%2016.8982%201.47831%2016.7099%201.29C16.5216%201.1017%2016.2662%200.995911%2015.9999%200.995911C15.7336%200.995911%2015.4782%201.1017%2015.2899%201.29L8.99994%207.59L2.70994%201.29C2.52164%201.1017%202.26624%200.995911%201.99994%200.995911C1.73364%200.995911%201.47824%201.1017%201.28994%201.29C1.10164%201.47831%200.995847%201.7337%200.995847%202C0.995847%202.2663%201.10164%202.5217%201.28994%202.71L7.58994%209L1.28994%2015.29C1.19621%2015.383%201.12182%2015.4936%201.07105%2015.6154C1.02028%2015.7373%200.994141%2015.868%200.994141%2016C0.994141%2016.132%201.02028%2016.2627%201.07105%2016.3846C1.12182%2016.5064%201.19621%2016.617%201.28994%2016.71C1.3829%2016.8037%201.4935%2016.8781%201.61536%2016.9289C1.73722%2016.9797%201.86793%2017.0058%201.99994%2017.0058C2.13195%2017.0058%202.26266%2016.9797%202.38452%2016.9289C2.50638%2016.8781%202.61698%2016.8037%202.70994%2016.71L8.99994%2010.41L15.2899%2016.71C15.3829%2016.8037%2015.4935%2016.8781%2015.6154%2016.9289C15.7372%2016.9797%2015.8679%2017.0058%2015.9999%2017.0058C16.132%2017.0058%2016.2627%2016.9797%2016.3845%2016.9289C16.5064%2016.8781%2016.617%2016.8037%2016.7099%2016.71C16.8037%2016.617%2016.8781%2016.5064%2016.9288%2016.3846C16.9796%2016.2627%2017.0057%2016.132%2017.0057%2016C17.0057%2015.868%2016.9796%2015.7373%2016.9288%2015.6154C16.8781%2015.4936%2016.8037%2015.383%2016.7099%2015.29L10.4099%209Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",HY="/assets/meta-DDA9d59b.png",zY="/assets/shopify-B9vYDfbe.png",GY="/assets/starbucks-DpiFR2bK.png",VY="/assets/tesla-DeqA8DnB.png",WY=[{id:"work",title:"Work"},{id:"project",title:"Project"},{id:"contact",title:"Contact"}],jY=[{title:"React.js Developer",company_name:"Starbucks",icon:GY,iconBg:"#383E56",date:"March 2020 - April 2021",points:["Developing and maintaining web applications using React.js and other related technologies.","Collaborating with cross-functional teams including designers, product managers, and other developers to create high-quality products.","Implementing responsive design and ensuring cross-browser compatibility.","Participating in code reviews and providing constructive feedback to other developers."]},{title:"React Native Developer",company_name:"Tesla",icon:VY,iconBg:"#E6DEDD",date:"Jan 2021 - Feb 2022",points:["Developing and maintaining web applications using React.js and other related technologies.","Collaborating with cross-functional teams including designers, product managers, and other developers to create high-quality products.","Implementing responsive design and ensuring cross-browser compatibility.","Participating in code reviews and providing constructive feedback to other developers."]},{title:"Web Developer",company_name:"Shopify",icon:zY,iconBg:"#383E56",date:"Jan 2022 - Jan 2023",points:["Developing and maintaining web applications using React.js and other related technologies.","Collaborating with cross-functional teams including designers, product managers, and other developers to create high-quality products.","Implementing responsive design and ensuring cross-browser compatibility.","Participating in code reviews and providing constructive feedback to other developers."]},{title:"Full stack Developer",company_name:"Meta",icon:HY,iconBg:"#E6DEDD",date:"Jan 2023 - Present",points:["Developing and maintaining web applications using React.js and other related technologies.","Collaborating with cross-functional teams including designers, product managers, and other developers to create high-quality products.","Implementing responsive design and ensuring cross-browser compatibility.","Participating in code reviews and providing constructive feedback to other developers."]}],g3=typeof document<"u"?Ii.useLayoutEffect:()=>{};function XY(n){const e=D.useRef(null);return g3(()=>{e.current=n},[n]),D.useCallback((...t)=>{const i=e.current;return i==null?void 0:i(...t)},[])}const Fh=n=>{var e;return(e=n==null?void 0:n.ownerDocument)!==null&&e!==void 0?e:document},_l=n=>n&&"window"in n&&n.window===n?n:Fh(n).defaultView||window;function JY(n){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(t=>n.test(t.brand)))||n.test(window.navigator.userAgent)}function KY(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function v3(n){let e=null;return()=>(e==null&&(e=n()),e)}const YY=v3(function(){return KY(/^Mac/i)}),$Y=v3(function(){return JY(/Android/i)});function QY(n){return n.mozInputSource===0&&n.isTrusted?!0:$Y()&&n.pointerType?n.type==="click"&&n.buttons===1:n.detail===0&&!n.pointerType}class qY{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}function y3(n){let e=D.useRef({isFocused:!1,observer:null});g3(()=>{const i=e.current;return()=>{i.observer&&(i.observer.disconnect(),i.observer=null)}},[]);let t=XY(i=>{n==null||n(i)});return D.useCallback(i=>{if(i.target instanceof HTMLButtonElement||i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement||i.target instanceof HTMLSelectElement){e.current.isFocused=!0;let r=i.target,s=o=>{e.current.isFocused=!1,r.disabled&&t(new qY("blur",o)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};r.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&r.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function ZY(n){let{isDisabled:e,onFocus:t,onBlur:i,onFocusChange:r}=n;const s=D.useCallback(l=>{if(l.target===l.currentTarget)return i&&i(l),r&&r(!1),!0},[i,r]),o=y3(s),a=D.useCallback(l=>{const c=Fh(l.target);l.target===l.currentTarget&&c.activeElement===l.target&&(t&&t(l),r&&r(!0),o(l))},[r,t,o]);return{focusProps:{onFocus:!e&&(t||r||i)?a:void 0,onBlur:!e&&(i||r)?s:void 0}}}let Nh=null,iS=new Set,Sd=new Map,jl=!1,rS=!1;const e$={Tab:!0,Escape:!0};function Uw(n,e){for(let t of iS)t(n,e)}function t$(n){return!(n.metaKey||!YY()&&n.altKey||n.ctrlKey||n.key==="Control"||n.key==="Shift"||n.key==="Meta")}function $0(n){jl=!0,t$(n)&&(Nh="keyboard",Uw("keyboard",n))}function Rr(n){Nh="pointer",(n.type==="mousedown"||n.type==="pointerdown")&&(jl=!0,Uw("pointer",n))}function x3(n){QY(n)&&(jl=!0,Nh="virtual")}function _3(n){n.target===window||n.target===document||(!jl&&!rS&&(Nh="virtual",Uw("virtual",n)),jl=!1,rS=!1)}function A3(){jl=!1,rS=!0}function sS(n){if(typeof window>"u"||Sd.get(_l(n)))return;const e=_l(n),t=Fh(n);let i=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){jl=!0,i.apply(this,arguments)},t.addEventListener("keydown",$0,!0),t.addEventListener("keyup",$0,!0),t.addEventListener("click",x3,!0),e.addEventListener("focus",_3,!0),e.addEventListener("blur",A3,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",Rr,!0),t.addEventListener("pointermove",Rr,!0),t.addEventListener("pointerup",Rr,!0)):(t.addEventListener("mousedown",Rr,!0),t.addEventListener("mousemove",Rr,!0),t.addEventListener("mouseup",Rr,!0)),e.addEventListener("beforeunload",()=>{S3(n)},{once:!0}),Sd.set(e,{focus:i})}const S3=(n,e)=>{const t=_l(n),i=Fh(n);e&&i.removeEventListener("DOMContentLoaded",e),Sd.has(t)&&(t.HTMLElement.prototype.focus=Sd.get(t).focus,i.removeEventListener("keydown",$0,!0),i.removeEventListener("keyup",$0,!0),i.removeEventListener("click",x3,!0),t.removeEventListener("focus",_3,!0),t.removeEventListener("blur",A3,!1),typeof PointerEvent<"u"?(i.removeEventListener("pointerdown",Rr,!0),i.removeEventListener("pointermove",Rr,!0),i.removeEventListener("pointerup",Rr,!0)):(i.removeEventListener("mousedown",Rr,!0),i.removeEventListener("mousemove",Rr,!0),i.removeEventListener("mouseup",Rr,!0)),Sd.delete(t))};function n$(n){const e=Fh(n);let t;return e.readyState!=="loading"?sS(n):(t=()=>{sS(n)},e.addEventListener("DOMContentLoaded",t)),()=>S3(n,t)}typeof document<"u"&&n$();function M3(){return Nh!=="pointer"}const i$=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function r$(n,e,t){var i;const r=typeof window<"u"?_l(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?_l(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?_l(t==null?void 0:t.target).HTMLElement:HTMLElement,a=typeof window<"u"?_l(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return n=n||(t==null?void 0:t.target)instanceof r&&!i$.has(t==null||(i=t.target)===null||i===void 0?void 0:i.type)||(t==null?void 0:t.target)instanceof s||(t==null?void 0:t.target)instanceof o&&(t==null?void 0:t.target.isContentEditable),!(n&&e==="keyboard"&&t instanceof a&&!e$[t.key])}function s$(n,e,t){sS(),D.useEffect(()=>{let i=(r,s)=>{r$(!!(t!=null&&t.isTextInput),r,s)&&n(M3())};return iS.add(i),()=>{iS.delete(i)}},e)}function o$(n){let{isDisabled:e,onBlurWithin:t,onFocusWithin:i,onFocusWithinChange:r}=n,s=D.useRef({isFocusWithin:!1}),o=D.useCallback(c=>{s.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(s.current.isFocusWithin=!1,t&&t(c),r&&r(!1))},[t,r,s]),a=y3(o),l=D.useCallback(c=>{!s.current.isFocusWithin&&document.activeElement===c.target&&(i&&i(c),r&&r(!0),s.current.isFocusWithin=!0,a(c))},[i,r,a]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:o}}}let Q0=!1,vA=0;function oS(){Q0=!0,setTimeout(()=>{Q0=!1},50)}function _2(n){n.pointerType==="touch"&&oS()}function a$(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",_2):document.addEventListener("touchend",oS),vA++,()=>{vA--,!(vA>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",_2):document.removeEventListener("touchend",oS))}}function l$(n){let{onHoverStart:e,onHoverChange:t,onHoverEnd:i,isDisabled:r}=n,[s,o]=D.useState(!1),a=D.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;D.useEffect(a$,[]);let{hoverProps:l,triggerHoverEnd:c}=D.useMemo(()=>{let f=(m,v)=>{if(a.pointerType=v,r||v==="touch"||a.isHovered||!m.currentTarget.contains(m.target))return;a.isHovered=!0;let A=m.currentTarget;a.target=A,e&&e({type:"hoverstart",target:A,pointerType:v}),t&&t(!0),o(!0)},h=(m,v)=>{if(a.pointerType="",a.target=null,v==="touch"||!a.isHovered)return;a.isHovered=!1;let A=m.currentTarget;i&&i({type:"hoverend",target:A,pointerType:v}),t&&t(!1),o(!1)},p={};return typeof PointerEvent<"u"?(p.onPointerEnter=m=>{Q0&&m.pointerType==="mouse"||f(m,m.pointerType)},p.onPointerLeave=m=>{!r&&m.currentTarget.contains(m.target)&&h(m,m.pointerType)}):(p.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},p.onMouseEnter=m=>{!a.ignoreEmulatedMouseEvents&&!Q0&&f(m,"mouse"),a.ignoreEmulatedMouseEvents=!1},p.onMouseLeave=m=>{!r&&m.currentTarget.contains(m.target)&&h(m,"mouse")}),{hoverProps:p,triggerHoverEnd:h}},[e,t,i,r,a]);return D.useEffect(()=>{r&&c({currentTarget:a.target},a.pointerType)},[r]),{hoverProps:l,isHovered:s}}function c$(n={}){let{autoFocus:e=!1,isTextInput:t,within:i}=n,r=D.useRef({isFocused:!1,isFocusVisible:e||M3()}),[s,o]=D.useState(!1),[a,l]=D.useState(()=>r.current.isFocused&&r.current.isFocusVisible),c=D.useCallback(()=>l(r.current.isFocused&&r.current.isFocusVisible),[]),f=D.useCallback(m=>{r.current.isFocused=m,o(m),c()},[c]);s$(m=>{r.current.isFocusVisible=m,c()},[],{isTextInput:t});let{focusProps:h}=ZY({isDisabled:i,onFocusChange:f}),{focusWithinProps:p}=o$({isDisabled:!i,onFocusWithinChange:f});return{isFocused:s,isFocusVisible:a,focusProps:i?p:h}}var u$=Object.defineProperty,f$=(n,e,t)=>e in n?u$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yA=(n,e,t)=>(f$(n,typeof e!="symbol"?e+"":e,t),t);let d$=class{constructor(){yA(this,"current",this.detect()),yA(this,"handoffState","pending"),yA(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Il=new d$;function Yu(n){return Il.isServer?null:n instanceof Node?n.ownerDocument:n!=null&&n.hasOwnProperty("current")&&n.current instanceof Node?n.current.ownerDocument:document}function w3(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e}))}function Ds(){let n=[],e={addEventListener(t,i,r,s){return t.addEventListener(i,r,s),e.add(()=>t.removeEventListener(i,r,s))},requestAnimationFrame(...t){let i=requestAnimationFrame(...t);return e.add(()=>cancelAnimationFrame(i))},nextFrame(...t){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...t))},setTimeout(...t){let i=setTimeout(...t);return e.add(()=>clearTimeout(i))},microTask(...t){let i={current:!0};return w3(()=>{i.current&&t[0]()}),e.add(()=>{i.current=!1})},style(t,i,r){let s=t.style.getPropertyValue(i);return Object.assign(t.style,{[i]:r}),this.add(()=>{Object.assign(t.style,{[i]:s})})},group(t){let i=Ds();return t(i),this.add(()=>i.dispose())},add(t){return n.includes(t)||n.push(t),()=>{let i=n.indexOf(t);if(i>=0)for(let r of n.splice(i,1))r()}},dispose(){for(let t of n.splice(0))t()}};return e}function cy(){let[n]=D.useState(Ds);return D.useEffect(()=>()=>n.dispose(),[n]),n}let In=(n,e)=>{Il.isServer?D.useEffect(n,e):D.useLayoutEffect(n,e)};function Oh(n){let e=D.useRef(n);return In(()=>{e.current=n},[n]),e}let on=function(n){let e=Oh(n);return Ii.useCallback((...t)=>e.current(...t),[e])};function h$(n){let e=n.width/2,t=n.height/2;return{top:n.clientY-t,right:n.clientX+e,bottom:n.clientY+t,left:n.clientX-e}}function p$(n,e){return!(!n||!e||n.right<e.left||n.left>e.right||n.bottom<e.top||n.top>e.bottom)}function m$({disabled:n=!1}={}){let e=D.useRef(null),[t,i]=D.useState(!1),r=cy(),s=on(()=>{e.current=null,i(!1),r.dispose()}),o=on(a=>{if(r.dispose(),e.current===null){e.current=a.currentTarget,i(!0);{let l=Yu(a.currentTarget);r.addEventListener(l,"pointerup",s,!1),r.addEventListener(l,"pointermove",c=>{if(e.current){let f=h$(c);i(p$(f,e.current.getBoundingClientRect()))}},!1),r.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:t,pressProps:n?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}let g$=D.createContext(void 0);function E3(){return D.useContext(g$)}function A2(...n){return Array.from(new Set(n.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Uh(n,e,...t){if(n in e){let r=e[n];return typeof r=="function"?r(...t):r}let i=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,Uh),i}var aS=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(aS||{}),v$=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(v$||{});function Nr({ourProps:n,theirProps:e,slot:t,defaultTag:i,features:r,visible:s=!0,name:o,mergeRefs:a}){a=a??x$;let l=C3(e,n);if(s)return ig(l,t,i,o,a);let c=r??0;if(c&2){let{static:f=!1,...h}=l;if(f)return ig(h,t,i,o,a)}if(c&1){let{unmount:f=!0,...h}=l;return Uh(f?0:1,{0(){return null},1(){return ig({...h,hidden:!0,style:{display:"none"}},t,i,o,a)}})}return ig(l,t,i,o,a)}function ig(n,e={},t,i,r){let{as:s=t,children:o,refName:a="ref",...l}=xA(n,["unmount","static"]),c=n.ref!==void 0?{[a]:n.ref}:{},f=typeof o=="function"?o(e):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let h={};if(e){let p=!1,m=[];for(let[v,A]of Object.entries(e))typeof A=="boolean"&&(p=!0),A===!0&&m.push(v.replace(/([A-Z])/g,x=>`-${x.toLowerCase()}`));if(p){h["data-headlessui-state"]=m.join(" ");for(let v of m)h[`data-${v}`]=""}}if(s===D.Fragment&&(Object.keys(Oc(l)).length>0||Object.keys(Oc(h)).length>0))if(!D.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(Oc(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Oc(l)).concat(Object.keys(Oc(h))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=f.props,m=p==null?void 0:p.className,v=typeof m=="function"?(...g)=>A2(m(...g),l.className):A2(m,l.className),A=v?{className:v}:{},x=C3(f.props,Oc(xA(l,["ref"])));for(let g in h)g in x&&delete h[g];return D.cloneElement(f,Object.assign({},x,h,c,{ref:r(f.ref,c.ref)},A))}return D.createElement(s,Object.assign({},xA(l,["ref"]),s!==D.Fragment&&c,s!==D.Fragment&&h),f)}function y$(){let n=D.useRef([]),e=D.useCallback(t=>{for(let i of n.current)i!=null&&(typeof i=="function"?i(t):i.current=t)},[]);return(...t)=>{if(!t.every(i=>i==null))return n.current=t,e}}function x$(...n){return n.every(e=>e==null)?void 0:e=>{for(let t of n)t!=null&&(typeof t=="function"?t(e):t.current=e)}}function C3(...n){if(n.length===0)return{};if(n.length===1)return n[0];let e={},t={};for(let i of n)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(t[r]!=null||(t[r]=[]),t[r].push(i[r])):e[r]=i[r];if(e.disabled||e["aria-disabled"])for(let i in t)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(t[i]=[r=>{var s;return(s=r==null?void 0:r.preventDefault)==null?void 0:s.call(r)}]);for(let i in t)Object.assign(e,{[i](r,...s){let o=t[i];for(let a of o){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;a(r,...s)}}});return e}function T3(...n){if(n.length===0)return{};if(n.length===1)return n[0];let e={},t={};for(let i of n)for(let r in i)r.startsWith("on")&&typeof i[r]=="function"?(t[r]!=null||(t[r]=[]),t[r].push(i[r])):e[r]=i[r];for(let i in t)Object.assign(e,{[i](...r){let s=t[i];for(let o of s)o==null||o(...r)}});return e}function Or(n){var e;return Object.assign(D.forwardRef(n),{displayName:(e=n.displayName)!=null?e:n.name})}function Oc(n){let e=Object.assign({},n);for(let t in e)e[t]===void 0&&delete e[t];return e}function xA(n,e=[]){let t=Object.assign({},n);for(let i of e)i in t&&delete t[i];return t}let _$=D.createContext(void 0);function A$(){return D.useContext(_$)}function S$(n){let e=n.parentElement,t=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(t=e),e=e.parentElement;let i=(e==null?void 0:e.getAttribute("disabled"))==="";return i&&M$(t)?!1:i}function M$(n){if(!n)return!1;let e=n.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let b3=Symbol();function w$(n,e=!0){return Object.assign(n,{[b3]:e})}function wo(...n){let e=D.useRef(n);D.useEffect(()=>{e.current=n},[n]);let t=on(i=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(i):r.current=i)});return n.every(i=>i==null||(i==null?void 0:i[b3]))?void 0:t}let kw=D.createContext(null);kw.displayName="DescriptionContext";function R3(){let n=D.useContext(kw);if(n===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,R3),e}return n}function E$(){let[n,e]=D.useState([]);return[n.length>0?n.join(" "):void 0,D.useMemo(()=>function(t){let i=on(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),l=a.indexOf(s);return l!==-1&&a.splice(l,1),a}))),r=D.useMemo(()=>({register:i,slot:t.slot,name:t.name,props:t.props,value:t.value}),[i,t.slot,t.name,t.props,t.value]);return Ii.createElement(kw.Provider,{value:r},t.children)},[e])]}let C$="p";function T$(n,e){let t=D.useId(),i=E3(),{id:r=`headlessui-description-${t}`,...s}=n,o=R3(),a=wo(e);In(()=>o.register(r),[r,o.register]);let l=i||!1,c=D.useMemo(()=>({...o.slot,disabled:l}),[o.slot,l]),f={ref:a,...o.props,id:r};return Nr({ourProps:f,theirProps:s,slot:c,defaultTag:C$,name:o.name||"Description"})}let b$=Or(T$);Object.assign(b$,{});var $n=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))($n||{});let uy=D.createContext(null);uy.displayName="LabelContext";function Hw(){let n=D.useContext(uy);if(n===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Hw),e}return n}function R$(n){var e,t,i;let r=(t=(e=D.useContext(uy))==null?void 0:e.value)!=null?t:void 0;return((i=void 0)!=null?i:0)>0?[r,...n].filter(Boolean).join(" "):r}function P3({inherit:n=!1}={}){let e=R$(),[t,i]=D.useState([]),r=n?[e,...t].filter(Boolean):t;return[r.length>0?r.join(" "):void 0,D.useMemo(()=>function(s){let o=on(l=>(i(c=>[...c,l]),()=>i(c=>{let f=c.slice(),h=f.indexOf(l);return h!==-1&&f.splice(h,1),f}))),a=D.useMemo(()=>({register:o,slot:s.slot,name:s.name,props:s.props,value:s.value}),[o,s.slot,s.name,s.props,s.value]);return Ii.createElement(uy.Provider,{value:a},s.children)},[i])]}let P$="label";function I$(n,e){var t;let i=D.useId(),r=Hw(),s=A$(),o=E3(),{id:a=`headlessui-label-${i}`,htmlFor:l=s??((t=r.props)==null?void 0:t.htmlFor),passive:c=!1,...f}=n,h=wo(e);In(()=>r.register(a),[a,r.register]);let p=on(x=>{let g=x.currentTarget;if(g instanceof HTMLLabelElement&&x.preventDefault(),r.props&&"onClick"in r.props&&typeof r.props.onClick=="function"&&r.props.onClick(x),g instanceof HTMLLabelElement){let _=document.getElementById(g.htmlFor);if(_){let S=_.getAttribute("disabled");if(S==="true"||S==="")return;let w=_.getAttribute("aria-disabled");if(w==="true"||w==="")return;(_ instanceof HTMLInputElement&&(_.type==="radio"||_.type==="checkbox")||_.role==="radio"||_.role==="checkbox"||_.role==="switch")&&_.click(),_.focus({preventScroll:!0})}}}),m=o||!1,v=D.useMemo(()=>({...r.slot,disabled:m}),[r.slot,m]),A={ref:h,...r.props,id:a,htmlFor:l,onClick:p};return c&&("onClick"in A&&(delete A.htmlFor,delete A.onClick),"onClick"in f&&delete f.onClick),Nr({ourProps:A,theirProps:f,slot:v,defaultTag:l?P$:"div",name:r.name||"Label"})}let B$=Or(I$);Object.assign(B$,{});function L$(n){if(n===null)return{width:0,height:0};let{width:e,height:t}=n.getBoundingClientRect();return{width:e,height:t}}function D$(n,e=!1){let[t,i]=D.useReducer(()=>({}),{}),r=D.useMemo(()=>L$(n),[n,t]);return In(()=>{if(!n)return;let s=new ResizeObserver(i);return s.observe(n),()=>{s.disconnect()}},[n]),e?{width:`${r.width}px`,height:`${r.height}px`}:r}let F$=class extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return t===void 0&&(t=this.factory(e),this.set(e,t)),t}};function I3(n,e){let t=n(),i=new Set;return{getSnapshot(){return t},subscribe(r){return i.add(r),()=>i.delete(r)},dispatch(r,...s){let o=e[r].call(t,...s);o&&(t=o,i.forEach(a=>a()))}}}function B3(n){return D.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot)}let N$=new F$(()=>I3(()=>[],{ADD(n){return this.includes(n)?this:[...this,n]},REMOVE(n){let e=this.indexOf(n);if(e===-1)return this;let t=this.slice();return t.splice(e,1),t}}));function zw(n,e){let t=N$.get(e),i=D.useId(),r=B3(t);if(In(()=>{if(n)return t.dispatch("ADD",i),()=>t.dispatch("REMOVE",i)},[t,n]),!n)return!1;let s=r.indexOf(i),o=r.length;return s===-1&&(s=o,o+=1),s===o-1}let lS=new Map,Md=new Map;function S2(n){var e;let t=(e=Md.get(n))!=null?e:0;return Md.set(n,t+1),t!==0?()=>M2(n):(lS.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0,()=>M2(n))}function M2(n){var e;let t=(e=Md.get(n))!=null?e:1;if(t===1?Md.delete(n):Md.set(n,t-1),t!==1)return;let i=lS.get(n);i&&(i["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",i["aria-hidden"]),n.inert=i.inert,lS.delete(n))}function O$(n,{allowed:e,disallowed:t}={}){let i=zw(n,"inert-others");In(()=>{var r,s;if(!i)return;let o=Ds();for(let l of(r=t==null?void 0:t())!=null?r:[])l&&o.add(S2(l));let a=(s=e==null?void 0:e())!=null?s:[];for(let l of a){if(!l)continue;let c=Yu(l);if(!c)continue;let f=l.parentElement;for(;f&&f!==c.body;){for(let h of f.children)a.some(p=>h.contains(p))||o.add(S2(h));f=f.parentElement}}return o.dispose},[i,e,t])}function U$(n,e,t){let i=Oh(r=>{let s=r.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&t()});D.useEffect(()=>{if(!n)return;let r=e===null?null:e instanceof HTMLElement?e:e.current;if(!r)return;let s=Ds();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>i.current(r));o.observe(r),s.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>i.current(r));o.observe(r),s.add(()=>o.disconnect())}return()=>s.dispose()},[e,i,n])}let cS=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(","),k$=["[data-autofocus]"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var uS=(n=>(n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n[n.AutoFocus=64]="AutoFocus",n))(uS||{}),H$=(n=>(n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n))(H$||{}),z$=(n=>(n[n.Previous=-1]="Previous",n[n.Next=1]="Next",n))(z$||{});function L3(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(cS)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}function G$(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(k$)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var Gw=(n=>(n[n.Strict=0]="Strict",n[n.Loose=1]="Loose",n))(Gw||{});function Vw(n,e=0){var t;return n===((t=Yu(n))==null?void 0:t.body)?!1:Uh(e,{0(){return n.matches(cS)},1(){let i=n;for(;i!==null;){if(i.matches(cS))return!0;i=i.parentElement}return!1}})}function D3(n){let e=Yu(n);Ds().nextFrame(()=>{e&&!Vw(e.activeElement,0)&&W$(n)})}var V$=(n=>(n[n.Keyboard=0]="Keyboard",n[n.Mouse=1]="Mouse",n))(V$||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",n=>{n.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:n.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function W$(n){n==null||n.focus({preventScroll:!0})}let j$=["textarea","input"].join(",");function X$(n){var e,t;return(t=(e=n==null?void 0:n.matches)==null?void 0:e.call(n,j$))!=null?t:!1}function F3(n,e=t=>t){return n.slice().sort((t,i)=>{let r=e(t),s=e(i);if(r===null||s===null)return 0;let o=r.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function J$(n,e){return K$(L3(),e,{relativeTo:n})}function K$(n,e,{sorted:t=!0,relativeTo:i=null,skipElements:r=[]}={}){let s=Array.isArray(n)?n.length>0?n[0].ownerDocument:document:n.ownerDocument,o=Array.isArray(n)?t?F3(n):n:e&64?G$(n):L3(n);r.length>0&&o.length>1&&(o=o.filter(m=>!r.some(v=>v!=null&&"current"in v?(v==null?void 0:v.current)===m:v===m))),i=i??s.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(i))-1;if(e&4)return Math.max(0,o.indexOf(i))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},f=0,h=o.length,p;do{if(f>=h||f+h<=0)return 0;let m=l+f;if(e&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}p=o[m],p==null||p.focus(c),f+=a}while(p!==s.activeElement);return e&6&&X$(p)&&p.select(),2}function N3(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Y$(){return/Android/gi.test(window.navigator.userAgent)}function $$(){return N3()||Y$()}function jf(n,e,t,i){let r=Oh(t);D.useEffect(()=>{if(!n)return;function s(o){r.current(o)}return document.addEventListener(e,s,i),()=>document.removeEventListener(e,s,i)},[n,e,i])}function Q$(n,e,t,i){let r=Oh(t);D.useEffect(()=>{if(!n)return;function s(o){r.current(o)}return window.addEventListener(e,s,i),()=>window.removeEventListener(e,s,i)},[n,e,i])}const w2=30;function q$(n,e,t){let i=zw(n,"outside-click"),r=Oh(t),s=D.useCallback(function(l,c){if(l.defaultPrevented)return;let f=c(l);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let h=function p(m){return typeof m=="function"?p(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let p of h)if(p!==null&&(p.contains(f)||l.composed&&l.composedPath().includes(p)))return;return!Vw(f,Gw.Loose)&&f.tabIndex!==-1&&l.preventDefault(),r.current(l,f)},[r,e]),o=D.useRef(null);jf(i,"pointerdown",l=>{var c,f;o.current=((f=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:f[0])||l.target},!0),jf(i,"mousedown",l=>{var c,f;o.current=((f=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:f[0])||l.target},!0),jf(i,"click",l=>{$$()||o.current&&(s(l,()=>o.current),o.current=null)},!0);let a=D.useRef({x:0,y:0});jf(i,"touchstart",l=>{a.current.x=l.touches[0].clientX,a.current.y=l.touches[0].clientY},!0),jf(i,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=w2||Math.abs(c.y-a.current.y)>=w2))return s(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),Q$(i,"blur",l=>s(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ww(...n){return D.useMemo(()=>Yu(...n),[...n])}function Z$(n,e){return D.useMemo(()=>{var t;if(n.type)return n.type;let i=(t=n.as)!=null?t:"button";if(typeof i=="string"&&i.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[n.type,n.as,e])}function eQ(){let n;return{before({doc:e}){var t;let i=e.documentElement,r=(t=e.defaultView)!=null?t:window;n=Math.max(0,r.innerWidth-i.clientWidth)},after({doc:e,d:t}){let i=e.documentElement,r=Math.max(0,i.clientWidth-i.offsetWidth),s=Math.max(0,n-r);t.style(i,"paddingRight",`${s}px`)}}}function tQ(){return N3()?{before({doc:n,d:e,meta:t}){function i(r){return t.containers.flatMap(s=>s()).some(s=>s.contains(r))}e.microTask(()=>{var r;if(window.getComputedStyle(n.documentElement).scrollBehavior!=="auto"){let a=Ds();a.style(n.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let s=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;e.addEventListener(n,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),f=n.querySelector(c);f&&!i(f)&&(o=f)}catch{}},!0),e.addEventListener(n,"touchstart",a=>{if(a.target instanceof HTMLElement)if(i(a.target)){let l=a.target;for(;l.parentElement&&i(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(n,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(i(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;s!==l&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function nQ(){return{before({doc:n,d:e}){e.style(n.documentElement,"overflow","hidden")}}}function iQ(n){let e={};for(let t of n)Object.assign(e,t(e));return e}let Al=I3(()=>new Map,{PUSH(n,e){var t;let i=(t=this.get(n))!=null?t:{doc:n,count:0,d:Ds(),meta:new Set};return i.count++,i.meta.add(e),this.set(n,i),this},POP(n,e){let t=this.get(n);return t&&(t.count--,t.meta.delete(e)),this},SCROLL_PREVENT({doc:n,d:e,meta:t}){let i={doc:n,d:e,meta:iQ(t)},r=[tQ(),eQ(),nQ()];r.forEach(({before:s})=>s==null?void 0:s(i)),r.forEach(({after:s})=>s==null?void 0:s(i))},SCROLL_ALLOW({d:n}){n.dispose()},TEARDOWN({doc:n}){this.delete(n)}});Al.subscribe(()=>{let n=Al.getSnapshot(),e=new Map;for(let[t]of n)e.set(t,t.documentElement.style.overflow);for(let t of n.values()){let i=e.get(t.doc)==="hidden",r=t.count!==0;(r&&!i||!r&&i)&&Al.dispatch(t.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",t),t.count===0&&Al.dispatch("TEARDOWN",t)}});function rQ(n,e,t=()=>({containers:[]})){let i=B3(Al),r=e?i.get(e):void 0,s=r?r.count>0:!1;return In(()=>{if(!(!e||!n))return Al.dispatch("PUSH",e,t),()=>Al.dispatch("POP",e,t)},[n,e]),s}function sQ(n,e,t=()=>[document.body]){let i=zw(n,"scroll-lock");rQ(i,e,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],t]}})}function E2(n){return[n.screenX,n.screenY]}function oQ(){let n=D.useRef([-1,-1]);return{wasMoved(e){let t=E2(e);return n.current[0]===t[0]&&n.current[1]===t[1]?!1:(n.current=t,!0)},update(e){n.current=E2(e)}}}function aQ(n=0){let[e,t]=D.useState(n),i=D.useCallback(l=>t(l),[e]),r=D.useCallback(l=>t(c=>c|l),[e]),s=D.useCallback(l=>(e&l)===l,[e]),o=D.useCallback(l=>t(c=>c&~l),[t]),a=D.useCallback(l=>t(c=>c^l),[t]);return{flags:e,setFlag:i,addFlag:r,hasFlag:s,removeFlag:o,toggleFlag:a}}var lQ={},C2;typeof process<"u"&&typeof globalThis<"u"&&((C2=process==null?void 0:lQ)==null?void 0:C2.NODE_ENV)==="test"&&typeof Element.prototype.getAnimations>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var cQ=(n=>(n[n.None=0]="None",n[n.Closed=1]="Closed",n[n.Enter=2]="Enter",n[n.Leave=4]="Leave",n))(cQ||{});function uQ(n){let e={};for(let t in n)n[t]===!0&&(e[`data-${t}`]="");return e}function fQ(n,e,t,i){let[r,s]=D.useState(t),{hasFlag:o,addFlag:a,removeFlag:l}=aQ(n&&r?3:0),c=D.useRef(!1),f=D.useRef(!1),h=cy();return In(()=>{var p;if(n){if(t&&s(!0),!e){t&&a(3);return}return(p=void 0)==null||p.call(i,t),dQ(e,{inFlight:c,prepare(){f.current?f.current=!1:f.current=c.current,c.current=!0,!f.current&&(t?(a(3),l(4)):(a(4),l(2)))},run(){f.current?t?(l(3),a(4)):(l(4),a(3)):t?l(1):a(1)},done(){var m;f.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),t||s(!1),(m=void 0)==null||m.call(i,t))}})}},[n,t,e,h]),n?[r,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[t,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function dQ(n,{prepare:e,run:t,done:i,inFlight:r}){let s=Ds();return pQ(n,{prepare:e,inFlight:r}),s.nextFrame(()=>{t(),s.requestAnimationFrame(()=>{s.add(hQ(n,i))})}),s.dispose}function hQ(n,e){var t,i;let r=Ds();if(!n)return r.dispose;let s=!1;r.add(()=>{s=!0});let o=(i=(t=n.getAnimations)==null?void 0:t.call(n).filter(a=>a instanceof CSSTransition))!=null?i:[];return o.length===0?(e(),r.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{s||e()}),r.dispose)}function pQ(n,{inFlight:e,prepare:t}){if(e!=null&&e.current){t();return}let i=n.style.transition;n.style.transition="none",t(),n.offsetHeight,n.style.transition=i}function mQ(n,{container:e,accept:t,walk:i}){let r=D.useRef(t),s=D.useRef(i);D.useEffect(()=>{r.current=t,s.current=i},[t,i]),In(()=>{if(!e||!n)return;let o=Yu(e);if(!o)return;let a=r.current,l=s.current,c=Object.assign(h=>a(h),{acceptNode:a}),f=o.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;f.nextNode();)l(f.currentNode)},[e,n,r,s])}function fy(){return typeof window<"u"}function $u(n){return O3(n)?(n.nodeName||"").toLowerCase():"#document"}function or(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Fs(n){var e;return(e=(O3(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function O3(n){return fy()?n instanceof Node||n instanceof or(n).Node:!1}function Pi(n){return fy()?n instanceof Element||n instanceof or(n).Element:!1}function Ls(n){return fy()?n instanceof HTMLElement||n instanceof or(n).HTMLElement:!1}function T2(n){return!fy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof or(n).ShadowRoot}function kh(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=os(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function gQ(n){return["table","td","th"].includes($u(n))}function dy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function jw(n){const e=Xw(),t=Pi(n)?os(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function vQ(n){let e=ya(n);for(;Ls(e)&&!Fu(e);){if(jw(e))return e;if(dy(e))return null;e=ya(e)}return null}function Xw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fu(n){return["html","body","#document"].includes($u(n))}function os(n){return or(n).getComputedStyle(n)}function hy(n){return Pi(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ya(n){if($u(n)==="html")return n;const e=n.assignedSlot||n.parentNode||T2(n)&&n.host||Fs(n);return T2(e)?e.host:e}function U3(n){const e=ya(n);return Fu(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ls(e)&&kh(e)?e:U3(e)}function lh(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=U3(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),o=or(r);if(s){const a=fS(o);return e.concat(o,o.visualViewport||[],kh(r)?r:[],a&&t?lh(a):[])}return e.concat(r,lh(r,[],t))}function fS(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function yQ(){const n=navigator.userAgentData;return n&&Array.isArray(n.brands)?n.brands.map(e=>{let{brand:t,version:i}=e;return t+"/"+i}).join(" "):navigator.userAgent}const Nu=Math.min,hi=Math.max,ch=Math.round,rg=Math.floor,xa=n=>({x:n,y:n}),xQ={left:"right",right:"left",bottom:"top",top:"bottom"},_Q={start:"end",end:"start"};function b2(n,e,t){return hi(n,Nu(e,t))}function Qu(n,e){return typeof n=="function"?n(e):n}function _a(n){return n.split("-")[0]}function Hh(n){return n.split("-")[1]}function k3(n){return n==="x"?"y":"x"}function H3(n){return n==="y"?"height":"width"}function Xl(n){return["top","bottom"].includes(_a(n))?"y":"x"}function z3(n){return k3(Xl(n))}function AQ(n,e,t){t===void 0&&(t=!1);const i=Hh(n),r=z3(n),s=H3(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=q0(o)),[o,q0(o)]}function SQ(n){const e=q0(n);return[dS(n),e,dS(e)]}function dS(n){return n.replace(/start|end/g,e=>_Q[e])}function MQ(n,e,t){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function wQ(n,e,t,i){const r=Hh(n);let s=MQ(_a(n),t==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(dS)))),s}function q0(n){return n.replace(/left|right|bottom|top/g,e=>xQ[e])}function EQ(n){return{top:0,right:0,bottom:0,left:0,...n}}function CQ(n){return typeof n!="number"?EQ(n):{top:n,right:n,bottom:n,left:n}}function Z0(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function R2(n,e,t){let{reference:i,floating:r}=n;const s=Xl(e),o=z3(e),a=H3(o),l=_a(e),c=s==="y",f=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,p=i[a]/2-r[a]/2;let m;switch(l){case"top":m={x:f,y:i.y-r.height};break;case"bottom":m={x:f,y:i.y+i.height};break;case"right":m={x:i.x+i.width,y:h};break;case"left":m={x:i.x-r.width,y:h};break;default:m={x:i.x,y:i.y}}switch(Hh(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const TQ=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:f,y:h}=R2(c,i,l),p=i,m={},v=0;for(let A=0;A<a.length;A++){const{name:x,fn:g}=a[A],{x:_,y:S,data:w,reset:R}=await g({x:f,y:h,initialPlacement:i,placement:p,strategy:r,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});f=_??f,h=S??h,m={...m,[x]:{...m[x],...w}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):R.rects),{x:f,y:h}=R2(c,p,l)),A=-1)}return{x:f,y:h,placement:p,strategy:r,middlewareData:m}};async function py(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Qu(e,n),v=CQ(m),x=a[p?h==="floating"?"reference":"floating":h],g=Z0(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(x)))==null||t?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:f,strategy:l})),_=h==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},R=Z0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:S,strategy:l}):_);return{top:(g.top-R.top+v.top)/w.y,bottom:(R.bottom-g.bottom+v.bottom)/w.y,left:(g.left-R.left+v.left)/w.x,right:(R.right-g.right+v.right)/w.x}}const bQ=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:A=!0,...x}=Qu(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=_a(r),_=Xl(a),S=_a(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=p||(S||!A?[q0(a)]:SQ(a)),b=v!=="none";!p&&b&&R.push(...wQ(a,A,v,w));const I=[a,...R],B=await py(e,x),z=[];let C=((i=s.flip)==null?void 0:i.overflows)||[];if(f&&z.push(B[g]),h){const ee=AQ(r,o,w);z.push(B[ee[0]],B[ee[1]])}if(C=[...C,{placement:r,overflows:z}],!z.every(ee=>ee<=0)){var P,j;const ee=(((P=s.flip)==null?void 0:P.index)||0)+1,le=I[ee];if(le)return{data:{index:ee,overflows:C},reset:{placement:le}};let $=(j=C.filter(K=>K.overflows[0]<=0).sort((K,L)=>K.overflows[1]-L.overflows[1])[0])==null?void 0:j.placement;if(!$)switch(m){case"bestFit":{var X;const K=(X=C.filter(L=>{if(b){const G=Xl(L.placement);return G===_||G==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(G=>G>0).reduce((G,V)=>G+V,0)]).sort((L,G)=>L[1]-G[1])[0])==null?void 0:X[0];K&&($=K);break}case"initialPlacement":$=a;break}if(r!==$)return{reset:{placement:$}}}return{}}}};async function RQ(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=_a(t),a=Hh(t),l=Xl(t)==="y",c=["left","top"].includes(o)?-1:1,f=s&&l?-1:1,h=Qu(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*f,y:p*c}:{x:p*c,y:m*f}}const PQ=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await RQ(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},IQ=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:g,y:_}=x;return{x:g,y:_}}},...l}=Qu(n,e),c={x:t,y:i},f=await py(e,l),h=Xl(_a(r)),p=k3(h);let m=c[p],v=c[h];if(s){const x=p==="y"?"top":"left",g=p==="y"?"bottom":"right",_=m+f[x],S=m-f[g];m=b2(_,m,S)}if(o){const x=h==="y"?"top":"left",g=h==="y"?"bottom":"right",_=v+f[x],S=v-f[g];v=b2(_,v,S)}const A=a.fn({...e,[p]:m,[h]:v});return{...A,data:{x:A.x-t,y:A.y-i,enabled:{[p]:s,[h]:o}}}}}},BQ=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Qu(n,e),f=await py(e,c),h=_a(r),p=Hh(r),m=Xl(r)==="y",{width:v,height:A}=s.floating;let x,g;h==="top"||h==="bottom"?(x=h,g=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=h,x=p==="end"?"top":"bottom");const _=A-f.top-f.bottom,S=v-f.left-f.right,w=Nu(A-f[x],_),R=Nu(v-f[g],S),b=!e.middlewareData.shift;let I=w,B=R;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(B=S),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(I=_),b&&!p){const C=hi(f.left,0),P=hi(f.right,0),j=hi(f.top,0),X=hi(f.bottom,0);m?B=v-2*(C!==0||P!==0?C+P:hi(f.left,f.right)):I=A-2*(j!==0||X!==0?j+X:hi(f.top,f.bottom))}await l({...e,availableWidth:B,availableHeight:I});const z=await o.getDimensions(a.floating);return v!==z.width||A!==z.height?{reset:{rects:!0}}:{}}}};function G3(n){const e=os(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Ls(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=ch(t)!==s||ch(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function Jw(n){return Pi(n)?n:n.contextElement}function vu(n){const e=Jw(n);if(!Ls(e))return xa(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=G3(e);let o=(s?ch(t.width):t.width)/i,a=(s?ch(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const LQ=xa(0);function V3(n){const e=or(n);return!Xw()||!e.visualViewport?LQ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function DQ(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==or(n)?!1:e}function Jl(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=Jw(n);let o=xa(1);e&&(i?Pi(i)&&(o=vu(i)):o=vu(n));const a=DQ(s,t,i)?V3(s):xa(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,f=r.width/o.x,h=r.height/o.y;if(s){const p=or(s),m=i&&Pi(i)?or(i):i;let v=p,A=fS(v);for(;A&&i&&m!==v;){const x=vu(A),g=A.getBoundingClientRect(),_=os(A),S=g.left+(A.clientLeft+parseFloat(_.paddingLeft))*x.x,w=g.top+(A.clientTop+parseFloat(_.paddingTop))*x.y;l*=x.x,c*=x.y,f*=x.x,h*=x.y,l+=S,c+=w,v=or(A),A=fS(v)}}return Z0({width:f,height:h,x:l,y:c})}function FQ(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const s=r==="fixed",o=Fs(i),a=e?dy(e.floating):!1;if(i===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=xa(1);const f=xa(0),h=Ls(i);if((h||!h&&!s)&&(($u(i)!=="body"||kh(o))&&(l=hy(i)),Ls(i))){const p=Jl(i);c=vu(i),f.x=p.x+i.clientLeft,f.y=p.y+i.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+f.x,y:t.y*c.y-l.scrollTop*c.y+f.y}}function NQ(n){return Array.from(n.getClientRects())}function hS(n,e){const t=hy(n).scrollLeft;return e?e.left+t:Jl(Fs(n)).left+t}function OQ(n){const e=Fs(n),t=hy(n),i=n.ownerDocument.body,r=hi(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=hi(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+hS(n);const a=-t.scrollTop;return os(i).direction==="rtl"&&(o+=hi(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function UQ(n,e){const t=or(n),i=Fs(n),r=t.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=Xw();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function kQ(n,e){const t=Jl(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=Ls(n)?vu(n):xa(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function P2(n,e,t){let i;if(e==="viewport")i=UQ(n,t);else if(e==="document")i=OQ(Fs(n));else if(Pi(e))i=kQ(e,t);else{const r=V3(n);i={...e,x:e.x-r.x,y:e.y-r.y}}return Z0(i)}function W3(n,e){const t=ya(n);return t===e||!Pi(t)||Fu(t)?!1:os(t).position==="fixed"||W3(t,e)}function HQ(n,e){const t=e.get(n);if(t)return t;let i=lh(n,[],!1).filter(a=>Pi(a)&&$u(a)!=="body"),r=null;const s=os(n).position==="fixed";let o=s?ya(n):n;for(;Pi(o)&&!Fu(o);){const a=os(o),l=jw(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||kh(o)&&!l&&W3(n,o))?i=i.filter(f=>f!==o):r=a,o=ya(o)}return e.set(n,i),i}function zQ(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const o=[...t==="clippingAncestors"?dy(e)?[]:HQ(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((c,f)=>{const h=P2(e,f,r);return c.top=hi(h.top,c.top),c.right=Nu(h.right,c.right),c.bottom=Nu(h.bottom,c.bottom),c.left=hi(h.left,c.left),c},P2(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function GQ(n){const{width:e,height:t}=G3(n);return{width:e,height:t}}function VQ(n,e,t){const i=Ls(e),r=Fs(e),s=t==="fixed",o=Jl(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=xa(0);if(i||!i&&!s)if(($u(e)!=="body"||kh(r))&&(a=hy(e)),i){const m=Jl(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else r&&(l.x=hS(r));let c=0,f=0;if(r&&!i&&!s){const m=r.getBoundingClientRect();f=m.top+a.scrollTop,c=m.left+a.scrollLeft-hS(r,m)}const h=o.left+a.scrollLeft-l.x-c,p=o.top+a.scrollTop-l.y-f;return{x:h,y:p,width:o.width,height:o.height}}function _A(n){return os(n).position==="static"}function I2(n,e){if(!Ls(n)||os(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Fs(n)===t&&(t=t.ownerDocument.body),t}function j3(n,e){const t=or(n);if(dy(n))return t;if(!Ls(n)){let r=ya(n);for(;r&&!Fu(r);){if(Pi(r)&&!_A(r))return r;r=ya(r)}return t}let i=I2(n,e);for(;i&&gQ(i)&&_A(i);)i=I2(i,e);return i&&Fu(i)&&_A(i)&&!jw(i)?t:i||vQ(n)||t}const WQ=async function(n){const e=this.getOffsetParent||j3,t=this.getDimensions,i=await t(n.floating);return{reference:VQ(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function jQ(n){return os(n).direction==="rtl"}const XQ={convertOffsetParentRelativeRectToViewportRelativeRect:FQ,getDocumentElement:Fs,getClippingRect:zQ,getOffsetParent:j3,getElementRects:WQ,getClientRects:NQ,getDimensions:GQ,getScale:vu,isElement:Pi,isRTL:jQ};function JQ(n,e){let t=null,i;const r=Fs(n);function s(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:f,width:h,height:p}=n.getBoundingClientRect();if(a||e(),!h||!p)return;const m=rg(f),v=rg(r.clientWidth-(c+h)),A=rg(r.clientHeight-(f+p)),x=rg(c),_={rootMargin:-m+"px "+-v+"px "+-A+"px "+-x+"px",threshold:hi(0,Nu(1,l))||1};let S=!0;function w(R){const b=R[0].intersectionRatio;if(b!==l){if(!S)return o();b?o(!1,b):i=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{t=new IntersectionObserver(w,{..._,root:r.ownerDocument})}catch{t=new IntersectionObserver(w,_)}t.observe(n)}return o(!0),s}function KQ(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=Jw(n),f=r||s?[...c?lh(c):[],...lh(e)]:[];f.forEach(g=>{r&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const h=c&&a?JQ(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[_]=g;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,A=l?Jl(n):null;l&&x();function x(){const g=Jl(n);A&&(g.x!==A.x||g.y!==A.y||g.width!==A.width||g.height!==A.height)&&t(),A=g,v=requestAnimationFrame(x)}return t(),()=>{var g;f.forEach(_=>{r&&_.removeEventListener("scroll",t),s&&_.removeEventListener("resize",t)}),h==null||h(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const AA=py,YQ=PQ,$Q=IQ,QQ=bQ,qQ=BQ,ZQ=(n,e,t)=>{const i=new Map,r={platform:XQ,...t},s={...r.platform,_c:i};return TQ(n,e,{...r,platform:s})};var Cg=typeof document<"u"?D.useLayoutEffect:D.useEffect;function ev(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!ev(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const s=r[i];if(!(s==="_owner"&&n.$$typeof)&&!ev(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function X3(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function B2(n,e){const t=X3(n);return Math.round(e*t)/t}function SA(n){const e=D.useRef(n);return Cg(()=>{e.current=n}),e}function eq(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[f,h]=D.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=D.useState(i);ev(p,i)||m(i);const[v,A]=D.useState(null),[x,g]=D.useState(null),_=D.useCallback(L=>{L!==b.current&&(b.current=L,A(L))},[]),S=D.useCallback(L=>{L!==I.current&&(I.current=L,g(L))},[]),w=s||v,R=o||x,b=D.useRef(null),I=D.useRef(null),B=D.useRef(f),z=l!=null,C=SA(l),P=SA(r),j=SA(c),X=D.useCallback(()=>{if(!b.current||!I.current)return;const L={placement:e,strategy:t,middleware:p};P.current&&(L.platform=P.current),ZQ(b.current,I.current,L).then(G=>{const V={...G,isPositioned:j.current!==!1};ee.current&&!ev(B.current,V)&&(B.current=V,es.flushSync(()=>{h(V)}))})},[p,e,t,P,j]);Cg(()=>{c===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,h(L=>({...L,isPositioned:!1})))},[c]);const ee=D.useRef(!1);Cg(()=>(ee.current=!0,()=>{ee.current=!1}),[]),Cg(()=>{if(w&&(b.current=w),R&&(I.current=R),w&&R){if(C.current)return C.current(w,R,X);X()}},[w,R,X,C,z]);const le=D.useMemo(()=>({reference:b,floating:I,setReference:_,setFloating:S}),[_,S]),$=D.useMemo(()=>({reference:w,floating:R}),[w,R]),K=D.useMemo(()=>{const L={position:t,left:0,top:0};if(!$.floating)return L;const G=B2($.floating,f.x),V=B2($.floating,f.y);return a?{...L,transform:"translate("+G+"px, "+V+"px)",...X3($.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:G,top:V}},[t,a,$.floating,f.x,f.y]);return D.useMemo(()=>({...f,update:X,refs:le,elements:$,floatingStyles:K}),[f,X,le,$,K])}const J3=(n,e)=>({...YQ(n),options:[n,e]}),tq=(n,e)=>({...$Q(n),options:[n,e]}),nq=(n,e)=>({...QQ(n),options:[n,e]}),iq=(n,e)=>({...qQ(n),options:[n,e]}),K3={...Rg},rq=K3.useInsertionEffect,sq=rq||(n=>n());function Y3(n){const e=D.useRef(()=>{});return sq(()=>{e.current=n}),D.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}var pS=typeof document<"u"?D.useLayoutEffect:D.useEffect;let L2=!1,oq=0;const D2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+oq++;function aq(){const[n,e]=D.useState(()=>L2?D2():void 0);return pS(()=>{n==null&&e(D2())},[]),D.useEffect(()=>{L2=!0},[]),n}const lq=K3.useId,cq=lq||aq;function uq(){const n=new Map;return{emit(e,t){var i;(i=n.get(e))==null||i.forEach(r=>r(t))},on(e,t){n.set(e,[...n.get(e)||[],t])},off(e,t){var i;n.set(e,((i=n.get(e))==null?void 0:i.filter(r=>r!==t))||[])}}}const fq=D.createContext(null),dq=D.createContext(null),hq=()=>{var n;return((n=D.useContext(fq))==null?void 0:n.id)||null},pq=()=>D.useContext(dq),mq="data-floating-ui-focusable";function gq(n){const{open:e=!1,onOpenChange:t,elements:i}=n,r=cq(),s=D.useRef({}),[o]=D.useState(()=>uq()),a=hq()!=null,[l,c]=D.useState(i.reference),f=Y3((m,v,A)=>{s.current.openEvent=m?v:void 0,o.emit("openchange",{open:m,event:v,reason:A,nested:a}),t==null||t(m,v,A)}),h=D.useMemo(()=>({setPositionReference:c}),[]),p=D.useMemo(()=>({reference:l||i.reference||null,floating:i.floating||null,domReference:i.reference}),[l,i.reference,i.floating]);return D.useMemo(()=>({dataRef:s,open:e,onOpenChange:f,elements:p,events:o,floatingId:r,refs:h}),[e,f,p,o,r,h])}function vq(n){n===void 0&&(n={});const{nodeId:e}=n,t=gq({...n,elements:{reference:null,floating:null,...n.elements}}),i=n.rootContext||t,r=i.elements,[s,o]=D.useState(null),[a,l]=D.useState(null),f=(r==null?void 0:r.reference)||s,h=D.useRef(null),p=pq();pS(()=>{f&&(h.current=f)},[f]);const m=eq({...n,elements:{...r,...a&&{reference:a}}}),v=D.useCallback(S=>{const w=Pi(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),contextElement:S}:S;l(w),m.refs.setReference(w)},[m.refs]),A=D.useCallback(S=>{(Pi(S)||S===null)&&(h.current=S,o(S)),(Pi(m.refs.reference.current)||m.refs.reference.current===null||S!==null&&!Pi(S))&&m.refs.setReference(S)},[m.refs]),x=D.useMemo(()=>({...m.refs,setReference:A,setPositionReference:v,domReference:h}),[m.refs,A,v]),g=D.useMemo(()=>({...m.elements,domReference:f}),[m.elements,f]),_=D.useMemo(()=>({...m,...i,refs:x,elements:g,nodeId:e}),[m,x,g,e,i]);return pS(()=>{i.dataRef.current.floatingContext=_;const S=p==null?void 0:p.nodesRef.current.find(w=>w.id===e);S&&(S.context=_)}),D.useMemo(()=>({...m,context:_,refs:x,elements:g}),[m,x,g,_])}const F2="active",N2="selected";function MA(n,e,t){const i=new Map,r=t==="item";let s=n;if(r&&n){const{[F2]:o,[N2]:a,...l}=n;s=l}return{...t==="floating"&&{tabIndex:-1,[mq]:""},...s,...e.map(o=>{const a=o?o[t]:null;return typeof a=="function"?n?a(n):null:a}).concat(n).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,f]=l;if(!(r&&[F2,N2].includes(c)))if(c.indexOf("on")===0){if(i.has(c)||i.set(c,[]),typeof f=="function"){var h;(h=i.get(c))==null||h.push(f),o[c]=function(){for(var p,m=arguments.length,v=new Array(m),A=0;A<m;A++)v[A]=arguments[A];return(p=i.get(c))==null?void 0:p.map(x=>x(...v)).find(x=>x!==void 0)}}}else o[c]=f}),o),{})}}function yq(n){n===void 0&&(n=[]);const e=n.map(a=>a==null?void 0:a.reference),t=n.map(a=>a==null?void 0:a.floating),i=n.map(a=>a==null?void 0:a.item),r=D.useCallback(a=>MA(a,n,"reference"),e),s=D.useCallback(a=>MA(a,n,"floating"),t),o=D.useCallback(a=>MA(a,n,"item"),i);return D.useMemo(()=>({getReferenceProps:r,getFloatingProps:s,getItemProps:o}),[r,s,o])}function O2(n,e){return{...n,rects:{...n.rects,floating:{...n.rects.floating,height:e}}}}const xq=n=>({name:"inner",options:n,async fn(e){const{listRef:t,overflowRef:i,onFallbackChange:r,offset:s=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...f}=Qu(n,e),{rects:h,elements:{floating:p}}=e,m=t.current[o],v=(c==null?void 0:c.current)||p,A=p.clientTop||v.clientTop,x=p.clientTop!==0,g=v.clientTop!==0,_=p===v;if(!m)return{};const S={...e,...await J3(-m.offsetTop-p.clientTop-h.reference.height/2-m.offsetHeight/2-s).fn(e)},w=await AA(O2(S,v.scrollHeight+A+p.clientTop),f),R=await AA(S,{...f,elementContext:"reference"}),b=hi(0,w.top),I=S.y+b,B=ch(hi(0,v.scrollHeight+(x&&_||g?A*2:0)-b-hi(0,w.bottom)));if(v.style.maxHeight=B+"px",v.scrollTop=b,r){const z=v.scrollHeight>v.offsetHeight&&v.offsetHeight<m.offsetHeight*a-1||R.top>=-l||R.bottom>=-l;es.flushSync(()=>r(z))}return i&&(i.current=await AA(O2({...S,y:I},v.offsetHeight+A+p.clientTop),f)),{y:I}}});function _q(n,e){const{open:t,elements:i}=n,{enabled:r=!0,overflowRef:s,scrollRef:o,onChange:a}=e,l=Y3(a),c=D.useRef(!1),f=D.useRef(null),h=D.useRef(null);D.useEffect(()=>{if(!r)return;function m(A){if(A.ctrlKey||!v||s.current==null)return;const x=A.deltaY,g=s.current.top>=-.5,_=s.current.bottom>=-.5,S=v.scrollHeight-v.clientHeight,w=x<0?-1:1,R=x<0?"max":"min";v.scrollHeight<=v.clientHeight||(!g&&x>0||!_&&x<0?(A.preventDefault(),es.flushSync(()=>{l(b=>b+Math[R](x,S*w))})):/firefox/i.test(yQ())&&(v.scrollTop+=x))}const v=(o==null?void 0:o.current)||i.floating;if(t&&v)return v.addEventListener("wheel",m),requestAnimationFrame(()=>{f.current=v.scrollTop,s.current!=null&&(h.current={...s.current})}),()=>{f.current=null,h.current=null,v.removeEventListener("wheel",m)}},[r,t,i.floating,s,o,l]);const p=D.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const m=(o==null?void 0:o.current)||i.floating;if(!(!s.current||!m||!c.current)){if(f.current!==null){const v=m.scrollTop-f.current;(s.current.bottom<-.5&&v<-1||s.current.top<-.5&&v>1)&&es.flushSync(()=>l(A=>A+v))}requestAnimationFrame(()=>{f.current=m.scrollTop})}}}),[i.floating,l,s,o]);return D.useMemo(()=>r?{floating:p}:{},[r,p])}let qu=D.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});qu.displayName="FloatingContext";let Kw=D.createContext(null);Kw.displayName="PlacementContext";function Aq(n){return D.useMemo(()=>n?typeof n=="string"?{to:n}:n:null,[n])}function Sq(){return D.useContext(qu).setReference}function Mq(){return D.useContext(qu).getReferenceProps}function wq(){let{getFloatingProps:n,slot:e}=D.useContext(qu);return D.useCallback((...t)=>Object.assign({},n(...t),{"data-anchor":e.anchor}),[n,e])}function Eq(n=null){n===!1&&(n=null),typeof n=="string"&&(n={to:n});let e=D.useContext(Kw),t=D.useMemo(()=>n,[JSON.stringify(n,typeof HTMLElement<"u"?(r,s)=>s instanceof HTMLElement?s.outerHTML:s:void 0)]);In(()=>{e==null||e(t??null)},[e,t]);let i=D.useContext(qu);return D.useMemo(()=>[i.setFloating,n?i.styles:{}],[i.setFloating,n,i.styles])}let U2=4;function Cq({children:n,enabled:e=!0}){let[t,i]=D.useState(null),[r,s]=D.useState(0),o=D.useRef(null),[a,l]=D.useState(null);Tq(a);let c=e&&t!==null&&a!==null,{to:f="bottom",gap:h=0,offset:p=0,padding:m=0,inner:v}=bq(t,a),[A,x="center"]=f.split(" ");In(()=>{c&&s(0)},[c]);let{refs:g,floatingStyles:_,context:S}=vq({open:c,placement:A==="selection"?x==="center"?"bottom":`bottom-${x}`:x==="center"?`${A}`:`${A}-${x}`,strategy:"absolute",transform:!1,middleware:[J3({mainAxis:A==="selection"?0:h,crossAxis:p}),tq({padding:m}),A!=="selection"&&nq({padding:m}),A==="selection"&&v?xq({...v,padding:m,overflowRef:o,offset:r,minItemsVisible:U2,referenceOverflowThreshold:m,onFallbackChange(P){var j,X;if(!P)return;let ee=S.elements.floating;if(!ee)return;let le=parseFloat(getComputedStyle(ee).scrollPaddingBottom)||0,$=Math.min(U2,ee.childElementCount),K=0,L=0;for(let G of(X=(j=S.elements.floating)==null?void 0:j.childNodes)!=null?X:[])if(G instanceof HTMLElement){let V=G.offsetTop,te=V+G.clientHeight+le,ve=ee.scrollTop,Le=ve+ee.clientHeight;if(V>=ve&&te<=Le)$--;else{L=Math.max(0,Math.min(te,Le)-Math.max(V,ve)),K=G.clientHeight;break}}$>=1&&s(G=>{let V=K*$-L+le;return G>=V?G:V})}}):null,iq({padding:m,apply({availableWidth:P,availableHeight:j,elements:X}){Object.assign(X.floating.style,{overflow:"auto",maxWidth:`${P}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${j}px)`})}})].filter(Boolean),whileElementsMounted:KQ}),[w=A,R=x]=S.placement.split("-");A==="selection"&&(w="selection");let b=D.useMemo(()=>({anchor:[w,R].filter(Boolean).join(" ")}),[w,R]),I=_q(S,{overflowRef:o,onChange:s}),{getReferenceProps:B,getFloatingProps:z}=yq([I]),C=on(P=>{l(P),g.setFloating(P)});return D.createElement(Kw.Provider,{value:i},D.createElement(qu.Provider,{value:{setFloating:C,setReference:g.setReference,styles:_,getReferenceProps:B,getFloatingProps:z,slot:b}},n))}function Tq(n){In(()=>{if(!n)return;let e=new MutationObserver(()=>{let t=window.getComputedStyle(n).maxHeight,i=parseFloat(t);if(isNaN(i))return;let r=parseInt(t);isNaN(r)||i!==r&&(n.style.maxHeight=`${Math.ceil(i)}px`)});return e.observe(n,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[n])}function bq(n,e){var t,i,r;let s=wA((t=n==null?void 0:n.gap)!=null?t:"var(--anchor-gap, 0)",e),o=wA((i=n==null?void 0:n.offset)!=null?i:"var(--anchor-offset, 0)",e),a=wA((r=n==null?void 0:n.padding)!=null?r:"var(--anchor-padding, 0)",e);return{...n,gap:s,offset:o,padding:a}}function wA(n,e,t=void 0){let i=cy(),r=on((l,c)=>{if(l==null)return[t,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[t,null];let f=k2(l,c);return[f,h=>{let p=$3(l);{let m=p.map(v=>window.getComputedStyle(c).getPropertyValue(v));i.requestAnimationFrame(function v(){i.nextFrame(v);let A=!1;for(let[g,_]of p.entries()){let S=window.getComputedStyle(c).getPropertyValue(_);if(m[g]!==S){m[g]=S,A=!0;break}}if(!A)return;let x=k2(l,c);f!==x&&(h(x),f=x)})}return i.dispose}]}return[t,null]}),s=D.useMemo(()=>r(n,e)[0],[n,e]),[o=s,a]=D.useState();return In(()=>{let[l,c]=r(n,e);if(a(l),!!c)return c(a)},[n,e]),o}function $3(n){let e=/var\((.*)\)/.exec(n);if(e){let t=e[1].indexOf(",");if(t===-1)return[e[1]];let i=e[1].slice(0,t).trim(),r=e[1].slice(t+1).trim();return r?[i,...$3(r)]:[i]}return[]}function k2(n,e){let t=document.createElement("div");e.appendChild(t),t.style.setProperty("margin-top","0px","important"),t.style.setProperty("margin-top",n,"important");let i=parseFloat(window.getComputedStyle(t).marginTop)||0;return e.removeChild(t),i}let Yw=D.createContext(null);Yw.displayName="OpenClosedContext";var uh=(n=>(n[n.Open=1]="Open",n[n.Closed=2]="Closed",n[n.Closing=4]="Closing",n[n.Opening=8]="Opening",n))(uh||{});function Rq(){return D.useContext(Yw)}function Pq({value:n,children:e}){return Ii.createElement(Yw.Provider,{value:n},e)}function Iq(n){throw new Error("Unexpected object: "+n)}var pi=(n=>(n[n.First=0]="First",n[n.Previous=1]="Previous",n[n.Next=2]="Next",n[n.Last=3]="Last",n[n.Specific=4]="Specific",n[n.Nothing=5]="Nothing",n))(pi||{});function EA(n,e){let t=e.resolveItems();if(t.length<=0)return null;let i=e.resolveActiveIndex(),r=i??-1;switch(n.focus){case 0:{for(let s=0;s<t.length;++s)if(!e.resolveDisabled(t[s],s,t))return s;return i}case 1:{r===-1&&(r=t.length);for(let s=r-1;s>=0;--s)if(!e.resolveDisabled(t[s],s,t))return s;return i}case 2:{for(let s=r+1;s<t.length;++s)if(!e.resolveDisabled(t[s],s,t))return s;return i}case 3:{for(let s=t.length-1;s>=0;--s)if(!e.resolveDisabled(t[s],s,t))return s;return i}case 4:{for(let s=0;s<t.length;++s)if(e.resolveId(t[s],s,t)===n.id)return s;return i}case 5:return null;default:Iq(n)}}function Bq(n){let e=on(n),t=D.useRef(!1);D.useEffect(()=>(t.current=!1,()=>{t.current=!0,w3(()=>{t.current&&e()})}),[e])}function Lq(){let n=typeof document>"u";return"useSyncExternalStore"in Rg?(e=>e.useSyncExternalStore)(Rg)(()=>()=>{},()=>!1,()=>!n):!1}function Dq(){let n=Lq(),[e,t]=D.useState(Il.isHandoffComplete);return e&&Il.isHandoffComplete===!1&&t(!1),D.useEffect(()=>{e!==!0&&t(!0)},[e]),D.useEffect(()=>Il.handoff(),[]),n?!1:e}let Fq=D.createContext(!1);function Nq(){return D.useContext(Fq)}function Oq(n){let e=Nq(),t=D.useContext(q3),i=Ww(n),[r,s]=D.useState(()=>{var o;if(!e&&t!==null)return(o=t.current)!=null?o:null;if(Il.isServer)return null;let a=i==null?void 0:i.getElementById("headlessui-portal-root");if(a)return a;if(i===null)return null;let l=i.createElement("div");return l.setAttribute("id","headlessui-portal-root"),i.body.appendChild(l)});return D.useEffect(()=>{r!==null&&(i!=null&&i.body.contains(r)||i==null||i.body.appendChild(r))},[r,i]),D.useEffect(()=>{e||t!==null&&s(t.current)},[t,s,e]),r}let Q3=D.Fragment,Uq=Or(function(n,e){let t=n,i=D.useRef(null),r=wo(w$(f=>{i.current=f}),e),s=Ww(i),o=Oq(i),[a]=D.useState(()=>{var f;return Il.isServer?null:(f=s==null?void 0:s.createElement("div"))!=null?f:null}),l=D.useContext(Gq),c=Dq();return In(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),In(()=>{if(a&&l)return l.register(a)},[l,a]),Bq(()=>{var f;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((f=o.parentElement)==null||f.removeChild(o)))}),c?!o||!a?null:es.createPortal(Nr({ourProps:{ref:r},theirProps:t,slot:{},defaultTag:Q3,name:"Portal"}),a):null});function kq(n,e){let t=wo(e),{enabled:i=!0,...r}=n;return i?Ii.createElement(Uq,{...r,ref:t}):Nr({ourProps:{ref:t},theirProps:r,slot:{},defaultTag:Q3,name:"Portal"})}let Hq=D.Fragment,q3=D.createContext(null);function zq(n,e){let{target:t,...i}=n,r={ref:wo(e)};return Ii.createElement(q3.Provider,{value:t},Nr({ourProps:r,theirProps:i,defaultTag:Hq,name:"Popover.Group"}))}let Gq=D.createContext(null),Vq=Or(kq),Wq=Or(zq),jq=Object.assign(Vq,{Group:Wq});function Xq(n,e){let t=D.useRef({left:0,top:0});if(In(()=>{if(!e)return;let r=e.getBoundingClientRect();r&&(t.current=r)},[n,e]),e==null||!n||e===document.activeElement)return!1;let i=e.getBoundingClientRect();return i.top!==t.current.top||i.left!==t.current.left}let H2=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function z2(n){var e,t;let i=(e=n.innerText)!=null?e:"",r=n.cloneNode(!0);if(!(r instanceof HTMLElement))return i;let s=!1;for(let a of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),s=!0;let o=s?(t=r.innerText)!=null?t:"":i;return H2.test(o)&&(o=o.replace(H2,"")),o}function Jq(n){let e=n.getAttribute("aria-label");if(typeof e=="string")return e.trim();let t=n.getAttribute("aria-labelledby");if(t){let i=t.split(" ").map(r=>{let s=document.getElementById(r);if(s){let o=s.getAttribute("aria-label");return typeof o=="string"?o.trim():z2(s).trim()}return null}).filter(Boolean);if(i.length>0)return i.join(", ")}return z2(n).trim()}function Kq(n){let e=D.useRef(""),t=D.useRef("");return on(()=>{let i=n.current;if(!i)return"";let r=i.innerText;if(e.current===r)return t.current;let s=Jq(i).trim().toLowerCase();return e.current=r,t.current=s,s})}var Yq=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(Yq||{}),$q=(n=>(n[n.Pointer=0]="Pointer",n[n.Other=1]="Other",n))($q||{}),Qq=(n=>(n[n.OpenMenu=0]="OpenMenu",n[n.CloseMenu=1]="CloseMenu",n[n.GoToItem=2]="GoToItem",n[n.Search=3]="Search",n[n.ClearSearch=4]="ClearSearch",n[n.RegisterItem=5]="RegisterItem",n[n.UnregisterItem=6]="UnregisterItem",n[n.SetButtonElement=7]="SetButtonElement",n[n.SetItemsElement=8]="SetItemsElement",n))(Qq||{});function CA(n,e=t=>t){let t=n.activeItemIndex!==null?n.items[n.activeItemIndex]:null,i=F3(e(n.items.slice()),s=>s.dataRef.current.domRef.current),r=t?i.indexOf(t):null;return r===-1&&(r=null),{items:i,activeItemIndex:r}}let qq={1(n){return n.menuState===1?n:{...n,activeItemIndex:null,menuState:1}},0(n){return n.menuState===0?n:{...n,__demoMode:!1,menuState:0}},2:(n,e)=>{var t,i,r,s,o;if(n.menuState===1)return n;let a={...n,searchQuery:"",activationTrigger:(t=e.trigger)!=null?t:1,__demoMode:!1};if(e.focus===pi.Nothing)return{...a,activeItemIndex:null};if(e.focus===pi.Specific)return{...a,activeItemIndex:n.items.findIndex(f=>f.id===e.id)};if(e.focus===pi.Previous){let f=n.activeItemIndex;if(f!==null){let h=n.items[f].dataRef.current.domRef,p=EA(e,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(p!==null){let m=n.items[p].dataRef.current.domRef;if(((i=h.current)==null?void 0:i.previousElementSibling)===m.current||((r=m.current)==null?void 0:r.previousElementSibling)===null)return{...a,activeItemIndex:p}}}}else if(e.focus===pi.Next){let f=n.activeItemIndex;if(f!==null){let h=n.items[f].dataRef.current.domRef,p=EA(e,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(p!==null){let m=n.items[p].dataRef.current.domRef;if(((s=h.current)==null?void 0:s.nextElementSibling)===m.current||((o=m.current)==null?void 0:o.nextElementSibling)===null)return{...a,activeItemIndex:p}}}}let l=CA(n),c=EA(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});return{...a,...l,activeItemIndex:c}},3:(n,e)=>{let t=n.searchQuery!==""?0:1,i=n.searchQuery+e.value.toLowerCase(),r=(n.activeItemIndex!==null?n.items.slice(n.activeItemIndex+t).concat(n.items.slice(0,n.activeItemIndex+t)):n.items).find(o=>{var a;return((a=o.dataRef.current.textValue)==null?void 0:a.startsWith(i))&&!o.dataRef.current.disabled}),s=r?n.items.indexOf(r):-1;return s===-1||s===n.activeItemIndex?{...n,searchQuery:i}:{...n,searchQuery:i,activeItemIndex:s,activationTrigger:1}},4(n){return n.searchQuery===""?n:{...n,searchQuery:"",searchActiveItemIndex:null}},5:(n,e)=>{let t=CA(n,i=>[...i,{id:e.id,dataRef:e.dataRef}]);return{...n,...t}},6:(n,e)=>{let t=CA(n,i=>{let r=i.findIndex(s=>s.id===e.id);return r!==-1&&i.splice(r,1),i});return{...n,...t,activationTrigger:1}},7:(n,e)=>n.buttonElement===e.element?n:{...n,buttonElement:e.element},8:(n,e)=>n.itemsElement===e.element?n:{...n,itemsElement:e.element}},$w=D.createContext(null);$w.displayName="MenuContext";function my(n){let e=D.useContext($w);if(e===null){let t=new Error(`<${n} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,my),t}return e}function Zq(n,e){return Uh(e.type,qq,n,e)}let eZ=D.Fragment;function tZ(n,e){let{__demoMode:t=!1,...i}=n,r=D.useReducer(Zq,{__demoMode:t,menuState:t?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsElement:o,buttonElement:a},l]=r,c=wo(e);q$(s===0,[a,o],(m,v)=>{l({type:1}),Vw(v,Gw.Loose)||(m.preventDefault(),a==null||a.focus())});let f=on(()=>{l({type:1})}),h=D.useMemo(()=>({open:s===0,close:f}),[s,f]),p={ref:c};return Ii.createElement(Cq,null,Ii.createElement($w.Provider,{value:r},Ii.createElement(Pq,{value:Uh(s,{0:uh.Open,1:uh.Closed})},Nr({ourProps:p,theirProps:i,slot:h,defaultTag:eZ,name:"Menu"}))))}let nZ="button";function iZ(n,e){var t;let i=D.useId(),{id:r=`headlessui-menu-button-${i}`,disabled:s=!1,autoFocus:o=!1,...a}=n,[l,c]=my("Menu.Button"),f=Mq(),h=y$(),p=wo(e,Sq(),on(B=>c({type:7,element:B}))),m=on(B=>{switch(B.key){case $n.Space:case $n.Enter:case $n.ArrowDown:B.preventDefault(),B.stopPropagation(),es.flushSync(()=>c({type:0})),c({type:2,focus:pi.First});break;case $n.ArrowUp:B.preventDefault(),B.stopPropagation(),es.flushSync(()=>c({type:0})),c({type:2,focus:pi.Last});break}}),v=on(B=>{switch(B.key){case $n.Space:B.preventDefault();break}}),A=on(B=>{var z;if(S$(B.currentTarget))return B.preventDefault();s||(l.menuState===0?(es.flushSync(()=>c({type:1})),(z=l.buttonElement)==null||z.focus({preventScroll:!0})):(B.preventDefault(),c({type:0})))}),{isFocusVisible:x,focusProps:g}=c$({autoFocus:o}),{isHovered:_,hoverProps:S}=l$({isDisabled:s}),{pressed:w,pressProps:R}=m$({disabled:s}),b=D.useMemo(()=>({open:l.menuState===0,active:w||l.menuState===0,disabled:s,hover:_,focus:x,autofocus:o}),[l,_,x,w,s,o]),I=T3(f(),{ref:p,id:r,type:Z$(n,l.buttonElement),"aria-haspopup":"menu","aria-controls":(t=l.itemsElement)==null?void 0:t.id,"aria-expanded":l.menuState===0,disabled:s||void 0,autoFocus:o,onKeyDown:m,onKeyUp:v,onClick:A},g,S,R);return Nr({mergeRefs:h,ourProps:I,theirProps:a,slot:b,defaultTag:nZ,name:"Menu.Button"})}let rZ="div",sZ=aS.RenderStrategy|aS.Static;function oZ(n,e){var t,i;let r=D.useId(),{id:s=`headlessui-menu-items-${r}`,anchor:o,portal:a=!1,modal:l=!0,transition:c=!1,...f}=n,h=Aq(o),[p,m]=my("Menu.Items"),[v,A]=Eq(h),x=wq(),[g,_]=D.useState(null),S=wo(e,h?v:null,on(K=>m({type:8,element:K})),_),w=Ww(p.itemsElement);h&&(a=!0);let R=Rq(),[b,I]=fQ(c,g,R!==null?(R&uh.Open)===uh.Open:p.menuState===0);U$(b,p.buttonElement,()=>{m({type:1})});let B=p.__demoMode?!1:l&&p.menuState===0;sQ(B,w);let z=p.__demoMode?!1:l&&p.menuState===0;O$(z,{allowed:D.useCallback(()=>[p.buttonElement,p.itemsElement],[p.buttonElement,p.itemsElement])});let C=p.menuState!==0,P=Xq(C,p.buttonElement)?!1:b;D.useEffect(()=>{let K=p.itemsElement;K&&p.menuState===0&&K!==(w==null?void 0:w.activeElement)&&K.focus({preventScroll:!0})},[p.menuState,p.itemsElement,w]),mQ(p.menuState===0,{container:p.itemsElement,accept(K){return K.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:K.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(K){K.setAttribute("role","none")}});let j=cy(),X=on(K=>{var L,G,V;switch(j.dispose(),K.key){case $n.Space:if(p.searchQuery!=="")return K.preventDefault(),K.stopPropagation(),m({type:3,value:K.key});case $n.Enter:if(K.preventDefault(),K.stopPropagation(),m({type:1}),p.activeItemIndex!==null){let{dataRef:te}=p.items[p.activeItemIndex];(G=(L=te.current)==null?void 0:L.domRef.current)==null||G.click()}D3(p.buttonElement);break;case $n.ArrowDown:return K.preventDefault(),K.stopPropagation(),m({type:2,focus:pi.Next});case $n.ArrowUp:return K.preventDefault(),K.stopPropagation(),m({type:2,focus:pi.Previous});case $n.Home:case $n.PageUp:return K.preventDefault(),K.stopPropagation(),m({type:2,focus:pi.First});case $n.End:case $n.PageDown:return K.preventDefault(),K.stopPropagation(),m({type:2,focus:pi.Last});case $n.Escape:K.preventDefault(),K.stopPropagation(),es.flushSync(()=>m({type:1})),(V=p.buttonElement)==null||V.focus({preventScroll:!0});break;case $n.Tab:K.preventDefault(),K.stopPropagation(),es.flushSync(()=>m({type:1})),J$(p.buttonElement,K.shiftKey?uS.Previous:uS.Next);break;default:K.key.length===1&&(m({type:3,value:K.key}),j.setTimeout(()=>m({type:4}),350));break}}),ee=on(K=>{switch(K.key){case $n.Space:K.preventDefault();break}}),le=D.useMemo(()=>({open:p.menuState===0}),[p.menuState]),$=T3(h?x():{},{"aria-activedescendant":p.activeItemIndex===null||(t=p.items[p.activeItemIndex])==null?void 0:t.id,"aria-labelledby":(i=p.buttonElement)==null?void 0:i.id,id:s,onKeyDown:X,onKeyUp:ee,role:"menu",tabIndex:p.menuState===0?0:void 0,ref:S,style:{...f.style,...A,"--button-width":D$(p.buttonElement,!0).width},...uQ(I)});return Ii.createElement(jq,{enabled:a?n.static||b:!1},Nr({ourProps:$,theirProps:f,slot:le,defaultTag:rZ,features:sZ,visible:P,name:"Menu.Items"}))}let aZ=D.Fragment;function lZ(n,e){let t=D.useId(),{id:i=`headlessui-menu-item-${t}`,disabled:r=!1,...s}=n,[o,a]=my("Menu.Item"),l=o.activeItemIndex!==null?o.items[o.activeItemIndex].id===i:!1,c=D.useRef(null),f=wo(e,c);In(()=>{if(!o.__demoMode&&o.menuState===0&&l&&o.activationTrigger!==0)return Ds().requestAnimationFrame(()=>{var z,C;(C=(z=c.current)==null?void 0:z.scrollIntoView)==null||C.call(z,{block:"nearest"})})},[o.__demoMode,c,l,o.menuState,o.activationTrigger,o.activeItemIndex]);let h=Kq(c),p=D.useRef({disabled:r,domRef:c,get textValue(){return h()}});In(()=>{p.current.disabled=r},[p,r]),In(()=>(a({type:5,id:i,dataRef:p}),()=>a({type:6,id:i})),[p,i]);let m=on(()=>{a({type:1})}),v=on(z=>{if(r)return z.preventDefault();a({type:1}),D3(o.buttonElement)}),A=on(()=>{if(r)return a({type:2,focus:pi.Nothing});a({type:2,focus:pi.Specific,id:i})}),x=oQ(),g=on(z=>{x.update(z),!r&&(l||a({type:2,focus:pi.Specific,id:i,trigger:0}))}),_=on(z=>{x.wasMoved(z)&&(r||l||a({type:2,focus:pi.Specific,id:i,trigger:0}))}),S=on(z=>{x.wasMoved(z)&&(r||l&&a({type:2,focus:pi.Nothing}))}),[w,R]=P3(),[b,I]=E$(),B=D.useMemo(()=>({active:l,focus:l,disabled:r,close:m}),[l,r,m]);return Ii.createElement(R,null,Ii.createElement(I,null,Nr({ourProps:{id:i,ref:f,role:"menuitem",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-labelledby":w,"aria-describedby":b,disabled:void 0,onClick:v,onFocus:A,onPointerEnter:g,onMouseEnter:g,onPointerMove:_,onMouseMove:_,onPointerLeave:S,onMouseLeave:S},theirProps:s,slot:B,defaultTag:aZ,name:"Menu.Item"})))}let cZ="div";function uZ(n,e){let[t,i]=P3();return Ii.createElement(i,null,Nr({ourProps:{ref:e,"aria-labelledby":t,role:"group"},theirProps:n,slot:{},defaultTag:cZ,name:"Menu.Section"}))}let fZ="header";function dZ(n,e){let t=D.useId(),{id:i=`headlessui-menu-heading-${t}`,...r}=n,s=Hw();In(()=>s.register(i),[i,s.register]);let o={id:i,ref:e,role:"presentation",...s.props};return Nr({ourProps:o,theirProps:r,slot:{},defaultTag:fZ,name:"Menu.Heading"})}let hZ="div";function pZ(n,e){return Nr({ourProps:{ref:e,role:"separator"},theirProps:n,slot:{},defaultTag:hZ,name:"Menu.Separator"})}let mZ=Or(tZ),Z3=Or(iZ),eO=Or(oZ),Tg=Or(lZ),gZ=Or(uZ),vZ=Or(dZ),yZ=Or(pZ),xZ=Object.assign(mZ,{Button:Z3,Items:eO,Item:Tg,Section:gZ,Heading:vZ,Separator:yZ});const _Z=()=>{const[n,e]=D.useState(""),[t,i]=D.useState(!1);return ie.jsx("nav",{className:"sm:px-16 px-6 w-full flex items-center py-5 fixed top-0 z-20 bg-transparent",children:ie.jsxs("div",{className:"w-full flex justify-between items-center max-w-7x1 mx-auto",children:[ie.jsx(i4,{to:"/",className:"flex items-center gap-2",onClick:()=>{e(""),window.scrollTo(0,0)},children:ie.jsx("p",{className:"text-white text-[26px] font-bold cursor-pointer",children:"Riskipad"})}),ie.jsx("ul",{className:"list-none hidden md:flex flex-row gap-10",children:WY.map(r=>ie.jsx("li",{className:"text-secondary text-[18px] font-bold hover:text-white",children:ie.jsxs("a",{href:`#${r.id}`,children:[" ",r.title," "]})},r.id))}),ie.jsx("div",{className:"hidden md:flex flex-row gap-10",children:ie.jsx("a",{href:"https://github.com/Riskipad",className:"px-5 py-2 text-[#804dee] bg-transparent hover:bg-slate-800/75 ease-in-out duration-200 rounded-lg border-solid border-2 border-[#804dee] text-[16px] font-bold cursor-pointer",children:"My Github"})}),ie.jsxs(xZ,{as:"div",className:"md:hidden relative inline-block text-left",children:[ie.jsx("div",{children:ie.jsx(Z3,{children:ie.jsx("img",{src:t?kY:UY,alt:"menu",className:"w-[30px] h-[30px] object-contain cursor-pointer",onClick:()=>i(!t)})})}),ie.jsx(eO,{transition:!0,className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-slate-900 shadow-lg ring-1 ring-black ring-opacity-5 transition focus:outline-none",children:ie.jsxs("div",{className:"py-1",children:[ie.jsx(Tg,{children:ie.jsx("a",{href:"#work",className:"block px-4 py-2 text-md text-secondary hover:bg-slate-800 hover:text-white",onClick:()=>i(!t),children:"Work"})}),ie.jsx(Tg,{children:ie.jsx("a",{href:"#project",className:"block px-4 py-2 text-md text-secondary hover:bg-slate-800 hover:text-white",onClick:()=>i(!t),children:"Project"})}),ie.jsx(Tg,{children:ie.jsx("a",{href:"#contact",className:"block px-4 py-2 text-md text-secondary hover:bg-slate-800 hover:text-white border-b-2 border-slate-800",onClick:()=>i(!t),children:"Contact"})}),ie.jsx("div",{className:"w-full py-4 pt-5 items-center text-center",children:ie.jsx("a",{href:"https://github.com/Riskipad",className:"mt-5 px-16 py-2 text-[#804dee] bg-transparent hover:bg-slate-800/75 ease-in-out duration-200 rounded-md border-solid border-2 border-[#804dee] text-sm font-bold cursor-pointer",onClick:()=>i(!t),children:"My Github"})})]})})]})]})})},AZ=()=>ie.jsx("section",{className:"relative w-full h-screen mx-auto",children:ie.jsxs("div",{className:`${ei.paddingX} absolute inset-0 top-[120px] max-w-7xl mx-auto flex flex-row items-start gap-5`,children:[ie.jsx("div",{className:"flex flex-col justify-center items-center mt-5",children:ie.jsx("div",{className:"w-5 h-5 rounded-full bg-[#804dee]",children:ie.jsx("div",{className:"ml-2 w-1 sm:h-80 h-40 violet-gradient"})})}),ie.jsxs("div",{children:[ie.jsx("h2",{className:`${ei.heroHeadText} text-white`,children:"Introduction."}),ie.jsx("p",{className:`${ei.heroSubText} text-white-100 mt-2`,children:"I am a front end web developer, have a great interest in creating unique and revolutionary designs in the developer world."})]})]})}),bg=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),SZ=(n,e,t,i)=>({hidden:{x:n==="left"?100:n==="right"?-100:0,y:n==="up"?100:n==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),wd=(n,e,t,i)=>({hidden:{x:n==="left"?"-100%":n==="right"?"100%":0,y:n==="up"||n==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),MZ=()=>ie.jsxs(ie.Fragment,{children:[ie.jsxs("div",{className:`${ei.paddingX} inset-0 top-[120px] max-w-7xl mx-auto flex flex-row items-start gap-5`,children:[ie.jsx("div",{className:"flex flex-col justify-center items-center mt-5",children:ie.jsx("div",{className:"w-5 h-5 rounded-full bg-[#804dee]",children:ie.jsx("div",{className:"ml-2 w-1 sm:h-80 h-40 violet-gradient"})})}),ie.jsx("div",{children:ie.jsx("h2",{className:`${ei.heroHeadText} text-white`,children:"Tech."})})]}),ie.jsxs("div",{className:`${ei.paddingX} py-6 px-4 sm:p-6 md:py-10 md:px-8 lg:grid-cols-2 lg:flex`,children:[ie.jsx("div",{className:"py-6 max-w-4xl mx-auto grid grid-cols-1 lg:max-w-5xl lg:gap-x-20 ",children:ie.jsxs(Is.div,{variants:wd("left","twen",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[ie.jsx("h1",{className:"mt-1 text-lg font-semibold text-white sm:text-slate-900 md:text-2xl dark:sm:text-white",children:"HTML"}),ie.jsx("p",{className:"text-sm leading-4 font-medium text-white sm:text-slate-500 dark:sm:text-slate-400",children:"3+ years experience"})]})}),ie.jsx("div",{className:"py-6 max-w-4xl mx-auto grid grid-cols-1 lg:max-w-5xl lg:gap-x-20 ",children:ie.jsxs(Is.div,{variants:wd("left","twen",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[ie.jsx("h1",{className:"mt-1 text-lg font-semibold text-white sm:text-slate-900 md:text-2xl dark:sm:text-white",children:"CSS"}),ie.jsx("p",{className:"text-sm leading-4 font-medium text-white sm:text-slate-500 dark:sm:text-slate-400",children:"3+ years experience"})]})}),ie.jsx("div",{className:"py-6 max-w-4xl mx-auto grid grid-cols-1 lg:max-w-5xl lg:gap-x-20 ",children:ie.jsxs(Is.div,{variants:wd("left","twen",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[ie.jsx("h1",{className:"mt-1 text-lg font-semibold text-white sm:text-slate-900 md:text-2xl dark:sm:text-white",children:"JavaScript"}),ie.jsx("p",{className:"text-sm leading-4 font-medium text-white sm:text-slate-500 dark:sm:text-slate-400",children:"3+ years experience"})]})})]})]});var gy={},tO={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(tO);var nO=tO.exports;gy.__esModule=!0;gy.default=void 0;var wZ=Qw(D),jo=Qw(HF),EZ=Qw(nO);function Qw(n){return n&&n.__esModule?n:{default:n}}const iO=({animate:n=!0,className:e="",layout:t="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),wZ.default.createElement("div",{className:(0,EZ.default)(e,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":t==="2-columns","vertical-timeline--one-column-left":t==="1-column"||t==="1-column-left","vertical-timeline--one-column-right":t==="1-column-right"})},r));iO.propTypes={children:jo.default.oneOfType([jo.default.arrayOf(jo.default.node),jo.default.node]).isRequired,className:jo.default.string,animate:jo.default.bool,layout:jo.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:jo.default.string};var CZ=iO;gy.default=CZ;var vy={};function mS(){return mS=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},mS.apply(this,arguments)}function TZ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,gS(n,e)}function gS(n,e){return gS=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},gS(n,e)}function bZ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var vS=new Map,sg=new WeakMap,G2=0,rO=void 0;function RZ(n){rO=n}function PZ(n){return n?(sg.has(n)||(G2+=1,sg.set(n,G2.toString())),sg.get(n)):"0"}function IZ(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?PZ(n.root):n[e])}).toString()}function BZ(n){var e=IZ(n),t=vS.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,c=a.isIntersecting&&r.some(function(f){return a.intersectionRatio>=f});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=i.get(a.target))==null||l.forEach(function(f){f(c,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},vS.set(e,t)}return t}function qw(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=rO),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=BZ(t),o=s.id,a=s.observer,l=s.elements,c=l.get(n)||[];return l.has(n)||l.set(n,c),c.push(e),a.observe(n),function(){c.splice(c.indexOf(e),1),c.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),vS.delete(o))}}var LZ=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function V2(n){return typeof n.children!="function"}var tv=function(n){TZ(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),V2(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,c=r.delay,f=r.fallbackInView;this._unobserveCb=qw(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:c},f)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!V2(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,c=a.as,f=bZ(a,LZ);return D.createElement(c||"div",mS({ref:this.handleNode},f),l)},e}(D.Component);tv.displayName="InView";tv.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function DZ(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,c=e.initialInView,f=e.fallbackInView,h=D.useRef(),p=D.useState({inView:!!c}),m=p[0],v=p[1],A=D.useCallback(function(g){h.current!==void 0&&(h.current(),h.current=void 0),!l&&g&&(h.current=qw(g,function(_,S){v({inView:_,entry:S}),S.isIntersecting&&a&&h.current&&(h.current(),h.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},f))},[Array.isArray(t)?t.toString():t,o,s,a,l,r,f,i]);D.useEffect(function(){!h.current&&m.entry&&!a&&!l&&v({inView:!!c})});var x=[A,m.inView,m.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}const FZ=Object.freeze(Object.defineProperty({__proto__:null,InView:tv,default:tv,defaultFallbackInView:RZ,observe:qw,useInView:DZ},Symbol.toStringTag,{value:"Module"})),NZ=sU(FZ);vy.__esModule=!0;vy.default=void 0;var Xo=Zw(D),rn=Zw(HF),og=Zw(nO),OZ=NZ;function Zw(n){return n&&n.__esModule?n:{default:n}}const sO=({children:n="",className:e="",contentArrowStyle:t=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:c=null,iconStyle:f=null,id:h="",position:p="",style:m=null,textClassName:v="",intersectionObserverProps:A={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:x=!1})=>Xo.default.createElement(OZ.InView,A,({inView:g,ref:_})=>Xo.default.createElement("div",{ref:_,id:h,className:(0,og.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":p==="left","vertical-timeline-element--right":p==="right","vertical-timeline-element--no-children":n===""}),style:m},Xo.default.createElement(Xo.default.Fragment,null,Xo.default.createElement("span",{style:f,onClick:l,className:(0,og.default)(a,"vertical-timeline-element-icon",{"bounce-in":g||x,"is-hidden":!(g||x)})},o),Xo.default.createElement("div",{style:i,onClick:c,className:(0,og.default)(v,"vertical-timeline-element-content",{"bounce-in":g||x,"is-hidden":!(g||x)})},Xo.default.createElement("div",{style:t,className:"vertical-timeline-element-content-arrow"}),n,Xo.default.createElement("span",{className:(0,og.default)(s,"vertical-timeline-element-date")},r)))));sO.propTypes={children:rn.default.oneOfType([rn.default.arrayOf(rn.default.node),rn.default.node]),className:rn.default.string,contentArrowStyle:rn.default.shape({}),contentStyle:rn.default.shape({}),date:rn.default.node,dateClassName:rn.default.string,icon:rn.default.element,iconClassName:rn.default.string,iconStyle:rn.default.shape({}),iconOnClick:rn.default.func,onTimelineElementClick:rn.default.func,id:rn.default.string,position:rn.default.string,style:rn.default.shape({}),textClassName:rn.default.string,visible:rn.default.bool,intersectionObserverProps:rn.default.shape({root:rn.default.object,rootMargin:rn.default.string,threshold:rn.default.number,triggerOnce:rn.default.bool})};var UZ=sO;vy.default=UZ;var oO={VerticalTimeline:gy.default,VerticalTimelineElement:vy.default};const eE=(n,e)=>function(){return ie.jsxs(Is.section,{variants:SZ("","",1,1),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${ei.padding} max-w-7xl mx-auto relative z-0`,children:[ie.jsx("span",{className:"hash-span",id:e,children:""}),ie.jsx(n,{})]})},kZ=({Experience:n})=>ie.jsxs(oO.VerticalTimelineElement,{contentStyle:{background:"#1d1836",color:"#fff"},contentArrowStyle:{borderRight:"7px solid #232631"},date:n.date,iconStyle:{background:n.iconBg},icon:ie.jsx("div",{className:"flex justify-center items-center w-full h-full",children:ie.jsx("img",{src:n.icon,alt:n.company_name,className:"w-[60%] h-[60%] object-contain"})}),children:[ie.jsxs("div",{children:[ie.jsx("h3",{className:"text-white text-[24px] font-bold",children:n.title}),ie.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:n.company_name})]}),ie.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:n.points.map((e,t)=>ie.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`experience-point-${t}`))})]}),HZ=()=>ie.jsxs("div",{children:[ie.jsxs(Is.div,{variants:bg(),children:[ie.jsx("h2",{className:ei.heroHeadText,children:"Work Experience."}),ie.jsx("p",{className:ei.heroSubText,children:"What i have done so far"})]}),ie.jsx("div",{className:"flex mt-20 flex-col",children:ie.jsx(oO.VerticalTimeline,{children:jY.map((n,e)=>ie.jsx(kZ,{Experience:n},e))})})]}),zZ=eE(HZ,"work"),GZ=()=>ie.jsxs(ie.Fragment,{children:[ie.jsxs("div",{className:`${ei.paddingX} inset-0 top-[120px] max-w-7xl mx-auto flex flex-row items-start gap-5`,children:[ie.jsx("div",{className:"flex flex-col justify-center items-center mt-5",children:ie.jsx("div",{className:"w-5 h-5 rounded-full bg-[#804dee]",children:ie.jsx("div",{className:"ml-2 w-1 sm:h-80 h-40 violet-gradient"})})}),ie.jsx("div",{children:ie.jsx("h2",{className:`${ei.heroHeadText} text-white`,children:"Project."})})]}),ie.jsxs("div",{className:`${ei.paddingX} py-6 px-4 sm:p-6 md:py-10 md:px-8 lg:grid-cols-2 lg:flex`,children:[ie.jsx("div",{className:"py-6 max-w-4xl mx-auto grid grid-cols-1 lg:max-w-5xl lg:gap-x-20 ",children:ie.jsxs(Is.div,{variants:bg(),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[ie.jsx("h1",{className:"mt-1 text-lg font-semibold text-white sm:text-slate-900 md:text-2xl dark:sm:text-white",children:"HTML"}),ie.jsx("p",{className:"text-sm leading-4 font-medium text-white sm:text-slate-500 dark:sm:text-slate-400",children:"3+ years experience"})]})}),ie.jsx("div",{className:"py-6 max-w-4xl mx-auto grid grid-cols-1 lg:max-w-5xl lg:gap-x-20 ",children:ie.jsxs(Is.div,{variants:bg(),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[ie.jsx("h1",{className:"mt-1 text-lg font-semibold text-white sm:text-slate-900 md:text-2xl dark:sm:text-white",children:"CSS"}),ie.jsx("p",{className:"text-sm leading-4 font-medium text-white sm:text-slate-500 dark:sm:text-slate-400",children:"3+ years experience"})]})}),ie.jsx("div",{className:"py-6 max-w-4xl mx-auto grid grid-cols-1 lg:max-w-5xl lg:gap-x-20 ",children:ie.jsxs(Is.div,{variants:bg(),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[ie.jsx("h1",{className:"mt-1 text-lg font-semibold text-white sm:text-slate-900 md:text-2xl dark:sm:text-white",children:"JavaScript"}),ie.jsx("p",{className:"text-sm leading-4 font-medium text-white sm:text-slate-500 dark:sm:text-slate-400",children:"3+ years experience"})]})})]})]}),VZ=eE(GZ,"project");class zh{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const WZ=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Qn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:WZ()},tE=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},jZ=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=tE(n);Qn.publicKey=t.publicKey,Qn.blockHeadless=t.blockHeadless,Qn.storageProvider=t.storageProvider,Qn.blockList=t.blockList,Qn.limitRate=t.limitRate,Qn.origin=t.origin||e},aO=async(n,e,t={})=>{const i=await fetch(Qn.origin+n,{method:"POST",headers:t,body:e}),r=await i.text(),s=new zh(i.status,r);if(i.ok)return s;throw s},lO=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},XZ=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},cO=n=>n.webdriver||!n.languages||n.languages.length===0,uO=()=>new zh(451,"Unavailable For Headless Browser"),JZ=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},KZ=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},YZ=(n,e)=>n instanceof FormData?n.get(e):n[e],fO=(n,e)=>{if(KZ(n))return!1;JZ(n.list,n.watchVariable);const t=YZ(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},dO=()=>new zh(403,"Forbidden"),$Z=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},QZ=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},hO=async(n,e,t)=>{if(!e.throttle||!t)return!1;$Z(e.throttle,e.id);const i=e.id||n;return await QZ(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},pO=()=>new zh(429,"Too Many Requests"),qZ=async(n,e,t,i)=>{const r=tE(i),s=r.publicKey||Qn.publicKey,o=r.blockHeadless||Qn.blockHeadless,a=r.storageProvider||Qn.storageProvider,l={...Qn.blockList,...r.blockList},c={...Qn.limitRate,...r.limitRate};return o&&cO(navigator)?Promise.reject(uO()):(lO(s,n,e),XZ(t),t&&fO(l,t)?Promise.reject(dO()):await hO(location.pathname,c,a)?Promise.reject(pO()):aO("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},ZZ=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},eee=n=>typeof n=="string"?document.querySelector(n):n,tee=async(n,e,t,i)=>{const r=tE(i),s=r.publicKey||Qn.publicKey,o=r.blockHeadless||Qn.blockHeadless,a=Qn.storageProvider||r.storageProvider,l={...Qn.blockList,...r.blockList},c={...Qn.limitRate,...r.limitRate};if(o&&cO(navigator))return Promise.reject(uO());const f=eee(t);lO(s,n,e),ZZ(f);const h=new FormData(f);return fO(l,h)?Promise.reject(dO()):await hO(location.pathname,c,a)?Promise.reject(pO()):(h.append("lib_version","4.4.1"),h.append("service_id",n),h.append("template_id",e),h.append("user_id",s),aO("/api/v1.0/email/send-form",h))},nee={init:jZ,send:qZ,sendForm:tee,EmailJSResponseStatus:zh},iee=()=>{const n=D.useRef(),[e,t]=D.useState({name:"",email:"",message:""}),[i,r]=D.useState(!1),s=a=>{const{target:l}=a,{name:c,value:f}=l;t({...e,[c]:f})},o=a=>{a.preventDefault(),r(!0),nee.send(void 0,void 0,{from_name:e.name,to_name:"JavaScript Mastery",from_email:e.email,to_email:"sujata@jsmastery.pro",message:e.message},void 0).then(()=>{r(!1),alert("Thank you. I will get back to you as soon as possible."),t({name:"",email:"",message:""})},l=>{r(!1),console.error(l),alert("Ahh, something went wrong. Please try again.")})};return ie.jsxs("div",{className:"xl:mt-12 flex xl:flex-row flex-col-reverse gap-10 overflow-hidden",children:[ie.jsxs(Is.div,{variants:wd("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[ie.jsx("p",{className:ei.sectionSubText,children:"Get in touch"}),ie.jsx("h3",{className:ei.sectionHeadText,children:"Contact."}),ie.jsxs("form",{ref:n,onSubmit:o,className:"mt-12 flex flex-col gap-8",children:[ie.jsxs("label",{className:"flex flex-col",children:[ie.jsx("span",{className:"text-white font-medium mb-4",children:"Name"}),ie.jsx("input",{type:"text",name:"name",value:e.name,onChange:s,placeholder:"What's your name?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),ie.jsxs("label",{className:"flex flex-col",children:[ie.jsx("span",{className:"text-white font-medium mb-4",children:"Email"}),ie.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,placeholder:"What's your email?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),ie.jsxs("label",{className:"flex flex-col",children:[ie.jsx("span",{className:"text-white font-medium mb-4",children:"Message"}),ie.jsx("textarea",{rows:7,name:"message",value:e.message,onChange:s,placeholder:"What you want to say?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),ie.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 rounded-xl outline-none w-fit text-white font-bold shadow-md shadow-primary",children:i?"Sending...":"Send"})]})]}),ie.jsx(Is.div,{variants:wd("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:ie.jsx(dj,{})})]})},ree=eE(iee,"contact"),see=()=>ie.jsx(e4,{children:ie.jsxs("div",{className:"relative ze bg-primary",children:[ie.jsxs("div",{className:"bg-hero-pattern bg-cover bg-no-repeat bg-center",children:[ie.jsx(_Z,{}),ie.jsx(OY,{})]}),ie.jsx(AZ,{}),ie.jsx(MZ,{}),ie.jsx(zZ,{}),ie.jsx(VZ,{}),ie.jsxs("div",{className:"relative z-0",children:[ie.jsx(ree,{}),ie.jsx(FY,{})]})]})});nL(document.getElementById("root")).render(ie.jsx(D.StrictMode,{children:ie.jsx(see,{})}));
